{"ast":null,"code":"import { computed } from \"vue\";\nexport default {\n  __name: 'InfoboxField',\n  props: {\n    value: {\n      type: [Object, String],\n      default: null\n    }\n  },\n  setup(__props, _ref) {\n    let {\n      expose: __expose\n    } = _ref;\n    __expose();\n    const props = __props;\n\n    // 计算属性\n    const hasContent = computed(() => {\n      if (!props.value) return false;\n      if (typeof props.value === \"string\") return props.value.trim().length > 0;\n      return props.value.text && props.value.text.trim().length > 0 || props.value.html && props.value.html.trim().length > 0 || props.value.links && props.value.links.length > 0 || props.value.image;\n    });\n    const displayText = computed(() => {\n      if (!props.value) return \"\";\n      if (typeof props.value === \"string\") return props.value.trim();\n      return props.value.text?.trim() || \"\";\n    });\n    const imageSrc = computed(() => {\n      return props.value?.image?.src;\n    });\n    const imageAlt = computed(() => {\n      return props.value?.image?.alt || \"\";\n    });\n    const imageCaption = computed(() => {\n      return props.value?.image?.caption || \"\";\n    });\n    const hasLinks = computed(() => {\n      return props.value?.links?.length > 0;\n    });\n    const validLinks = computed(() => {\n      if (!hasLinks.value) return [];\n      return props.value.links.filter(link => link.text && link.text.trim().length > 0);\n    });\n    const __returned__ = {\n      props,\n      hasContent,\n      displayText,\n      imageSrc,\n      imageAlt,\n      imageCaption,\n      hasLinks,\n      validLinks,\n      computed\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["computed","props","__props","hasContent","value","trim","length","text","html","links","image","displayText","imageSrc","src","imageAlt","alt","imageCaption","caption","hasLinks","validLinks","filter","link"],"sources":["D:/vue_frame/vue_frame/wikitable-vue/client/src/components/compoents_base/InfoboxField.vue"],"sourcesContent":["<template>\r\n\t<div class=\"infobox-field\">\r\n\t\t<template v-if=\"hasContent\">\r\n\t\t\t<!-- 文本内容 -->\r\n\t\t\t<div v-if=\"displayText\" class=\"text-content\">\r\n\t\t\t\t{{ displayText }}\r\n\t\t\t</div>\r\n\r\n\t\t\t<!-- 图片 -->\r\n\t\t\t<div v-if=\"imageSrc\" class=\"image-content\">\r\n\t\t\t\t<img :src=\"imageSrc\" :alt=\"imageAlt\" class=\"infobox-image\" />\r\n\t\t\t\t<div v-if=\"imageCaption\" class=\"image-caption\">{{ imageCaption }}</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<!-- 链接 -->\r\n\t\t\t<div v-if=\"hasLinks\" class=\"links-content\">\r\n\t\t\t\t<div v-for=\"(link, index) in validLinks\" :key=\"index\" class=\"link-item\">\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\tv-if=\"link.isWikiLink\"\r\n\t\t\t\t\t\t:href=\"link.href\"\r\n\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\tclass=\"wiki-link\">\r\n\t\t\t\t\t\t{{ link.text }}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<span v-else>{{ link.text }}</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</template>\r\n\t\t<div v-else class=\"empty-content\">-</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { computed } from \"vue\";\r\n\r\n\tconst props = defineProps({\r\n\t\tvalue: {\r\n\t\t\ttype: [Object, String],\r\n\t\t\tdefault: null\r\n\t\t}\r\n\t});\r\n\r\n\t// 计算属性\r\n\tconst hasContent = computed(() => {\r\n\t\tif (!props.value) return false;\r\n\t\tif (typeof props.value === \"string\") return props.value.trim().length > 0;\r\n\r\n\t\treturn (\r\n\t\t\t(props.value.text && props.value.text.trim().length > 0) ||\r\n\t\t\t(props.value.html && props.value.html.trim().length > 0) ||\r\n\t\t\t(props.value.links && props.value.links.length > 0) ||\r\n\t\t\tprops.value.image\r\n\t\t);\r\n\t});\r\n\r\n\tconst displayText = computed(() => {\r\n\t\tif (!props.value) return \"\";\r\n\t\tif (typeof props.value === \"string\") return props.value.trim();\r\n\t\treturn props.value.text?.trim() || \"\";\r\n\t});\r\n\r\n\tconst imageSrc = computed(() => {\r\n\t\treturn props.value?.image?.src;\r\n\t});\r\n\r\n\tconst imageAlt = computed(() => {\r\n\t\treturn props.value?.image?.alt || \"\";\r\n\t});\r\n\r\n\tconst imageCaption = computed(() => {\r\n\t\treturn props.value?.image?.caption || \"\";\r\n\t});\r\n\r\n\tconst hasLinks = computed(() => {\r\n\t\treturn props.value?.links?.length > 0;\r\n\t});\r\n\r\n\tconst validLinks = computed(() => {\r\n\t\tif (!hasLinks.value) return [];\r\n\t\treturn props.value.links.filter(\r\n\t\t\tlink => link.text && link.text.trim().length > 0\r\n\t\t);\r\n\t});\r\n</script>\r\n\r\n<style scoped>\r\n\t.infobox-field {\r\n\t\twidth: 100%;\r\n\t\tmin-height: 40px;\r\n\t\tword-break: break-word;\r\n\t}\r\n\r\n\t.text-content {\r\n\t\tmargin-bottom: 5px;\r\n\t}\r\n\r\n\t.image-content {\r\n\t\tmargin: 5px 0;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.infobox-image {\r\n\t\tmax-width: 100%;\r\n\t\tmax-height: 80px;\r\n\t\tdisplay: block;\r\n\t\tmargin: 0 auto;\r\n\t\tborder: 1px solid #eee;\r\n\t}\r\n\r\n\t.image-caption {\r\n\t\tfont-size: 0.8em;\r\n\t\tcolor: #666;\r\n\t\tmargin-top: 2px;\r\n\t}\r\n\r\n\t.links-content {\r\n\t\tfont-size: 0.9em;\r\n\t}\r\n\r\n\t.link-item {\r\n\t\tmargin: 3px 0;\r\n\t}\r\n\r\n\t.wiki-link {\r\n\t\tcolor: #06c;\r\n\t\ttext-decoration: none;\r\n\t}\r\n\r\n\t.wiki-link:hover {\r\n\t\ttext-decoration: underline;\r\n\t}\r\n\r\n\t.empty-content {\r\n\t\tcolor: #999;\r\n\t\tfont-style: italic;\r\n\t}\r\n</style>\r\n"],"mappings":"AAiCC,SAASA,QAAQ,QAAQ,KAAK;;;;;;;;;;;;;;IAE9B,MAAMC,KAAK,GAAGC,OAKZ;;IAEF;IACA,MAAMC,UAAU,GAAGH,QAAQ,CAAC,MAAM;MACjC,IAAI,CAACC,KAAK,CAACG,KAAK,EAAE,OAAO,KAAK;MAC9B,IAAI,OAAOH,KAAK,CAACG,KAAK,KAAK,QAAQ,EAAE,OAAOH,KAAK,CAACG,KAAK,CAACC,IAAI,CAAC,CAAC,CAACC,MAAM,GAAG,CAAC;MAEzE,OACEL,KAAK,CAACG,KAAK,CAACG,IAAI,IAAIN,KAAK,CAACG,KAAK,CAACG,IAAI,CAACF,IAAI,CAAC,CAAC,CAACC,MAAM,GAAG,CAAC,IACtDL,KAAK,CAACG,KAAK,CAACI,IAAI,IAAIP,KAAK,CAACG,KAAK,CAACI,IAAI,CAACH,IAAI,CAAC,CAAC,CAACC,MAAM,GAAG,CAAE,IACvDL,KAAK,CAACG,KAAK,CAACK,KAAK,IAAIR,KAAK,CAACG,KAAK,CAACK,KAAK,CAACH,MAAM,GAAG,CAAE,IACnDL,KAAK,CAACG,KAAK,CAACM,KAAK;IAEnB,CAAC,CAAC;IAEF,MAAMC,WAAW,GAAGX,QAAQ,CAAC,MAAM;MAClC,IAAI,CAACC,KAAK,CAACG,KAAK,EAAE,OAAO,EAAE;MAC3B,IAAI,OAAOH,KAAK,CAACG,KAAK,KAAK,QAAQ,EAAE,OAAOH,KAAK,CAACG,KAAK,CAACC,IAAI,CAAC,CAAC;MAC9D,OAAOJ,KAAK,CAACG,KAAK,CAACG,IAAI,EAAEF,IAAI,CAAC,CAAC,IAAI,EAAE;IACtC,CAAC,CAAC;IAEF,MAAMO,QAAQ,GAAGZ,QAAQ,CAAC,MAAM;MAC/B,OAAOC,KAAK,CAACG,KAAK,EAAEM,KAAK,EAAEG,GAAG;IAC/B,CAAC,CAAC;IAEF,MAAMC,QAAQ,GAAGd,QAAQ,CAAC,MAAM;MAC/B,OAAOC,KAAK,CAACG,KAAK,EAAEM,KAAK,EAAEK,GAAG,IAAI,EAAE;IACrC,CAAC,CAAC;IAEF,MAAMC,YAAY,GAAGhB,QAAQ,CAAC,MAAM;MACnC,OAAOC,KAAK,CAACG,KAAK,EAAEM,KAAK,EAAEO,OAAO,IAAI,EAAE;IACzC,CAAC,CAAC;IAEF,MAAMC,QAAQ,GAAGlB,QAAQ,CAAC,MAAM;MAC/B,OAAOC,KAAK,CAACG,KAAK,EAAEK,KAAK,EAAEH,MAAM,GAAG,CAAC;IACtC,CAAC,CAAC;IAEF,MAAMa,UAAU,GAAGnB,QAAQ,CAAC,MAAM;MACjC,IAAI,CAACkB,QAAQ,CAACd,KAAK,EAAE,OAAO,EAAE;MAC9B,OAAOH,KAAK,CAACG,KAAK,CAACK,KAAK,CAACW,MAAM,CAC9BC,IAAI,IAAIA,IAAI,CAACd,IAAI,IAAIc,IAAI,CAACd,IAAI,CAACF,IAAI,CAAC,CAAC,CAACC,MAAM,GAAG,CAChD,CAAC;IACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}