{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createVNode as _createVNode, withModifiers as _withModifiers, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-ea6f3360\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"compare-container\"\n};\nconst _hoisted_2 = {\n  class: \"table-grid\"\n};\nconst _hoisted_3 = {\n  class: \"header left-column\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"header middle-column\"\n}, \"对比属性\", -1 /* HOISTED */));\nconst _hoisted_5 = {\n  class: \"header right-column\"\n};\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = {\n  class: \"stats-summary\"\n};\nconst _hoisted_8 = {\n  key: 1,\n  class: \"no-data\"\n};\nconst _hoisted_9 = {\n  class: \"cell middle-column\"\n};\nconst _hoisted_10 = {\n  class: \"attribute-name\"\n};\nconst _hoisted_11 = [\"onClick\"];\nconst _hoisted_12 = {\n  class: \"stats-summary\"\n};\nconst _hoisted_13 = {\n  key: 1,\n  class: \"no-data\"\n};\nconst _hoisted_14 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"cell left-column empty-cell\\\" data-v-ea6f3360></div><div class=\\\"cell middle-column empty-cell\\\" data-v-ea6f3360></div><div class=\\\"cell right-column empty-cell\\\" data-v-ea6f3360></div><div class=\\\"cell left-column empty-cell\\\" data-v-ea6f3360></div><div class=\\\"cell middle-column empty-cell\\\" data-v-ea6f3360></div><div class=\\\"cell right-column empty-cell\\\" data-v-ea6f3360></div><div class=\\\"cell left-column empty-cell\\\" data-v-ea6f3360></div><div class=\\\"cell middle-column empty-cell\\\" data-v-ea6f3360></div><div class=\\\"cell right-column empty-cell\\\" data-v-ea6f3360></div>\", 9);\nconst _hoisted_23 = {\n  class: \"modal-content\"\n};\nconst _hoisted_24 = {\n  class: \"modal-header\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" 表头 \"), _createElementVNode(\"div\", _hoisted_3, _toDisplayString($setup.processedTable1.title || \"表格1\"), 1 /* TEXT */), _hoisted_4, _createElementVNode(\"div\", _hoisted_5, _toDisplayString($setup.processedTable2.title || \"表格2\"), 1 /* TEXT */), _createCommentVNode(\" 数据行 \"), $setup.hasData ? (_openBlock(true), _createElementBlock(_Fragment, {\n    key: 0\n  }, _renderList($setup.commonAttributes, attr => {\n    return _openBlock(), _createElementBlock(_Fragment, {\n      key: attr\n    }, [_createElementVNode(\"div\", {\n      class: \"cell left-column\",\n      onClick: $event => $setup.showFullChart(attr, 'left')\n    }, [$setup.hasDataForAttribute($setup.processedTable1, attr) ? (_openBlock(), _createElementBlock(_Fragment, {\n      key: 0\n    }, [_createVNode($setup[\"SparklineChart\"], {\n      ref_for: true,\n      ref: \"leftCharts\",\n      data: $setup.processedTable1.timeSeriesData[attr],\n      \"compare-data\": $setup.processedTable2.timeSeriesData[attr],\n      width: 250,\n      height: 80,\n      \"show-year-markers\": true,\n      onChartMounted: chart => $setup.chartRefs1[attr] = chart\n    }, null, 8 /* PROPS */, [\"data\", \"compare-data\", \"onChartMounted\"]), _createElementVNode(\"div\", _hoisted_7, \" 平均: \" + _toDisplayString($setup.getAverage($setup.processedTable1, attr)) + \" | 最大: \" + _toDisplayString($setup.getMax($setup.processedTable1, attr)), 1 /* TEXT */)], 64 /* STABLE_FRAGMENT */)) : (_openBlock(), _createElementBlock(\"div\", _hoisted_8, \"无数据\"))], 8 /* PROPS */, _hoisted_6), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, _toDisplayString(attr), 1 /* TEXT */)]), _createElementVNode(\"div\", {\n      class: \"cell right-column\",\n      onClick: $event => $setup.showFullChart(attr, 'right')\n    }, [$setup.hasDataForAttribute($setup.processedTable2, attr) ? (_openBlock(), _createElementBlock(_Fragment, {\n      key: 0\n    }, [_createVNode($setup[\"SparklineChart\"], {\n      ref_for: true,\n      ref: \"rightCharts\",\n      data: $setup.processedTable2.timeSeriesData[attr],\n      \"compare-data\": $setup.processedTable1.timeSeriesData[attr],\n      width: 250,\n      height: 80,\n      \"show-year-markers\": true,\n      onChartMounted: chart => $setup.chartRefs2[attr] = chart\n    }, null, 8 /* PROPS */, [\"data\", \"compare-data\", \"onChartMounted\"]), _createElementVNode(\"div\", _hoisted_12, \" 平均: \" + _toDisplayString($setup.getAverage($setup.processedTable2, attr)) + \" | 最大: \" + _toDisplayString($setup.getMax($setup.processedTable2, attr)), 1 /* TEXT */)], 64 /* STABLE_FRAGMENT */)) : (_openBlock(), _createElementBlock(\"div\", _hoisted_13, \"无数据\"))], 8 /* PROPS */, _hoisted_11)], 64 /* STABLE_FRAGMENT */);\n  }), 128 /* KEYED_FRAGMENT */)) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" 空状态下的行 \"), _hoisted_14], 64 /* STABLE_FRAGMENT */))]), _createCommentVNode(\" 完整图表弹窗 \"), $setup.showFullChartModal ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: \"full-chart-modal\",\n    onClick: _withModifiers($setup.hideFullChart, [\"self\"])\n  }, [_createElementVNode(\"div\", _hoisted_23, [_createElementVNode(\"div\", _hoisted_24, [_createElementVNode(\"h3\", null, _toDisplayString($setup.currentAttribute), 1 /* TEXT */), _createElementVNode(\"button\", {\n    onClick: $setup.hideFullChart,\n    class: \"close-button\"\n  }, \"×\")]), _createVNode($setup[\"FullChart\"], {\n    data: $setup.currentChartData,\n    title: $setup.currentAttribute,\n    side: $setup.currentSide\n  }, null, 8 /* PROPS */, [\"data\", \"title\", \"side\"])])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementVNode","key","_createStaticVNode","_createElementBlock","_hoisted_1","_hoisted_2","_createCommentVNode","_hoisted_3","_toDisplayString","$setup","processedTable1","title","_hoisted_4","_hoisted_5","processedTable2","hasData","_Fragment","_renderList","commonAttributes","attr","onClick","$event","showFullChart","hasDataForAttribute","_createVNode","ref_for","ref","data","timeSeriesData","width","height","onChartMounted","chart","chartRefs1","_hoisted_7","getAverage","getMax","_hoisted_8","_hoisted_6","_hoisted_9","_hoisted_10","chartRefs2","_hoisted_12","_hoisted_13","_hoisted_11","_hoisted_14","showFullChartModal","_withModifiers","hideFullChart","_hoisted_23","_hoisted_24","currentAttribute","currentChartData","side","currentSide"],"sources":["D:\\vue_frame\\vue_frame\\wikitable-vue\\client\\src\\components\\compoents_base\\CompareTable.vue"],"sourcesContent":["<template>\r\n\t<div class=\"compare-container\">\r\n\t\t<div class=\"table-grid\">\r\n\t\t\t<!-- 表头 -->\r\n\t\t\t<div class=\"header left-column\">\r\n\t\t\t\t{{ processedTable1.title || \"表格1\" }}\r\n\t\t\t</div>\r\n\t\t\t<div class=\"header middle-column\">对比属性</div>\r\n\t\t\t<div class=\"header right-column\">\r\n\t\t\t\t{{ processedTable2.title || \"表格2\" }}\r\n\t\t\t</div>\r\n\r\n\t\t\t<!-- 数据行 -->\r\n\t\t\t<template v-if=\"hasData\">\r\n\t\t\t\t<template v-for=\"attr in commonAttributes\" :key=\"attr\">\r\n\t\t\t\t\t<div class=\"cell left-column\" @click=\"showFullChart(attr, 'left')\">\r\n\t\t\t\t\t\t<template v-if=\"hasDataForAttribute(processedTable1, attr)\">\r\n\t\t\t\t\t\t\t<SparklineChart\r\n\t\t\t\t\t\t\t\tref=\"leftCharts\"\r\n\t\t\t\t\t\t\t\t:data=\"processedTable1.timeSeriesData[attr]\"\r\n\t\t\t\t\t\t\t\t:compare-data=\"processedTable2.timeSeriesData[attr]\"\r\n\t\t\t\t\t\t\t\t:width=\"250\"\r\n\t\t\t\t\t\t\t\t:height=\"80\"\r\n\t\t\t\t\t\t\t\t:show-year-markers=\"true\"\r\n\t\t\t\t\t\t\t\t@chart-mounted=\"chart => (chartRefs1[attr] = chart)\" />\r\n\t\t\t\t\t\t\t<div class=\"stats-summary\">\r\n\t\t\t\t\t\t\t\t平均: {{ getAverage(processedTable1, attr) }} | 最大:\r\n\t\t\t\t\t\t\t\t{{ getMax(processedTable1, attr) }}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<div v-else class=\"no-data\">无数据</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"cell middle-column\">\r\n\t\t\t\t\t\t<div class=\"attribute-name\">{{ attr }}</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"cell right-column\" @click=\"showFullChart(attr, 'right')\">\r\n\t\t\t\t\t\t<template v-if=\"hasDataForAttribute(processedTable2, attr)\">\r\n\t\t\t\t\t\t\t<SparklineChart\r\n\t\t\t\t\t\t\t\tref=\"rightCharts\"\r\n\t\t\t\t\t\t\t\t:data=\"processedTable2.timeSeriesData[attr]\"\r\n\t\t\t\t\t\t\t\t:compare-data=\"processedTable1.timeSeriesData[attr]\"\r\n\t\t\t\t\t\t\t\t:width=\"250\"\r\n\t\t\t\t\t\t\t\t:height=\"80\"\r\n\t\t\t\t\t\t\t\t:show-year-markers=\"true\"\r\n\t\t\t\t\t\t\t\t@chart-mounted=\"chart => (chartRefs2[attr] = chart)\" />\r\n\t\t\t\t\t\t\t<div class=\"stats-summary\">\r\n\t\t\t\t\t\t\t\t平均: {{ getAverage(processedTable2, attr) }} | 最大:\r\n\t\t\t\t\t\t\t\t{{ getMax(processedTable2, attr) }}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<div v-else class=\"no-data\">无数据</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</template>\r\n\t\t\t</template>\r\n\t\t\t<template v-else>\r\n\t\t\t\t<!-- 空状态下的行 -->\r\n\t\t\t\t<div class=\"cell left-column empty-cell\"></div>\r\n\t\t\t\t<div class=\"cell middle-column empty-cell\"></div>\r\n\t\t\t\t<div class=\"cell right-column empty-cell\"></div>\r\n\t\t\t\t<div class=\"cell left-column empty-cell\"></div>\r\n\t\t\t\t<div class=\"cell middle-column empty-cell\"></div>\r\n\t\t\t\t<div class=\"cell right-column empty-cell\"></div>\r\n\t\t\t\t<div class=\"cell left-column empty-cell\"></div>\r\n\t\t\t\t<div class=\"cell middle-column empty-cell\"></div>\r\n\t\t\t\t<div class=\"cell right-column empty-cell\"></div>\r\n\t\t\t</template>\r\n\t\t</div>\r\n\r\n\t\t<!-- 完整图表弹窗 -->\r\n\t\t<div\r\n\t\t\tv-if=\"showFullChartModal\"\r\n\t\t\tclass=\"full-chart-modal\"\r\n\t\t\t@click.self=\"hideFullChart\">\r\n\t\t\t<div class=\"modal-content\">\r\n\t\t\t\t<div class=\"modal-header\">\r\n\t\t\t\t\t<h3>{{ currentAttribute }}</h3>\r\n\t\t\t\t\t<button @click=\"hideFullChart\" class=\"close-button\">×</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<FullChart\r\n\t\t\t\t\t:data=\"currentChartData\"\r\n\t\t\t\t\t:title=\"currentAttribute\"\r\n\t\t\t\t\t:side=\"currentSide\" />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ref, computed, watch } from \"vue\";\r\n\timport SparklineChart from \"./SparklineChart.vue\";\r\n\timport FullChart from \"./FullChart.vue\";\r\n\r\n\tconst props = defineProps({\r\n\t\tdiv1RawData: String,\r\n\t\tdiv3RawData: String\r\n\t});\r\n\r\n\tconst processedTable1 = ref({\r\n\t\ttitle: \"表格1\",\r\n\t\trows: [],\r\n\t\tcolumns: [],\r\n\t\ttimeSeriesData: {}\r\n\t});\r\n\tconst processedTable2 = ref({\r\n\t\ttitle: \"表格2\",\r\n\t\trows: [],\r\n\t\tcolumns: [],\r\n\t\ttimeSeriesData: {}\r\n\t});\r\n\r\n\t// 图表引用\r\n\tconst chartRefs1 = ref({});\r\n\tconst chartRefs2 = ref({});\r\n\r\n\t// 完整图表弹窗相关状态\r\n\tconst showFullChartModal = ref(false);\r\n\tconst currentAttribute = ref(\"\");\r\n\tconst currentChartData = ref({ type: \"line\", data: [] });\r\n\tconst currentSide = ref(\"left\");\r\n\r\n\tconst showFullChart = (attr, side) => {\r\n\t\tcurrentAttribute.value = attr;\r\n\t\tcurrentSide.value = side;\r\n\r\n\t\tconst chartRef =\r\n\t\t\tside === \"left\" ? chartRefs1.value[attr] : chartRefs2.value[attr];\r\n\t\tconst chartType = chartRef?.chartType || \"line\";\r\n\r\n\t\tif (side === \"left\") {\r\n\t\t\tcurrentChartData.value = {\r\n\t\t\t\ttype: chartType,\r\n\t\t\t\tdata: processedTable1.value.timeSeriesData[attr] || []\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tcurrentChartData.value = {\r\n\t\t\t\ttype: chartType,\r\n\t\t\t\tdata: processedTable2.value.timeSeriesData[attr] || []\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tshowFullChartModal.value = true;\r\n\t};\r\n\r\n\tconst hideFullChart = () => {\r\n\t\tshowFullChartModal.value = false;\r\n\t};\r\n\r\n\tconst hasData = computed(() => {\r\n\t\treturn (\r\n\t\t\tprops.div1RawData &&\r\n\t\t\tprops.div3RawData &&\r\n\t\t\tprocessedTable1.value.columns.length > 0 &&\r\n\t\t\tprocessedTable2.value.columns.length > 0\r\n\t\t);\r\n\t});\r\n\r\n\tconst commonAttributes = computed(() => {\r\n\t\tconst attrs1 = processedTable1.value.rows || [];\r\n\t\tconst attrs2 = processedTable2.value.rows || [];\r\n\t\treturn attrs1.filter(\r\n\t\t\tattr =>\r\n\t\t\t\tattrs2.includes(attr) &&\r\n\t\t\t\t(hasDataForAttribute(processedTable1.value, attr) ||\r\n\t\t\t\t\thasDataForAttribute(processedTable2.value, attr))\r\n\t\t);\r\n\t});\r\n\r\n\tfunction parseTableToStandardJSON(html, defaultTitle = \"未命名表格\") {\r\n\t\tconst result = {\r\n\t\t\ttitle: extractTitleFromHTML(html) || defaultTitle,\r\n\t\t\trows: [],\r\n\t\t\tcolumns: [],\r\n\t\t\ttimeSeriesData: {}\r\n\t\t};\r\n\r\n\t\ttry {\r\n\t\t\tconst parser = new DOMParser();\r\n\t\t\tconst doc = parser.parseFromString(html, \"text/html\");\r\n\t\t\tconst table = doc.querySelector(\"table\");\r\n\t\t\tif (!table) return result;\r\n\r\n\t\t\t// 提取表头\r\n\t\t\tconst headerCells = table.querySelector(\"tr\")?.children || [];\r\n\t\t\tresult.rows = Array.from(headerCells).map(cell => {\r\n\t\t\t\treturn cell.textContent\r\n\t\t\t\t\t.replace(/[\\n†*]/g, \"\")\r\n\t\t\t\t\t.trim()\r\n\t\t\t\t\t.replace(/\\s+/g, \" \");\r\n\t\t\t});\r\n\r\n\t\t\t// 检查是否有Year列\r\n\t\t\tconst yearColumnIndex = result.rows.findIndex(header =>\r\n\t\t\t\theader.toLowerCase().includes(\"year\")\r\n\t\t\t);\r\n\t\t\tconst hasYearColumn = yearColumnIndex !== -1;\r\n\r\n\t\t\t// 辅助函数：清理年份格式\r\n\t\t\tconst cleanYear = yearStr => {\r\n\t\t\t\tif (!yearStr) return null;\r\n\t\t\t\tlet cleaned = yearStr.toString().replace(/[†*]/g, \"\").trim();\r\n\t\t\t\tif (/^\\d{4}[\\u2013\\u2014-]\\d{2}$/.test(cleaned)) {\r\n\t\t\t\t\tconst startYear = cleaned.substring(0, 4);\r\n\t\t\t\t\treturn parseInt(startYear);\r\n\t\t\t\t}\r\n\t\t\t\tconst yearMatch = cleaned.match(/\\d{4}/);\r\n\t\t\t\treturn yearMatch ? parseInt(yearMatch[0]) : null;\r\n\t\t\t};\r\n\r\n\t\t\t// 提取数据行\r\n\t\t\tconst dataRows = Array.from(\r\n\t\t\t\ttable.querySelectorAll(\"tr:not(:first-child)\")\r\n\t\t\t);\r\n\r\n\t\t\tdataRows.forEach(row => {\r\n\t\t\t\tconst cells = Array.from(row.children);\r\n\t\t\t\tif (cells.length === 0) return;\r\n\r\n\t\t\t\tconst recordName = cells[0].textContent.trim();\r\n\t\t\t\tconst recordData = {};\r\n\r\n\t\t\t\tresult.rows.forEach((header, index) => {\r\n\t\t\t\t\tif (index < cells.length) {\r\n\t\t\t\t\t\tlet value = cells[index].textContent.trim();\r\n\t\t\t\t\t\tif (index === yearColumnIndex) {\r\n\t\t\t\t\t\t\tvalue = cleanYear(value);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvalue = smartValueConversion(value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\trecordData[header] = value;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (!hasYearColumn || (hasYearColumn && recordData.Year)) {\r\n\t\t\t\t\tresult.columns.push({\r\n\t\t\t\t\t\tname: recordName,\r\n\t\t\t\t\t\tdata: recordData\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (hasYearColumn && recordData.Year) {\r\n\t\t\t\t\t\tconst year = recordData.Year;\r\n\t\t\t\t\t\tresult.rows.forEach(header => {\r\n\t\t\t\t\t\t\tif (header === \"Year\" || typeof recordData[header] !== \"number\")\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\tif (!result.timeSeriesData[header]) {\r\n\t\t\t\t\t\t\t\tresult.timeSeriesData[header] = [];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tresult.timeSeriesData[header].push({\r\n\t\t\t\t\t\t\t\tyear: year,\r\n\t\t\t\t\t\t\t\tvalue: recordData[header],\r\n\t\t\t\t\t\t\t\trecordName: recordName\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// 对每个属性的时间序列数据按年份排序\r\n\t\t\tif (hasYearColumn) {\r\n\t\t\t\tObject.keys(result.timeSeriesData).forEach(attr => {\r\n\t\t\t\t\tresult.timeSeriesData[attr].sort((a, b) => a.year - b.year);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tconsole.log(\"解析后的表格数据:\", result);\r\n\t\t\treturn result;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"表格解析错误:\", error);\r\n\t\t\treturn result;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction smartValueConversion(rawValue) {\r\n\t\tif (!rawValue || [\"-\", \"—\", \"N/A\"].includes(rawValue)) return null;\r\n\t\tif (/^\\.\\d+$/.test(rawValue)) return parseFloat(rawValue);\r\n\t\tconst numericValue = parseFloat(rawValue.replace(/[^\\d.-]/g, \"\"));\r\n\t\tif (!isNaN(numericValue)) return numericValue;\r\n\t\tif (/(\\d{4}-\\d{2}-\\d{2})|(\\d{2}\\/\\d{2}\\/\\d{4})/.test(rawValue))\r\n\t\t\treturn rawValue;\r\n\t\tif ([\"true\", \"false\"].includes(rawValue.toLowerCase())) {\r\n\t\t\treturn rawValue.toLowerCase() === \"true\";\r\n\t\t}\r\n\t\treturn rawValue;\r\n\t}\r\n\r\n\tfunction extractTitleFromHTML(html) {\r\n\t\tconst parser = new DOMParser();\r\n\t\tconst doc = parser.parseFromString(html, \"text/html\");\r\n\t\treturn (\r\n\t\t\tdoc.querySelector(\"h1, h2, h3, h4, caption\")?.textContent.trim() || null\r\n\t\t);\r\n\t}\r\n\r\n\tfunction hasDataForAttribute(table, attr) {\r\n\t\treturn table.timeSeriesData[attr]?.length > 0;\r\n\t}\r\n\r\n\tfunction getAverage(table, attr) {\r\n\t\tconst values = table.timeSeriesData[attr]?.map(item => item.value) || [];\r\n\t\treturn values.length\r\n\t\t\t? (values.reduce((a, b) => a + b, 0) / values.length).toFixed(2)\r\n\t\t\t: \"N/A\";\r\n\t}\r\n\r\n\tfunction getMax(table, attr) {\r\n\t\tconst values = table.timeSeriesData[attr]?.map(item => item.value) || [];\r\n\t\treturn values.length ? Math.max(...values).toFixed(2) : \"N/A\";\r\n\t}\r\n\r\n\twatch(\r\n\t\t() => props.div1RawData,\r\n\t\thtml => {\r\n\t\t\tif (html) {\r\n\t\t\t\tprocessedTable1.value = parseTableToStandardJSON(html, \"表格1\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t{ immediate: true }\r\n\t);\r\n\r\n\twatch(\r\n\t\t() => props.div3RawData,\r\n\t\thtml => {\r\n\t\t\tif (html) {\r\n\t\t\t\tprocessedTable2.value = parseTableToStandardJSON(html, \"表格2\");\r\n\t\t\t}\r\n\t\t},\r\n\t\t{ immediate: true }\r\n\t);\r\n</script>\r\n\r\n<style scoped>\r\n\t.compare-container {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tpadding: 10px;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.table-grid {\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: 1fr 0.3fr 1fr;\r\n\t\twidth: 98%;\r\n\t\tmax-width: 1200px;\r\n\t\tmargin: 0 auto;\r\n\t\tbackground: white;\r\n\t\tflex: 1;\r\n\t\toverflow-y: auto;\r\n\t\tborder-collapse: separate;\r\n\t\tborder-spacing: 0;\r\n\t\tbox-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\r\n\t\tborder: 1px solid #e2e8f0;\r\n\t\tborder-radius: 4px;\r\n\t}\r\n\r\n\t.header {\r\n\t\tpadding: 12px;\r\n\t\tbackground: #2c3e50;\r\n\t\tcolor: white;\r\n\t\tfont-weight: bold;\r\n\t\ttext-align: center;\r\n\t\tposition: sticky;\r\n\t\ttop: 0;\r\n\t\tz-index: 1;\r\n\t\tborder-right: 1px solid #2c3e50;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.header.left-column,\r\n\t.header.right-column,\r\n\t.header.middle-column {\r\n\t\tborder-bottom: 1px solid #2c3e50;\r\n\t}\r\n\r\n\t.cell {\r\n\t\tpadding: 10px;\r\n\t\tbackground: white;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tmin-height: 120px;\r\n\t\tborder-bottom: 1px solid #f0f0f0;\r\n\t\tborder-right: 1px solid #f0f0f0;\r\n\t\tcursor: pointer;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.cell > * {\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.left-column {\r\n\t\tborder-left: 1px solid #f0f0f0;\r\n\t}\r\n\r\n\t.middle-column {\r\n\t\tbackground-color: #f8fafc;\r\n\t\tborder-right: 1px solid #f0f0f0;\r\n\t}\r\n\r\n\t.right-column {\r\n\t\tborder-right: 1px solid #f0f0f0;\r\n\t}\r\n\r\n\t.empty-cell {\r\n\t\tmin-height: 120px;\r\n\t\tbackground-color: white;\r\n\t\tborder-bottom: 1px solid #f0f0f0;\r\n\t\tborder-right: 1px solid #f0f0f0;\r\n\t}\r\n\r\n\t.attribute-name {\r\n\t\tfont-weight: 600;\r\n\t\tmargin-bottom: 4px;\r\n\t\tcolor: #2c3e50;\r\n\t\tfont-size: 1.1em;\r\n\t\ttext-align: center;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.stats-summary {\r\n\t\tmargin-top: 8px;\r\n\t\tfont-size: 0.85em;\r\n\t\tcolor: #34495e;\r\n\t\ttext-align: center;\r\n\t\tline-height: 1.5;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.no-data {\r\n\t\tcolor: #95a5a6;\r\n\t\tfont-style: italic;\r\n\t\tfont-size: 0.9em;\r\n\t\ttext-align: center;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.full-chart-modal {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tbackground-color: rgba(0, 0, 0, 0.5);\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tz-index: 1000;\r\n\t}\r\n\r\n\t.modal-content {\r\n\t\tbackground-color: white;\r\n\t\tborder-radius: 8px;\r\n\t\twidth: 85%;\r\n\t\tmax-width: 900px;\r\n\t\tmax-height: 85vh;\r\n\t\toverflow: auto;\r\n\t\tbox-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\r\n\t\tpadding: 20px;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\t.modal-header {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 20px;\r\n\t\tpadding-bottom: 10px;\r\n\t\tborder-bottom: 1px solid #eee;\r\n\t}\r\n\r\n\t.close-button {\r\n\t\tbackground: none;\r\n\t\tborder: none;\r\n\t\tfont-size: 24px;\r\n\t\tcursor: pointer;\r\n\t\tcolor: #64748b;\r\n\t\ttransition: color 0.2s;\r\n\t}\r\n\r\n\t.close-button:hover {\r\n\t\tcolor: #334155;\r\n\t}\r\n\r\n\t@media (max-width: 768px) {\r\n\t\t.compare-container {\r\n\t\t\tpadding: 5px;\r\n\t\t}\r\n\r\n\t\t.table-grid {\r\n\t\t\tgrid-template-columns: 1fr;\r\n\t\t\twidth: 100%;\r\n\t\t}\r\n\r\n\t\t.header {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\r\n\t\t.cell {\r\n\t\t\tmin-height: auto;\r\n\t\t\tpadding: 8px;\r\n\t\t\tborder-right: 1px solid #f0f0f0 !important;\r\n\t\t}\r\n\r\n\t\t.left-column,\r\n\t\t.middle-column,\r\n\t\t.right-column {\r\n\t\t\tborder-left: 1px solid #f0f0f0;\r\n\t\t}\r\n\r\n\t\t.modal-content {\r\n\t\t\twidth: 95%;\r\n\t\t\tmax-height: 90vh;\r\n\t\t\tpadding: 15px;\r\n\t\t}\r\n\t}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}