{"ast":null,"code":"// chartUtils.js\nimport * as d3 from \"d3\";\n\n// 渲染折线图（line）\nexport function renderLineChart(chartRef, data, options) {\n  if (!chartRef) {\n    console.error(\"图表容器未找到\");\n    return;\n  }\n  console.log(\"渲染折线图数据:\", data);\n  const margin = {\n    top: 20,\n    right: 100,\n    bottom: 50,\n    left: 50\n  };\n  const width = 800 - margin.left - margin.right;\n  const height = 300 - margin.top - margin.bottom;\n\n  // 清空之前的图表\n  d3.select(chartRef).html(\"\");\n\n  // 创建 SVG 容器\n  const svg = d3.select(chartRef).append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", `translate(${margin.left},${margin.top})`);\n  const labels = data.labels;\n  const datasets = data.datasets;\n\n  // 清理数据\n  const cleanedLabels = labels.map(label => label === undefined || label === null ? \"\" : label);\n  const cleanedDatasets = datasets.map(dataset => ({\n    ...dataset,\n    data: dataset.data.map(d => d === undefined || d === null ? 0 : d)\n  }));\n  console.log(\"清理后的 labels:\", cleanedLabels);\n  console.log(\"清理后的 datasets:\", cleanedDatasets);\n\n  // 设置 X 轴比例尺\n  const x = d3.scaleBand().domain(cleanedLabels).range([0, width]).padding(0.1);\n\n  // 设置 Y 轴比例尺\n  const y = d3.scaleLinear().domain([0, d3.max(cleanedDatasets.flatMap(d => d.data))]).range([height, 0]);\n  console.log(\"X 比例尺 domain:\", x.domain());\n  console.log(\"X 比例尺 range:\", x.range());\n  console.log(\"Y 比例尺 domain:\", y.domain());\n  console.log(\"Y 比例尺 range:\", y.range());\n\n  // 添加 X 轴\n  svg.append(\"g\").attr(\"transform\", `translate(0,${height})`).call(d3.axisBottom(x)).selectAll(\"text\").attr(\"transform\", \"rotate(-45)\").style(\"text-anchor\", \"end\");\n\n  // 添加 Y 轴\n  svg.append(\"g\").call(d3.axisLeft(y));\n\n  // 添加 X 轴标题\n  svg.append(\"text\").attr(\"x\", width / 2).attr(\"y\", height + margin.bottom - 10).style(\"text-anchor\", \"middle\").text(options.scales.x.title.text);\n\n  // 添加 Y 轴标题\n  svg.append(\"text\").attr(\"transform\", \"rotate(-90)\").attr(\"x\", -height / 2).attr(\"y\", -margin.left + 20).style(\"text-anchor\", \"middle\").text(options.scales.y.title.text);\n\n  // 绘制折线\n  cleanedDatasets.forEach(dataset => {\n    const line = d3.line().x((d, i) => {\n      const xValue = x(cleanedLabels[i]) + x.bandwidth() / 2;\n      if (isNaN(xValue)) {\n        console.error(\"无效的 x 值:\", xValue, \"labels[i]:\", cleanedLabels[i]);\n      }\n      return xValue;\n    }).y(d => {\n      const yValue = y(d);\n      if (isNaN(yValue)) {\n        console.error(\"无效的 y 值:\", yValue, \"d:\", d);\n      }\n      return yValue;\n    });\n    svg.append(\"path\").datum(dataset.data).attr(\"fill\", \"none\").attr(\"stroke\", dataset.borderColor).attr(\"stroke-width\", 2).attr(\"d\", line);\n\n    // 添加数据点\n    svg.selectAll(`.dot-${CSS.escape(dataset.label)}`).data(dataset.data).enter().append(\"circle\").attr(\"cx\", (d, i) => {\n      const cxValue = x(cleanedLabels[i]) + x.bandwidth() / 2;\n      if (isNaN(cxValue)) {\n        console.error(\"无效的 cx 值:\", cxValue, \"labels[i]:\", cleanedLabels[i]);\n      }\n      return cxValue;\n    }).attr(\"cy\", d => {\n      const cyValue = y(d);\n      if (isNaN(cyValue)) {\n        console.error(\"无效的 cy 值:\", cyValue, \"d:\", d);\n      }\n      return cyValue;\n    }).attr(\"r\", 4).attr(\"fill\", dataset.borderColor);\n  });\n\n  // 添加图例\n  const legend = svg.append(\"g\").attr(\"class\", \"legend\").attr(\"transform\", `translate(${width + margin.right - 100}, 20)`);\n  cleanedDatasets.forEach((dataset, index) => {\n    const legendItem = legend.append(\"g\").attr(\"transform\", `translate(0, ${index * 20})`);\n\n    // 添加颜色方块\n    legendItem.append(\"rect\").attr(\"width\", 18).attr(\"height\", 18).attr(\"fill\", dataset.borderColor);\n\n    // 添加标签\n    legendItem.append(\"text\").attr(\"x\", 24).attr(\"y\", 9).attr(\"dy\", \"0.35em\").text(dataset.label).style(\"font-size\", \"10px\"); // 设置字体大小为16像素\n  });\n}\n\n// 渲染柱状图（bar）\nexport function renderBarChart(chartRef, data) {\n  if (!chartRef) {\n    console.error(\"图表容器未找到\");\n    return;\n  }\n  console.log(\"渲染bar_chart数据:\", data);\n  const margin = {\n    top: 20,\n    right: 100,\n    bottom: 50,\n    left: 50\n  };\n  const width = 800 - margin.left - margin.right;\n  const height = 300 - margin.top - margin.bottom;\n\n  // 清空之前的图表\n  d3.select(chartRef).html(\"\");\n\n  // 创建 SVG 容器\n  const svg = d3.select(chartRef).append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", `translate(${margin.left},${margin.top})`);\n\n  // X轴：使用 scaleBand 处理分类数据\n  const x = d3.scaleBand().domain(data.xAxis.data).range([0, width]).padding(0.1);\n\n  // Y轴：使用 scaleLinear 处理数值数据\n  const y = d3.scaleLinear().domain([0, d3.max(data.datasets, d => d3.max(d.data))]).range([height, 0]);\n\n  // 颜色生成器\n  const color = d3.scaleOrdinal(d3.schemeCategory10);\n\n  // 添加 X 轴\n  svg.append(\"g\").attr(\"transform\", `translate(0,${height})`).call(d3.axisBottom(x));\n\n  // 添加 Y 轴\n  svg.append(\"g\").call(d3.axisLeft(y));\n\n  // 添加 X 轴标注\n  svg.append(\"text\").attr(\"class\", \"axis-label\").attr(\"x\", width / 2).attr(\"y\", height + margin.bottom - 10).style(\"text-anchor\", \"middle\").text(data.xAxis.label);\n\n  // 添加 Y 轴标注\n  svg.append(\"text\").attr(\"class\", \"axis-label\").attr(\"transform\", \"rotate(-90)\").attr(\"x\", -height / 2).attr(\"y\", -margin.left + 20).style(\"text-anchor\", \"middle\").text(data.yAxis.label);\n  // 计算柱状图宽度\n  const barWidth = x.bandwidth() / data.datasets.length;\n\n  // 绘制柱状图\n  data.datasets.forEach((dataset, i) => {\n    svg.selectAll(`.bar-${i}`).data(dataset.data).enter().append(\"rect\").attr(\"class\", `bar-${i}`).attr(\"x\", (d, j) => x(data.xAxis.data[j]) + i * barWidth).attr(\"y\", d => y(d)).attr(\"width\", barWidth).attr(\"height\", d => height - y(d)).attr(\"fill\", color(i));\n  });\n\n  // 添加图注\n  const legend = svg.selectAll(\".legend\").data(data.datasets).enter().append(\"g\").attr(\"class\", \"legend\").attr(\"transform\", (d, i) => `translate(${width + 20},${i * 20})`); // 将图注放在图表右侧\n\n  legend.append(\"rect\").attr(\"width\", 18).attr(\"height\", 18).attr(\"fill\", (d, i) => color(i));\n  legend.append(\"text\").attr(\"x\", 24).attr(\"y\", 9).attr(\"dy\", \".35em\").style(\"text-anchor\", \"start\").text(d => d.label);\n}\n\n// 渲染饼图（pie）\nexport function renderPieChart(chartRef, data, options) {\n  console.log(\"渲染饼图数据:\", data);\n}\n\n// 渲染非可视化数据的默认占位图表\nexport function renderNonVisualChart(chartRef, data, options) {\n  if (!chartRef) {\n    console.error(\"图表容器未找到\");\n    return;\n  }\n  console.log(\"渲染非可视化数据图表:\", data);\n  const margin = {\n    top: 20,\n    right: 20,\n    bottom: 20,\n    left: 20\n  };\n  const width = 300 - margin.left - margin.right; // 图表宽度\n  const height = 200 - margin.top - margin.bottom; // 图表高度\n\n  // 清空容器，确保重新渲染\n  d3.select(chartRef).html(\"\");\n\n  // 创建 SVG 容器\n  const svg = d3.select(chartRef).append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", `translate(${margin.left},${margin.top})`);\n\n  // 添加背景矩形\n  svg.append(\"rect\").attr(\"width\", width).attr(\"height\", height).attr(\"fill\", \"#f8f9fa\") // 轻灰色背景\n  .attr(\"rx\", 12) // 圆角边框\n  .attr(\"ry\", 12).style(\"stroke\", \"#ccc\") // 边框颜色\n  .style(\"stroke-width\", 1);\n\n  // 添加占位文本\n  svg.append(\"text\").attr(\"x\", width / 2).attr(\"y\", height / 2 - 10).attr(\"text-anchor\", \"middle\").attr(\"font-size\", \"16px\").attr(\"fill\", \"#555\").style(\"font-weight\", \"bold\").text(\"数据不可视化\");\n\n  // 添加可选的提示信息\n  if (options?.message) {\n    svg.append(\"text\").attr(\"x\", width / 2).attr(\"y\", height / 2 + 20).attr(\"text-anchor\", \"middle\").attr(\"font-size\", \"14px\").attr(\"fill\", \"#777\").text(options.message);\n  }\n}\n\n//渲染雷达图\nexport function renderRadarChart(chartRef, data) {\n  // 参数校验\n  if (!chartRef) {\n    console.error(\"图表容器未找到\");\n    return;\n  }\n  if (!data || typeof data !== \"object\") {\n    console.error(\"无效的图表数据格式\", data);\n    return;\n  }\n\n  // 数据格式校验\n  const requiredFields = [\"metrics\", \"datasets\"];\n  if (requiredFields.some(field => !data[field])) {\n    console.error(\"缺失必要字段，需要包含 metrics 和 datasets\", data);\n    return;\n  }\n  if (!Array.isArray(data.metrics) || data.metrics.length === 0) {\n    console.error(\"metrics 必须是非空数组\", data.metrics);\n    return;\n  }\n  if (!Array.isArray(data.datasets) || data.datasets.length === 0) {\n    console.error(\"datasets 必须是非空数组\", data.datasets);\n    return;\n  }\n  console.log(\"渲染radar_chart数据:\", data);\n\n  // 配置参数\n  const margin = {\n    top: 60,\n    right: 160,\n    bottom: 60,\n    left: 60\n  };\n  const width = 600 - margin.left - margin.right;\n  const height = 400 - margin.top - margin.bottom;\n  const radius = Math.min(width, height) / 2;\n\n  // 清空之前的图表\n  d3.select(chartRef).html(\"\");\n\n  // 创建 SVG 容器\n  const svg = d3.select(chartRef).append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", `translate(${margin.left + width / 2},${margin.top + height / 2})`);\n\n  // 颜色生成器\n  const color = d3.scaleOrdinal(d3.schemeCategory10);\n\n  // 计算角度切片\n  const angleSlice = Math.PI * 2 / data.metrics.length;\n\n  // 计算数据范围\n  const maxValue = d3.max(data.datasets, d => d3.max(d.data));\n  const minValue = d3.min(data.datasets, d => d3.min(d.data));\n\n  // 半径比例尺\n  const rScale = d3.scaleLinear().domain([minValue * 0.9, maxValue * 1.1]) // 留出10%的边距\n  .range([0, radius]);\n\n  // 绘制辅助网格线\n  const gridValues = Array.from({\n    length: 5\n  }, (_, i) => minValue + (maxValue - minValue) * i / 4);\n  gridValues.forEach(value => {\n    svg.append(\"circle\").attr(\"r\", rScale(value)).style(\"stroke\", \"#eee\").style(\"fill\", \"none\").style(\"stroke-dasharray\", \"2,2\");\n  });\n\n  // 绘制轴线\n  const axes = svg.selectAll(\".axis\").data(data.metrics).enter().append(\"g\").attr(\"class\", \"axis\");\n  axes.append(\"line\").attr(\"x1\", 0).attr(\"y1\", 0).attr(\"x2\", (d, i) => radius * Math.cos(angleSlice * i - Math.PI / 2)).attr(\"y2\", (d, i) => radius * Math.sin(angleSlice * i - Math.PI / 2)).style(\"stroke\", \"#999\").style(\"stroke-width\", 1);\n\n  // 添加轴标签\n  axes.append(\"text\").attr(\"class\", \"axis-text\").style(\"font-size\", \"12px\").attr(\"text-anchor\", \"middle\").attr(\"dy\", \"0.35em\").attr(\"x\", (d, i) => (radius + 15) * Math.cos(angleSlice * i - Math.PI / 2)).attr(\"y\", (d, i) => (radius + 15) * Math.sin(angleSlice * i - Math.PI / 2)).text(d => d);\n\n  // 创建雷达图绘制器\n  const radarLine = d3.lineRadial().curve(d3.curveLinearClosed).radius(d => rScale(d)).angle((d, i) => i * angleSlice);\n\n  // 绘制数据路径\n  data.datasets.forEach((dataset, i) => {\n    svg.append(\"path\").datum(dataset.data).attr(\"class\", `radar-area-${i}`).attr(\"d\", radarLine).style(\"fill\", color(i)).style(\"fill-opacity\", 0.3).style(\"stroke\", color(i)).style(\"stroke-width\", 2);\n  });\n\n  // 添加独立图注\n  const legend = svg.append(\"g\").attr(\"class\", \"legend\").attr(\"transform\", `translate(${radius + 50},${-height / 2 + 30})`);\n  legend.selectAll(\".legend-item\").data(data.datasets).enter().append(\"g\").attr(\"class\", \"legend-item\").attr(\"transform\", (d, i) => `translate(0,${i * 25})`);\n  legend.selectAll(\".legend-item\").append(\"rect\").attr(\"width\", 16).attr(\"height\", 16).attr(\"fill\", (d, i) => color(i));\n  legend.selectAll(\".legend-item\").append(\"text\").attr(\"x\", 24).attr(\"y\", 8).attr(\"dy\", \"0.35em\").style(\"font-size\", \"12px\").text(d => d.label);\n}\n\n//渲染堆叠图\nexport function renderStackedBarChart(chartRef, chartData) {\n  if (!chartRef) {\n    console.error(\"图表容器未找到\");\n    return;\n  }\n  const {\n    labels,\n    values\n  } = chartData.data;\n  const {\n    colors\n  } = chartData.options;\n\n  // 图表边距和尺寸\n  const margin = {\n    top: 20,\n    right: 120,\n    bottom: 50,\n    left: 60\n  };\n  const width = 600 - margin.left - margin.right;\n  const height = 350 - margin.top - margin.bottom;\n\n  // 清空之前的图表\n  d3.select(chartRef).html(\"\");\n\n  // 创建 SVG 画布\n  const svg = d3.select(chartRef).append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", `translate(${margin.left},${margin.top})`);\n\n  // 数据转换：从对象形式转换为按统计项分类的数组\n  const categories = Object.keys(values[0]); // 获取所有的类别：GP, GS, MPG, ...\n  const stack = d3.stack().keys(categories).order(d3.stackOrderNone).offset(d3.stackOffsetNone);\n  const stackedData = stack(values);\n\n  // X 轴比例尺\n  const x = d3.scaleBand().domain(labels).range([0, width]).padding(0.2);\n\n  // Y 轴比例尺\n  const y = d3.scaleLinear().domain([0, d3.max(stackedData[stackedData.length - 1], d => d[1])]).nice().range([height, 0]);\n\n  // 添加 X 轴\n  svg.append(\"g\").attr(\"transform\", `translate(0,${height})`).call(d3.axisBottom(x)).selectAll(\"text\").attr(\"transform\", \"rotate(-30)\").style(\"text-anchor\", \"end\");\n\n  // 添加 Y 轴\n  svg.append(\"g\").call(d3.axisLeft(y));\n\n  // 绘制堆叠柱状图\n  svg.selectAll(\".serie\").data(stackedData).enter().append(\"g\").attr(\"class\", \"serie\").selectAll(\".bar\").data(d => d).enter().append(\"rect\").attr(\"class\", \"bar\").attr(\"x\", d => x(labels[d.index])).attr(\"y\", d => y(d[1])).attr(\"width\", x.bandwidth()).attr(\"height\", d => y(d[0]) - y(d[1])).attr(\"fill\", (d, i) => colors[i]);\n\n  // **添加图例**\n  const legend = svg.append(\"g\").attr(\"transform\", `translate(${width + 20}, 20)`); // 右侧放置\n\n  categories.forEach((category, i) => {\n    const legendItem = legend.append(\"g\").attr(\"transform\", `translate(0, ${i * 20})`);\n    legendItem.append(\"rect\").attr(\"width\", 15).attr(\"height\", 15).attr(\"fill\", colors[i]);\n    legendItem.append(\"text\").attr(\"x\", 20).attr(\"y\", 12).text(category).style(\"font-size\", \"14px\").attr(\"fill\", \"#333\");\n  });\n\n  // X 轴标题\n  svg.append(\"text\").attr(\"x\", width / 2).attr(\"y\", height + margin.bottom - 10).style(\"text-anchor\", \"middle\").text(\"Year\");\n\n  // Y 轴标题\n  svg.append(\"text\").attr(\"transform\", \"rotate(-90)\").attr(\"x\", -height / 2).attr(\"y\", -margin.left + 20).style(\"text-anchor\", \"middle\").text(\"Statistics\");\n}","map":{"version":3,"names":["d3","renderLineChart","chartRef","data","options","console","error","log","margin","top","right","bottom","left","width","height","select","html","svg","append","attr","labels","datasets","cleanedLabels","map","label","undefined","cleanedDatasets","dataset","d","x","scaleBand","domain","range","padding","y","scaleLinear","max","flatMap","call","axisBottom","selectAll","style","axisLeft","text","scales","title","forEach","line","i","xValue","bandwidth","isNaN","yValue","datum","borderColor","CSS","escape","enter","cxValue","cyValue","legend","index","legendItem","renderBarChart","xAxis","color","scaleOrdinal","schemeCategory10","yAxis","barWidth","length","j","renderPieChart","renderNonVisualChart","message","renderRadarChart","requiredFields","some","field","Array","isArray","metrics","radius","Math","min","angleSlice","PI","maxValue","minValue","rScale","gridValues","from","_","value","axes","cos","sin","radarLine","lineRadial","curve","curveLinearClosed","angle","renderStackedBarChart","chartData","values","colors","categories","Object","keys","stack","order","stackOrderNone","offset","stackOffsetNone","stackedData","nice","category"],"sources":["D:/vue_frame/vue_frame/wikitable-vue/client/src/js/chartUtils.js"],"sourcesContent":["// chartUtils.js\r\nimport * as d3 from \"d3\";\r\n\r\n// 渲染折线图（line）\r\nexport function renderLineChart(chartRef, data, options) {\r\n    if (!chartRef) {\r\n        console.error(\"图表容器未找到\");\r\n        return;\r\n    }\r\n\r\n    console.log(\"渲染折线图数据:\", data);\r\n\r\n    const margin = { top: 20, right: 100, bottom: 50, left: 50 };\r\n    const width = 800 - margin.left - margin.right;\r\n    const height = 300 - margin.top - margin.bottom;\r\n\r\n    // 清空之前的图表\r\n    d3.select(chartRef).html(\"\");\r\n\r\n    // 创建 SVG 容器\r\n    const svg = d3\r\n        .select(chartRef)\r\n        .append(\"svg\")\r\n        .attr(\"width\", width + margin.left + margin.right)\r\n        .attr(\"height\", height + margin.top + margin.bottom)\r\n        .append(\"g\")\r\n        .attr(\"transform\", `translate(${margin.left},${margin.top})`);\r\n\r\n    const labels = data.labels;\r\n    const datasets = data.datasets;\r\n\r\n    // 清理数据\r\n    const cleanedLabels = labels.map(label =>\r\n        label === undefined || label === null ? \"\" : label\r\n    );\r\n    const cleanedDatasets = datasets.map(dataset => ({\r\n        ...dataset,\r\n        data: dataset.data.map(d => (d === undefined || d === null ? 0 : d))\r\n    }));\r\n\r\n    console.log(\"清理后的 labels:\", cleanedLabels);\r\n    console.log(\"清理后的 datasets:\", cleanedDatasets);\r\n\r\n    // 设置 X 轴比例尺\r\n    const x = d3\r\n        .scaleBand()\r\n        .domain(cleanedLabels)\r\n        .range([0, width])\r\n        .padding(0.1);\r\n\r\n    // 设置 Y 轴比例尺\r\n    const y = d3\r\n        .scaleLinear()\r\n        .domain([0, d3.max(cleanedDatasets.flatMap(d => d.data))])\r\n        .range([height, 0]);\r\n\r\n    console.log(\"X 比例尺 domain:\", x.domain());\r\n    console.log(\"X 比例尺 range:\", x.range());\r\n    console.log(\"Y 比例尺 domain:\", y.domain());\r\n    console.log(\"Y 比例尺 range:\", y.range());\r\n\r\n    // 添加 X 轴\r\n    svg\r\n        .append(\"g\")\r\n        .attr(\"transform\", `translate(0,${height})`)\r\n        .call(d3.axisBottom(x))\r\n        .selectAll(\"text\")\r\n        .attr(\"transform\", \"rotate(-45)\")\r\n        .style(\"text-anchor\", \"end\");\r\n\r\n    // 添加 Y 轴\r\n    svg.append(\"g\").call(d3.axisLeft(y));\r\n\r\n    // 添加 X 轴标题\r\n    svg\r\n        .append(\"text\")\r\n        .attr(\"x\", width / 2)\r\n        .attr(\"y\", height + margin.bottom - 10)\r\n        .style(\"text-anchor\", \"middle\")\r\n        .text(options.scales.x.title.text);\r\n\r\n    // 添加 Y 轴标题\r\n    svg\r\n        .append(\"text\")\r\n        .attr(\"transform\", \"rotate(-90)\")\r\n        .attr(\"x\", -height / 2)\r\n        .attr(\"y\", -margin.left + 20)\r\n        .style(\"text-anchor\", \"middle\")\r\n        .text(options.scales.y.title.text);\r\n\r\n    // 绘制折线\r\n    cleanedDatasets.forEach(dataset => {\r\n        const line = d3\r\n            .line()\r\n            .x((d, i) => {\r\n                const xValue = x(cleanedLabels[i]) + x.bandwidth() / 2;\r\n                if (isNaN(xValue)) {\r\n                    console.error(\r\n                        \"无效的 x 值:\",\r\n                        xValue,\r\n                        \"labels[i]:\",\r\n                        cleanedLabels[i]\r\n                    );\r\n                }\r\n                return xValue;\r\n            })\r\n            .y(d => {\r\n                const yValue = y(d);\r\n                if (isNaN(yValue)) {\r\n                    console.error(\"无效的 y 值:\", yValue, \"d:\", d);\r\n                }\r\n                return yValue;\r\n            });\r\n\r\n        svg\r\n            .append(\"path\")\r\n            .datum(dataset.data)\r\n            .attr(\"fill\", \"none\")\r\n            .attr(\"stroke\", dataset.borderColor)\r\n            .attr(\"stroke-width\", 2)\r\n            .attr(\"d\", line);\r\n\r\n        // 添加数据点\r\n        svg\r\n            .selectAll(`.dot-${CSS.escape(dataset.label)}`)\r\n            .data(dataset.data)\r\n            .enter()\r\n            .append(\"circle\")\r\n            .attr(\"cx\", (d, i) => {\r\n                const cxValue = x(cleanedLabels[i]) + x.bandwidth() / 2;\r\n                if (isNaN(cxValue)) {\r\n                    console.error(\r\n                        \"无效的 cx 值:\",\r\n                        cxValue,\r\n                        \"labels[i]:\",\r\n                        cleanedLabels[i]\r\n                    );\r\n                }\r\n                return cxValue;\r\n            })\r\n            .attr(\"cy\", d => {\r\n                const cyValue = y(d);\r\n                if (isNaN(cyValue)) {\r\n                    console.error(\"无效的 cy 值:\", cyValue, \"d:\", d);\r\n                }\r\n                return cyValue;\r\n            })\r\n            .attr(\"r\", 4)\r\n            .attr(\"fill\", dataset.borderColor);\r\n    });\r\n\r\n    // 添加图例\r\n    const legend = svg\r\n        .append(\"g\")\r\n        .attr(\"class\", \"legend\")\r\n        .attr(\"transform\", `translate(${width + margin.right - 100}, 20)`);\r\n\r\n    cleanedDatasets.forEach((dataset, index) => {\r\n        const legendItem = legend\r\n            .append(\"g\")\r\n            .attr(\"transform\", `translate(0, ${index * 20})`);\r\n\r\n        // 添加颜色方块\r\n        legendItem\r\n            .append(\"rect\")\r\n            .attr(\"width\", 18)\r\n            .attr(\"height\", 18)\r\n            .attr(\"fill\", dataset.borderColor);\r\n\r\n        // 添加标签\r\n        legendItem\r\n            .append(\"text\")\r\n            .attr(\"x\", 24)\r\n            .attr(\"y\", 9)\r\n            .attr(\"dy\", \"0.35em\")\r\n            .text(dataset.label)\r\n            .style(\"font-size\", \"10px\"); // 设置字体大小为16像素\r\n    });\r\n}\r\n\r\n// 渲染柱状图（bar）\r\nexport function renderBarChart(chartRef, data) {\r\n    if (!chartRef) {\r\n        console.error(\"图表容器未找到\");\r\n        return;\r\n    }\r\n\r\n    console.log(\"渲染bar_chart数据:\", data);\r\n\r\n    const margin = { top: 20, right: 100, bottom: 50, left: 50 };\r\n    const width = 800 - margin.left - margin.right;\r\n    const height = 300 - margin.top - margin.bottom;\r\n\r\n    // 清空之前的图表\r\n    d3.select(chartRef).html(\"\");\r\n\r\n    // 创建 SVG 容器\r\n    const svg = d3\r\n        .select(chartRef)\r\n        .append(\"svg\")\r\n        .attr(\"width\", width + margin.left + margin.right)\r\n        .attr(\"height\", height + margin.top + margin.bottom)\r\n        .append(\"g\")\r\n        .attr(\"transform\", `translate(${margin.left},${margin.top})`);\r\n\r\n    // X轴：使用 scaleBand 处理分类数据\r\n    const x = d3\r\n        .scaleBand()\r\n        .domain(data.xAxis.data)\r\n        .range([0, width])\r\n        .padding(0.1);\r\n\r\n    // Y轴：使用 scaleLinear 处理数值数据\r\n    const y = d3\r\n        .scaleLinear()\r\n        .domain([0, d3.max(data.datasets, d => d3.max(d.data))])\r\n        .range([height, 0]);\r\n\r\n    // 颜色生成器\r\n    const color = d3.scaleOrdinal(d3.schemeCategory10);\r\n\r\n    // 添加 X 轴\r\n    svg\r\n        .append(\"g\")\r\n        .attr(\"transform\", `translate(0,${height})`)\r\n        .call(d3.axisBottom(x));\r\n\r\n    // 添加 Y 轴\r\n    svg.append(\"g\").call(d3.axisLeft(y));\r\n\r\n    // 添加 X 轴标注\r\n    svg\r\n    .append(\"text\")\r\n    .attr(\"class\", \"axis-label\")\r\n    .attr(\"x\", width / 2)\r\n    .attr(\"y\", height + margin.bottom - 10)\r\n    .style(\"text-anchor\", \"middle\")\r\n    .text(data.xAxis.label);\r\n\r\n    // 添加 Y 轴标注\r\n    svg\r\n    .append(\"text\")\r\n    .attr(\"class\", \"axis-label\")\r\n    .attr(\"transform\", \"rotate(-90)\")\r\n    .attr(\"x\", -height / 2)\r\n    .attr(\"y\", -margin.left + 20)\r\n    .style(\"text-anchor\", \"middle\")\r\n    .text(data.yAxis.label);\r\n    // 计算柱状图宽度\r\n    const barWidth = x.bandwidth() / data.datasets.length;\r\n\r\n    // 绘制柱状图\r\n    data.datasets.forEach((dataset, i) => {\r\n        svg\r\n            .selectAll(`.bar-${i}`)\r\n            .data(dataset.data)\r\n            .enter()\r\n            .append(\"rect\")\r\n            .attr(\"class\", `bar-${i}`)\r\n            .attr(\"x\", (d, j) => x(data.xAxis.data[j]) + i * barWidth)\r\n            .attr(\"y\", d => y(d))\r\n            .attr(\"width\", barWidth)\r\n            .attr(\"height\", d => height - y(d))\r\n            .attr(\"fill\", color(i));\r\n    });\r\n\r\n    // 添加图注\r\n    const legend = svg\r\n        .selectAll(\".legend\")\r\n        .data(data.datasets)\r\n        .enter()\r\n        .append(\"g\")\r\n        .attr(\"class\", \"legend\")\r\n        .attr(\"transform\", (d, i) => `translate(${width + 20},${i * 20})`); // 将图注放在图表右侧\r\n\r\n    legend\r\n        .append(\"rect\")\r\n        .attr(\"width\", 18)\r\n        .attr(\"height\", 18)\r\n        .attr(\"fill\", (d, i) => color(i));\r\n\r\n    legend\r\n        .append(\"text\")\r\n        .attr(\"x\", 24)\r\n        .attr(\"y\", 9)\r\n        .attr(\"dy\", \".35em\")\r\n        .style(\"text-anchor\", \"start\")\r\n        .text(d => d.label);\r\n}\r\n\r\n\r\n// 渲染饼图（pie）\r\nexport function renderPieChart(chartRef, data, options) {\r\n    console.log(\"渲染饼图数据:\", data);\r\n}\r\n\r\n// 渲染非可视化数据的默认占位图表\r\nexport function renderNonVisualChart(chartRef, data, options) {\r\n    if (!chartRef) {\r\n        console.error(\"图表容器未找到\");\r\n        return;\r\n    }\r\n\r\n    console.log(\"渲染非可视化数据图表:\", data);\r\n\r\n    const margin = { top: 20, right: 20, bottom: 20, left: 20 };\r\n    const width = 300 - margin.left - margin.right; // 图表宽度\r\n    const height = 200 - margin.top - margin.bottom; // 图表高度\r\n\r\n    // 清空容器，确保重新渲染\r\n    d3.select(chartRef).html(\"\");\r\n\r\n    // 创建 SVG 容器\r\n    const svg = d3\r\n        .select(chartRef)\r\n        .append(\"svg\")\r\n        .attr(\"width\", width + margin.left + margin.right)\r\n        .attr(\"height\", height + margin.top + margin.bottom)\r\n        .append(\"g\")\r\n        .attr(\"transform\", `translate(${margin.left},${margin.top})`);\r\n\r\n    // 添加背景矩形\r\n    svg.append(\"rect\")\r\n        .attr(\"width\", width)\r\n        .attr(\"height\", height)\r\n        .attr(\"fill\", \"#f8f9fa\") // 轻灰色背景\r\n        .attr(\"rx\", 12) // 圆角边框\r\n        .attr(\"ry\", 12)\r\n        .style(\"stroke\", \"#ccc\") // 边框颜色\r\n        .style(\"stroke-width\", 1);\r\n\r\n    // 添加占位文本\r\n    svg.append(\"text\")\r\n        .attr(\"x\", width / 2)\r\n        .attr(\"y\", height / 2 - 10)\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .attr(\"font-size\", \"16px\")\r\n        .attr(\"fill\", \"#555\")\r\n        .style(\"font-weight\", \"bold\")\r\n        .text(\"数据不可视化\");\r\n\r\n    // 添加可选的提示信息\r\n    if (options?.message) {\r\n        svg.append(\"text\")\r\n            .attr(\"x\", width / 2)\r\n            .attr(\"y\", height / 2 + 20)\r\n            .attr(\"text-anchor\", \"middle\")\r\n            .attr(\"font-size\", \"14px\")\r\n            .attr(\"fill\", \"#777\")\r\n            .text(options.message);\r\n    }\r\n}\r\n\r\n//渲染雷达图\r\nexport function renderRadarChart(chartRef, data) {\r\n    // 参数校验\r\n    if (!chartRef) {\r\n        console.error(\"图表容器未找到\");\r\n        return;\r\n    }\r\n\r\n    if (!data || typeof data !== \"object\") {\r\n        console.error(\"无效的图表数据格式\", data);\r\n        return;\r\n    }\r\n\r\n    // 数据格式校验\r\n    const requiredFields = [\"metrics\", \"datasets\"];\r\n    if (requiredFields.some(field => !data[field])) {\r\n        console.error(\"缺失必要字段，需要包含 metrics 和 datasets\", data);\r\n        return;\r\n    }\r\n\r\n    if (!Array.isArray(data.metrics) || data.metrics.length === 0) {\r\n        console.error(\"metrics 必须是非空数组\", data.metrics);\r\n        return;\r\n    }\r\n\r\n    if (!Array.isArray(data.datasets) || data.datasets.length === 0) {\r\n        console.error(\"datasets 必须是非空数组\", data.datasets);\r\n        return;\r\n    }\r\n\r\n    console.log(\"渲染radar_chart数据:\", data);\r\n\r\n    // 配置参数\r\n    const margin = { top: 60, right: 160, bottom: 60, left: 60 };\r\n    const width = 600 - margin.left - margin.right;\r\n    const height = 400 - margin.top - margin.bottom;\r\n    const radius = Math.min(width, height) / 2;\r\n\r\n    // 清空之前的图表\r\n    d3.select(chartRef).html(\"\");\r\n\r\n    // 创建 SVG 容器\r\n    const svg = d3\r\n        .select(chartRef)\r\n        .append(\"svg\")\r\n        .attr(\"width\", width + margin.left + margin.right)\r\n        .attr(\"height\", height + margin.top + margin.bottom)\r\n        .append(\"g\")\r\n        .attr(\"transform\", `translate(${margin.left + width / 2},${margin.top + height / 2})`);\r\n\r\n    // 颜色生成器\r\n    const color = d3.scaleOrdinal(d3.schemeCategory10);\r\n\r\n    // 计算角度切片\r\n    const angleSlice = (Math.PI * 2) / data.metrics.length;\r\n\r\n    // 计算数据范围\r\n    const maxValue = d3.max(data.datasets, d => d3.max(d.data));\r\n    const minValue = d3.min(data.datasets, d => d3.min(d.data));\r\n\r\n    // 半径比例尺\r\n    const rScale = d3.scaleLinear()\r\n        .domain([minValue * 0.9, maxValue * 1.1]) // 留出10%的边距\r\n        .range([0, radius]);\r\n\r\n    // 绘制辅助网格线\r\n    const gridValues = Array.from({ length: 5 }, (_, i) => minValue + (maxValue - minValue) * i / 4);\r\n    gridValues.forEach(value => {\r\n        svg.append(\"circle\")\r\n            .attr(\"r\", rScale(value))\r\n            .style(\"stroke\", \"#eee\")\r\n            .style(\"fill\", \"none\")\r\n            .style(\"stroke-dasharray\", \"2,2\");\r\n    });\r\n\r\n    // 绘制轴线\r\n    const axes = svg.selectAll(\".axis\")\r\n        .data(data.metrics)\r\n        .enter()\r\n        .append(\"g\")\r\n        .attr(\"class\", \"axis\");\r\n\r\n    axes.append(\"line\")\r\n        .attr(\"x1\", 0)\r\n        .attr(\"y1\", 0)\r\n        .attr(\"x2\", (d, i) => radius * Math.cos(angleSlice * i - Math.PI / 2))\r\n        .attr(\"y2\", (d, i) => radius * Math.sin(angleSlice * i - Math.PI / 2))\r\n        .style(\"stroke\", \"#999\")\r\n        .style(\"stroke-width\", 1);\r\n\r\n    // 添加轴标签\r\n    axes.append(\"text\")\r\n        .attr(\"class\", \"axis-text\")\r\n        .style(\"font-size\", \"12px\")\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .attr(\"dy\", \"0.35em\")\r\n        .attr(\"x\", (d, i) => (radius + 15) * Math.cos(angleSlice * i - Math.PI / 2))\r\n        .attr(\"y\", (d, i) => (radius + 15) * Math.sin(angleSlice * i - Math.PI / 2))\r\n        .text(d => d);\r\n\r\n    // 创建雷达图绘制器\r\n    const radarLine = d3.lineRadial()\r\n        .curve(d3.curveLinearClosed)\r\n        .radius(d => rScale(d))\r\n        .angle((d, i) => i * angleSlice);\r\n\r\n    // 绘制数据路径\r\n    data.datasets.forEach((dataset, i) => {\r\n        svg.append(\"path\")\r\n            .datum(dataset.data)\r\n            .attr(\"class\", `radar-area-${i}`)\r\n            .attr(\"d\", radarLine)\r\n            .style(\"fill\", color(i))\r\n            .style(\"fill-opacity\", 0.3)\r\n            .style(\"stroke\", color(i))\r\n            .style(\"stroke-width\", 2);\r\n    });\r\n\r\n    // 添加独立图注\r\n    const legend = svg.append(\"g\")\r\n        .attr(\"class\", \"legend\")\r\n        .attr(\"transform\", `translate(${radius + 50},${-height / 2 + 30})`);\r\n\r\n    legend.selectAll(\".legend-item\")\r\n        .data(data.datasets)\r\n        .enter()\r\n        .append(\"g\")\r\n        .attr(\"class\", \"legend-item\")\r\n        .attr(\"transform\", (d, i) => `translate(0,${i * 25})`);\r\n\r\n    legend.selectAll(\".legend-item\")\r\n        .append(\"rect\")\r\n        .attr(\"width\", 16)\r\n        .attr(\"height\", 16)\r\n        .attr(\"fill\", (d, i) => color(i));\r\n\r\n    legend.selectAll(\".legend-item\")\r\n        .append(\"text\")\r\n        .attr(\"x\", 24)\r\n        .attr(\"y\", 8)\r\n        .attr(\"dy\", \"0.35em\")\r\n        .style(\"font-size\", \"12px\")\r\n        .text(d => d.label);\r\n}\r\n\r\n//渲染堆叠图\r\nexport function renderStackedBarChart(chartRef, chartData) {\r\n    if (!chartRef) {\r\n        console.error(\"图表容器未找到\");\r\n        return;\r\n    }\r\n\r\n    const { labels, values } = chartData.data;\r\n    const { colors } = chartData.options;\r\n\r\n    // 图表边距和尺寸\r\n    const margin = { top: 20, right: 120, bottom: 50, left: 60 };\r\n    const width = 600 - margin.left - margin.right;\r\n    const height = 350 - margin.top - margin.bottom;\r\n\r\n    // 清空之前的图表\r\n    d3.select(chartRef).html(\"\");\r\n\r\n    // 创建 SVG 画布\r\n    const svg = d3\r\n        .select(chartRef)\r\n        .append(\"svg\")\r\n        .attr(\"width\", width + margin.left + margin.right)\r\n        .attr(\"height\", height + margin.top + margin.bottom)\r\n        .append(\"g\")\r\n        .attr(\"transform\", `translate(${margin.left},${margin.top})`);\r\n\r\n    // 数据转换：从对象形式转换为按统计项分类的数组\r\n    const categories = Object.keys(values[0]); // 获取所有的类别：GP, GS, MPG, ...\r\n    const stack = d3\r\n        .stack()\r\n        .keys(categories)\r\n        .order(d3.stackOrderNone)\r\n        .offset(d3.stackOffsetNone);\r\n\r\n    const stackedData = stack(values);\r\n\r\n    // X 轴比例尺\r\n    const x = d3.scaleBand().domain(labels).range([0, width]).padding(0.2);\r\n\r\n    // Y 轴比例尺\r\n    const y = d3\r\n        .scaleLinear()\r\n        .domain([0, d3.max(stackedData[stackedData.length - 1], d => d[1])])\r\n        .nice()\r\n        .range([height, 0]);\r\n\r\n    // 添加 X 轴\r\n    svg\r\n        .append(\"g\")\r\n        .attr(\"transform\", `translate(0,${height})`)\r\n        .call(d3.axisBottom(x))\r\n        .selectAll(\"text\")\r\n        .attr(\"transform\", \"rotate(-30)\")\r\n        .style(\"text-anchor\", \"end\");\r\n\r\n    // 添加 Y 轴\r\n    svg.append(\"g\").call(d3.axisLeft(y));\r\n\r\n    // 绘制堆叠柱状图\r\n    svg\r\n        .selectAll(\".serie\")\r\n        .data(stackedData)\r\n        .enter()\r\n        .append(\"g\")\r\n        .attr(\"class\", \"serie\")\r\n        .selectAll(\".bar\")\r\n        .data(d => d)\r\n        .enter()\r\n        .append(\"rect\")\r\n        .attr(\"class\", \"bar\")\r\n        .attr(\"x\", d => x(labels[d.index]))\r\n        .attr(\"y\", d => y(d[1]))\r\n        .attr(\"width\", x.bandwidth())\r\n        .attr(\"height\", d => y(d[0]) - y(d[1]))\r\n        .attr(\"fill\", (d, i) => colors[i]);\r\n\r\n    // **添加图例**\r\n    const legend = svg\r\n        .append(\"g\")\r\n        .attr(\"transform\", `translate(${width + 20}, 20)`); // 右侧放置\r\n\r\n    categories.forEach((category, i) => {\r\n        const legendItem = legend\r\n            .append(\"g\")\r\n            .attr(\"transform\", `translate(0, ${i * 20})`);\r\n\r\n        legendItem\r\n            .append(\"rect\")\r\n            .attr(\"width\", 15)\r\n            .attr(\"height\", 15)\r\n            .attr(\"fill\", colors[i]);\r\n\r\n        legendItem\r\n            .append(\"text\")\r\n            .attr(\"x\", 20)\r\n            .attr(\"y\", 12)\r\n            .text(category)\r\n            .style(\"font-size\", \"14px\")\r\n            .attr(\"fill\", \"#333\");\r\n    });\r\n\r\n    // X 轴标题\r\n    svg\r\n        .append(\"text\")\r\n        .attr(\"x\", width / 2)\r\n        .attr(\"y\", height + margin.bottom - 10)\r\n        .style(\"text-anchor\", \"middle\")\r\n        .text(\"Year\");\r\n\r\n    // Y 轴标题\r\n    svg\r\n        .append(\"text\")\r\n        .attr(\"transform\", \"rotate(-90)\")\r\n        .attr(\"x\", -height / 2)\r\n        .attr(\"y\", -margin.left + 20)\r\n        .style(\"text-anchor\", \"middle\")\r\n        .text(\"Statistics\");\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}