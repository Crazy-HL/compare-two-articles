{"ast":null,"code":"import { ref, computed, onMounted, watch, nextTick } from \"vue\";\nimport * as d3 from \"d3\";\nexport default {\n  __name: 'FieldVisualization',\n  props: {\n    field: [Object, Array, String, Number],\n    type: String,\n    visualization: String,\n    fieldKey: String,\n    yRange: Array,\n    compareData: [Object, Array]\n  },\n  setup(__props, _ref) {\n    let {\n      expose: __expose\n    } = _ref;\n    __expose();\n    const props = __props;\n    const pieChart = ref(null);\n    const barChart = ref(null);\n    const lineChart = ref(null);\n    const processedArray = computed(() => {\n      if (!props.field) return [];\n\n      // 处理劳动力分布数据格式\n      if (Array.isArray(props.field)) {\n        return props.field.filter(item => item.value && typeof item.value === \"number\").map(item => {\n          const rawText = item.raw || \"\";\n          const nameMatch = rawText.match(/^([^:]+):/);\n          const name = nameMatch ? nameMatch[1].trim() : \"未知行业\";\n          return {\n            name: name,\n            value: item.value,\n            unit: item.unit || \"%\",\n            raw: item.raw\n          };\n        });\n      }\n\n      // 其他数据格式处理...\n      if (typeof props.field === \"object\" && !Array.isArray(props.field)) {\n        return Object.entries(props.field).map(_ref2 => {\n          let [name, value] = _ref2;\n          return {\n            name: name,\n            value: parseFloat(value) || 0,\n            unit: \"%\",\n            raw: `${name}: ${value}`\n          };\n        }).filter(item => !isNaN(item.value));\n      }\n      return [];\n    });\n    const visualizationType = computed(() => {\n      if (props.visualization) return props.visualization;\n      if (props.fieldKey === \"Labor force by occupation\") {\n        return \"pie-chart\";\n      }\n      if (isTimeSeriesData.value) return \"line-chart\";\n      if (isComparisonData.value) return \"bar-chart\";\n      if (isSinglePercentage.value) return \"pie-chart\";\n      return \"text-only\";\n    });\n    const isTimeSeriesData = computed(() => {\n      return processedArray.value.some(item => item.year) && processedArray.value.length >= 2;\n    });\n    const isComparisonData = computed(() => {\n      return processedArray.value.every(item => typeof item.value === \"number\");\n    });\n    const isSinglePercentage = computed(() => {\n      return props.type === \"percentage\" && processedArray.value.length === 1;\n    });\n    const hasData = computed(() => {\n      if (!props.field) return false;\n      if (Array.isArray(props.field)) return processedArray.value.length > 0;\n      return props.field.value !== undefined;\n    });\n    const isArray = computed(() => Array.isArray(props.field));\n    const formatTextValue = item => {\n      if (!item) return \"-\";\n      if (item.raw) return item.raw;\n      if (item.value) return `${item.value}${item.unit || \"\"}`;\n      return \"-\";\n    };\n    const drawPieChart = () => {\n      const container = pieChart.value;\n      if (!container || processedArray.value.length === 0) return;\n      container.innerHTML = \"\";\n      const width = container.clientWidth;\n      const height = container.clientHeight;\n      const radius = Math.min(width, height) / 2 - 10;\n      const labelRadius = radius * 0.7;\n      const svg = d3.select(container).append(\"svg\").attr(\"width\", width).attr(\"height\", height).append(\"g\").attr(\"transform\", `translate(${width / 2},${height / 2})`);\n      const color = d3.scaleOrdinal().domain(processedArray.value.map(d => d.name)).range(d3.schemeCategory10);\n      const pie = d3.pie().value(d => d.value).sort(null);\n      const arc = d3.arc().innerRadius(0).outerRadius(radius);\n      const labelArc = d3.arc().innerRadius(labelRadius).outerRadius(labelRadius);\n      const arcs = svg.selectAll(\".arc\").data(pie(processedArray.value)).enter().append(\"g\").attr(\"class\", \"arc\");\n\n      // 绘制扇形\n      arcs.append(\"path\").attr(\"d\", arc).attr(\"fill\", d => color(d.data.name)).attr(\"stroke\", \"white\").attr(\"stroke-width\", 1).on(\"mouseover\", function (event, d) {\n        d3.select(this).attr(\"opacity\", 0.8);\n        tooltip.style(\"visibility\", \"visible\").html(`${d.data.name}<br>${d.data.value}${d.data.unit}`);\n      }).on(\"mousemove\", function (event) {\n        tooltip.style(\"top\", event.pageY - 10 + \"px\").style(\"left\", event.pageX + 10 + \"px\");\n      }).on(\"mouseout\", function () {\n        d3.select(this).attr(\"opacity\", 1);\n        tooltip.style(\"visibility\", \"hidden\");\n      });\n\n      // 添加标签\n      arcs.append(\"text\").attr(\"transform\", d => `translate(${labelArc.centroid(d)})`).attr(\"text-anchor\", \"middle\").text(d => `${d.data.value}${d.data.unit}`).style(\"font-size\", \"12px\").style(\"font-weight\", \"bold\").style(\"fill\", \"white\");\n\n      // 添加图例\n      const legend = svg.selectAll(\".legend\").data(processedArray.value).enter().append(\"g\").attr(\"class\", \"legend\").attr(\"transform\", (d, i) => `translate(${radius + 20},${i * 20 - radius / 2})`);\n      legend.append(\"rect\").attr(\"width\", 18).attr(\"height\", 18).attr(\"fill\", d => color(d.name));\n      legend.append(\"text\").attr(\"x\", 24).attr(\"y\", 9).attr(\"dy\", \".35em\").text(d => d.name).style(\"font-size\", \"12px\");\n\n      // 添加年份信息\n      const yearItem = Array.isArray(props.field) ? props.field.find(item => item.raw && /\\(.*\\d{4}.*\\)/.test(item.raw)) : null;\n      if (yearItem) {\n        svg.append(\"text\").attr(\"y\", radius + 20).attr(\"text-anchor\", \"middle\").text(yearItem.raw).style(\"font-size\", \"10px\").style(\"fill\", \"#666\");\n      }\n\n      // 添加悬浮提示框\n      const tooltip = d3.select(container).append(\"div\").attr(\"class\", \"tooltip\").style(\"position\", \"absolute\").style(\"visibility\", \"hidden\").style(\"background\", \"rgba(0,0,0,0.7)\").style(\"color\", \"white\").style(\"padding\", \"5px 10px\").style(\"border-radius\", \"4px\").style(\"font-size\", \"12px\");\n    };\n\n    // ...其他图表绘制方法保持不变...\n\n    watch(() => [props.field, visualizationType.value], () => {\n      nextTick(() => {\n        if (!hasData.value) return;\n        switch (visualizationType.value) {\n          case \"pie-chart\":\n            drawPieChart();\n            break;\n          case \"line-chart\":\n            drawLineChart();\n            break;\n          case \"bar-chart\":\n            drawBarChart();\n            break;\n        }\n      });\n    }, {\n      immediate: true,\n      deep: true\n    });\n    const __returned__ = {\n      props,\n      pieChart,\n      barChart,\n      lineChart,\n      processedArray,\n      visualizationType,\n      isTimeSeriesData,\n      isComparisonData,\n      isSinglePercentage,\n      hasData,\n      isArray,\n      formatTextValue,\n      drawPieChart,\n      ref,\n      computed,\n      onMounted,\n      watch,\n      nextTick,\n      get d3() {\n        return d3;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","watch","nextTick","d3","props","__props","pieChart","barChart","lineChart","processedArray","field","Array","isArray","filter","item","value","map","rawText","raw","nameMatch","match","name","trim","unit","Object","entries","_ref2","parseFloat","isNaN","visualizationType","visualization","fieldKey","isTimeSeriesData","isComparisonData","isSinglePercentage","some","year","length","every","type","hasData","undefined","formatTextValue","drawPieChart","container","innerHTML","width","clientWidth","height","clientHeight","radius","Math","min","labelRadius","svg","select","append","attr","color","scaleOrdinal","domain","d","range","schemeCategory10","pie","sort","arc","innerRadius","outerRadius","labelArc","arcs","selectAll","data","enter","on","event","tooltip","style","html","pageY","pageX","centroid","text","legend","i","yearItem","find","test","drawLineChart","drawBarChart","immediate","deep"],"sources":["D:/vue_frame/vue_frame/wikitable-vue/client/src/components/compoents_base/FieldVisualization.vue"],"sourcesContent":["<template>\r\n\t<div class=\"field-visualization\">\r\n\t\t<template v-if=\"hasData\">\r\n\t\t\t<div\r\n\t\t\t\tv-if=\"visualizationType === 'pie-chart'\"\r\n\t\t\t\tclass=\"chart-container pie-chart\"\r\n\t\t\t\tref=\"pieChart\"></div>\r\n\r\n\t\t\t<div\r\n\t\t\t\tv-if=\"visualizationType === 'line-chart'\"\r\n\t\t\t\tclass=\"chart-container line-chart\"\r\n\t\t\t\tref=\"lineChart\"></div>\r\n\r\n\t\t\t<div\r\n\t\t\t\tv-if=\"visualizationType === 'bar-chart'\"\r\n\t\t\t\tclass=\"chart-container bar-chart\"\r\n\t\t\t\tref=\"barChart\"></div>\r\n\r\n\t\t\t<div v-if=\"visualizationType === 'text-only'\" class=\"text-display\">\r\n\t\t\t\t<template v-if=\"isArray\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tv-for=\"(item, index) in processedArray\"\r\n\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\tclass=\"text-item\">\r\n\t\t\t\t\t\t{{ formatTextValue(item) }}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-else>\r\n\t\t\t\t\t{{ formatTextValue(field) }}\r\n\t\t\t\t</template>\r\n\t\t\t</div>\r\n\t\t</template>\r\n\t\t<div v-else class=\"no-data\">无数据</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ref, computed, onMounted, watch, nextTick } from \"vue\";\r\n\timport * as d3 from \"d3\";\r\n\r\n\tconst props = defineProps({\r\n\t\tfield: [Object, Array, String, Number],\r\n\t\ttype: String,\r\n\t\tvisualization: String,\r\n\t\tfieldKey: String,\r\n\t\tyRange: Array,\r\n\t\tcompareData: [Object, Array]\r\n\t});\r\n\r\n\tconst pieChart = ref(null);\r\n\tconst barChart = ref(null);\r\n\tconst lineChart = ref(null);\r\n\r\n\tconst processedArray = computed(() => {\r\n\t\tif (!props.field) return [];\r\n\r\n\t\t// 处理劳动力分布数据格式\r\n\t\tif (Array.isArray(props.field)) {\r\n\t\t\treturn props.field\r\n\t\t\t\t.filter(item => item.value && typeof item.value === \"number\")\r\n\t\t\t\t.map(item => {\r\n\t\t\t\t\tconst rawText = item.raw || \"\";\r\n\t\t\t\t\tconst nameMatch = rawText.match(/^([^:]+):/);\r\n\t\t\t\t\tconst name = nameMatch ? nameMatch[1].trim() : \"未知行业\";\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tname: name,\r\n\t\t\t\t\t\tvalue: item.value,\r\n\t\t\t\t\t\tunit: item.unit || \"%\",\r\n\t\t\t\t\t\traw: item.raw\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t// 其他数据格式处理...\r\n\t\tif (typeof props.field === \"object\" && !Array.isArray(props.field)) {\r\n\t\t\treturn Object.entries(props.field)\r\n\t\t\t\t.map(([name, value]) => ({\r\n\t\t\t\t\tname: name,\r\n\t\t\t\t\tvalue: parseFloat(value) || 0,\r\n\t\t\t\t\tunit: \"%\",\r\n\t\t\t\t\traw: `${name}: ${value}`\r\n\t\t\t\t}))\r\n\t\t\t\t.filter(item => !isNaN(item.value));\r\n\t\t}\r\n\r\n\t\treturn [];\r\n\t});\r\n\r\n\tconst visualizationType = computed(() => {\r\n\t\tif (props.visualization) return props.visualization;\r\n\r\n\t\tif (props.fieldKey === \"Labor force by occupation\") {\r\n\t\t\treturn \"pie-chart\";\r\n\t\t}\r\n\r\n\t\tif (isTimeSeriesData.value) return \"line-chart\";\r\n\t\tif (isComparisonData.value) return \"bar-chart\";\r\n\t\tif (isSinglePercentage.value) return \"pie-chart\";\r\n\r\n\t\treturn \"text-only\";\r\n\t});\r\n\r\n\tconst isTimeSeriesData = computed(() => {\r\n\t\treturn (\r\n\t\t\tprocessedArray.value.some(item => item.year) &&\r\n\t\t\tprocessedArray.value.length >= 2\r\n\t\t);\r\n\t});\r\n\r\n\tconst isComparisonData = computed(() => {\r\n\t\treturn processedArray.value.every(item => typeof item.value === \"number\");\r\n\t});\r\n\r\n\tconst isSinglePercentage = computed(() => {\r\n\t\treturn props.type === \"percentage\" && processedArray.value.length === 1;\r\n\t});\r\n\r\n\tconst hasData = computed(() => {\r\n\t\tif (!props.field) return false;\r\n\t\tif (Array.isArray(props.field)) return processedArray.value.length > 0;\r\n\t\treturn props.field.value !== undefined;\r\n\t});\r\n\r\n\tconst isArray = computed(() => Array.isArray(props.field));\r\n\r\n\tconst formatTextValue = item => {\r\n\t\tif (!item) return \"-\";\r\n\t\tif (item.raw) return item.raw;\r\n\t\tif (item.value) return `${item.value}${item.unit || \"\"}`;\r\n\t\treturn \"-\";\r\n\t};\r\n\r\n\tconst drawPieChart = () => {\r\n\t\tconst container = pieChart.value;\r\n\t\tif (!container || processedArray.value.length === 0) return;\r\n\r\n\t\tcontainer.innerHTML = \"\";\r\n\r\n\t\tconst width = container.clientWidth;\r\n\t\tconst height = container.clientHeight;\r\n\t\tconst radius = Math.min(width, height) / 2 - 10;\r\n\t\tconst labelRadius = radius * 0.7;\r\n\r\n\t\tconst svg = d3\r\n\t\t\t.select(container)\r\n\t\t\t.append(\"svg\")\r\n\t\t\t.attr(\"width\", width)\r\n\t\t\t.attr(\"height\", height)\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"transform\", `translate(${width / 2},${height / 2})`);\r\n\r\n\t\tconst color = d3\r\n\t\t\t.scaleOrdinal()\r\n\t\t\t.domain(processedArray.value.map(d => d.name))\r\n\t\t\t.range(d3.schemeCategory10);\r\n\r\n\t\tconst pie = d3\r\n\t\t\t.pie()\r\n\t\t\t.value(d => d.value)\r\n\t\t\t.sort(null);\r\n\r\n\t\tconst arc = d3.arc().innerRadius(0).outerRadius(radius);\r\n\r\n\t\tconst labelArc = d3.arc().innerRadius(labelRadius).outerRadius(labelRadius);\r\n\r\n\t\tconst arcs = svg\r\n\t\t\t.selectAll(\".arc\")\r\n\t\t\t.data(pie(processedArray.value))\r\n\t\t\t.enter()\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"class\", \"arc\");\r\n\r\n\t\t// 绘制扇形\r\n\t\tarcs\r\n\t\t\t.append(\"path\")\r\n\t\t\t.attr(\"d\", arc)\r\n\t\t\t.attr(\"fill\", d => color(d.data.name))\r\n\t\t\t.attr(\"stroke\", \"white\")\r\n\t\t\t.attr(\"stroke-width\", 1)\r\n\t\t\t.on(\"mouseover\", function (event, d) {\r\n\t\t\t\td3.select(this).attr(\"opacity\", 0.8);\r\n\t\t\t\ttooltip\r\n\t\t\t\t\t.style(\"visibility\", \"visible\")\r\n\t\t\t\t\t.html(`${d.data.name}<br>${d.data.value}${d.data.unit}`);\r\n\t\t\t})\r\n\t\t\t.on(\"mousemove\", function (event) {\r\n\t\t\t\ttooltip\r\n\t\t\t\t\t.style(\"top\", event.pageY - 10 + \"px\")\r\n\t\t\t\t\t.style(\"left\", event.pageX + 10 + \"px\");\r\n\t\t\t})\r\n\t\t\t.on(\"mouseout\", function () {\r\n\t\t\t\td3.select(this).attr(\"opacity\", 1);\r\n\t\t\t\ttooltip.style(\"visibility\", \"hidden\");\r\n\t\t\t});\r\n\r\n\t\t// 添加标签\r\n\t\tarcs\r\n\t\t\t.append(\"text\")\r\n\t\t\t.attr(\"transform\", d => `translate(${labelArc.centroid(d)})`)\r\n\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t.text(d => `${d.data.value}${d.data.unit}`)\r\n\t\t\t.style(\"font-size\", \"12px\")\r\n\t\t\t.style(\"font-weight\", \"bold\")\r\n\t\t\t.style(\"fill\", \"white\");\r\n\r\n\t\t// 添加图例\r\n\t\tconst legend = svg\r\n\t\t\t.selectAll(\".legend\")\r\n\t\t\t.data(processedArray.value)\r\n\t\t\t.enter()\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"class\", \"legend\")\r\n\t\t\t.attr(\r\n\t\t\t\t\"transform\",\r\n\t\t\t\t(d, i) => `translate(${radius + 20},${i * 20 - radius / 2})`\r\n\t\t\t);\r\n\r\n\t\tlegend\r\n\t\t\t.append(\"rect\")\r\n\t\t\t.attr(\"width\", 18)\r\n\t\t\t.attr(\"height\", 18)\r\n\t\t\t.attr(\"fill\", d => color(d.name));\r\n\r\n\t\tlegend\r\n\t\t\t.append(\"text\")\r\n\t\t\t.attr(\"x\", 24)\r\n\t\t\t.attr(\"y\", 9)\r\n\t\t\t.attr(\"dy\", \".35em\")\r\n\t\t\t.text(d => d.name)\r\n\t\t\t.style(\"font-size\", \"12px\");\r\n\r\n\t\t// 添加年份信息\r\n\t\tconst yearItem = Array.isArray(props.field)\r\n\t\t\t? props.field.find(item => item.raw && /\\(.*\\d{4}.*\\)/.test(item.raw))\r\n\t\t\t: null;\r\n\r\n\t\tif (yearItem) {\r\n\t\t\tsvg\r\n\t\t\t\t.append(\"text\")\r\n\t\t\t\t.attr(\"y\", radius + 20)\r\n\t\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t\t.text(yearItem.raw)\r\n\t\t\t\t.style(\"font-size\", \"10px\")\r\n\t\t\t\t.style(\"fill\", \"#666\");\r\n\t\t}\r\n\r\n\t\t// 添加悬浮提示框\r\n\t\tconst tooltip = d3\r\n\t\t\t.select(container)\r\n\t\t\t.append(\"div\")\r\n\t\t\t.attr(\"class\", \"tooltip\")\r\n\t\t\t.style(\"position\", \"absolute\")\r\n\t\t\t.style(\"visibility\", \"hidden\")\r\n\t\t\t.style(\"background\", \"rgba(0,0,0,0.7)\")\r\n\t\t\t.style(\"color\", \"white\")\r\n\t\t\t.style(\"padding\", \"5px 10px\")\r\n\t\t\t.style(\"border-radius\", \"4px\")\r\n\t\t\t.style(\"font-size\", \"12px\");\r\n\t};\r\n\r\n\t// ...其他图表绘制方法保持不变...\r\n\r\n\twatch(\r\n\t\t() => [props.field, visualizationType.value],\r\n\t\t() => {\r\n\t\t\tnextTick(() => {\r\n\t\t\t\tif (!hasData.value) return;\r\n\r\n\t\t\t\tswitch (visualizationType.value) {\r\n\t\t\t\t\tcase \"pie-chart\":\r\n\t\t\t\t\t\tdrawPieChart();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"line-chart\":\r\n\t\t\t\t\t\tdrawLineChart();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"bar-chart\":\r\n\t\t\t\t\t\tdrawBarChart();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t{ immediate: true, deep: true }\r\n\t);\r\n</script>\r\n\r\n<style scoped>\r\n\t.field-visualization {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tmin-height: 120px;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.chart-container {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.text-display {\r\n\t\tpadding: 8px;\r\n\t\ttext-align: center;\r\n\t\tfont-size: 14px;\r\n\t\tline-height: 1.5;\r\n\t}\r\n\r\n\t.text-item {\r\n\t\tmargin: 4px 0;\r\n\t}\r\n\r\n\t.no-data {\r\n\t\tposition: absolute;\r\n\t\ttop: 50%;\r\n\t\tleft: 50%;\r\n\t\ttransform: translate(-50%, -50%);\r\n\t\tcolor: #999;\r\n\t}\r\n</style>\r\n\r\n<style>\r\n\t/* 全局工具提示样式 */\r\n\t.tooltip {\r\n\t\tposition: absolute;\r\n\t\tz-index: 100;\r\n\t\tpointer-events: none;\r\n\t\ttransition: all 0.2s ease;\r\n\t}\r\n\r\n\t.pie-chart .legend {\r\n\t\tfont-size: 12px;\r\n\t\tfont-family: Arial, sans-serif;\r\n\t}\r\n\r\n\t.pie-chart .legend rect {\r\n\t\tstroke: #fff;\r\n\t\tstroke-width: 1px;\r\n\t}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}