{"ast":null,"code":"import { createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-6b90eab0\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  key: 0,\n  class: \"overlay\"\n};\nconst _hoisted_2 = {\n  class: \"text-popup\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"popup-header\"\n}, [/*#__PURE__*/_createElementVNode(\"h3\", null, \"选中的内容\")], -1 /* HOISTED */));\nconst _hoisted_4 = [\"innerHTML\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return $props.visible ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"button\", {\n    class: \"close-button\",\n    onClick: $setup.close\n  }, \"×\"), _hoisted_3, _createElementVNode(\"div\", {\n    class: \"popup-content\",\n    innerHTML: $props.content\n  }, null, 8 /* PROPS */, _hoisted_4), _createElementVNode(\"div\", {\n    class: _normalizeClass($props.containerClass)\n  }, null, 2 /* CLASS */)])])) : _createCommentVNode(\"v-if\", true);\n}","map":{"version":3,"names":["key","class","_createElementVNode","$props","visible","_createElementBlock","_hoisted_1","_hoisted_2","onClick","$setup","close","_hoisted_3","innerHTML","content","_hoisted_4","_normalizeClass","containerClass","_createCommentVNode"],"sources":["D:\\vue_frame\\vue_frame\\wikitable-vue\\client\\src\\components\\compoents_base\\TextPopup.vue"],"sourcesContent":["<template>\r\n\t<div v-if=\"visible\" class=\"overlay\">\r\n\t\t<div class=\"text-popup\">\r\n\t\t\t<button class=\"close-button\" @click=\"close\">×</button>\r\n\t\t\t<div class=\"popup-header\">\r\n\t\t\t\t<h3>选中的内容</h3>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"popup-content\" v-html=\"content\"></div>\r\n\t\t\t<div :class=\"containerClass\"></div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { onMounted, onUnmounted } from \"vue\";\r\n\timport bus from \"@/js/eventBus.js\";\r\n\timport * as d3 from \"d3\";\r\n\r\n\tconst props = defineProps({\r\n\t\tvisible: Boolean,\r\n\t\tcontent: String,\r\n\t\tcontainerClass: String,\r\n\t\tcontainerRef: Object\r\n\t});\r\n\r\n\tconst emit = defineEmits([\"close\"]);\r\n\r\n\tconst close = () => {\r\n\t\temit(\"close\");\r\n\t};\r\n\r\n\t// 监听infobox字段点击事件\r\n\tonMounted(() => {\r\n\t\tbus.on(\"fieldClicked\", fieldKey => {\r\n\t\t\thighlightField(fieldKey);\r\n\t\t});\r\n\t});\r\n\r\n\tconst highlightField = fieldKey => {\r\n\t\tconst contentElement = document.querySelector(\".popup-content\");\r\n\t\tif (!contentElement) return;\r\n\r\n\t\t// 移除旧的高亮\r\n\t\tconst previous = contentElement.querySelectorAll(\".highlighted\");\r\n\t\tprevious.forEach(el => el.classList.remove(\"highlighted\"));\r\n\r\n\t\t// 查找匹配的字段\r\n\t\tconst elements = contentElement.querySelectorAll(\"th, td\");\r\n\t\telements.forEach(el => {\r\n\t\t\tif (el.textContent.toLowerCase().includes(fieldKey.toLowerCase())) {\r\n\t\t\t\tel.classList.add(\"highlighted\");\r\n\t\t\t\tel.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tonUnmounted(() => {\r\n\t\tbus.off(\"fieldClicked\");\r\n\t});\r\n</script>\r\n\r\n<style scoped>\r\n\t.overlay {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground-color: rgba(0, 0, 0, 0.5);\r\n\t\tz-index: 100;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.text-popup {\r\n\t\tposition: relative;\r\n\t\twidth: 80%;\r\n\t\tmax-width: 800px;\r\n\t\tmax-height: 80vh;\r\n\t\tbackground-color: white;\r\n\t\tborder-radius: 8px;\r\n\t\tpadding: 20px;\r\n\t\tbox-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\r\n\t\toverflow: auto;\r\n\t}\r\n\r\n\t.close-button {\r\n\t\tposition: absolute;\r\n\t\ttop: 10px;\r\n\t\tright: 10px;\r\n\t\tbackground: none;\r\n\t\tborder: none;\r\n\t\tfont-size: 24px;\r\n\t\tcursor: pointer;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.popup-header {\r\n\t\tmargin-bottom: 15px;\r\n\t\tpadding-bottom: 10px;\r\n\t\tborder-bottom: 1px solid #eee;\r\n\t}\r\n\r\n\t.popup-content {\r\n\t\tmargin-bottom: 20px;\r\n\t\tmax-height: 300px;\r\n\t\toverflow-y: auto;\r\n\t\tborder: 1px solid #eee;\r\n\t\tpadding: 10px;\r\n\t}\r\n\r\n\t.highlighted {\r\n\t\tbackground-color: #fffacd;\r\n\t\ttransition: background-color 0.3s ease;\r\n\t}\r\n</style>\r\n"],"mappings":";;;EAAAA,GAAA;EACqBC,KAAK,EAAC;;;EACpBA,KAAK,EAAC;AAAY;gEAEtBC,mBAAA,CAEM;EAFDD,KAAK,EAAC;AAAc,I,aACxBC,mBAAA,CAAc,YAAV,OAAK,E;mBALb;;SACYC,MAAA,CAAAC,OAAO,I,cAAlBC,mBAAA,CASM,OATNC,UASM,GARLJ,mBAAA,CAOM,OAPNK,UAOM,GANLL,mBAAA,CAAsD;IAA9CD,KAAK,EAAC,cAAc;IAAEO,OAAK,EAAEC,MAAA,CAAAC;KAAO,GAAC,GAC7CC,UAEM,EACNT,mBAAA,CAAkD;IAA7CD,KAAK,EAAC,eAAe;IAACW,SAAgB,EAART,MAAA,CAAAU;0BAPtCC,UAAA,GAQGZ,mBAAA,CAAmC;IAA7BD,KAAK,EARdc,eAAA,CAQgBZ,MAAA,CAAAa,cAAc;iCAR9BC,mBAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}