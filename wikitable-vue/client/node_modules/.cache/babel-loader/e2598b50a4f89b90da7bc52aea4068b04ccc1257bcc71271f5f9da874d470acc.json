{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-de7d3a1c\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"wikipedia-container\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"loading-container\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"loading-spinner\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"loading-text\"\n}, \"Loading...\", -1 /* HOISTED */));\nconst _hoisted_5 = [_hoisted_3, _hoisted_4];\nconst _hoisted_6 = {\n  class: \"error-container\"\n};\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"error-icon\"\n}, \"⚠️\", -1 /* HOISTED */));\nconst _hoisted_8 = {\n  class: \"error-message\"\n};\nconst _hoisted_9 = [\"innerHTML\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" 加载动画 \"), $setup.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [..._hoisted_5])) : $setup.error ? (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" 错误信息 \"), _createElementVNode(\"div\", _hoisted_6, [_hoisted_7, _createElementVNode(\"div\", _hoisted_8, _toDisplayString($setup.error), 1 /* TEXT */), _createElementVNode(\"button\", {\n    class: \"retry-button\",\n    onClick: $setup.fetchWikipediaContent\n  }, \"重试\")])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 2\n  }, [_createCommentVNode(\" 文章内容 \"), _createElementVNode(\"div\", {\n    class: \"wikipedia-content\",\n    innerHTML: $setup.pageHtml\n  }, null, 8 /* PROPS */, _hoisted_9)], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))]);\n}","map":{"version":3,"names":["class","key","_createElementVNode","_hoisted_3","_hoisted_4","_createElementBlock","_hoisted_1","_createCommentVNode","$setup","loading","_hoisted_2","_hoisted_5","error","_Fragment","_hoisted_6","_hoisted_7","_hoisted_8","_toDisplayString","onClick","fetchWikipediaContent","innerHTML","pageHtml","_hoisted_9"],"sources":["D:\\vue_frame\\vue_frame\\wikitable-vue\\client\\src\\components\\WikipediaContent.vue"],"sourcesContent":["<template>\r\n\t<div class=\"wikipedia-container\">\r\n\t\t<!-- 加载动画 -->\r\n\t\t<div v-if=\"loading\" class=\"loading-container\">\r\n\t\t\t<div class=\"loading-spinner\"></div>\r\n\t\t\t<div class=\"loading-text\">Loading...</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- 错误信息 -->\r\n\t\t<div v-else-if=\"error\" class=\"error-container\">\r\n\t\t\t<div class=\"error-icon\">⚠️</div>\r\n\t\t\t<div class=\"error-message\">{{ error }}</div>\r\n\t\t\t<button class=\"retry-button\" @click=\"fetchWikipediaContent\">重试</button>\r\n\t\t</div>\r\n\r\n\t\t<!-- 文章内容 -->\r\n\t\t<div v-else class=\"wikipedia-content\" v-html=\"pageHtml\"></div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ref, onMounted } from \"vue\";\r\n\r\n\tconst props = defineProps({\r\n\t\tpageTitle: String // 接收 Wikipedia 文章标题\r\n\t});\r\n\r\n\tconst pageHtml = ref(\"\"); // 文章 HTML 内容\r\n\tconst loading = ref(true); // 加载状态\r\n\tconst error = ref(\"\"); // 错误信息\r\n\r\n\t// **获取 Wikipedia 页面**\r\n\tconst fetchWikipediaContent = async () => {\r\n\t\ttry {\r\n\t\t\tconst apiUrl = `https://en.wikipedia.org/api/rest_v1/page/html/${encodeURIComponent(\r\n\t\t\t\tprops.pageTitle\r\n\t\t\t)}`;\r\n\t\t\tconst response = await fetch(apiUrl);\r\n\t\t\tif (!response.ok) throw new Error(\"Failed to fetch data\");\r\n\r\n\t\t\tconst html = await response.text();\r\n\r\n\t\t\t// 解析 HTML\r\n\t\t\tconst parser = new DOMParser();\r\n\t\t\tconst doc = parser.parseFromString(html, \"text/html\");\r\n\r\n\t\t\t// 仅获取正文部分\r\n\t\t\tconst contentElement = doc.querySelector(\"body\");\r\n\t\t\tif (!contentElement) throw new Error(\"Content not found\");\r\n\r\n\t\t\tpageHtml.value = contentElement.innerHTML;\r\n\r\n\t\t\t// 手动引入 Wikipedia CSS\r\n\t\t\tinjectWikipediaStyles();\r\n\r\n\t\t\t// 触发事件，将内容传递给父组件\r\n\t\t\temit(\"contentLoaded\", pageHtml.value);\r\n\t\t} catch (err) {\r\n\t\t\terror.value = \"Error fetching Wikipedia content: \" + err.message;\r\n\t\t} finally {\r\n\t\t\tloading.value = false;\r\n\t\t}\r\n\t};\r\n\r\n\t// **手动引入 Wikipedia CSS**\r\n\tconst injectWikipediaStyles = () => {\r\n\t\tconst wikipediaStyles = [\r\n\t\t\t\"https://en.wikipedia.org/w/load.php?modules=site.styles\",\r\n\t\t\t\"https://en.wikipedia.org/w/load.php?modules=ext.cite.styles\",\r\n\t\t\t\"https://en.wikipedia.org/w/load.php?modules=ext.scribunto.styles\",\r\n\t\t\t\"https://en.wikipedia.org/w/load.php?modules=skins.vector.styles\"\r\n\t\t];\r\n\r\n\t\twikipediaStyles.forEach(url => {\r\n\t\t\tif (!document.querySelector(`link[href=\"${url}\"]`)) {\r\n\t\t\t\tconst styleTag = document.createElement(\"link\");\r\n\t\t\t\tstyleTag.rel = \"stylesheet\";\r\n\t\t\t\tstyleTag.href = url;\r\n\t\t\t\tdocument.head.appendChild(styleTag);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t// **组件挂载后加载 Wikipedia 内容**\r\n\tonMounted(fetchWikipediaContent);\r\n</script>\r\n\r\n<style scoped>\r\n\t.wikipedia-container {\r\n\t\twidth: 100%;\r\n\t\tmax-width: 800px;\r\n\t\tmargin: 0 auto;\r\n\t\tpadding: 20px;\r\n\t\tbackground: #ffffff;\r\n\t\tbox-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n\t\tborder-radius: 12px;\r\n\t}\r\n\r\n\t.loading-container,\r\n\t.error-container {\r\n\t\ttext-align: center;\r\n\t\tpadding: 20px;\r\n\t}\r\n\r\n\t.loading-spinner {\r\n\t\twidth: 50px;\r\n\t\theight: 50px;\r\n\t\tborder: 5px solid rgba(0, 0, 0, 0.1);\r\n\t\tborder-top: 5px solid #3498db;\r\n\t\tborder-radius: 50%;\r\n\t\tanimation: spin 1s linear infinite;\r\n\t\tmargin: auto;\r\n\t}\r\n\r\n\t@keyframes spin {\r\n\t\t0% {\r\n\t\t\ttransform: rotate(0deg);\r\n\t\t}\r\n\t\t100% {\r\n\t\t\ttransform: rotate(360deg);\r\n\t\t}\r\n\t}\r\n\r\n\t.error-icon {\r\n\t\tfont-size: 24px;\r\n\t\tcolor: red;\r\n\t}\r\n\r\n\t.wikipedia-content {\r\n\t\tmax-width: 100%;\r\n\t\tpadding: 20px;\r\n\t\tfont-size: 0.9rem;\r\n\t\tline-height: 1.6;\r\n\t}\r\n</style>\r\n"],"mappings":";;;EACMA,KAAK,EAAC;AAAqB;;EADjCC,GAAA;EAGsBD,KAAK,EAAC;;gEACzBE,mBAAA,CAAmC;EAA9BF,KAAK,EAAC;AAAiB;gEAC5BE,mBAAA,CAA0C;EAArCF,KAAK,EAAC;AAAc,GAAC,YAAU;oBADpCG,UAAmC,EACnCC,UAA0C,C;;EAIpBJ,KAAK,EAAC;AAAiB;gEAC7CE,mBAAA,CAAgC;EAA3BF,KAAK,EAAC;AAAY,GAAC,IAAE;;EACrBA,KAAK,EAAC;AAAe;mBAX7B;;uBACCK,mBAAA,CAgBM,OAhBNC,UAgBM,GAfLC,mBAAA,UAAa,EACFC,MAAA,CAAAC,OAAO,I,cAAlBJ,mBAAA,CAGM,OAHNK,UAGM,EANR,IAAAC,UAAA,MASkBH,MAAA,CAAAI,KAAK,I,cAArBP,mBAAA,CAIMQ,SAAA;IAbRZ,GAAA;EAAA,IAQEM,mBAAA,UAAa,EACbL,mBAAA,CAIM,OAJNY,UAIM,GAHLC,UAAgC,EAChCb,mBAAA,CAA4C,OAA5Cc,UAA4C,EAAAC,gBAAA,CAAdT,MAAA,CAAAI,KAAK,kBACnCV,mBAAA,CAAuE;IAA/DF,KAAK,EAAC,cAAc;IAAEkB,OAAK,EAAEV,MAAA,CAAAW;KAAuB,IAAE,E,qEAI/Dd,mBAAA,CAA8DQ,SAAA;IAhBhEZ,GAAA;EAAA,IAeEM,mBAAA,UAAa,EACbL,mBAAA,CAA8D;IAAlDF,KAAK,EAAC,mBAAmB;IAACoB,SAAiB,EAATZ,MAAA,CAAAa;0BAhBhDC,UAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}