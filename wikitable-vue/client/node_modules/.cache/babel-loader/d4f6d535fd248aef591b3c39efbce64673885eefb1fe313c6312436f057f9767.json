{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nconst HighlightText = {\n  // 高亮选中的文字（支持跨节点）\n  highlightSelection() {\n    let highlightColor = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'yellow';\n    const selection = window.getSelection();\n    if (!selection.isCollapsed) {\n      const range = selection.getRangeAt(0);\n      const startContainer = range.startContainer;\n      const endContainer = range.endContainer;\n\n      // 遍历选区中的所有文本节点\n      const textNodes = [];\n      let node = startContainer;\n      while (node) {\n        if (node.nodeType === Node.TEXT_NODE) {\n          textNodes.push(node);\n        }\n\n        // 如果当前节点是结束节点，停止遍历\n        if (node === endContainer) break;\n\n        // 移动到下一个节点\n        node = this.getNextNode(node);\n      }\n\n      // 对每个文本节点进行高亮处理\n      textNodes.forEach(textNode => {\n        const span = document.createElement('span');\n        span.style.backgroundColor = highlightColor; // 设置高亮样式\n        const parent = textNode.parentNode;\n        parent.replaceChild(span, textNode);\n        span.appendChild(textNode);\n      });\n      selection.removeAllRanges(); // 清除选区\n    }\n  },\n  // 获取下一个节点\n  getNextNode(node) {\n    if (node.firstChild) return node.firstChild;\n    while (node) {\n      if (node.nextSibling) return node.nextSibling;\n      node = node.parentNode;\n    }\n    return null;\n  }\n};\nexport default HighlightText;","map":{"version":3,"names":["HighlightText","highlightSelection","highlightColor","arguments","length","undefined","selection","window","getSelection","isCollapsed","range","getRangeAt","startContainer","endContainer","textNodes","node","nodeType","Node","TEXT_NODE","push","getNextNode","forEach","textNode","span","document","createElement","style","backgroundColor","parent","parentNode","replaceChild","appendChild","removeAllRanges","firstChild","nextSibling"],"sources":["D:/vue_frame/vue_frame/wikitable-vue/client/src/js/highlight.js"],"sourcesContent":["const HighlightText = {\r\n  // 高亮选中的文字（支持跨节点）\r\n  highlightSelection(highlightColor = 'yellow') {\r\n    const selection = window.getSelection();\r\n    if (!selection.isCollapsed) {\r\n      const range = selection.getRangeAt(0);\r\n      const startContainer = range.startContainer;\r\n      const endContainer = range.endContainer;\r\n\r\n      // 遍历选区中的所有文本节点\r\n      const textNodes = [];\r\n      let node = startContainer;\r\n\r\n      while (node) {\r\n        if (node.nodeType === Node.TEXT_NODE) {\r\n          textNodes.push(node);\r\n        }\r\n\r\n        // 如果当前节点是结束节点，停止遍历\r\n        if (node === endContainer) break;\r\n\r\n        // 移动到下一个节点\r\n        node = this.getNextNode(node);\r\n      }\r\n\r\n      // 对每个文本节点进行高亮处理\r\n      textNodes.forEach((textNode) => {\r\n        const span = document.createElement('span');\r\n        span.style.backgroundColor = highlightColor; // 设置高亮样式\r\n        const parent = textNode.parentNode;\r\n        parent.replaceChild(span, textNode);\r\n        span.appendChild(textNode);\r\n      });\r\n\r\n      selection.removeAllRanges(); // 清除选区\r\n    }\r\n  },\r\n\r\n  // 获取下一个节点\r\n  getNextNode(node) {\r\n    if (node.firstChild) return node.firstChild;\r\n    while (node) {\r\n      if (node.nextSibling) return node.nextSibling;\r\n      node = node.parentNode;\r\n    }\r\n    return null;\r\n  }\r\n};\r\n\r\nexport default HighlightText;\r\n"],"mappings":";AAAA,MAAMA,aAAa,GAAG;EACpB;EACAC,kBAAkBA,CAAA,EAA4B;IAAA,IAA3BC,cAAc,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,QAAQ;IAC1C,MAAMG,SAAS,GAAGC,MAAM,CAACC,YAAY,CAAC,CAAC;IACvC,IAAI,CAACF,SAAS,CAACG,WAAW,EAAE;MAC1B,MAAMC,KAAK,GAAGJ,SAAS,CAACK,UAAU,CAAC,CAAC,CAAC;MACrC,MAAMC,cAAc,GAAGF,KAAK,CAACE,cAAc;MAC3C,MAAMC,YAAY,GAAGH,KAAK,CAACG,YAAY;;MAEvC;MACA,MAAMC,SAAS,GAAG,EAAE;MACpB,IAAIC,IAAI,GAAGH,cAAc;MAEzB,OAAOG,IAAI,EAAE;QACX,IAAIA,IAAI,CAACC,QAAQ,KAAKC,IAAI,CAACC,SAAS,EAAE;UACpCJ,SAAS,CAACK,IAAI,CAACJ,IAAI,CAAC;QACtB;;QAEA;QACA,IAAIA,IAAI,KAAKF,YAAY,EAAE;;QAE3B;QACAE,IAAI,GAAG,IAAI,CAACK,WAAW,CAACL,IAAI,CAAC;MAC/B;;MAEA;MACAD,SAAS,CAACO,OAAO,CAAEC,QAAQ,IAAK;QAC9B,MAAMC,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;QAC3CF,IAAI,CAACG,KAAK,CAACC,eAAe,GAAGzB,cAAc,CAAC,CAAC;QAC7C,MAAM0B,MAAM,GAAGN,QAAQ,CAACO,UAAU;QAClCD,MAAM,CAACE,YAAY,CAACP,IAAI,EAAED,QAAQ,CAAC;QACnCC,IAAI,CAACQ,WAAW,CAACT,QAAQ,CAAC;MAC5B,CAAC,CAAC;MAEFhB,SAAS,CAAC0B,eAAe,CAAC,CAAC,CAAC,CAAC;IAC/B;EACF,CAAC;EAED;EACAZ,WAAWA,CAACL,IAAI,EAAE;IAChB,IAAIA,IAAI,CAACkB,UAAU,EAAE,OAAOlB,IAAI,CAACkB,UAAU;IAC3C,OAAOlB,IAAI,EAAE;MACX,IAAIA,IAAI,CAACmB,WAAW,EAAE,OAAOnB,IAAI,CAACmB,WAAW;MAC7CnB,IAAI,GAAGA,IAAI,CAACc,UAAU;IACxB;IACA,OAAO,IAAI;EACb;AACF,CAAC;AAED,eAAe7B,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}