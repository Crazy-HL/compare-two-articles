{"ast":null,"code":"import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveDynamicComponent as _resolveDynamicComponent, mergeProps as _mergeProps, withCtx as _withCtx, createBlock as _createBlock, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, createVNode as _createVNode, vModelText as _vModelText, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-2e821d1e\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"main-container\"\n};\nconst _hoisted_2 = {\n  class: \"chat-container\"\n};\nconst _hoisted_3 = {\n  class: \"chat-history\"\n};\nconst _hoisted_4 = [\"innerHTML\"];\nconst _hoisted_5 = {\n  key: 0,\n  class: \"loading-indicator\"\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"loading-spinner\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_7 = {\n  key: 1,\n  class: \"suggested-question\"\n};\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"suggestion-text\"\n}, \"建议深入分析的问题：\", -1 /* HOISTED */));\nconst _hoisted_9 = {\n  class: \"vis-container\"\n};\nconst _hoisted_10 = {\n  class: \"input-area\"\n};\nconst _hoisted_11 = {\n  class: \"input-container\"\n};\nconst _hoisted_12 = [\"disabled\"];\nconst _hoisted_13 = {\n  class: \"button-container\"\n};\nconst _hoisted_14 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.chatHistory, (message, index) => {\n    return _openBlock(), _createBlock(_resolveDynamicComponent(message.isCausalFlow ? $setup.CausalFlowChart : 'div'), _mergeProps({\n      key: index,\n      class: ['message', message.role, {\n        error: message.error\n      }],\n      chains: message.causalChains,\n      ref_for: true\n    }, message.isCausalFlow ? {\n      class: 'causal-flow-container'\n    } : {}), {\n      default: _withCtx(() => [!message.isCausalFlow ? (_openBlock(), _createElementBlock(\"div\", {\n        key: 0,\n        class: \"message-content\",\n        innerHTML: message.content\n      }, null, 8 /* PROPS */, _hoisted_4)) : _createCommentVNode(\"v-if\", true)]),\n      _: 2 /* DYNAMIC */\n    }, 1040 /* FULL_PROPS, DYNAMIC_SLOTS */, [\"class\", \"chains\"]);\n  }), 128 /* KEYED_FRAGMENT */)), $setup.isLoading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_hoisted_6, _createTextVNode(\" 正在处理中... \")])) : _createCommentVNode(\"v-if\", true), $setup.showSuggestedQuestion ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_hoisted_8, _createElementVNode(\"div\", {\n    class: \"suggestion-content\",\n    onClick: $setup.useSuggestedQuestion\n  }, _toDisplayString($setup.suggestedQuestion), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)])]), _createElementVNode(\"div\", _hoisted_9, [_createVNode($setup[\"CompareTable\"], {\n    class: \"compare-table\",\n    \"div1-raw-data\": $setup.div1RawData,\n    \"div3-raw-data\": $setup.div3RawData,\n    onCompareAttribute: $setup.handleAttributeComparison\n  }, null, 8 /* PROPS */, [\"div1-raw-data\", \"div3-raw-data\"])]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"div\", _hoisted_11, [_withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.userQuestion = $event),\n    rows: \"2\",\n    placeholder: \"请输入你想问的问题...\",\n    disabled: $setup.isLoading\n  }, null, 8 /* PROPS */, _hoisted_12), [[_vModelText, $setup.userQuestion]]), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"button\", {\n    onClick: $setup.askQuestion,\n    disabled: $setup.isLoading\n  }, _toDisplayString($setup.isLoading ? \"处理中...\" : \"发送\"), 9 /* TEXT, PROPS */, _hoisted_14)])])])]);\n}","map":{"version":3,"names":["class","key","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_Fragment","_renderList","$setup","chatHistory","message","index","_createBlock","_resolveDynamicComponent","isCausalFlow","CausalFlowChart","_mergeProps","role","error","chains","causalChains","ref_for","default","_withCtx","innerHTML","content","_hoisted_4","_createCommentVNode","_","isLoading","_hoisted_5","_hoisted_6","_createTextVNode","showSuggestedQuestion","_hoisted_7","_hoisted_8","onClick","useSuggestedQuestion","suggestedQuestion","_hoisted_9","_createVNode","div1RawData","div3RawData","onCompareAttribute","handleAttributeComparison","_hoisted_10","_hoisted_11","_cache","$event","userQuestion","rows","placeholder","disabled","_hoisted_12","_hoisted_13","askQuestion","_hoisted_14"],"sources":["D:\\vue_frame\\vue_frame\\wikitable-vue\\client\\src\\components\\Div2.vue"],"sourcesContent":["<template>\r\n\t<div class=\"main-container\">\r\n\t\t<div class=\"chat-container\">\r\n\t\t\t<div class=\"chat-history\">\r\n\t\t\t\t<component\r\n\t\t\t\t\tv-for=\"(message, index) in chatHistory\"\r\n\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t:is=\"message.isCausalFlow ? CausalFlowChart : 'div'\"\r\n\t\t\t\t\t:class=\"['message', message.role, { error: message.error }]\"\r\n\t\t\t\t\t:chains=\"message.causalChains\"\r\n\t\t\t\t\tv-bind=\"\r\n\t\t\t\t\t\tmessage.isCausalFlow ? { class: 'causal-flow-container' } : {}\r\n\t\t\t\t\t\">\r\n\t\t\t\t\t<template v-if=\"!message.isCausalFlow\">\r\n\t\t\t\t\t\t<div class=\"message-content\" v-html=\"message.content\"></div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</component>\r\n\t\t\t\t<div v-if=\"isLoading\" class=\"loading-indicator\">\r\n\t\t\t\t\t<div class=\"loading-spinner\"></div>\r\n\t\t\t\t\t正在处理中...\r\n\t\t\t\t</div>\r\n\t\t\t\t<div v-if=\"showSuggestedQuestion\" class=\"suggested-question\">\r\n\t\t\t\t\t<div class=\"suggestion-text\">建议深入分析的问题：</div>\r\n\t\t\t\t\t<div class=\"suggestion-content\" @click=\"useSuggestedQuestion\">\r\n\t\t\t\t\t\t{{ suggestedQuestion }}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"vis-container\">\r\n\t\t\t<CompareTable\r\n\t\t\t\tclass=\"compare-table\"\r\n\t\t\t\t:div1-raw-data=\"div1RawData\"\r\n\t\t\t\t:div3-raw-data=\"div3RawData\"\r\n\t\t\t\t@compareAttribute=\"handleAttributeComparison\" />\r\n\t\t</div>\r\n\t\t<div class=\"input-area\">\r\n\t\t\t<div class=\"input-container\">\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tv-model=\"userQuestion\"\r\n\t\t\t\t\trows=\"2\"\r\n\t\t\t\t\tplaceholder=\"请输入你想问的问题...\"\r\n\t\t\t\t\t:disabled=\"isLoading\"></textarea>\r\n\t\t\t\t<div class=\"button-container\">\r\n\t\t\t\t\t<button @click=\"askQuestion\" :disabled=\"isLoading\">\r\n\t\t\t\t\t\t{{ isLoading ? \"处理中...\" : \"发送\" }}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ref, onMounted, onUnmounted, watch, nextTick } from \"vue\";\r\n\timport bus from \"@/js/eventBus.js\";\r\n\timport CompareTable from \"@/components/compoents_base/CompareTable.vue\";\r\n\timport CausalFlowChart from \"@/components/compoents_base/CausalFlowChart.vue\";\r\n\timport { formatMarkdown } from \"@/utils/markdown\";\r\n\timport { safeApiCall } from \"@/utils/api\";\r\n\r\n\t// 常量定义\r\n\tconst PRESERVED_FIELDS_BY_SECTION = {\r\n\t\tStatistics: [\r\n\t\t\t\"Population\",\r\n\t\t\t\"GDP\",\r\n\t\t\t\"GDP rank\",\r\n\t\t\t\"GDP growth\",\r\n\t\t\t\"GDP per capita\",\r\n\t\t\t\"GDP per capita rank\",\r\n\t\t\t\"GDP by sector\",\r\n\t\t\t\"Inflation (CPI)\",\r\n\t\t\t\"Population below poverty line\",\r\n\t\t\t\"Gini coefficient\",\r\n\t\t\t\"Human Development Index\",\r\n\t\t\t\"Corruption Perceptions Index\",\r\n\t\t\t\"Labor force\",\r\n\t\t\t\"Labor force by occupation\",\r\n\t\t\t\"Unemployment\",\r\n\t\t\t\"Average gross salary\",\r\n\t\t\t\"Average net salary\",\r\n\t\t\t\"Main industries\"\r\n\t\t],\r\n\t\t\"Public finances\": [\r\n\t\t\t\"Government debt\",\r\n\t\t\t\"Foreign reserves\",\r\n\t\t\t\"Budget balance\",\r\n\t\t\t\"Revenues\",\r\n\t\t\t\"Expenses\",\r\n\t\t\t\"Economic aid\",\r\n\t\t\t\"Credit rating\"\r\n\t\t]\r\n\t};\r\n\r\n\t// 响应式状态\r\n\tconst userQuestion = ref(\"\");\r\n\tconst chatHistory = ref([]);\r\n\tconst div1RawData = ref(null);\r\n\tconst div3RawData = ref(null);\r\n\tconst isLoading = ref(false);\r\n\tconst showSuggestedQuestion = ref(false);\r\n\tconst suggestedQuestion = ref(\"\");\r\n\r\n\t// Infobox数据\r\n\tconst infoboxData = ref({\r\n\t\tdiv1: null,\r\n\t\tdiv3: null\r\n\t});\r\n\r\n\t// 对比状态\r\n\tconst comparisonState = ref({\r\n\t\tleftData: null,\r\n\t\trightData: null,\r\n\t\tcurrentFieldKey: \"\",\r\n\t\tleftTitle: \"\",\r\n\t\trightTitle: \"\",\r\n\t\tfieldType: \"\",\r\n\t\tfieldLabel: \"\"\r\n\t});\r\n\r\n\t// 工具方法\r\n\tconst getPlainTextFromSelection = htmlContent => {\r\n\t\tconst container = document.createElement(\"div\");\r\n\t\tcontainer.innerHTML = htmlContent;\r\n\t\treturn container.innerText || container.textContent || \"\";\r\n\t};\r\n\r\n\t// 事件处理\r\n\tconst handleSelectionEvent = (data, source) => {\r\n\t\tconst plainText = getPlainTextFromSelection(data.content);\r\n\t\tconst target = source === \"div1\" ? div1RawData : div3RawData;\r\n\t\ttarget.value = data.content;\r\n\t};\r\n\r\n\tconst updateInfobox = source => data => {\r\n\t\tinfoboxData.value[source] = data;\r\n\t};\r\n\r\n\t// 生命周期\r\n\tonMounted(() => {\r\n\t\tloadChatHistory();\r\n\t\tbus.on(\"div1_Event\", data => handleSelectionEvent(data, \"div1\"));\r\n\t\tbus.on(\"div3_Event\", data => handleSelectionEvent(data, \"div3\"));\r\n\t\tbus.on(\"div1_InfoboxData\", updateInfobox(\"div1\"));\r\n\t\tbus.on(\"div3_InfoboxData\", updateInfobox(\"div3\"));\r\n\t});\r\n\r\n\tonUnmounted(() => {\r\n\t\t[\r\n\t\t\t\"div1_Event\",\r\n\t\t\t\"div3_Event\",\r\n\t\t\t\"div1_InfoboxData\",\r\n\t\t\t\"div3_InfoboxData\"\r\n\t\t].forEach(event => {\r\n\t\t\tbus.off(event);\r\n\t\t});\r\n\t});\r\n\r\n\t// 数据持久化\r\n\tconst loadChatHistory = () => {\r\n\t\tconst saved = localStorage.getItem(\"chatHistory\");\r\n\t\tif (saved) {\r\n\t\t\ttry {\r\n\t\t\t\tchatHistory.value = JSON.parse(saved);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(\"加载聊天记录失败:\", e);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\twatch(\r\n\t\tchatHistory,\r\n\t\tnewVal => {\r\n\t\t\tlocalStorage.setItem(\"chatHistory\", JSON.stringify(newVal));\r\n\t\t},\r\n\t\t{ deep: true }\r\n\t);\r\n\r\n\t// UI交互\r\n\tconst scrollToBottom = () => {\r\n\t\tnextTick(() => {\r\n\t\t\tconst container = document.querySelector(\".chat-history\");\r\n\t\t\tif (container) {\r\n\t\t\t\tcontainer.scrollTop = container.scrollHeight;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tconst useSuggestedQuestion = () => {\r\n\t\tuserQuestion.value = suggestedQuestion.value;\r\n\t\tshowSuggestedQuestion.value = false;\r\n\t\tnextTick(() => {\r\n\t\t\tdocument.querySelector(\".input-container textarea\").focus();\r\n\t\t});\r\n\t};\r\n\r\n\t// 数据处理逻辑\r\n\tconst extractEssentialData = fieldData => {\r\n\t\tif (!fieldData) return null;\r\n\t\treturn {\r\n\t\t\tvalue: fieldData.value,\r\n\t\t\ttype: fieldData.type,\r\n\t\t\t...(fieldData.unit && { unit: fieldData.unit }),\r\n\t\t\t...(fieldData.currency && { currency: fieldData.currency }),\r\n\t\t\t...(fieldData.extracted && { raw: fieldData.raw })\r\n\t\t};\r\n\t};\r\n\r\n\tconst simplifyInfobox = infobox => {\r\n\t\tif (!infobox) return {};\r\n\t\treturn {\r\n\t\t\ttitle: infobox.title,\r\n\t\t\ttype: infobox.type,\r\n\t\t\tsections: Object.entries(infobox.sections || {}).reduce(\r\n\t\t\t\t(acc, [sectionName, sectionData]) => {\r\n\t\t\t\t\tconst preservedFields =\r\n\t\t\t\t\t\tPRESERVED_FIELDS_BY_SECTION[sectionName] || [];\r\n\t\t\t\t\tacc[sectionName] = preservedFields.reduce((fields, fieldName) => {\r\n\t\t\t\t\t\tif (sectionData[fieldName]) {\r\n\t\t\t\t\t\t\tfields[fieldName] = extractEssentialData(sectionData[fieldName]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn fields;\r\n\t\t\t\t\t}, {});\r\n\t\t\t\t\treturn acc;\r\n\t\t\t\t},\r\n\t\t\t\t{}\r\n\t\t\t)\r\n\t\t};\r\n\t};\r\n\r\n\tconst parseCausalChains = text => {\r\n\t\treturn text\r\n\t\t\t.split(/##\\s*(韩国|日本)/)\r\n\t\t\t.filter(Boolean)\r\n\t\t\t.reduce((chains, part, index) => {\r\n\t\t\t\tif (index % 2 === 1) {\r\n\t\t\t\t\tconst country = part === \"韩国\" ? \"korea\" : \"japan\";\r\n\t\t\t\t\tconst steps = text\r\n\t\t\t\t\t\t.split(/(→|\\d+\\.)/)\r\n\t\t\t\t\t\t.map(step => step.trim())\r\n\t\t\t\t\t\t.filter(\r\n\t\t\t\t\t\t\tstep =>\r\n\t\t\t\t\t\t\t\tstep &&\r\n\t\t\t\t\t\t\t\t![\"→\", \"1.\", \"2.\", \"3.\", \"4.\", \"5.\", \"6.\"].includes(step)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\tchains.push({\r\n\t\t\t\t\t\tcountry,\r\n\t\t\t\t\t\tsteps: steps.slice(0, 6).map(text => ({\r\n\t\t\t\t\t\t\ttext: text.replace(/\\(.*?\\)/g, \"\").trim(),\r\n\t\t\t\t\t\t\tevidence: text.match(/\\((.*?)\\)/)?.[1] || null\r\n\t\t\t\t\t\t}))\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn chains;\r\n\t\t\t}, []);\r\n\t};\r\n\r\n\t// API请求处理\r\n\tconst handleApiResponse = (response, isCausalFlow = false) => {\r\n\t\tconst formatted = formatMarkdown(response.analysis || response.answer);\r\n\t\tconst causalChains = isCausalFlow\r\n\t\t\t? parseCausalChains(response.analysis)\r\n\t\t\t: [];\r\n\r\n\t\tchatHistory.value.push({\r\n\t\t\trole: \"assistant\",\r\n\t\t\tcontent: isCausalFlow ? \"以下是因果分析：\" : formatted,\r\n\t\t\tisCausalFlow,\r\n\t\t\tcausalChains,\r\n\t\t\ttimestamp: new Date().toLocaleString()\r\n\t\t});\r\n\r\n\t\tif (!isCausalFlow) {\r\n\t\t\tsuggestedQuestion.value = `请结合其他属性深入分析${comparisonState.value.currentFieldKey}差异的原因`;\r\n\t\t\tshowSuggestedQuestion.value = true;\r\n\t\t}\r\n\t\tscrollToBottom();\r\n\t};\r\n\r\n\t// 核心业务逻辑\r\n\tconst askQuestion = async () => {\r\n\t\tif (!userQuestion.value.trim()) {\r\n\t\t\tchatHistory.value.push({\r\n\t\t\t\trole: \"assistant\",\r\n\t\t\t\tcontent: \"问题不能为空\",\r\n\t\t\t\ttimestamp: new Date().toLocaleString(),\r\n\t\t\t\terror: true\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tchatHistory.value.push({\r\n\t\t\trole: \"user\",\r\n\t\t\tcontent: userQuestion.value,\r\n\t\t\ttimestamp: new Date().toLocaleString()\r\n\t\t});\r\n\t\tconst question = userQuestion.value;\r\n\t\tuserQuestion.value = \"\";\r\n\t\tshowSuggestedQuestion.value = false;\r\n\r\n\t\tconst isComparativeAnalysis =\r\n\t\t\tcomparisonState.value.currentFieldKey &&\r\n\t\t\tquestion.includes(\"分析\") &&\r\n\t\t\tquestion.includes(\"原因\");\r\n\r\n\t\tconst apiParams = isComparativeAnalysis\r\n\t\t\t? {\r\n\t\t\t\t\tmethod: \"compare_attributes\",\r\n\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\tchartData: {\r\n\t\t\t\t\t\t\t...comparisonState.value,\r\n\t\t\t\t\t\t\tleftInfobox: simplifyInfobox(infoboxData.value.div1),\r\n\t\t\t\t\t\t\trightInfobox: simplifyInfobox(infoboxData.value.div3)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tchartType: \"comparison\",\r\n\t\t\t\t\t\tfollowUp: true,\r\n\t\t\t\t\t\tpreviousAnalysis:\r\n\t\t\t\t\t\t\tchatHistory.value\r\n\t\t\t\t\t\t\t\t.reverse()\r\n\t\t\t\t\t\t\t\t.find(msg => msg.role === \"assistant\" && !msg.error)?.content ||\r\n\t\t\t\t\t\t\t\"\"\r\n\t\t\t\t\t}\r\n\t\t\t  }\r\n\t\t\t: {\r\n\t\t\t\t\tmethod: \"ask_infobox\",\r\n\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\tquestion,\r\n\t\t\t\t\t\tleftInfobox: simplifyInfobox(infoboxData.value.div1),\r\n\t\t\t\t\t\trightInfobox: simplifyInfobox(infoboxData.value.div3)\r\n\t\t\t\t\t}\r\n\t\t\t  };\r\n\r\n\t\tawait safeApiCall(\r\n\t\t\tapiParams.method,\r\n\t\t\tapiParams.payload,\r\n\t\t\tresponse => handleApiResponse(response, isComparativeAnalysis),\r\n\t\t\terror => {\r\n\t\t\t\tchatHistory.value.push({\r\n\t\t\t\t\trole: \"assistant\",\r\n\t\t\t\t\tcontent: `请求失败: ${error.message || \"未知错误\"}`,\r\n\t\t\t\t\ttimestamp: new Date().toLocaleString(),\r\n\t\t\t\t\terror: true\r\n\t\t\t\t});\r\n\t\t\t\tisLoading.value = false;\r\n\t\t\t\tscrollToBottom();\r\n\t\t\t}\r\n\t\t);\r\n\t};\r\n\r\n\tconst handleAttributeComparison = async payload => {\r\n\t\tcomparisonState.value = { ...payload };\r\n\r\n\t\tif (!payload.leftData || !payload.rightData) {\r\n\t\t\tchatHistory.value.push({\r\n\t\t\t\trole: \"assistant\",\r\n\t\t\t\tcontent: \"请先选择要对比的数据\",\r\n\t\t\t\ttimestamp: new Date().toLocaleString(),\r\n\t\t\t\terror: true\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tawait safeApiCall(\r\n\t\t\t\"compare_attributes\",\r\n\t\t\t{\r\n\t\t\t\tchartData: {\r\n\t\t\t\t\t...payload,\r\n\t\t\t\t\tleftInfobox: simplifyInfobox(infoboxData.value.div1),\r\n\t\t\t\t\trightInfobox: simplifyInfobox(infoboxData.value.div3)\r\n\t\t\t\t},\r\n\t\t\t\tchartType: \"comparison\"\r\n\t\t\t},\r\n\t\t\tresponse => handleApiResponse(response),\r\n\t\t\terror => {\r\n\t\t\t\tchatHistory.value.push({\r\n\t\t\t\t\trole: \"assistant\",\r\n\t\t\t\t\tcontent: `对比分析失败: ${error.message || \"未知错误\"}`,\r\n\t\t\t\t\ttimestamp: new Date().toLocaleString(),\r\n\t\t\t\t\terror: true\r\n\t\t\t\t});\r\n\t\t\t\tisLoading.value = false;\r\n\t\t\t\tscrollToBottom();\r\n\t\t\t}\r\n\t\t);\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t.main-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\theight: 100vh;\r\n\t\tbackground: #f5f7fa;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.chat-container {\r\n\t\theight: 50vh;\r\n\t\tmin-height: 50vh;\r\n\t\toverflow: hidden;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tmargin: 10px;\r\n\t}\r\n\r\n\t.chat-history {\r\n\t\tflex: 1;\r\n\t\toverflow-y: auto;\r\n\t\tpadding: 20px;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-radius: 12px;\r\n\t\tbox-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\r\n\t\tscroll-behavior: smooth;\r\n\t\tborder: 1px solid #e0e0e0;\r\n\t}\r\n\r\n\t.vis-container {\r\n\t\theight: 30vh;\r\n\t\tmin-height: 30vh;\r\n\t\tpadding: 10px;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-radius: 12px;\r\n\t\tmargin: 0 10px;\r\n\t\tbox-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\r\n\t\toverflow: auto;\r\n\t\tborder: 1px solid #e0e0e0;\r\n\t}\r\n\r\n\t.compare-table {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.input-area {\r\n\t\theight: 15vh;\r\n\t\tmin-height: 15vh;\r\n\t\tpadding: 15px;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-top: 1px solid #e0e0e0;\r\n\t\tflex-shrink: 0;\r\n\t}\r\n\r\n\t.message {\r\n\t\tmargin-bottom: 20px;\r\n\t\tpadding: 15px 20px;\r\n\t\tborder-radius: 12px;\r\n\t\tline-height: 1.6;\r\n\t\tposition: relative;\r\n\t\tmax-width: 85%;\r\n\t\tbox-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);\r\n\t}\r\n\r\n\t.message.user {\r\n\t\tbackground: #e3f2fd;\r\n\t\tmargin-left: auto;\r\n\t\tborder-bottom-right-radius: 4px;\r\n\t\tborder: 1px solid #bbdefb;\r\n\t}\r\n\r\n\t.message.assistant {\r\n\t\tbackground: #f8f9fa;\r\n\t\tmargin-right: auto;\r\n\t\tborder-bottom-left-radius: 4px;\r\n\t\tborder: 1px solid #e0e0e0;\r\n\t}\r\n\r\n\t.message.error {\r\n\t\tbackground: #ffebee;\r\n\t\tborder-left: 4px solid #f44336;\r\n\t}\r\n\r\n\t.message-content {\r\n\t\tword-wrap: break-word;\r\n\t}\r\n\r\n\t.input-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-radius: 12px;\r\n\t\tbox-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n\t\theight: 100%;\r\n\t\tborder: 1px solid #e0e0e0;\r\n\t}\r\n\r\n\t.input-container textarea {\r\n\t\twidth: 100%;\r\n\t\tpadding: 12px 16px;\r\n\t\tborder: none;\r\n\t\tborder-radius: 12px;\r\n\t\tresize: none;\r\n\t\tfont-size: 14px;\r\n\t\toutline: none;\r\n\t\tbackground: #f9f9f9;\r\n\t}\r\n\r\n\t.input-container textarea:focus {\r\n\t\tbackground: #ffffff;\r\n\t}\r\n\r\n\t.button-container {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-end;\r\n\t\tpadding: 8px;\r\n\t}\r\n\r\n\t.button-container button {\r\n\t\tbackground: #4285f4;\r\n\t\tcolor: white;\r\n\t\tborder: none;\r\n\t\tpadding: 8px 20px;\r\n\t\tborder-radius: 8px;\r\n\t\tcursor: pointer;\r\n\t\tfont-size: 14px;\r\n\t\tfont-weight: 500;\r\n\t\ttransition: all 0.2s;\r\n\t}\r\n\r\n\t.button-container button:hover {\r\n\t\tbackground: #3367d6;\r\n\t\ttransform: translateY(-1px);\r\n\t}\r\n\r\n\t.button-container button:disabled {\r\n\t\tbackground: #b3c6e0;\r\n\t\tcursor: not-allowed;\r\n\t\ttransform: none;\r\n\t}\r\n\r\n\t.loading-indicator {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 15px;\r\n\t\tcolor: #666;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t.loading-spinner {\r\n\t\tborder: 3px solid rgba(66, 133, 244, 0.2);\r\n\t\tborder-radius: 50%;\r\n\t\tborder-top: 3px solid #4285f4;\r\n\t\twidth: 20px;\r\n\t\theight: 20px;\r\n\t\tanimation: spin 1s linear infinite;\r\n\t\tmargin-right: 10px;\r\n\t}\r\n\r\n\t@keyframes spin {\r\n\t\t0% {\r\n\t\t\ttransform: rotate(0deg);\r\n\t\t}\r\n\t\t100% {\r\n\t\t\ttransform: rotate(360deg);\r\n\t\t}\r\n\t}\r\n\r\n\t.markdown-content {\r\n\t\tline-height: 1.7;\r\n\t\tfont-size: 15px;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.markdown-content h1 {\r\n\t\tfont-size: 1.5em;\r\n\t\tmargin: 20px 0 15px;\r\n\t\tpadding-bottom: 5px;\r\n\t\tborder-bottom: 1px solid #eee;\r\n\t\tcolor: #2c3e50;\r\n\t}\r\n\r\n\t.markdown-content h2 {\r\n\t\tfont-size: 1.3em;\r\n\t\tmargin: 18px 0 12px;\r\n\t\tcolor: #34495e;\r\n\t}\r\n\r\n\t.markdown-content h3 {\r\n\t\tfont-size: 1.1em;\r\n\t\tmargin: 15px 0 10px;\r\n\t\tcolor: #4285f4;\r\n\t}\r\n\r\n\t.markdown-content ul,\r\n\t.markdown-content ol {\r\n\t\tpadding-left: 25px;\r\n\t\tmargin: 12px 0;\r\n\t}\r\n\r\n\t.markdown-content li {\r\n\t\tmargin-bottom: 8px;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.markdown-content ul li::before {\r\n\t\tcontent: \"•\";\r\n\t\tcolor: #4285f4;\r\n\t\tposition: absolute;\r\n\t\tleft: -15px;\r\n\t}\r\n\r\n\t.markdown-content strong {\r\n\t\tcolor: #2c3e50;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.markdown-content em {\r\n\t\tcolor: #666;\r\n\t\tfont-style: italic;\r\n\t}\r\n\r\n\t.markdown-content code {\r\n\t\tbackground: rgba(66, 133, 244, 0.1);\r\n\t\tpadding: 2px 6px;\r\n\t\tborder-radius: 4px;\r\n\t\tfont-family: \"SFMono-Regular\", Consolas, \"Liberation Mono\", Menlo, monospace;\r\n\t\tfont-size: 0.9em;\r\n\t\tcolor: #d63384;\r\n\t}\r\n\r\n\t.markdown-content blockquote {\r\n\t\tborder-left: 3px solid #4285f4;\r\n\t\tpadding: 10px 15px;\r\n\t\tmargin: 15px 0;\r\n\t\tbackground: rgba(66, 133, 244, 0.05);\r\n\t\tcolor: #555;\r\n\t}\r\n\r\n\t.markdown-content a {\r\n\t\tcolor: #4285f4;\r\n\t\ttext-decoration: none;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t.markdown-content a:hover {\r\n\t\ttext-decoration: underline;\r\n\t}\r\n\r\n\t.suggested-question {\r\n\t\tmargin: 15px 0;\r\n\t\tpadding: 12px;\r\n\t\tbackground-color: #f5f7fa;\r\n\t\tborder-radius: 8px;\r\n\t\tborder: 1px dashed #4285f4;\r\n\t\tcursor: pointer;\r\n\t\ttransition: all 0.2s;\r\n\t}\r\n\r\n\t.suggested-question:hover {\r\n\t\tbackground-color: #e8f0fe;\r\n\t}\r\n\r\n\t.suggestion-text {\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #666;\r\n\t\tmargin-bottom: 5px;\r\n\t}\r\n\r\n\t.suggestion-content {\r\n\t\tcolor: #4285f4;\r\n\t\tfont-weight: 500;\r\n\t\tpadding: 5px;\r\n\t\tborder-radius: 4px;\r\n\t}\r\n\r\n\t.causal-flow-container {\r\n\t\twidth: 100%;\r\n\t\tmax-width: 100%;\r\n\t\toverflow: hidden;\r\n\t\tpadding: 0 5px;\r\n\t\tmargin-top: 15px;\r\n\t\tmargin-bottom: 5px;\r\n\t}\r\n\r\n\t@media (max-width: 768px) {\r\n\t\t.chat-container {\r\n\t\t\theight: 45vh;\r\n\t\t\tmin-height: 45vh;\r\n\t\t}\r\n\r\n\t\t.vis-container {\r\n\t\t\theight: 35vh;\r\n\t\t\tmin-height: 35vh;\r\n\t\t}\r\n\r\n\t\t.input-area {\r\n\t\t\theight: 20vh;\r\n\t\t\tmin-height: 20vh;\r\n\t\t}\r\n\r\n\t\t.message {\r\n\t\t\tmax-width: 90%;\r\n\t\t\tpadding: 12px 15px;\r\n\t\t}\r\n\t}\r\n</style>\r\n"],"mappings":";;;EACMA,KAAK,EAAC;AAAgB;;EACrBA,KAAK,EAAC;AAAgB;;EACrBA,KAAK,EAAC;AAAc;mBAH5B;;EAAAC,GAAA;EAiB0BD,KAAK,EAAC;;gEAC3BE,mBAAA,CAAmC;EAA9BF,KAAK,EAAC;AAAiB;;EAlBjCC,GAAA;EAqBsCD,KAAK,EAAC;;gEACvCE,mBAAA,CAA6C;EAAxCF,KAAK,EAAC;AAAiB,GAAC,YAAU;;EAQrCA,KAAK,EAAC;AAAe;;EAOrBA,KAAK,EAAC;AAAY;;EACjBA,KAAK,EAAC;AAAiB;oBAtC/B;;EA4CSA,KAAK,EAAC;AAAkB;oBA5CjC;;uBACCG,mBAAA,CAkDM,OAlDNC,UAkDM,GAjDLF,mBAAA,CA0BM,OA1BNG,UA0BM,GAzBLH,mBAAA,CAwBM,OAxBNI,UAwBM,I,kBAvBLH,mBAAA,CAYYI,SAAA,QAhBhBC,WAAA,CAKgCC,MAAA,CAAAC,WAAW,EAL3C,CAKaC,OAAO,EAAEC,KAAK;yBADvBC,YAAA,CAYYC,wBAhBhB,CAOUH,OAAO,CAACI,YAAY,GAAGN,MAAA,CAAAO,eAAe,WAH5CC,WAAA,CAYY;MAVVhB,GAAG,EAAEW,KAAK;MAEVZ,KAAK,cAAcW,OAAO,CAACO,IAAI;QAAAC,KAAA,EAAWR,OAAO,CAACQ;MAAK;MACvDC,MAAM,EAAET,OAAO,CAACU,YAAY;MATlCC,OAAA;OAUqBX,OAAO,CAACI,YAAY;MAAAf,KAAA;IAAA,M;MAVzCuB,OAAA,EAAAC,QAAA,CAaK,MAEW,C,CAFMb,OAAO,CAACI,YAAY,I,cACpCZ,mBAAA,CAA4D;QAdlEF,GAAA;QAcWD,KAAK,EAAC,iBAAiB;QAACyB,SAAwB,EAAhBd,OAAO,CAACe;8BAdnDC,UAAA,KAAAC,mBAAA,e;MAAAC,CAAA;;kCAiBepB,MAAA,CAAAqB,SAAS,I,cAApB3B,mBAAA,CAGM,OAHN4B,UAGM,GAFLC,UAAmC,EAlBxCC,gBAAA,CAkBwC,YAEpC,E,KApBJL,mBAAA,gBAqBenB,MAAA,CAAAyB,qBAAqB,I,cAAhC/B,mBAAA,CAKM,OALNgC,UAKM,GAJLC,UAA6C,EAC7ClC,mBAAA,CAEM;IAFDF,KAAK,EAAC,oBAAoB;IAAEqC,OAAK,EAAE5B,MAAA,CAAA6B;sBACpC7B,MAAA,CAAA8B,iBAAiB,iB,KAxB1BX,mBAAA,e,KA8BE1B,mBAAA,CAMM,OANNsC,UAMM,GALLC,YAAA,CAIiDhC,MAAA;IAHhDT,KAAK,EAAC,eAAe;IACpB,eAAa,EAAES,MAAA,CAAAiC,WAAW;IAC1B,eAAa,EAAEjC,MAAA,CAAAkC,WAAW;IAC1BC,kBAAgB,EAAEnC,MAAA,CAAAoC;iEAErB3C,mBAAA,CAaM,OAbN4C,WAaM,GAZL5C,mBAAA,CAWM,OAXN6C,WAWM,G,gBAVL7C,mBAAA,CAIkC;IA3CtC,uBAAA8C,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAwCcxC,MAAA,CAAAyC,YAAY,GAAAD,MAAA;IACrBE,IAAI,EAAC,GAAG;IACRC,WAAW,EAAC,cAAc;IACzBC,QAAQ,EAAE5C,MAAA,CAAAqB;0BA3ChBwB,WAAA,I,cAwCc7C,MAAA,CAAAyC,YAAY,E,GAItBhD,mBAAA,CAIM,OAJNqD,WAIM,GAHLrD,mBAAA,CAES;IAFAmC,OAAK,EAAE5B,MAAA,CAAA+C,WAAW;IAAGH,QAAQ,EAAE5C,MAAA,CAAAqB;sBACpCrB,MAAA,CAAAqB,SAAS,0CA9ClB2B,WAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}