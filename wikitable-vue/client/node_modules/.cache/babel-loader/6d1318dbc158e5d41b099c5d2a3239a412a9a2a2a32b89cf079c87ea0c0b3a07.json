{"ast":null,"code":"import \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport { ref, computed, onMounted, watch } from \"vue\";\nimport * as d3 from \"d3\";\nconst highlightColor = \"#FFD700\"; // 金色高亮\n\nexport default {\n  __name: 'FullChart',\n  props: {\n    data: {\n      type: Object,\n      default: () => ({\n        type: \"line\",\n        data: []\n      }),\n      validator: value => {\n        // 确保数据结构正确\n        return value && [\"line\", \"bar\"].includes(value.type) && Array.isArray(value.data);\n      }\n    },\n    compareData: {\n      type: Array,\n      default: () => [],\n      validator: value => Array.isArray(value)\n    },\n    title: {\n      type: String,\n      default: \"\"\n    },\n    side: {\n      type: String,\n      default: \"left\",\n      validator: value => [\"left\", \"right\"].includes(value)\n    }\n  },\n  setup(__props, _ref) {\n    let {\n      expose: __expose\n    } = _ref;\n    __expose();\n    const props = __props;\n    const chartContainer = ref(null);\n    const color = computed(() => props.side === \"left\" ? \"#4a90e2\" : \"#ef4444\");\n    const hasData = computed(() => {\n      return props.data?.data?.length > 0 && props.data.data.every(item => item && !isNaN(item.year) && !isNaN(item.value));\n    });\n    const drawChart = () => {\n      if (!chartContainer.value || !hasData.value) {\n        d3.select(chartContainer.value).selectAll(\"*\").remove();\n        return;\n      }\n      try {\n        d3.select(chartContainer.value).selectAll(\"*\").remove();\n        const margin = {\n          top: 30,\n          right: 30,\n          bottom: 50,\n          left: 50\n        };\n        const width = 800 - margin.left - margin.right;\n        const height = 500 - margin.top - margin.bottom;\n        const svg = d3.select(chartContainer.value).append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", `translate(${margin.left},${margin.top})`);\n\n        // 确保数据有效性\n        const validData = props.data.data.filter(item => item && !isNaN(item.year) && !isNaN(item.value)).sort((a, b) => a.year - b.year);\n        if (validData.length === 0) return;\n\n        // 创建比例尺\n        const x = props.data.type === \"bar\" ? d3.scaleBand().domain(validData.map(d => d.year.toString())).range([0, width]).padding(0.2) : d3.scaleLinear().domain(d3.extent(validData, d => d.year)).range([0, width]);\n        const y = d3.scaleLinear().domain([0, d3.max(validData, d => d.value) * 1.1]).range([height, 0]);\n\n        // 绘制网格线\n        svg.append(\"g\").attr(\"class\", \"grid\").call(d3.axisLeft(y).tickSize(-width).tickFormat(\"\")).selectAll(\"line\").attr(\"stroke\", \"#e2e8f0\").attr(\"stroke-dasharray\", \"2,2\");\n\n        // 绘制坐标轴\n        svg.append(\"g\").attr(\"transform\", `translate(0,${height})`).call(props.data.type === \"bar\" ? d3.axisBottom(x) : d3.axisBottom(x).tickFormat(d3.format(\"d\")));\n        svg.append(\"g\").call(d3.axisLeft(y));\n\n        // 添加标签\n        svg.append(\"text\").attr(\"transform\", `translate(${width / 2},${height + margin.top + 10})`).style(\"text-anchor\", \"middle\").text(\"年份\");\n        svg.append(\"text\").attr(\"transform\", \"rotate(-90)\").attr(\"y\", 0 - margin.left).attr(\"x\", 0 - height / 2).attr(\"dy\", \"1em\").style(\"text-anchor\", \"middle\").text(\"数值\");\n        svg.append(\"text\").attr(\"x\", width / 2).attr(\"y\", 0 - margin.top / 2).attr(\"text-anchor\", \"middle\").style(\"font-size\", \"16px\").style(\"font-weight\", \"bold\").text(props.title);\n        if (props.data.type === \"bar\") {\n          drawBarChart(svg, validData, x, y, width, height);\n        } else {\n          drawLineChart(svg, validData, x, y);\n        }\n      } catch (error) {\n        console.error(\"图表渲染错误:\", error);\n      }\n    };\n    const drawBarChart = (svg, data, x, y, width, height) => {\n      // 绘制柱子\n      svg.selectAll(\".bar\").data(data).enter().append(\"rect\").attr(\"class\", \"bar\").attr(\"x\", d => x(d.year.toString())).attr(\"width\", x.bandwidth()).attr(\"y\", d => y(d.value)).attr(\"height\", d => height - y(d.value)).attr(\"fill\", color.value).attr(\"rx\", 2).attr(\"ry\", 2);\n\n      // 添加数值标签\n      svg.selectAll(\".bar-label\").data(data).enter().append(\"text\").attr(\"class\", \"bar-label\").attr(\"x\", d => x(d.year.toString()) + x.bandwidth() / 2).attr(\"y\", d => y(d.value) - 5).attr(\"text-anchor\", \"middle\").text(d => formatValue(d.value)).attr(\"font-size\", \"12px\").attr(\"fill\", \"#64748b\").style(\"visibility\", d => height - y(d.value) > 20 ? \"visible\" : \"hidden\");\n    };\n    const drawLineChart = (svg, data, x, y) => {\n      // 创建折线生成器\n      const line = d3.line().x(d => x(d.year)).y(d => y(d.value)).curve(d3.curveMonotoneX);\n\n      // 绘制折线\n      svg.append(\"path\").datum(data).attr(\"fill\", \"none\").attr(\"stroke\", color.value).attr(\"stroke-width\", 3).attr(\"d\", line);\n\n      // 绘制数据点\n      svg.selectAll(\".dot\").data(data).enter().append(\"circle\").attr(\"class\", \"dot\").attr(\"cx\", d => x(d.year)).attr(\"cy\", d => y(d.value)).attr(\"r\", 6).attr(\"fill\", color.value).attr(\"stroke\", \"white\").attr(\"stroke-width\", 2);\n\n      // 高亮相同年份的点\n      if (props.compareData && props.compareData.length > 0) {\n        const validCompareData = props.compareData.filter(item => item && !isNaN(item.year) && !isNaN(item.value));\n        if (validCompareData.length > 0) {\n          const commonYears = getCommonYears(data, validCompareData);\n          commonYears.forEach(year => {\n            const points = data.filter(d => d.year === year);\n            points.forEach(point => {\n              svg.append(\"circle\").attr(\"cx\", x(point.year)).attr(\"cy\", y(point.value)).attr(\"r\", 8).attr(\"fill\", highlightColor).attr(\"stroke\", \"#FF8C00\").attr(\"stroke-width\", 2).attr(\"class\", \"highlight-point\");\n            });\n          });\n        }\n      }\n\n      // 添加数据标签\n      svg.selectAll(\".text\").data(data).enter().append(\"text\").attr(\"x\", d => x(d.year)).attr(\"y\", d => y(d.value) - 12).text(d => formatValue(d.value)).attr(\"font-size\", \"12px\").attr(\"text-anchor\", \"middle\").attr(\"fill\", color.value);\n    };\n\n    // 辅助函数：格式化数值显示\n    const formatValue = value => {\n      if (value >= 1000000) return `$${(value / 1000000).toFixed(1)}M`;\n      if (value >= 1000) return `$${(value / 1000).toFixed(1)}K`;\n      return value.toLocaleString();\n    };\n\n    // 辅助函数：找出共同年份\n    const getCommonYears = (data1, data2) => {\n      const years1 = new Set(data1.map(d => d.year));\n      const years2 = new Set(data2.map(d => d.year));\n      return [...years1].filter(year => years2.has(year));\n    };\n    watch(() => [props.data, props.compareData, props.title], drawChart, {\n      deep: true\n    });\n    onMounted(() => {\n      // 添加延迟确保DOM加载完成\n      setTimeout(drawChart, 100);\n    });\n    const __returned__ = {\n      props,\n      chartContainer,\n      color,\n      highlightColor,\n      hasData,\n      drawChart,\n      drawBarChart,\n      drawLineChart,\n      formatValue,\n      getCommonYears,\n      ref,\n      computed,\n      onMounted,\n      watch,\n      get d3() {\n        return d3;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","watch","d3","highlightColor","props","__props","chartContainer","color","side","hasData","data","length","every","item","isNaN","year","value","drawChart","select","selectAll","remove","margin","top","right","bottom","left","width","height","svg","append","attr","validData","filter","sort","a","b","x","type","scaleBand","domain","map","d","toString","range","padding","scaleLinear","extent","y","max","call","axisLeft","tickSize","tickFormat","axisBottom","format","style","text","title","drawBarChart","drawLineChart","error","console","enter","bandwidth","formatValue","line","curve","curveMonotoneX","datum","compareData","validCompareData","commonYears","getCommonYears","forEach","points","point","toFixed","toLocaleString","data1","data2","years1","Set","years2","has","deep","setTimeout"],"sources":["D:/vue_frame/vue_frame/wikitable-vue/client/src/components/compoents_base/FullChart.vue"],"sourcesContent":["<template>\r\n\t<div ref=\"chartContainer\" class=\"full-chart\">\r\n\t\t<div v-if=\"!hasData\" class=\"no-data-message\">无数据可显示</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ref, computed, onMounted, watch } from \"vue\";\r\n\timport * as d3 from \"d3\";\r\n\r\n\tconst props = defineProps({\r\n\t\tdata: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => ({\r\n\t\t\t\ttype: \"line\",\r\n\t\t\t\tdata: []\r\n\t\t\t}),\r\n\t\t\tvalidator: value => {\r\n\t\t\t\t// 确保数据结构正确\r\n\t\t\t\treturn (\r\n\t\t\t\t\tvalue &&\r\n\t\t\t\t\t[\"line\", \"bar\"].includes(value.type) &&\r\n\t\t\t\t\tArray.isArray(value.data)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t},\r\n\t\tcompareData: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: () => [],\r\n\t\t\tvalidator: value => Array.isArray(value)\r\n\t\t},\r\n\t\ttitle: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"\"\r\n\t\t},\r\n\t\tside: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"left\",\r\n\t\t\tvalidator: value => [\"left\", \"right\"].includes(value)\r\n\t\t}\r\n\t});\r\n\r\n\tconst chartContainer = ref(null);\r\n\tconst color = computed(() => (props.side === \"left\" ? \"#4a90e2\" : \"#ef4444\"));\r\n\tconst highlightColor = \"#FFD700\"; // 金色高亮\r\n\tconst hasData = computed(() => {\r\n\t\treturn (\r\n\t\t\tprops.data?.data?.length > 0 &&\r\n\t\t\tprops.data.data.every(\r\n\t\t\t\titem => item && !isNaN(item.year) && !isNaN(item.value)\r\n\t\t\t)\r\n\t\t);\r\n\t});\r\n\r\n\tconst drawChart = () => {\r\n\t\tif (!chartContainer.value || !hasData.value) {\r\n\t\t\td3.select(chartContainer.value).selectAll(\"*\").remove();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\td3.select(chartContainer.value).selectAll(\"*\").remove();\r\n\r\n\t\t\tconst margin = { top: 30, right: 30, bottom: 50, left: 50 };\r\n\t\t\tconst width = 800 - margin.left - margin.right;\r\n\t\t\tconst height = 500 - margin.top - margin.bottom;\r\n\r\n\t\t\tconst svg = d3\r\n\t\t\t\t.select(chartContainer.value)\r\n\t\t\t\t.append(\"svg\")\r\n\t\t\t\t.attr(\"width\", width + margin.left + margin.right)\r\n\t\t\t\t.attr(\"height\", height + margin.top + margin.bottom)\r\n\t\t\t\t.append(\"g\")\r\n\t\t\t\t.attr(\"transform\", `translate(${margin.left},${margin.top})`);\r\n\r\n\t\t\t// 确保数据有效性\r\n\t\t\tconst validData = props.data.data\r\n\t\t\t\t.filter(item => item && !isNaN(item.year) && !isNaN(item.value))\r\n\t\t\t\t.sort((a, b) => a.year - b.year);\r\n\r\n\t\t\tif (validData.length === 0) return;\r\n\r\n\t\t\t// 创建比例尺\r\n\t\t\tconst x =\r\n\t\t\t\tprops.data.type === \"bar\"\r\n\t\t\t\t\t? d3\r\n\t\t\t\t\t\t\t.scaleBand()\r\n\t\t\t\t\t\t\t.domain(validData.map(d => d.year.toString()))\r\n\t\t\t\t\t\t\t.range([0, width])\r\n\t\t\t\t\t\t\t.padding(0.2)\r\n\t\t\t\t\t: d3\r\n\t\t\t\t\t\t\t.scaleLinear()\r\n\t\t\t\t\t\t\t.domain(d3.extent(validData, d => d.year))\r\n\t\t\t\t\t\t\t.range([0, width]);\r\n\r\n\t\t\tconst y = d3\r\n\t\t\t\t.scaleLinear()\r\n\t\t\t\t.domain([0, d3.max(validData, d => d.value) * 1.1])\r\n\t\t\t\t.range([height, 0]);\r\n\r\n\t\t\t// 绘制网格线\r\n\t\t\tsvg\r\n\t\t\t\t.append(\"g\")\r\n\t\t\t\t.attr(\"class\", \"grid\")\r\n\t\t\t\t.call(d3.axisLeft(y).tickSize(-width).tickFormat(\"\"))\r\n\t\t\t\t.selectAll(\"line\")\r\n\t\t\t\t.attr(\"stroke\", \"#e2e8f0\")\r\n\t\t\t\t.attr(\"stroke-dasharray\", \"2,2\");\r\n\r\n\t\t\t// 绘制坐标轴\r\n\t\t\tsvg\r\n\t\t\t\t.append(\"g\")\r\n\t\t\t\t.attr(\"transform\", `translate(0,${height})`)\r\n\t\t\t\t.call(\r\n\t\t\t\t\tprops.data.type === \"bar\"\r\n\t\t\t\t\t\t? d3.axisBottom(x)\r\n\t\t\t\t\t\t: d3.axisBottom(x).tickFormat(d3.format(\"d\"))\r\n\t\t\t\t);\r\n\t\t\tsvg.append(\"g\").call(d3.axisLeft(y));\r\n\r\n\t\t\t// 添加标签\r\n\t\t\tsvg\r\n\t\t\t\t.append(\"text\")\r\n\t\t\t\t.attr(\r\n\t\t\t\t\t\"transform\",\r\n\t\t\t\t\t`translate(${width / 2},${height + margin.top + 10})`\r\n\t\t\t\t)\r\n\t\t\t\t.style(\"text-anchor\", \"middle\")\r\n\t\t\t\t.text(\"年份\");\r\n\t\t\tsvg\r\n\t\t\t\t.append(\"text\")\r\n\t\t\t\t.attr(\"transform\", \"rotate(-90)\")\r\n\t\t\t\t.attr(\"y\", 0 - margin.left)\r\n\t\t\t\t.attr(\"x\", 0 - height / 2)\r\n\t\t\t\t.attr(\"dy\", \"1em\")\r\n\t\t\t\t.style(\"text-anchor\", \"middle\")\r\n\t\t\t\t.text(\"数值\");\r\n\t\t\tsvg\r\n\t\t\t\t.append(\"text\")\r\n\t\t\t\t.attr(\"x\", width / 2)\r\n\t\t\t\t.attr(\"y\", 0 - margin.top / 2)\r\n\t\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t\t.style(\"font-size\", \"16px\")\r\n\t\t\t\t.style(\"font-weight\", \"bold\")\r\n\t\t\t\t.text(props.title);\r\n\r\n\t\t\tif (props.data.type === \"bar\") {\r\n\t\t\t\tdrawBarChart(svg, validData, x, y, width, height);\r\n\t\t\t} else {\r\n\t\t\t\tdrawLineChart(svg, validData, x, y);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"图表渲染错误:\", error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst drawBarChart = (svg, data, x, y, width, height) => {\r\n\t\t// 绘制柱子\r\n\t\tsvg\r\n\t\t\t.selectAll(\".bar\")\r\n\t\t\t.data(data)\r\n\t\t\t.enter()\r\n\t\t\t.append(\"rect\")\r\n\t\t\t.attr(\"class\", \"bar\")\r\n\t\t\t.attr(\"x\", d => x(d.year.toString()))\r\n\t\t\t.attr(\"width\", x.bandwidth())\r\n\t\t\t.attr(\"y\", d => y(d.value))\r\n\t\t\t.attr(\"height\", d => height - y(d.value))\r\n\t\t\t.attr(\"fill\", color.value)\r\n\t\t\t.attr(\"rx\", 2)\r\n\t\t\t.attr(\"ry\", 2);\r\n\r\n\t\t// 添加数值标签\r\n\t\tsvg\r\n\t\t\t.selectAll(\".bar-label\")\r\n\t\t\t.data(data)\r\n\t\t\t.enter()\r\n\t\t\t.append(\"text\")\r\n\t\t\t.attr(\"class\", \"bar-label\")\r\n\t\t\t.attr(\"x\", d => x(d.year.toString()) + x.bandwidth() / 2)\r\n\t\t\t.attr(\"y\", d => y(d.value) - 5)\r\n\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t.text(d => formatValue(d.value))\r\n\t\t\t.attr(\"font-size\", \"12px\")\r\n\t\t\t.attr(\"fill\", \"#64748b\")\r\n\t\t\t.style(\"visibility\", d =>\r\n\t\t\t\theight - y(d.value) > 20 ? \"visible\" : \"hidden\"\r\n\t\t\t);\r\n\t};\r\n\r\n\tconst drawLineChart = (svg, data, x, y) => {\r\n\t\t// 创建折线生成器\r\n\t\tconst line = d3\r\n\t\t\t.line()\r\n\t\t\t.x(d => x(d.year))\r\n\t\t\t.y(d => y(d.value))\r\n\t\t\t.curve(d3.curveMonotoneX);\r\n\r\n\t\t// 绘制折线\r\n\t\tsvg\r\n\t\t\t.append(\"path\")\r\n\t\t\t.datum(data)\r\n\t\t\t.attr(\"fill\", \"none\")\r\n\t\t\t.attr(\"stroke\", color.value)\r\n\t\t\t.attr(\"stroke-width\", 3)\r\n\t\t\t.attr(\"d\", line);\r\n\r\n\t\t// 绘制数据点\r\n\t\tsvg\r\n\t\t\t.selectAll(\".dot\")\r\n\t\t\t.data(data)\r\n\t\t\t.enter()\r\n\t\t\t.append(\"circle\")\r\n\t\t\t.attr(\"class\", \"dot\")\r\n\t\t\t.attr(\"cx\", d => x(d.year))\r\n\t\t\t.attr(\"cy\", d => y(d.value))\r\n\t\t\t.attr(\"r\", 6)\r\n\t\t\t.attr(\"fill\", color.value)\r\n\t\t\t.attr(\"stroke\", \"white\")\r\n\t\t\t.attr(\"stroke-width\", 2);\r\n\r\n\t\t// 高亮相同年份的点\r\n\t\tif (props.compareData && props.compareData.length > 0) {\r\n\t\t\tconst validCompareData = props.compareData.filter(\r\n\t\t\t\titem => item && !isNaN(item.year) && !isNaN(item.value)\r\n\t\t\t);\r\n\r\n\t\t\tif (validCompareData.length > 0) {\r\n\t\t\t\tconst commonYears = getCommonYears(data, validCompareData);\r\n\r\n\t\t\t\tcommonYears.forEach(year => {\r\n\t\t\t\t\tconst points = data.filter(d => d.year === year);\r\n\t\t\t\t\tpoints.forEach(point => {\r\n\t\t\t\t\t\tsvg\r\n\t\t\t\t\t\t\t.append(\"circle\")\r\n\t\t\t\t\t\t\t.attr(\"cx\", x(point.year))\r\n\t\t\t\t\t\t\t.attr(\"cy\", y(point.value))\r\n\t\t\t\t\t\t\t.attr(\"r\", 8)\r\n\t\t\t\t\t\t\t.attr(\"fill\", highlightColor)\r\n\t\t\t\t\t\t\t.attr(\"stroke\", \"#FF8C00\")\r\n\t\t\t\t\t\t\t.attr(\"stroke-width\", 2)\r\n\t\t\t\t\t\t\t.attr(\"class\", \"highlight-point\");\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// 添加数据标签\r\n\t\tsvg\r\n\t\t\t.selectAll(\".text\")\r\n\t\t\t.data(data)\r\n\t\t\t.enter()\r\n\t\t\t.append(\"text\")\r\n\t\t\t.attr(\"x\", d => x(d.year))\r\n\t\t\t.attr(\"y\", d => y(d.value) - 12)\r\n\t\t\t.text(d => formatValue(d.value))\r\n\t\t\t.attr(\"font-size\", \"12px\")\r\n\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t.attr(\"fill\", color.value);\r\n\t};\r\n\r\n\t// 辅助函数：格式化数值显示\r\n\tconst formatValue = value => {\r\n\t\tif (value >= 1000000) return `$${(value / 1000000).toFixed(1)}M`;\r\n\t\tif (value >= 1000) return `$${(value / 1000).toFixed(1)}K`;\r\n\t\treturn value.toLocaleString();\r\n\t};\r\n\r\n\t// 辅助函数：找出共同年份\r\n\tconst getCommonYears = (data1, data2) => {\r\n\t\tconst years1 = new Set(data1.map(d => d.year));\r\n\t\tconst years2 = new Set(data2.map(d => d.year));\r\n\t\treturn [...years1].filter(year => years2.has(year));\r\n\t};\r\n\r\n\twatch(() => [props.data, props.compareData, props.title], drawChart, {\r\n\t\tdeep: true\r\n\t});\r\n\r\n\tonMounted(() => {\r\n\t\t// 添加延迟确保DOM加载完成\r\n\t\tsetTimeout(drawChart, 100);\r\n\t});\r\n</script>\r\n\r\n<style scoped>\r\n\t.full-chart {\r\n\t\twidth: 100%;\r\n\t\theight: 500px;\r\n\t\tposition: relative;\r\n\t\tbackdrop-filter: blur(20px);\r\n\t}\r\n\r\n\t.no-data-message {\r\n\t\tposition: absolute;\r\n\t\ttop: 50%;\r\n\t\tleft: 50%;\r\n\t\ttransform: translate(-50%, -50%);\r\n\t\tcolor: #94a3b8;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t.full-chart :deep(.highlight-point) {\r\n\t\tanimation: pulse 1.5s infinite ease-in-out;\r\n\t\tpointer-events: none;\r\n\t}\r\n\r\n\t@keyframes pulse {\r\n\t\t0% {\r\n\t\t\tr: 7;\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\t\t50% {\r\n\t\t\tr: 9;\r\n\t\t\topacity: 0.8;\r\n\t\t}\r\n\t\t100% {\r\n\t\t\tr: 7;\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\t}\r\n\r\n\t.full-chart :deep(.bar) {\r\n\t\ttransition: all 0.3s ease;\r\n\t}\r\n\r\n\t.full-chart :deep(.bar-label) {\r\n\t\tfont-family: system-ui, -apple-system, sans-serif;\r\n\t\tpointer-events: none;\r\n\t}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}