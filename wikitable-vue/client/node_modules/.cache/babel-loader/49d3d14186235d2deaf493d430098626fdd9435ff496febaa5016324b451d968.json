{"ast":null,"code":"import { ref, onMounted } from \"vue\";\nimport * as d3 from \"d3\";\nexport default {\n  __name: 'GDPBarChart',\n  setup(__props, _ref) {\n    let {\n      expose: __expose\n    } = _ref;\n    __expose();\n    const chartRef = ref(null);\n    onMounted(() => {\n      const data = [{\n        country: \"China\",\n        gdp: 18.37\n      }, {\n        country: \"USA\",\n        gdp: 29.02\n      }];\n      const width = 500;\n      const height = 300;\n      const margin = {\n        top: 20,\n        right: 20,\n        bottom: 40,\n        left: 40\n      };\n      const svg = d3.select(chartRef.value).append(\"svg\").attr(\"width\", width).attr(\"height\", height);\n      const x = d3.scaleBand().domain(data.map(d => d.country)).range([margin.left, width - margin.right]).padding(0.1);\n      const y = d3.scaleLinear().domain([0, d3.max(data, d => d.gdp)]).nice().range([height - margin.bottom, margin.top]);\n      svg.append(\"g\").selectAll(\".bar\").data(data).enter().append(\"rect\").attr(\"class\", \"bar\").attr(\"x\", d => x(d.country)).attr(\"y\", d => y(d.gdp)).attr(\"width\", x.bandwidth()).attr(\"height\", d => height - margin.bottom - y(d.gdp)).attr(\"fill\", \"#5470C6\");\n      svg.append(\"g\").selectAll(\".label\").data(data).enter().append(\"text\").attr(\"class\", \"label\").attr(\"x\", d => x(d.country) + x.bandwidth() / 2).attr(\"y\", d => y(d.gdp) - 5).attr(\"text-anchor\", \"middle\").text(d => d.gdp.toFixed(2));\n      svg.append(\"g\").selectAll(\".x-axis\").data([0]).enter().append(\"g\").attr(\"class\", \"x-axis\").attr(\"transform\", `translate(0,${height - margin.bottom})`).call(d3.axisBottom(x));\n      svg.append(\"g\").selectAll(\".y-axis\").data([0]).enter().append(\"g\").attr(\"class\", \"y-axis\").attr(\"transform\", `translate(${margin.left},0)`).call(d3.axisLeft(y));\n    });\n    const __returned__ = {\n      chartRef,\n      ref,\n      onMounted,\n      get d3() {\n        return d3;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","d3","chartRef","data","country","gdp","width","height","margin","top","right","bottom","left","svg","select","value","append","attr","x","scaleBand","domain","map","d","range","padding","y","scaleLinear","max","nice","selectAll","enter","bandwidth","text","toFixed","call","axisBottom","axisLeft"],"sources":["D:/vue_frame/vue_frame/wikitable-vue/client/src/components/components_text/GDPBarChart.vue"],"sourcesContent":["<template>\r\n\t<div ref=\"chart\" class=\"chart-container\"></div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ref, onMounted } from \"vue\";\r\n\timport * as d3 from \"d3\";\r\n\r\n\tconst chartRef = ref(null);\r\n\r\n\tonMounted(() => {\r\n\t\tconst data = [\r\n\t\t\t{ country: \"China\", gdp: 18.37 },\r\n\t\t\t{ country: \"USA\", gdp: 29.02 }\r\n\t\t];\r\n\r\n\t\tconst width = 500;\r\n\t\tconst height = 300;\r\n\t\tconst margin = { top: 20, right: 20, bottom: 40, left: 40 };\r\n\r\n\t\tconst svg = d3\r\n\t\t\t.select(chartRef.value)\r\n\t\t\t.append(\"svg\")\r\n\t\t\t.attr(\"width\", width)\r\n\t\t\t.attr(\"height\", height);\r\n\r\n\t\tconst x = d3\r\n\t\t\t.scaleBand()\r\n\t\t\t.domain(data.map(d => d.country))\r\n\t\t\t.range([margin.left, width - margin.right])\r\n\t\t\t.padding(0.1);\r\n\r\n\t\tconst y = d3\r\n\t\t\t.scaleLinear()\r\n\t\t\t.domain([0, d3.max(data, d => d.gdp)])\r\n\t\t\t.nice()\r\n\t\t\t.range([height - margin.bottom, margin.top]);\r\n\r\n\t\tsvg\r\n\t\t\t.append(\"g\")\r\n\t\t\t.selectAll(\".bar\")\r\n\t\t\t.data(data)\r\n\t\t\t.enter()\r\n\t\t\t.append(\"rect\")\r\n\t\t\t.attr(\"class\", \"bar\")\r\n\t\t\t.attr(\"x\", d => x(d.country))\r\n\t\t\t.attr(\"y\", d => y(d.gdp))\r\n\t\t\t.attr(\"width\", x.bandwidth())\r\n\t\t\t.attr(\"height\", d => height - margin.bottom - y(d.gdp))\r\n\t\t\t.attr(\"fill\", \"#5470C6\");\r\n\r\n\t\tsvg\r\n\t\t\t.append(\"g\")\r\n\t\t\t.selectAll(\".label\")\r\n\t\t\t.data(data)\r\n\t\t\t.enter()\r\n\t\t\t.append(\"text\")\r\n\t\t\t.attr(\"class\", \"label\")\r\n\t\t\t.attr(\"x\", d => x(d.country) + x.bandwidth() / 2)\r\n\t\t\t.attr(\"y\", d => y(d.gdp) - 5)\r\n\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t.text(d => d.gdp.toFixed(2));\r\n\r\n\t\tsvg\r\n\t\t\t.append(\"g\")\r\n\t\t\t.selectAll(\".x-axis\")\r\n\t\t\t.data([0])\r\n\t\t\t.enter()\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"class\", \"x-axis\")\r\n\t\t\t.attr(\"transform\", `translate(0,${height - margin.bottom})`)\r\n\t\t\t.call(d3.axisBottom(x));\r\n\r\n\t\tsvg\r\n\t\t\t.append(\"g\")\r\n\t\t\t.selectAll(\".y-axis\")\r\n\t\t\t.data([0])\r\n\t\t\t.enter()\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"class\", \"y-axis\")\r\n\t\t\t.attr(\"transform\", `translate(${margin.left},0)`)\r\n\t\t\t.call(d3.axisLeft(y));\r\n\t});\r\n</script>\r\n\r\n<style scoped>\r\n\t.chart-container {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\t.bar {\r\n\t\ttransition: all 0.3s ease;\r\n\t}\r\n\t.bar:hover {\r\n\t\tfill: #91cc75;\r\n\t}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}