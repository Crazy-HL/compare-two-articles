{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted } from \"vue\";\nimport { renderChart } from \"@/js/chartUtils\";\nexport default {\n  setup() {\n    // 状态管理\n    const chatHistory = ref([]);\n    const attributes = ref(Array(2).fill(null));\n    const selectedAttr = ref(-1);\n    const isReady = ref(false);\n\n    // 方法\n    const fetchComparison = async () => {\n      try {\n        // 模拟API调用\n        const mockData = {\n          attributes: [\"销售额\", \"利润率\"],\n          chartData: {\n            article1: {\n              销售额: {\n                /* 图表数据 */\n              },\n              利润率: {\n                /* 图表数据 */\n              }\n            },\n            article2: {\n              销售额: {\n                /* 图表数据 */\n              },\n              利润率: {\n                /* 图表数据 */\n              }\n            }\n          }\n        };\n        attributes.value = [...mockData.attributes, ...Array(2 - mockData.attributes.length).fill(null)];\n\n        // 渲染图表\n        nextTick(() => {\n          mockData.attributes.forEach((attr, i) => {\n            if (this.$refs[`chart1_${i}`]) {\n              renderChart(this.$refs[`chart1_${i}`], mockData.chartData.article1[attr]);\n            }\n            if (this.$refs[`chart2_${i}`]) {\n              renderChart(this.$refs[`chart2_${i}`], mockData.chartData.article2[attr]);\n            }\n          });\n        });\n      } catch (error) {\n        console.error(\"对比失败:\", error);\n        chatHistory.value.push({\n          role: \"system\",\n          content: `对比失败: ${error.message}`\n        });\n      }\n    };\n    const selectAttribute = index => {\n      if (attributes.value[index]) {\n        selectedAttr.value = index;\n        // 这里可以添加选中效果的相关逻辑\n      }\n    };\n    const resetAll = () => {\n      attributes.value = Array(2).fill(null);\n      selectedAttr.value = -1;\n    };\n    return {\n      chatHistory,\n      attributes,\n      selectedAttr,\n      isReady,\n      fetchComparison,\n      selectAttribute,\n      resetAll\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","renderChart","setup","chatHistory","attributes","Array","fill","selectedAttr","isReady","fetchComparison","mockData","chartData","article1","销售额","利润率","article2","value","length","nextTick","forEach","attr","i","$refs","error","console","push","role","content","message","selectAttribute","index","resetAll"],"sources":["D:\\vue_frame\\vue_frame\\wikitable-vue\\client\\src\\components\\Div2.vue"],"sourcesContent":["<template>\r\n\t<div class=\"main-container\">\r\n\t\t<!-- 聊天容器 -->\r\n\t\t<div class=\"chat-container\">\r\n\t\t\t<div class=\"chat-history\">\r\n\t\t\t\t<div\r\n\t\t\t\t\tv-for=\"(msg, i) in chatHistory\"\r\n\t\t\t\t\t:key=\"i\"\r\n\t\t\t\t\tclass=\"message\"\r\n\t\t\t\t\t:class=\"msg.role\">\r\n\t\t\t\t\t<div class=\"message-content\">\r\n\t\t\t\t\t\t<strong>{{ msg.role === \"user\" ? \"您\" : \"系统\" }}：</strong>\r\n\t\t\t\t\t\t<div v-html=\"msg.content || '[无内容]'\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- 可视化对比区 -->\r\n\t\t<div class=\"visual-container\">\r\n\t\t\t<!-- 表格标题 -->\r\n\t\t\t<div class=\"table-title\">文章属性对比</div>\r\n\r\n\t\t\t<!-- 两行三列对比表格 -->\r\n\t\t\t<div class=\"comparison-grid\">\r\n\t\t\t\t<!-- 表头 -->\r\n\t\t\t\t<div class=\"grid-header left-col\">文章1</div>\r\n\t\t\t\t<div class=\"grid-header middle-col\">公共属性</div>\r\n\t\t\t\t<div class=\"grid-header right-col\">文章2</div>\r\n\r\n\t\t\t\t<!-- 第一行 -->\r\n\t\t\t\t<div class=\"grid-cell left-col\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tv-if=\"attributes[0]\"\r\n\t\t\t\t\t\tref=\"chart1_0\"\r\n\t\t\t\t\t\tclass=\"chart-container\"></div>\r\n\t\t\t\t\t<div v-else class=\"placeholder\">等待数据...</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclass=\"grid-cell middle-col attr-name\"\r\n\t\t\t\t\t@click=\"selectAttribute(0)\"\r\n\t\t\t\t\t:class=\"{ active: selectedAttr === 0 }\">\r\n\t\t\t\t\t{{ attributes[0] || \"属性1\" }}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"grid-cell right-col\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tv-if=\"attributes[0]\"\r\n\t\t\t\t\t\tref=\"chart2_0\"\r\n\t\t\t\t\t\tclass=\"chart-container\"></div>\r\n\t\t\t\t\t<div v-else class=\"placeholder\">等待数据...</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<!-- 第二行 -->\r\n\t\t\t\t<div class=\"grid-cell left-col\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tv-if=\"attributes[1]\"\r\n\t\t\t\t\t\tref=\"chart1_1\"\r\n\t\t\t\t\t\tclass=\"chart-container\"></div>\r\n\t\t\t\t\t<div v-else class=\"placeholder\">等待数据...</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclass=\"grid-cell middle-col attr-name\"\r\n\t\t\t\t\t@click=\"selectAttribute(1)\"\r\n\t\t\t\t\t:class=\"{ active: selectedAttr === 1 }\">\r\n\t\t\t\t\t{{ attributes[1] || \"属性2\" }}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"grid-cell right-col\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tv-if=\"attributes[1]\"\r\n\t\t\t\t\t\tref=\"chart2_1\"\r\n\t\t\t\t\t\tclass=\"chart-container\"></div>\r\n\t\t\t\t\t<div v-else class=\"placeholder\">等待数据...</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<!-- 操作按钮 -->\r\n\t\t\t<div class=\"action-bar\">\r\n\t\t\t\t<button @click=\"fetchComparison\" :disabled=\"!isReady\">\r\n\t\t\t\t\t<i class=\"icon-compare\"></i> 开始对比\r\n\t\t\t\t</button>\r\n\t\t\t\t<button @click=\"resetAll\" class=\"secondary\">\r\n\t\t\t\t\t<i class=\"icon-reset\"></i> 重置\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport { ref, onMounted } from \"vue\";\r\n\timport { renderChart } from \"@/js/chartUtils\";\r\n\r\n\texport default {\r\n\t\tsetup() {\r\n\t\t\t// 状态管理\r\n\t\t\tconst chatHistory = ref([]);\r\n\t\t\tconst attributes = ref(Array(2).fill(null));\r\n\t\t\tconst selectedAttr = ref(-1);\r\n\t\t\tconst isReady = ref(false);\r\n\r\n\t\t\t// 方法\r\n\t\t\tconst fetchComparison = async () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 模拟API调用\r\n\t\t\t\t\tconst mockData = {\r\n\t\t\t\t\t\tattributes: [\"销售额\", \"利润率\"],\r\n\t\t\t\t\t\tchartData: {\r\n\t\t\t\t\t\t\tarticle1: {\r\n\t\t\t\t\t\t\t\t销售额: {\r\n\t\t\t\t\t\t\t\t\t/* 图表数据 */\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t利润率: {\r\n\t\t\t\t\t\t\t\t\t/* 图表数据 */\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tarticle2: {\r\n\t\t\t\t\t\t\t\t销售额: {\r\n\t\t\t\t\t\t\t\t\t/* 图表数据 */\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t利润率: {\r\n\t\t\t\t\t\t\t\t\t/* 图表数据 */\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tattributes.value = [\r\n\t\t\t\t\t\t...mockData.attributes,\r\n\t\t\t\t\t\t...Array(2 - mockData.attributes.length).fill(null)\r\n\t\t\t\t\t];\r\n\r\n\t\t\t\t\t// 渲染图表\r\n\t\t\t\t\tnextTick(() => {\r\n\t\t\t\t\t\tmockData.attributes.forEach((attr, i) => {\r\n\t\t\t\t\t\t\tif (this.$refs[`chart1_${i}`]) {\r\n\t\t\t\t\t\t\t\trenderChart(\r\n\t\t\t\t\t\t\t\t\tthis.$refs[`chart1_${i}`],\r\n\t\t\t\t\t\t\t\t\tmockData.chartData.article1[attr]\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (this.$refs[`chart2_${i}`]) {\r\n\t\t\t\t\t\t\t\trenderChart(\r\n\t\t\t\t\t\t\t\t\tthis.$refs[`chart2_${i}`],\r\n\t\t\t\t\t\t\t\t\tmockData.chartData.article2[attr]\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error(\"对比失败:\", error);\r\n\t\t\t\t\tchatHistory.value.push({\r\n\t\t\t\t\t\trole: \"system\",\r\n\t\t\t\t\t\tcontent: `对比失败: ${error.message}`\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tconst selectAttribute = index => {\r\n\t\t\t\tif (attributes.value[index]) {\r\n\t\t\t\t\tselectedAttr.value = index;\r\n\t\t\t\t\t// 这里可以添加选中效果的相关逻辑\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tconst resetAll = () => {\r\n\t\t\t\tattributes.value = Array(2).fill(null);\r\n\t\t\t\tselectedAttr.value = -1;\r\n\t\t\t};\r\n\r\n\t\t\treturn {\r\n\t\t\t\tchatHistory,\r\n\t\t\t\tattributes,\r\n\t\t\t\tselectedAttr,\r\n\t\t\t\tisReady,\r\n\t\t\t\tfetchComparison,\r\n\t\t\t\tselectAttribute,\r\n\t\t\t\tresetAll\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t/* 基础布局 */\r\n\t.main-container {\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-rows: 1fr 1.5fr;\r\n\t\theight: 100vh;\r\n\t\tgap: 16px;\r\n\t\tpadding: 16px;\r\n\t\tbackground: #f8f9fa;\r\n\t}\r\n\r\n\t.chat-container {\r\n\t\tbackground: white;\r\n\t\tborder-radius: 12px;\r\n\t\tbox-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n\t\tpadding: 16px;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.visual-container {\r\n\t\tbackground: white;\r\n\t\tborder-radius: 12px;\r\n\t\tbox-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n\t\tpadding: 20px;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\t/* 表格样式 */\r\n\t.table-title {\r\n\t\tfont-size: 18px;\r\n\t\tfont-weight: 600;\r\n\t\tmargin-bottom: 16px;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.comparison-grid {\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: 1fr 1fr 1fr;\r\n\t\tgrid-template-rows: auto 1fr 1fr;\r\n\t\tgap: 1px;\r\n\t\tbackground: #e0e0e0;\r\n\t\tborder: 1px solid #e0e0e0;\r\n\t\tborder-radius: 8px;\r\n\t\toverflow: hidden;\r\n\t\tflex-grow: 1;\r\n\t}\r\n\r\n\t.grid-header {\r\n\t\tpadding: 12px;\r\n\t\tbackground: #f5f5f5;\r\n\t\tfont-weight: 500;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.grid-cell {\r\n\t\tbackground: white;\r\n\t\tpadding: 12px;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tmin-height: 120px;\r\n\t}\r\n\r\n\t.left-col {\r\n\t\tborder-right: 1px solid #eee;\r\n\t}\r\n\t.right-col {\r\n\t\tborder-left: 1px solid #eee;\r\n\t}\r\n\r\n\t.attr-name {\r\n\t\tcursor: pointer;\r\n\t\ttransition: all 0.2s;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t.attr-name:hover {\r\n\t\tbackground: #f0f7ff;\r\n\t}\r\n\r\n\t.attr-name.active {\r\n\t\tbackground: #e1f0ff;\r\n\t\tcolor: #1976d2;\r\n\t}\r\n\r\n\t.chart-container {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tmin-height: 100px;\r\n\t}\r\n\r\n\t.placeholder {\r\n\t\tcolor: #999;\r\n\t\tfont-style: italic;\r\n\t}\r\n\r\n\t/* 操作按钮 */\r\n\t.action-bar {\r\n\t\tdisplay: flex;\r\n\t\tgap: 12px;\r\n\t\tmargin-top: 20px;\r\n\t}\r\n\r\n\tbutton {\r\n\t\tflex: 1;\r\n\t\tpadding: 12px;\r\n\t\tborder: none;\r\n\t\tborder-radius: 6px;\r\n\t\tbackground: #1976d2;\r\n\t\tcolor: white;\r\n\t\tcursor: pointer;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tgap: 8px;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\tbutton:disabled {\r\n\t\tbackground: #b0bec5;\r\n\t\tcursor: not-allowed;\r\n\t}\r\n\r\n\tbutton.secondary {\r\n\t\tbackground: white;\r\n\t\tcolor: #1976d2;\r\n\t\tborder: 1px solid #1976d2;\r\n\t}\r\n\r\n\t/* 消息样式 */\r\n\t.message {\r\n\t\tmargin-bottom: 12px;\r\n\t}\r\n\r\n\t.message-content {\r\n\t\tpadding: 12px;\r\n\t\tborder-radius: 8px;\r\n\t\tbackground: #f5f5f5;\r\n\t\tline-height: 1.6;\r\n\t}\r\n\r\n\t.message.user .message-content {\r\n\t\tbackground: #e3f2fd;\r\n\t\ttext-align: right;\r\n\t}\r\n\r\n\t/* 响应式设计 */\r\n\t@media (max-width: 768px) {\r\n\t\t.main-container {\r\n\t\t\tgrid-template-rows: auto 1fr;\r\n\t\t\tpadding: 8px;\r\n\t\t}\r\n\r\n\t\t.comparison-grid {\r\n\t\t\tgrid-template-columns: 1fr;\r\n\t\t\tgrid-template-rows: auto repeat(6, 1fr);\r\n\t\t}\r\n\r\n\t\t.grid-header {\r\n\t\t\tdisplay: none;\r\n\t\t}\r\n\r\n\t\t.grid-cell {\r\n\t\t\tmin-height: 80px;\r\n\t\t}\r\n\r\n\t\t.left-col,\r\n\t\t.right-col {\r\n\t\t\tborder: none;\r\n\t\t\tborder-bottom: 1px solid #eee;\r\n\t\t}\r\n\t}\r\n</style>\r\n"],"mappings":";AAyFC,SAASA,GAAG,EAAEC,SAAQ,QAAS,KAAK;AACpC,SAASC,WAAU,QAAS,iBAAiB;AAE7C,eAAe;EACdC,KAAKA,CAAA,EAAG;IACP;IACA,MAAMC,WAAU,GAAIJ,GAAG,CAAC,EAAE,CAAC;IAC3B,MAAMK,UAAS,GAAIL,GAAG,CAACM,KAAK,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC3C,MAAMC,YAAW,GAAIR,GAAG,CAAC,CAAC,CAAC,CAAC;IAC5B,MAAMS,OAAM,GAAIT,GAAG,CAAC,KAAK,CAAC;;IAE1B;IACA,MAAMU,eAAc,GAAI,MAAAA,CAAA,KAAY;MACnC,IAAI;QACH;QACA,MAAMC,QAAO,GAAI;UAChBN,UAAU,EAAE,CAAC,KAAK,EAAE,KAAK,CAAC;UAC1BO,SAAS,EAAE;YACVC,QAAQ,EAAE;cACTC,GAAG,EAAE;gBACJ;cAAA,CACA;cACDC,GAAG,EAAE;gBACJ;cAAA;YAEF,CAAC;YACDC,QAAQ,EAAE;cACTF,GAAG,EAAE;gBACJ;cAAA,CACA;cACDC,GAAG,EAAE;gBACJ;cAAA;YAEF;UACD;QACD,CAAC;QAEDV,UAAU,CAACY,KAAI,GAAI,CAClB,GAAGN,QAAQ,CAACN,UAAU,EACtB,GAAGC,KAAK,CAAC,IAAIK,QAAQ,CAACN,UAAU,CAACa,MAAM,CAAC,CAACX,IAAI,CAAC,IAAI,EAClD;;QAED;QACAY,QAAQ,CAAC,MAAM;UACdR,QAAQ,CAACN,UAAU,CAACe,OAAO,CAAC,CAACC,IAAI,EAAEC,CAAC,KAAK;YACxC,IAAI,IAAI,CAACC,KAAK,CAAC,UAAUD,CAAC,EAAE,CAAC,EAAE;cAC9BpB,WAAW,CACV,IAAI,CAACqB,KAAK,CAAC,UAAUD,CAAC,EAAE,CAAC,EACzBX,QAAQ,CAACC,SAAS,CAACC,QAAQ,CAACQ,IAAI,CACjC,CAAC;YACF;YACA,IAAI,IAAI,CAACE,KAAK,CAAC,UAAUD,CAAC,EAAE,CAAC,EAAE;cAC9BpB,WAAW,CACV,IAAI,CAACqB,KAAK,CAAC,UAAUD,CAAC,EAAE,CAAC,EACzBX,QAAQ,CAACC,SAAS,CAACI,QAAQ,CAACK,IAAI,CACjC,CAAC;YACF;UACD,CAAC,CAAC;QACH,CAAC,CAAC;MACH,EAAE,OAAOG,KAAK,EAAE;QACfC,OAAO,CAACD,KAAK,CAAC,OAAO,EAAEA,KAAK,CAAC;QAC7BpB,WAAW,CAACa,KAAK,CAACS,IAAI,CAAC;UACtBC,IAAI,EAAE,QAAQ;UACdC,OAAO,EAAE,SAASJ,KAAK,CAACK,OAAO;QAChC,CAAC,CAAC;MACH;IACD,CAAC;IAED,MAAMC,eAAc,GAAIC,KAAI,IAAK;MAChC,IAAI1B,UAAU,CAACY,KAAK,CAACc,KAAK,CAAC,EAAE;QAC5BvB,YAAY,CAACS,KAAI,GAAIc,KAAK;QAC1B;MACD;IACD,CAAC;IAED,MAAMC,QAAO,GAAIA,CAAA,KAAM;MACtB3B,UAAU,CAACY,KAAI,GAAIX,KAAK,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC;MACtCC,YAAY,CAACS,KAAI,GAAI,CAAC,CAAC;IACxB,CAAC;IAED,OAAO;MACNb,WAAW;MACXC,UAAU;MACVG,YAAY;MACZC,OAAO;MACPC,eAAe;MACfoB,eAAe;MACfE;IACD,CAAC;EACF;AACD,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}