{"ast":null,"code":"import { computed, ref, onMounted, watch, nextTick } from \"vue\";\nimport * as d3 from \"d3\";\nexport default {\n  __name: 'SimpleChart',\n  props: {\n    field: [Object, Array, String, Number],\n    type: String,\n    visualization: String,\n    fieldKey: String\n  },\n  emits: [\"chartClick\"],\n  setup(__props, _ref) {\n    let {\n      expose: __expose,\n      emit: __emit\n    } = _ref;\n    __expose();\n    const props = __props;\n    const emit = __emit;\n    const hoveredIndex = ref(null);\n    const activeIndex = ref(null);\n    const isTextHovered = ref(false);\n\n    // 容器引用\n    const pieContainer = ref(null);\n    const barContainer = ref(null);\n    const lineContainer = ref(null);\n\n    // 颜色定义\n    const colors = [\"#3498db\", \"#e74c3c\", \"#2ecc71\", \"#f39c12\", \"#9b59b6\"];\n\n    // 初始化图表\n    onMounted(() => {\n      watch(() => [props.field, props.visualization], () => {\n        nextTick(() => {\n          if (props.visualization === \"pie-chart\" && hasData.value && isValidPieData.value) {\n            renderPieChart();\n          } else if (props.visualization === \"bar-chart\" && hasData.value) {\n            renderBarChart();\n          } else if (props.visualization === \"line-chart\" && hasData.value) {\n            renderLineChart();\n          }\n        });\n      }, {\n        immediate: true,\n        deep: true\n      });\n    });\n\n    // 渲染饼图\n    const renderPieChart = () => {\n      if (!pieContainer.value) return;\n\n      // 清除旧图表\n      d3.select(pieContainer.value).selectAll(\"*\").remove();\n      const container = d3.select(pieContainer.value);\n      const containerWidth = pieContainer.value.clientWidth;\n      const containerHeight = pieContainer.value.clientHeight;\n      const size = Math.min(containerWidth, containerHeight);\n      const radius = size / 2;\n      const svg = container.append(\"svg\").attr(\"width\", \"100%\").attr(\"height\", \"100%\").attr(\"viewBox\", `0 0 ${size} ${size}`).append(\"g\").attr(\"transform\", `translate(${radius},${radius})`);\n      const pie = d3.pie().value(d => d.value).sort(null);\n      const arc = d3.arc().innerRadius(0).outerRadius(radius * 0.9) // 留出10%的边距\n      .cornerRadius(2); // 圆角效果\n\n      const arcs = svg.selectAll(\".arc\").data(pie(pieData.value)).enter().append(\"g\").attr(\"class\", \"arc\");\n\n      // 绘制扇形\n      arcs.append(\"path\").attr(\"d\", arc).attr(\"fill\", (d, i) => colors[i % colors.length]).style(\"opacity\", 0.8).style(\"stroke\", \"#fff\").style(\"stroke-width\", 1).on(\"mouseover\", function (event, d) {\n        hoveredIndex.value = d.index;\n        d3.select(this).transition().duration(200).style(\"opacity\", 1).attr(\"transform\", \"scale(1.05)\");\n        tooltip.style(\"visibility\", \"visible\").html(`${d.data.name}: ${d.data.value.toFixed(1)}${props.type === \"percentage\" ? \"%\" : \"\"}`);\n      }).on(\"mouseout\", function () {\n        hoveredIndex.value = null;\n        d3.select(this).transition().duration(200).style(\"opacity\", 0.8).attr(\"transform\", \"scale(1)\");\n        tooltip.style(\"visibility\", \"hidden\");\n      }).on(\"click\", function (event, d) {\n        activeIndex.value = d.index;\n        emit(\"chartClick\", {\n          type: \"pie\",\n          index: d.index,\n          data: d.data,\n          value: d.data.value\n        });\n      });\n\n      // 单值时的中心文字\n      if (pieData.value.length === 1) {\n        svg.append(\"text\").attr(\"text-anchor\", \"middle\").attr(\"dy\", \".3em\").text(`${pieData.value[0].value.toFixed(1)}${props.type === \"percentage\" ? \"%\" : \"\"}`).style(\"font-size\", \"14px\").style(\"fill\", \"#333\");\n      }\n\n      // 创建tooltip\n      const tooltip = container.append(\"div\").attr(\"class\", \"d3-tooltip\").style(\"position\", \"absolute\").style(\"visibility\", \"hidden\").style(\"background\", \"rgba(0,0,0,0.8)\").style(\"color\", \"white\").style(\"padding\", \"6px 12px\").style(\"border-radius\", \"4px\").style(\"font-size\", \"12px\");\n    };\n\n    // 渲染柱状图\n    const renderBarChart = () => {\n      if (!barContainer.value) return;\n\n      // 清除旧图表\n      d3.select(barContainer.value).selectAll(\"*\").remove();\n      const container = d3.select(barContainer.value);\n      const width = barContainer.value.clientWidth;\n      const height = barContainer.value.clientHeight;\n      const margin = {\n        top: 10,\n        right: 10,\n        bottom: 10,\n        left: 10\n      };\n      const svg = container.append(\"svg\").attr(\"width\", \"100%\").attr(\"height\", \"100%\").attr(\"viewBox\", `0 0 ${width} ${height}`);\n      const x = d3.scaleBand().domain(d3.range(simpleBarData.value.length)).range([margin.left, width - margin.right]).padding(0.2);\n      const y = d3.scaleLinear().domain([0, d3.max(simpleBarData.value, d => d.value)]).nice().range([height - margin.bottom, margin.top]);\n\n      // 绘制柱子\n      svg.selectAll(\".bar\").data(simpleBarData.value).enter().append(\"rect\").attr(\"class\", \"bar\").attr(\"x\", (d, i) => x(i)).attr(\"y\", d => y(d.value)).attr(\"width\", x.bandwidth()).attr(\"height\", d => y(0) - y(d.value)).attr(\"fill\", (d, i) => colors[i % colors.length]).style(\"opacity\", 0.8).on(\"mouseover\", function (event, d) {\n        hoveredIndex.value = d.index;\n        d3.select(this).transition().duration(200).style(\"opacity\", 1).attr(\"y\", d => y(d.value) - 5).attr(\"height\", d => y(0) - y(d.value) + 5);\n        tooltip.style(\"visibility\", \"visible\").html(`${formatNumber(d.value, props.fieldKey)}`);\n      }).on(\"mouseout\", function () {\n        hoveredIndex.value = null;\n        d3.select(this).transition().duration(200).style(\"opacity\", 0.8).attr(\"y\", d => y(d.value)).attr(\"height\", d => y(0) - y(d.value));\n        tooltip.style(\"visibility\", \"hidden\");\n      }).on(\"click\", function (event, d) {\n        activeIndex.value = d.index;\n        emit(\"chartClick\", {\n          type: \"bar\",\n          index: d.index,\n          data: d,\n          value: d.value\n        });\n      });\n\n      // 创建tooltip\n      const tooltip = container.append(\"div\").attr(\"class\", \"d3-tooltip\").style(\"position\", \"absolute\").style(\"visibility\", \"hidden\").style(\"background\", \"rgba(0,0,0,0.8)\").style(\"color\", \"white\").style(\"padding\", \"6px 12px\").style(\"border-radius\", \"4px\").style(\"font-size\", \"12px\");\n    };\n\n    // 渲染折线图\n    const renderLineChart = () => {\n      if (!lineContainer.value) return;\n\n      // 清除旧图表\n      d3.select(lineContainer.value).selectAll(\"*\").remove();\n      const container = d3.select(lineContainer.value);\n      const width = lineContainer.value.clientWidth;\n      const height = lineContainer.value.clientHeight;\n      const margin = {\n        top: 10,\n        right: 10,\n        bottom: 10,\n        left: 10\n      };\n      const svg = container.append(\"svg\").attr(\"width\", \"100%\").attr(\"height\", \"100%\").attr(\"viewBox\", `0 0 ${width} ${height}`);\n      const x = d3.scaleLinear().domain([0, lineData.value.length - 1]).range([margin.left, width - margin.right]);\n      const y = d3.scaleLinear().domain([d3.min(lineData.value, d => d.y), d3.max(lineData.value, d => d.y)]).nice().range([height - margin.bottom, margin.top]);\n      const line = d3.line().x((d, i) => x(i)).y(d => y(d.y)).curve(d3.curveMonotoneX);\n\n      // 绘制折线\n      svg.append(\"path\").datum(lineData.value).attr(\"fill\", \"none\").attr(\"stroke\", \"#3498db\").attr(\"stroke-width\", 2).attr(\"d\", line);\n\n      // 绘制数据点\n      svg.selectAll(\".dot\").data(lineData.value).enter().append(\"circle\").attr(\"class\", \"dot\").attr(\"cx\", (d, i) => x(i)).attr(\"cy\", d => y(d.y)).attr(\"r\", 3).attr(\"fill\", \"#3498db\").on(\"mouseover\", function (event, d) {\n        hoveredIndex.value = d.index;\n        d3.select(this).transition().duration(200).attr(\"r\", 5).attr(\"stroke\", \"white\").attr(\"stroke-width\", 1);\n        tooltip.style(\"visibility\", \"visible\").html(`${d.raw || formatNumber(d.y, props.fieldKey)}`);\n      }).on(\"mouseout\", function () {\n        hoveredIndex.value = null;\n        d3.select(this).transition().duration(200).attr(\"r\", 3).attr(\"stroke\", \"none\");\n        tooltip.style(\"visibility\", \"hidden\");\n      }).on(\"click\", function (event, d) {\n        activeIndex.value = d.index;\n        emit(\"chartClick\", {\n          type: \"line\",\n          index: d.index,\n          data: d,\n          value: d.y\n        });\n      });\n\n      // 创建tooltip\n      const tooltip = container.append(\"div\").attr(\"class\", \"d3-tooltip\").style(\"position\", \"absolute\").style(\"visibility\", \"hidden\").style(\"background\", \"rgba(0,0,0,0.8)\").style(\"color\", \"white\").style(\"padding\", \"6px 12px\").style(\"border-radius\", \"4px\").style(\"font-size\", \"12px\");\n    };\n\n    // 交互处理函数\n    const handleTextHover = () => {\n      isTextHovered.value = true;\n    };\n    const resetHover = () => {\n      hoveredIndex.value = null;\n      isTextHovered.value = false;\n    };\n    const handleTextClick = () => {\n      emit(\"chartClick\", {\n        type: \"text\",\n        data: props.field,\n        value: props.field\n      });\n    };\n\n    // 数据格式化函数\n    const formatNumber = (value, fieldKey) => {\n      const num = Number(value);\n      if (isNaN(num)) return \"0\";\n      if (props.type === \"percentage\") {\n        return num.toFixed(1) + \"%\";\n      }\n      if (fieldKey === \"GDP\") {\n        return num.toFixed(2) + \"T\";\n      }\n      if (fieldKey === \"Population\") {\n        return num.toFixed(2) + \"亿\";\n      }\n      return num.toFixed(2);\n    };\n    const formatSimpleText = value => {\n      if (!value) return \"-\";\n      if (Array.isArray(value)) {\n        const items = value.map(item => item.raw || item.value || item);\n        return items.length > 2 ? items.slice(0, 2).join(\"; \") + \"...\" : items.join(\"; \");\n      }\n      if (typeof value === \"object\") {\n        return value.raw || value.value || \"-\";\n      }\n      return value.toString().length > 50 ? value.toString().substring(0, 50) + \"...\" : value.toString();\n    };\n\n    // 数据处理函数\n    const isYearEntry = value => {\n      if (typeof value !== \"string\") return false;\n      const trimmedValue = value.trim();\n      return /^(\\()?\\d{4}(\\))?\\s*:?/.test(trimmedValue) || /^\\(?FY\\s*\\d{4}\\)?\\s*:?/i.test(trimmedValue) || /^(\\()?\\d{4}\\s*[-–]\\s*\\d{2,4}(\\))?\\s*:?/.test(trimmedValue) || /^(Year|Yr|Annual)\\s*\\d{4}/i.test(trimmedValue);\n    };\n    const safeToNumber = (value, fieldKey) => {\n      if (value === null || value === undefined) return 0;\n      if (typeof value === \"number\") return value;\n      if (typeof value === \"string\") {\n        const percentMatch = value.match(/(\\d+\\.?\\d*)%/);\n        if (percentMatch) return parseFloat(percentMatch[1]);\n        const numStr = value.toString().replace(/[^0-9.-]/g, \"\");\n        const num = parseFloat(numStr);\n        return isNaN(num) ? 0 : num;\n      }\n      return 0;\n    };\n    const isValidPieData = computed(() => {\n      if (!pieData.value.length) return false;\n      return pieData.value.every(item => !isYearEntry(item.name) && !isYearEntry(item.value));\n    });\n    const pieData = computed(() => {\n      if (!props.field) return [];\n      const processItem = item => {\n        const rawValue = item?.value || item?.raw || item;\n        if (isYearEntry(rawValue)) return null;\n        const value = safeToNumber(rawValue, props.fieldKey);\n        if (value === null) return null;\n        let name = typeof item === \"object\" ? (item.raw || \"\").replace(/:\\s*\\d+\\.?\\d*%?/g, \"\") : \"项目\";\n        if (isYearEntry(name)) return null;\n        return {\n          value: Math.min(100, Math.max(0, value)),\n          name: name.trim() || \"项目\",\n          index: index\n        };\n      };\n      if (Array.isArray(props.field)) {\n        return props.field.map(processItem).filter(item => item !== null && !isYearEntry(item.name)).map((item, index) => ({\n          ...item,\n          index\n        }));\n      }\n      if (typeof props.field === \"object\") {\n        const result = processItem(props.field);\n        return result ? [{\n          ...result,\n          index: 0\n        }] : [];\n      }\n      if (isYearEntry(props.field)) return [];\n      const numValue = safeToNumber(props.field, props.fieldKey);\n      return numValue !== null && !isYearEntry(props.field) ? [{\n        value: Math.min(100, Math.max(0, numValue)),\n        name: \"数值\",\n        index: 0\n      }] : [];\n    });\n    const simpleBarData = computed(() => {\n      if (!props.field) return [];\n      let values = [];\n      if (Array.isArray(props.field)) {\n        values = props.field.filter(item => {\n          const value = item?.value || item?.raw;\n          return value !== undefined && value !== null && !isYearEntry(value);\n        }).map(item => safeToNumber(item.value || item.raw, props.fieldKey));\n      } else if (typeof props.field === \"object\") {\n        values = [safeToNumber(props.field.value || props.field.raw, props.fieldKey)].filter(v => v !== null);\n      } else {\n        values = [safeToNumber(props.field, props.fieldKey)].filter(v => v !== null);\n      }\n      if (values.length === 0) return [];\n      const max = Math.max(...values, 1);\n      return values.map((v, index) => ({\n        value: v,\n        height: v / max * 100,\n        color: colors[index % colors.length],\n        index: index\n      }));\n    });\n    const lineData = computed(() => {\n      if (!props.field) return [];\n      if (Array.isArray(props.field)) {\n        return props.field.filter(item => {\n          const value = item?.value || item?.raw;\n          return value !== undefined && value !== null && !isYearEntry(value);\n        }).map((item, index) => {\n          const value = safeToNumber(item.value || item.raw, props.fieldKey);\n          return {\n            x: index,\n            y: value,\n            raw: item.raw || item.value,\n            index: index\n          };\n        });\n      }\n      if (typeof props.field === \"object\") {\n        const value = safeToNumber(props.field.value || props.field.raw, props.fieldKey);\n        return value !== null ? [{\n          x: 0,\n          y: value,\n          raw: props.field.raw || props.field.value,\n          index: 0\n        }] : [];\n      }\n      const value = safeToNumber(props.field, props.fieldKey);\n      return value !== null ? [{\n        x: 0,\n        y: value,\n        raw: props.field,\n        index: 0\n      }] : [];\n    });\n    const hasData = computed(() => {\n      if (!props.field) return false;\n      if (Array.isArray(props.field)) return props.field.length > 0;\n      if (typeof props.field === \"object\") return Object.keys(props.field).length > 0;\n      return String(props.field).trim().length > 0;\n    });\n    const __returned__ = {\n      props,\n      emit,\n      hoveredIndex,\n      activeIndex,\n      isTextHovered,\n      pieContainer,\n      barContainer,\n      lineContainer,\n      colors,\n      renderPieChart,\n      renderBarChart,\n      renderLineChart,\n      handleTextHover,\n      resetHover,\n      handleTextClick,\n      formatNumber,\n      formatSimpleText,\n      isYearEntry,\n      safeToNumber,\n      isValidPieData,\n      pieData,\n      simpleBarData,\n      lineData,\n      hasData,\n      computed,\n      ref,\n      onMounted,\n      watch,\n      nextTick,\n      get d3() {\n        return d3;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["computed","ref","onMounted","watch","nextTick","d3","props","__props","emit","__emit","hoveredIndex","activeIndex","isTextHovered","pieContainer","barContainer","lineContainer","colors","field","visualization","hasData","value","isValidPieData","renderPieChart","renderBarChart","renderLineChart","immediate","deep","select","selectAll","remove","container","containerWidth","clientWidth","containerHeight","clientHeight","size","Math","min","radius","svg","append","attr","pie","d","sort","arc","innerRadius","outerRadius","cornerRadius","arcs","data","pieData","enter","i","length","style","on","event","index","transition","duration","tooltip","html","name","toFixed","type","text","width","height","margin","top","right","bottom","left","x","scaleBand","domain","range","simpleBarData","padding","y","scaleLinear","max","nice","bandwidth","formatNumber","fieldKey","lineData","line","curve","curveMonotoneX","datum","raw","handleTextHover","resetHover","handleTextClick","num","Number","isNaN","formatSimpleText","Array","isArray","items","map","item","slice","join","toString","substring","isYearEntry","trimmedValue","trim","test","safeToNumber","undefined","percentMatch","match","parseFloat","numStr","replace","every","processItem","rawValue","filter","result","numValue","values","v","color","Object","keys","String"],"sources":["D:/vue_frame/vue_frame/wikitable-vue/client/src/components/compoents_base/SimpleChart.vue"],"sourcesContent":["<template>\r\n\t<div class=\"simple-chart\">\r\n\t\t<!-- 文本显示 -->\r\n\t\t<template v-if=\"visualization === 'text-only'\">\r\n\t\t\t<div\r\n\t\t\t\tclass=\"simple-text\"\r\n\t\t\t\t@click=\"handleTextClick\"\r\n\t\t\t\t@mouseenter=\"handleTextHover\"\r\n\t\t\t\t@mouseleave=\"resetHover\">\r\n\t\t\t\t{{ formatSimpleText(field) }}\r\n\t\t\t</div>\r\n\t\t\t<div v-if=\"isTextHovered\" class=\"text-tooltip\">点击查看详情</div>\r\n\t\t</template>\r\n\r\n\t\t<!-- 饼图 (D3实现) -->\r\n\t\t<template v-else-if=\"visualization === 'pie-chart'\">\r\n\t\t\t<div\r\n\t\t\t\tv-if=\"hasData && isValidPieData\"\r\n\t\t\t\tclass=\"d3-chart-container\"\r\n\t\t\t\tref=\"pieContainer\"></div>\r\n\t\t\t<div v-else class=\"no-data\">-</div>\r\n\t\t</template>\r\n\r\n\t\t<!-- 柱状图 (D3实现) -->\r\n\t\t<template v-else-if=\"visualization === 'bar-chart'\">\r\n\t\t\t<div v-if=\"hasData\" class=\"d3-chart-container\" ref=\"barContainer\"></div>\r\n\t\t\t<div v-else class=\"no-data\">-</div>\r\n\t\t</template>\r\n\r\n\t\t<!-- 折线图 (D3实现) -->\r\n\t\t<template v-else-if=\"visualization === 'line-chart'\">\r\n\t\t\t<div v-if=\"hasData\" class=\"d3-chart-container\" ref=\"lineContainer\"></div>\r\n\t\t\t<div v-else class=\"no-data\">-</div>\r\n\t\t</template>\r\n\r\n\t\t<!-- 默认显示 -->\r\n\t\t<template v-else>\r\n\t\t\t<div\r\n\t\t\t\tclass=\"simple-text\"\r\n\t\t\t\t@click=\"handleTextClick\"\r\n\t\t\t\t@mouseenter=\"handleTextHover\"\r\n\t\t\t\t@mouseleave=\"resetHover\">\r\n\t\t\t\t{{ formatSimpleText(field) }}\r\n\t\t\t</div>\r\n\t\t\t<div v-if=\"isTextHovered\" class=\"text-tooltip\">点击查看详情</div>\r\n\t\t</template>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { computed, ref, onMounted, watch, nextTick } from \"vue\";\r\n\timport * as d3 from \"d3\";\r\n\r\n\tconst props = defineProps({\r\n\t\tfield: [Object, Array, String, Number],\r\n\t\ttype: String,\r\n\t\tvisualization: String,\r\n\t\tfieldKey: String\r\n\t});\r\n\r\n\tconst emit = defineEmits([\"chartClick\"]);\r\n\r\n\tconst hoveredIndex = ref(null);\r\n\tconst activeIndex = ref(null);\r\n\tconst isTextHovered = ref(false);\r\n\r\n\t// 容器引用\r\n\tconst pieContainer = ref(null);\r\n\tconst barContainer = ref(null);\r\n\tconst lineContainer = ref(null);\r\n\r\n\t// 颜色定义\r\n\tconst colors = [\"#3498db\", \"#e74c3c\", \"#2ecc71\", \"#f39c12\", \"#9b59b6\"];\r\n\r\n\t// 初始化图表\r\n\tonMounted(() => {\r\n\t\twatch(\r\n\t\t\t() => [props.field, props.visualization],\r\n\t\t\t() => {\r\n\t\t\t\tnextTick(() => {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tprops.visualization === \"pie-chart\" &&\r\n\t\t\t\t\t\thasData.value &&\r\n\t\t\t\t\t\tisValidPieData.value\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\trenderPieChart();\r\n\t\t\t\t\t} else if (props.visualization === \"bar-chart\" && hasData.value) {\r\n\t\t\t\t\t\trenderBarChart();\r\n\t\t\t\t\t} else if (props.visualization === \"line-chart\" && hasData.value) {\r\n\t\t\t\t\t\trenderLineChart();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t{ immediate: true, deep: true }\r\n\t\t);\r\n\t});\r\n\r\n\t// 渲染饼图\r\n\tconst renderPieChart = () => {\r\n\t\tif (!pieContainer.value) return;\r\n\r\n\t\t// 清除旧图表\r\n\t\td3.select(pieContainer.value).selectAll(\"*\").remove();\r\n\r\n\t\tconst container = d3.select(pieContainer.value);\r\n\t\tconst containerWidth = pieContainer.value.clientWidth;\r\n\t\tconst containerHeight = pieContainer.value.clientHeight;\r\n\t\tconst size = Math.min(containerWidth, containerHeight);\r\n\t\tconst radius = size / 2;\r\n\r\n\t\tconst svg = container\r\n\t\t\t.append(\"svg\")\r\n\t\t\t.attr(\"width\", \"100%\")\r\n\t\t\t.attr(\"height\", \"100%\")\r\n\t\t\t.attr(\"viewBox\", `0 0 ${size} ${size}`)\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"transform\", `translate(${radius},${radius})`);\r\n\r\n\t\tconst pie = d3\r\n\t\t\t.pie()\r\n\t\t\t.value(d => d.value)\r\n\t\t\t.sort(null);\r\n\r\n\t\tconst arc = d3\r\n\t\t\t.arc()\r\n\t\t\t.innerRadius(0)\r\n\t\t\t.outerRadius(radius * 0.9) // 留出10%的边距\r\n\t\t\t.cornerRadius(2); // 圆角效果\r\n\r\n\t\tconst arcs = svg\r\n\t\t\t.selectAll(\".arc\")\r\n\t\t\t.data(pie(pieData.value))\r\n\t\t\t.enter()\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"class\", \"arc\");\r\n\r\n\t\t// 绘制扇形\r\n\t\tarcs\r\n\t\t\t.append(\"path\")\r\n\t\t\t.attr(\"d\", arc)\r\n\t\t\t.attr(\"fill\", (d, i) => colors[i % colors.length])\r\n\t\t\t.style(\"opacity\", 0.8)\r\n\t\t\t.style(\"stroke\", \"#fff\")\r\n\t\t\t.style(\"stroke-width\", 1)\r\n\t\t\t.on(\"mouseover\", function (event, d) {\r\n\t\t\t\thoveredIndex.value = d.index;\r\n\t\t\t\td3.select(this)\r\n\t\t\t\t\t.transition()\r\n\t\t\t\t\t.duration(200)\r\n\t\t\t\t\t.style(\"opacity\", 1)\r\n\t\t\t\t\t.attr(\"transform\", \"scale(1.05)\");\r\n\r\n\t\t\t\ttooltip\r\n\t\t\t\t\t.style(\"visibility\", \"visible\")\r\n\t\t\t\t\t.html(\r\n\t\t\t\t\t\t`${d.data.name}: ${d.data.value.toFixed(1)}${\r\n\t\t\t\t\t\t\tprops.type === \"percentage\" ? \"%\" : \"\"\r\n\t\t\t\t\t\t}`\r\n\t\t\t\t\t);\r\n\t\t\t})\r\n\t\t\t.on(\"mouseout\", function () {\r\n\t\t\t\thoveredIndex.value = null;\r\n\t\t\t\td3.select(this)\r\n\t\t\t\t\t.transition()\r\n\t\t\t\t\t.duration(200)\r\n\t\t\t\t\t.style(\"opacity\", 0.8)\r\n\t\t\t\t\t.attr(\"transform\", \"scale(1)\");\r\n\r\n\t\t\t\ttooltip.style(\"visibility\", \"hidden\");\r\n\t\t\t})\r\n\t\t\t.on(\"click\", function (event, d) {\r\n\t\t\t\tactiveIndex.value = d.index;\r\n\t\t\t\temit(\"chartClick\", {\r\n\t\t\t\t\ttype: \"pie\",\r\n\t\t\t\t\tindex: d.index,\r\n\t\t\t\t\tdata: d.data,\r\n\t\t\t\t\tvalue: d.data.value\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t// 单值时的中心文字\r\n\t\tif (pieData.value.length === 1) {\r\n\t\t\tsvg\r\n\t\t\t\t.append(\"text\")\r\n\t\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t\t.attr(\"dy\", \".3em\")\r\n\t\t\t\t.text(\r\n\t\t\t\t\t`${pieData.value[0].value.toFixed(1)}${\r\n\t\t\t\t\t\tprops.type === \"percentage\" ? \"%\" : \"\"\r\n\t\t\t\t\t}`\r\n\t\t\t\t)\r\n\t\t\t\t.style(\"font-size\", \"14px\")\r\n\t\t\t\t.style(\"fill\", \"#333\");\r\n\t\t}\r\n\r\n\t\t// 创建tooltip\r\n\t\tconst tooltip = container\r\n\t\t\t.append(\"div\")\r\n\t\t\t.attr(\"class\", \"d3-tooltip\")\r\n\t\t\t.style(\"position\", \"absolute\")\r\n\t\t\t.style(\"visibility\", \"hidden\")\r\n\t\t\t.style(\"background\", \"rgba(0,0,0,0.8)\")\r\n\t\t\t.style(\"color\", \"white\")\r\n\t\t\t.style(\"padding\", \"6px 12px\")\r\n\t\t\t.style(\"border-radius\", \"4px\")\r\n\t\t\t.style(\"font-size\", \"12px\");\r\n\t};\r\n\r\n\t// 渲染柱状图\r\n\tconst renderBarChart = () => {\r\n\t\tif (!barContainer.value) return;\r\n\r\n\t\t// 清除旧图表\r\n\t\td3.select(barContainer.value).selectAll(\"*\").remove();\r\n\r\n\t\tconst container = d3.select(barContainer.value);\r\n\t\tconst width = barContainer.value.clientWidth;\r\n\t\tconst height = barContainer.value.clientHeight;\r\n\t\tconst margin = { top: 10, right: 10, bottom: 10, left: 10 };\r\n\r\n\t\tconst svg = container\r\n\t\t\t.append(\"svg\")\r\n\t\t\t.attr(\"width\", \"100%\")\r\n\t\t\t.attr(\"height\", \"100%\")\r\n\t\t\t.attr(\"viewBox\", `0 0 ${width} ${height}`);\r\n\r\n\t\tconst x = d3\r\n\t\t\t.scaleBand()\r\n\t\t\t.domain(d3.range(simpleBarData.value.length))\r\n\t\t\t.range([margin.left, width - margin.right])\r\n\t\t\t.padding(0.2);\r\n\r\n\t\tconst y = d3\r\n\t\t\t.scaleLinear()\r\n\t\t\t.domain([0, d3.max(simpleBarData.value, d => d.value)])\r\n\t\t\t.nice()\r\n\t\t\t.range([height - margin.bottom, margin.top]);\r\n\r\n\t\t// 绘制柱子\r\n\t\tsvg\r\n\t\t\t.selectAll(\".bar\")\r\n\t\t\t.data(simpleBarData.value)\r\n\t\t\t.enter()\r\n\t\t\t.append(\"rect\")\r\n\t\t\t.attr(\"class\", \"bar\")\r\n\t\t\t.attr(\"x\", (d, i) => x(i))\r\n\t\t\t.attr(\"y\", d => y(d.value))\r\n\t\t\t.attr(\"width\", x.bandwidth())\r\n\t\t\t.attr(\"height\", d => y(0) - y(d.value))\r\n\t\t\t.attr(\"fill\", (d, i) => colors[i % colors.length])\r\n\t\t\t.style(\"opacity\", 0.8)\r\n\t\t\t.on(\"mouseover\", function (event, d) {\r\n\t\t\t\thoveredIndex.value = d.index;\r\n\t\t\t\td3.select(this)\r\n\t\t\t\t\t.transition()\r\n\t\t\t\t\t.duration(200)\r\n\t\t\t\t\t.style(\"opacity\", 1)\r\n\t\t\t\t\t.attr(\"y\", d => y(d.value) - 5)\r\n\t\t\t\t\t.attr(\"height\", d => y(0) - y(d.value) + 5);\r\n\r\n\t\t\t\ttooltip\r\n\t\t\t\t\t.style(\"visibility\", \"visible\")\r\n\t\t\t\t\t.html(`${formatNumber(d.value, props.fieldKey)}`);\r\n\t\t\t})\r\n\t\t\t.on(\"mouseout\", function () {\r\n\t\t\t\thoveredIndex.value = null;\r\n\t\t\t\td3.select(this)\r\n\t\t\t\t\t.transition()\r\n\t\t\t\t\t.duration(200)\r\n\t\t\t\t\t.style(\"opacity\", 0.8)\r\n\t\t\t\t\t.attr(\"y\", d => y(d.value))\r\n\t\t\t\t\t.attr(\"height\", d => y(0) - y(d.value));\r\n\r\n\t\t\t\ttooltip.style(\"visibility\", \"hidden\");\r\n\t\t\t})\r\n\t\t\t.on(\"click\", function (event, d) {\r\n\t\t\t\tactiveIndex.value = d.index;\r\n\t\t\t\temit(\"chartClick\", {\r\n\t\t\t\t\ttype: \"bar\",\r\n\t\t\t\t\tindex: d.index,\r\n\t\t\t\t\tdata: d,\r\n\t\t\t\t\tvalue: d.value\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t// 创建tooltip\r\n\t\tconst tooltip = container\r\n\t\t\t.append(\"div\")\r\n\t\t\t.attr(\"class\", \"d3-tooltip\")\r\n\t\t\t.style(\"position\", \"absolute\")\r\n\t\t\t.style(\"visibility\", \"hidden\")\r\n\t\t\t.style(\"background\", \"rgba(0,0,0,0.8)\")\r\n\t\t\t.style(\"color\", \"white\")\r\n\t\t\t.style(\"padding\", \"6px 12px\")\r\n\t\t\t.style(\"border-radius\", \"4px\")\r\n\t\t\t.style(\"font-size\", \"12px\");\r\n\t};\r\n\r\n\t// 渲染折线图\r\n\tconst renderLineChart = () => {\r\n\t\tif (!lineContainer.value) return;\r\n\r\n\t\t// 清除旧图表\r\n\t\td3.select(lineContainer.value).selectAll(\"*\").remove();\r\n\r\n\t\tconst container = d3.select(lineContainer.value);\r\n\t\tconst width = lineContainer.value.clientWidth;\r\n\t\tconst height = lineContainer.value.clientHeight;\r\n\t\tconst margin = { top: 10, right: 10, bottom: 10, left: 10 };\r\n\r\n\t\tconst svg = container\r\n\t\t\t.append(\"svg\")\r\n\t\t\t.attr(\"width\", \"100%\")\r\n\t\t\t.attr(\"height\", \"100%\")\r\n\t\t\t.attr(\"viewBox\", `0 0 ${width} ${height}`);\r\n\r\n\t\tconst x = d3\r\n\t\t\t.scaleLinear()\r\n\t\t\t.domain([0, lineData.value.length - 1])\r\n\t\t\t.range([margin.left, width - margin.right]);\r\n\r\n\t\tconst y = d3\r\n\t\t\t.scaleLinear()\r\n\t\t\t.domain([\r\n\t\t\t\td3.min(lineData.value, d => d.y),\r\n\t\t\t\td3.max(lineData.value, d => d.y)\r\n\t\t\t])\r\n\t\t\t.nice()\r\n\t\t\t.range([height - margin.bottom, margin.top]);\r\n\r\n\t\tconst line = d3\r\n\t\t\t.line()\r\n\t\t\t.x((d, i) => x(i))\r\n\t\t\t.y(d => y(d.y))\r\n\t\t\t.curve(d3.curveMonotoneX);\r\n\r\n\t\t// 绘制折线\r\n\t\tsvg\r\n\t\t\t.append(\"path\")\r\n\t\t\t.datum(lineData.value)\r\n\t\t\t.attr(\"fill\", \"none\")\r\n\t\t\t.attr(\"stroke\", \"#3498db\")\r\n\t\t\t.attr(\"stroke-width\", 2)\r\n\t\t\t.attr(\"d\", line);\r\n\r\n\t\t// 绘制数据点\r\n\t\tsvg\r\n\t\t\t.selectAll(\".dot\")\r\n\t\t\t.data(lineData.value)\r\n\t\t\t.enter()\r\n\t\t\t.append(\"circle\")\r\n\t\t\t.attr(\"class\", \"dot\")\r\n\t\t\t.attr(\"cx\", (d, i) => x(i))\r\n\t\t\t.attr(\"cy\", d => y(d.y))\r\n\t\t\t.attr(\"r\", 3)\r\n\t\t\t.attr(\"fill\", \"#3498db\")\r\n\t\t\t.on(\"mouseover\", function (event, d) {\r\n\t\t\t\thoveredIndex.value = d.index;\r\n\t\t\t\td3.select(this)\r\n\t\t\t\t\t.transition()\r\n\t\t\t\t\t.duration(200)\r\n\t\t\t\t\t.attr(\"r\", 5)\r\n\t\t\t\t\t.attr(\"stroke\", \"white\")\r\n\t\t\t\t\t.attr(\"stroke-width\", 1);\r\n\r\n\t\t\t\ttooltip\r\n\t\t\t\t\t.style(\"visibility\", \"visible\")\r\n\t\t\t\t\t.html(`${d.raw || formatNumber(d.y, props.fieldKey)}`);\r\n\t\t\t})\r\n\t\t\t.on(\"mouseout\", function () {\r\n\t\t\t\thoveredIndex.value = null;\r\n\t\t\t\td3.select(this)\r\n\t\t\t\t\t.transition()\r\n\t\t\t\t\t.duration(200)\r\n\t\t\t\t\t.attr(\"r\", 3)\r\n\t\t\t\t\t.attr(\"stroke\", \"none\");\r\n\r\n\t\t\t\ttooltip.style(\"visibility\", \"hidden\");\r\n\t\t\t})\r\n\t\t\t.on(\"click\", function (event, d) {\r\n\t\t\t\tactiveIndex.value = d.index;\r\n\t\t\t\temit(\"chartClick\", {\r\n\t\t\t\t\ttype: \"line\",\r\n\t\t\t\t\tindex: d.index,\r\n\t\t\t\t\tdata: d,\r\n\t\t\t\t\tvalue: d.y\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t// 创建tooltip\r\n\t\tconst tooltip = container\r\n\t\t\t.append(\"div\")\r\n\t\t\t.attr(\"class\", \"d3-tooltip\")\r\n\t\t\t.style(\"position\", \"absolute\")\r\n\t\t\t.style(\"visibility\", \"hidden\")\r\n\t\t\t.style(\"background\", \"rgba(0,0,0,0.8)\")\r\n\t\t\t.style(\"color\", \"white\")\r\n\t\t\t.style(\"padding\", \"6px 12px\")\r\n\t\t\t.style(\"border-radius\", \"4px\")\r\n\t\t\t.style(\"font-size\", \"12px\");\r\n\t};\r\n\r\n\t// 交互处理函数\r\n\tconst handleTextHover = () => {\r\n\t\tisTextHovered.value = true;\r\n\t};\r\n\r\n\tconst resetHover = () => {\r\n\t\thoveredIndex.value = null;\r\n\t\tisTextHovered.value = false;\r\n\t};\r\n\r\n\tconst handleTextClick = () => {\r\n\t\temit(\"chartClick\", {\r\n\t\t\ttype: \"text\",\r\n\t\t\tdata: props.field,\r\n\t\t\tvalue: props.field\r\n\t\t});\r\n\t};\r\n\r\n\t// 数据格式化函数\r\n\tconst formatNumber = (value, fieldKey) => {\r\n\t\tconst num = Number(value);\r\n\t\tif (isNaN(num)) return \"0\";\r\n\r\n\t\tif (props.type === \"percentage\") {\r\n\t\t\treturn num.toFixed(1) + \"%\";\r\n\t\t}\r\n\t\tif (fieldKey === \"GDP\") {\r\n\t\t\treturn num.toFixed(2) + \"T\";\r\n\t\t}\r\n\t\tif (fieldKey === \"Population\") {\r\n\t\t\treturn num.toFixed(2) + \"亿\";\r\n\t\t}\r\n\t\treturn num.toFixed(2);\r\n\t};\r\n\r\n\tconst formatSimpleText = value => {\r\n\t\tif (!value) return \"-\";\r\n\t\tif (Array.isArray(value)) {\r\n\t\t\tconst items = value.map(item => item.raw || item.value || item);\r\n\t\t\treturn items.length > 2\r\n\t\t\t\t? items.slice(0, 2).join(\"; \") + \"...\"\r\n\t\t\t\t: items.join(\"; \");\r\n\t\t}\r\n\t\tif (typeof value === \"object\") {\r\n\t\t\treturn value.raw || value.value || \"-\";\r\n\t\t}\r\n\t\treturn value.toString().length > 50\r\n\t\t\t? value.toString().substring(0, 50) + \"...\"\r\n\t\t\t: value.toString();\r\n\t};\r\n\r\n\t// 数据处理函数\r\n\tconst isYearEntry = value => {\r\n\t\tif (typeof value !== \"string\") return false;\r\n\t\tconst trimmedValue = value.trim();\r\n\t\treturn (\r\n\t\t\t/^(\\()?\\d{4}(\\))?\\s*:?/.test(trimmedValue) ||\r\n\t\t\t/^\\(?FY\\s*\\d{4}\\)?\\s*:?/i.test(trimmedValue) ||\r\n\t\t\t/^(\\()?\\d{4}\\s*[-–]\\s*\\d{2,4}(\\))?\\s*:?/.test(trimmedValue) ||\r\n\t\t\t/^(Year|Yr|Annual)\\s*\\d{4}/i.test(trimmedValue)\r\n\t\t);\r\n\t};\r\n\r\n\tconst safeToNumber = (value, fieldKey) => {\r\n\t\tif (value === null || value === undefined) return 0;\r\n\t\tif (typeof value === \"number\") return value;\r\n\t\tif (typeof value === \"string\") {\r\n\t\t\tconst percentMatch = value.match(/(\\d+\\.?\\d*)%/);\r\n\t\t\tif (percentMatch) return parseFloat(percentMatch[1]);\r\n\t\t\tconst numStr = value.toString().replace(/[^0-9.-]/g, \"\");\r\n\t\t\tconst num = parseFloat(numStr);\r\n\t\t\treturn isNaN(num) ? 0 : num;\r\n\t\t}\r\n\t\treturn 0;\r\n\t};\r\n\r\n\tconst isValidPieData = computed(() => {\r\n\t\tif (!pieData.value.length) return false;\r\n\t\treturn pieData.value.every(\r\n\t\t\titem => !isYearEntry(item.name) && !isYearEntry(item.value)\r\n\t\t);\r\n\t});\r\n\r\n\tconst pieData = computed(() => {\r\n\t\tif (!props.field) return [];\r\n\r\n\t\tconst processItem = item => {\r\n\t\t\tconst rawValue = item?.value || item?.raw || item;\r\n\t\t\tif (isYearEntry(rawValue)) return null;\r\n\r\n\t\t\tconst value = safeToNumber(rawValue, props.fieldKey);\r\n\t\t\tif (value === null) return null;\r\n\r\n\t\t\tlet name =\r\n\t\t\t\ttypeof item === \"object\"\r\n\t\t\t\t\t? (item.raw || \"\").replace(/:\\s*\\d+\\.?\\d*%?/g, \"\")\r\n\t\t\t\t\t: \"项目\";\r\n\r\n\t\t\tif (isYearEntry(name)) return null;\r\n\r\n\t\t\treturn {\r\n\t\t\t\tvalue: Math.min(100, Math.max(0, value)),\r\n\t\t\t\tname: name.trim() || \"项目\",\r\n\t\t\t\tindex: index\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t\tif (Array.isArray(props.field)) {\r\n\t\t\treturn props.field\r\n\t\t\t\t.map(processItem)\r\n\t\t\t\t.filter(item => item !== null && !isYearEntry(item.name))\r\n\t\t\t\t.map((item, index) => ({ ...item, index }));\r\n\t\t}\r\n\r\n\t\tif (typeof props.field === \"object\") {\r\n\t\t\tconst result = processItem(props.field);\r\n\t\t\treturn result ? [{ ...result, index: 0 }] : [];\r\n\t\t}\r\n\r\n\t\tif (isYearEntry(props.field)) return [];\r\n\t\tconst numValue = safeToNumber(props.field, props.fieldKey);\r\n\t\treturn numValue !== null && !isYearEntry(props.field)\r\n\t\t\t? [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvalue: Math.min(100, Math.max(0, numValue)),\r\n\t\t\t\t\t\tname: \"数值\",\r\n\t\t\t\t\t\tindex: 0\r\n\t\t\t\t\t}\r\n\t\t\t  ]\r\n\t\t\t: [];\r\n\t});\r\n\r\n\tconst simpleBarData = computed(() => {\r\n\t\tif (!props.field) return [];\r\n\r\n\t\tlet values = [];\r\n\r\n\t\tif (Array.isArray(props.field)) {\r\n\t\t\tvalues = props.field\r\n\t\t\t\t.filter(item => {\r\n\t\t\t\t\tconst value = item?.value || item?.raw;\r\n\t\t\t\t\treturn value !== undefined && value !== null && !isYearEntry(value);\r\n\t\t\t\t})\r\n\t\t\t\t.map(item => safeToNumber(item.value || item.raw, props.fieldKey));\r\n\t\t} else if (typeof props.field === \"object\") {\r\n\t\t\tvalues = [\r\n\t\t\t\tsafeToNumber(props.field.value || props.field.raw, props.fieldKey)\r\n\t\t\t].filter(v => v !== null);\r\n\t\t} else {\r\n\t\t\tvalues = [safeToNumber(props.field, props.fieldKey)].filter(\r\n\t\t\t\tv => v !== null\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (values.length === 0) return [];\r\n\r\n\t\tconst max = Math.max(...values, 1);\r\n\t\treturn values.map((v, index) => ({\r\n\t\t\tvalue: v,\r\n\t\t\theight: (v / max) * 100,\r\n\t\t\tcolor: colors[index % colors.length],\r\n\t\t\tindex: index\r\n\t\t}));\r\n\t});\r\n\r\n\tconst lineData = computed(() => {\r\n\t\tif (!props.field) return [];\r\n\r\n\t\tif (Array.isArray(props.field)) {\r\n\t\t\treturn props.field\r\n\t\t\t\t.filter(item => {\r\n\t\t\t\t\tconst value = item?.value || item?.raw;\r\n\t\t\t\t\treturn value !== undefined && value !== null && !isYearEntry(value);\r\n\t\t\t\t})\r\n\t\t\t\t.map((item, index) => {\r\n\t\t\t\t\tconst value = safeToNumber(item.value || item.raw, props.fieldKey);\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tx: index,\r\n\t\t\t\t\t\ty: value,\r\n\t\t\t\t\t\traw: item.raw || item.value,\r\n\t\t\t\t\t\tindex: index\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (typeof props.field === \"object\") {\r\n\t\t\tconst value = safeToNumber(\r\n\t\t\t\tprops.field.value || props.field.raw,\r\n\t\t\t\tprops.fieldKey\r\n\t\t\t);\r\n\t\t\treturn value !== null\r\n\t\t\t\t? [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tx: 0,\r\n\t\t\t\t\t\t\ty: value,\r\n\t\t\t\t\t\t\traw: props.field.raw || props.field.value,\r\n\t\t\t\t\t\t\tindex: 0\r\n\t\t\t\t\t\t}\r\n\t\t\t\t  ]\r\n\t\t\t\t: [];\r\n\t\t}\r\n\r\n\t\tconst value = safeToNumber(props.field, props.fieldKey);\r\n\t\treturn value !== null\r\n\t\t\t? [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tx: 0,\r\n\t\t\t\t\t\ty: value,\r\n\t\t\t\t\t\traw: props.field,\r\n\t\t\t\t\t\tindex: 0\r\n\t\t\t\t\t}\r\n\t\t\t  ]\r\n\t\t\t: [];\r\n\t});\r\n\r\n\tconst hasData = computed(() => {\r\n\t\tif (!props.field) return false;\r\n\t\tif (Array.isArray(props.field)) return props.field.length > 0;\r\n\t\tif (typeof props.field === \"object\")\r\n\t\t\treturn Object.keys(props.field).length > 0;\r\n\t\treturn String(props.field).trim().length > 0;\r\n\t});\r\n</script>\r\n\r\n<style scoped>\r\n\t.simple-chart {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tposition: relative;\r\n\t\tfont-family: Arial, sans-serif;\r\n\t}\r\n\r\n\t/* 文本样式 */\r\n\t.simple-text {\r\n\t\ttext-align: center;\r\n\t\tfont-size: 14px;\r\n\t\tword-break: break-word;\r\n\t\tpadding: 8px;\r\n\t\tcursor: pointer;\r\n\t\ttransition: all 0.2s ease;\r\n\t\tborder-radius: 4px;\r\n\t\tbackground-color: #f8f9fa;\r\n\t\tmax-width: 100%;\r\n\t}\r\n\r\n\t.simple-text:hover {\r\n\t\tbackground-color: #e9ecef;\r\n\t\ttransform: translateY(-2px);\r\n\t\tbox-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\r\n\t}\r\n\r\n\t.text-tooltip {\r\n\t\tposition: absolute;\r\n\t\ttop: -25px;\r\n\t\tleft: 50%;\r\n\t\ttransform: translateX(-50%);\r\n\t\tbackground-color: rgba(0, 0, 0, 0.8);\r\n\t\tcolor: white;\r\n\t\tpadding: 4px 8px;\r\n\t\tborder-radius: 4px;\r\n\t\tfont-size: 12px;\r\n\t\tpointer-events: none;\r\n\t\twhite-space: nowrap;\r\n\t\tz-index: 10;\r\n\t}\r\n\r\n\t/* D3图表容器 */\r\n\t.d3-chart-container {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tmin-height: 80px;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t/* D3 tooltip样式 */\r\n\t.d3-tooltip {\r\n\t\tz-index: 10;\r\n\t\twhite-space: nowrap;\r\n\t\tpointer-events: none;\r\n\t\tbox-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\r\n\t}\r\n\r\n\t/* 无数据样式 */\r\n\t.no-data {\r\n\t\tcolor: #999;\r\n\t\tfont-style: italic;\r\n\t\tpadding: 10px;\r\n\t}\r\n\r\n\t/* 响应式调整 */\r\n\t@media (max-width: 768px) {\r\n\t\t.simple-text {\r\n\t\t\tfont-size: 12px;\r\n\t\t}\r\n\r\n\t\t.d3-chart-container {\r\n\t\t\tmin-height: 60px;\r\n\t\t}\r\n\t}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}