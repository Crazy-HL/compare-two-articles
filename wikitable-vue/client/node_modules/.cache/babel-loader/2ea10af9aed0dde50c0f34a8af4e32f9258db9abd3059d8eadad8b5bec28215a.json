{"ast":null,"code":"export default {\n  data() {\n    return {\n      selectionStartX: 0,\n      selectionStartY: 0,\n      isSelecting: false,\n      overlayStyle: {\n        display: \"none\",\n        left: \"0px\",\n        top: \"0px\",\n        width: \"0px\",\n        height: \"0px\",\n        backgroundColor: \"rgba(255, 0, 0, 0.3)\" // Red overlay color\n      }\n    };\n  },\n  methods: {\n    // 开始选择文本\n    startSelection(event) {\n      const iframe = document.getElementById(event.target.id === \"frameLeft\" ? \"frameLeft\" : \"frameRight\");\n      const iframeRect = iframe.getBoundingClientRect();\n      this.selectionStartX = event.clientX - iframeRect.left;\n      this.selectionStartY = event.clientY - iframeRect.top;\n      this.isSelecting = true;\n      this.overlayStyle.display = \"block\";\n      this.overlayStyle.left = `${this.selectionStartX}px`;\n      this.overlayStyle.top = `${this.selectionStartY}px`;\n    },\n    // 更新选择框的大小\n    updateSelection(event) {\n      if (!this.isSelecting) return;\n      const iframe = document.getElementById(event.target.id === \"frameLeft\" ? \"frameLeft\" : \"frameRight\");\n      const iframeRect = iframe.getBoundingClientRect();\n      const currentX = event.clientX - iframeRect.left;\n      const currentY = event.clientY - iframeRect.top;\n      const width = currentX - this.selectionStartX;\n      const height = currentY - this.selectionStartY;\n      this.overlayStyle.width = `${Math.abs(width)}px`;\n      this.overlayStyle.height = `${Math.abs(height)}px`;\n      if (width < 0) this.overlayStyle.left = `${currentX}px`;\n      if (height < 0) this.overlayStyle.top = `${currentY}px`;\n    },\n    // 结束选择并提取文本\n    endSelection() {\n      this.isSelecting = false;\n\n      // 获取当前选中文本\n      const iframe = document.getElementById(this.overlayStyle.left === \"0px\" ? \"frameLeft\" : \"frameRight\");\n      const iframeDoc = iframe.contentWindow.document;\n\n      // 获取选中的文本\n      const selectedText = iframe.contentWindow.getSelection().toString();\n      if (selectedText) {\n        console.log(\"选中的文本:\", selectedText); // 打印选中的文本\n        alert(`选中的文本: ${selectedText}`);\n      } else {\n        console.log(\"没有选中文本\");\n      }\n\n      // 隐藏选择框\n      this.overlayStyle.display = \"none\";\n    }\n  },\n  mounted() {\n    // 注册鼠标移动和松开事件\n    document.addEventListener(\"mousemove\", this.updateSelection);\n    document.addEventListener(\"mouseup\", this.endSelection);\n  },\n  beforeDestroy() {\n    document.removeEventListener(\"mousemove\", this.updateSelection);\n    document.removeEventListener(\"mouseup\", this.endSelection);\n  }\n};","map":{"version":3,"names":["data","selectionStartX","selectionStartY","isSelecting","overlayStyle","display","left","top","width","height","backgroundColor","methods","startSelection","event","iframe","document","getElementById","target","id","iframeRect","getBoundingClientRect","clientX","clientY","updateSelection","currentX","currentY","Math","abs","endSelection","iframeDoc","contentWindow","selectedText","getSelection","toString","console","log","alert","mounted","addEventListener","beforeDestroy","removeEventListener"],"sources":["D:\\vue_frame\\vue_frame\\wikitable-vue\\client\\src\\components\\news2.vue"],"sourcesContent":["<template>\r\n\t<div id=\"root\">\r\n\t\t<div class=\"div0\" id=\"div1\">\r\n\t\t\t<!-- 使用代理服务器转发请求 -->\r\n\t\t\t<iframe\r\n\t\t\t\tid=\"frameLeft\"\r\n\t\t\t\tsrc=\"http://localhost:3000/proxy/item/%E5%94%90%E6%9C%9D/53699\"\r\n\t\t\t\ttitle=\"页面1\"></iframe>\r\n\t\t\t<div id=\"overlay\" class=\"overlay\" @mousedown=\"startSelection\"></div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"div0\" id=\"div2\">\r\n\t\t\t<div class=\"VisContainer\">\r\n\t\t\t\t<div class=\"topContainer\"></div>\r\n\t\t\t\t<div class=\"botContainer\"></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"div0\" id=\"div3\">\r\n\t\t\t<!-- 使用代理服务器转发请求 -->\r\n\t\t\t<iframe\r\n\t\t\t\tid=\"frameRight\"\r\n\t\t\t\tsrc=\"http://localhost:3000/proxy/item/%E5%94%90%E6%9C%9D/53699\"\r\n\t\t\t\ttitle=\"页面2\"></iframe>\r\n\t\t\t<div id=\"overlay\" class=\"overlay\" @mousedown=\"startSelection\"></div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tselectionStartX: 0,\r\n\t\t\t\tselectionStartY: 0,\r\n\t\t\t\tisSelecting: false,\r\n\t\t\t\toverlayStyle: {\r\n\t\t\t\t\tdisplay: \"none\",\r\n\t\t\t\t\tleft: \"0px\",\r\n\t\t\t\t\ttop: \"0px\",\r\n\t\t\t\t\twidth: \"0px\",\r\n\t\t\t\t\theight: \"0px\",\r\n\t\t\t\t\tbackgroundColor: \"rgba(255, 0, 0, 0.3)\" // Red overlay color\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 开始选择文本\r\n\t\t\tstartSelection(event) {\r\n\t\t\t\tconst iframe = document.getElementById(\r\n\t\t\t\t\tevent.target.id === \"frameLeft\" ? \"frameLeft\" : \"frameRight\"\r\n\t\t\t\t);\r\n\t\t\t\tconst iframeRect = iframe.getBoundingClientRect();\r\n\r\n\t\t\t\tthis.selectionStartX = event.clientX - iframeRect.left;\r\n\t\t\t\tthis.selectionStartY = event.clientY - iframeRect.top;\r\n\t\t\t\tthis.isSelecting = true;\r\n\r\n\t\t\t\tthis.overlayStyle.display = \"block\";\r\n\t\t\t\tthis.overlayStyle.left = `${this.selectionStartX}px`;\r\n\t\t\t\tthis.overlayStyle.top = `${this.selectionStartY}px`;\r\n\t\t\t},\r\n\r\n\t\t\t// 更新选择框的大小\r\n\t\t\tupdateSelection(event) {\r\n\t\t\t\tif (!this.isSelecting) return;\r\n\t\t\t\tconst iframe = document.getElementById(\r\n\t\t\t\t\tevent.target.id === \"frameLeft\" ? \"frameLeft\" : \"frameRight\"\r\n\t\t\t\t);\r\n\t\t\t\tconst iframeRect = iframe.getBoundingClientRect();\r\n\r\n\t\t\t\tconst currentX = event.clientX - iframeRect.left;\r\n\t\t\t\tconst currentY = event.clientY - iframeRect.top;\r\n\r\n\t\t\t\tconst width = currentX - this.selectionStartX;\r\n\t\t\t\tconst height = currentY - this.selectionStartY;\r\n\r\n\t\t\t\tthis.overlayStyle.width = `${Math.abs(width)}px`;\r\n\t\t\t\tthis.overlayStyle.height = `${Math.abs(height)}px`;\r\n\t\t\t\tif (width < 0) this.overlayStyle.left = `${currentX}px`;\r\n\t\t\t\tif (height < 0) this.overlayStyle.top = `${currentY}px`;\r\n\t\t\t},\r\n\r\n\t\t\t// 结束选择并提取文本\r\n\t\t\tendSelection() {\r\n\t\t\t\tthis.isSelecting = false;\r\n\r\n\t\t\t\t// 获取当前选中文本\r\n\t\t\t\tconst iframe = document.getElementById(\r\n\t\t\t\t\tthis.overlayStyle.left === \"0px\" ? \"frameLeft\" : \"frameRight\"\r\n\t\t\t\t);\r\n\t\t\t\tconst iframeDoc = iframe.contentWindow.document;\r\n\r\n\t\t\t\t// 获取选中的文本\r\n\t\t\t\tconst selectedText = iframe.contentWindow.getSelection().toString();\r\n\r\n\t\t\t\tif (selectedText) {\r\n\t\t\t\t\tconsole.log(\"选中的文本:\", selectedText); // 打印选中的文本\r\n\t\t\t\t\talert(`选中的文本: ${selectedText}`);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"没有选中文本\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 隐藏选择框\r\n\t\t\t\tthis.overlayStyle.display = \"none\";\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t// 注册鼠标移动和松开事件\r\n\t\t\tdocument.addEventListener(\"mousemove\", this.updateSelection);\r\n\t\t\tdocument.addEventListener(\"mouseup\", this.endSelection);\r\n\t\t},\r\n\t\tbeforeDestroy() {\r\n\t\t\tdocument.removeEventListener(\"mousemove\", this.updateSelection);\r\n\t\t\tdocument.removeEventListener(\"mouseup\", this.endSelection);\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t#root {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\t\talign-items: flex-start;\r\n\t\theight: 100vh;\r\n\t\tmargin: 0;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.div0 {\r\n\t\tposition: absolute;\r\n\t\theight: 100vh;\r\n\t}\r\n\r\n\tiframe {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tborder: 1px solid #ccc;\r\n\t}\r\n\r\n\t.overlay {\r\n\t\tposition: absolute;\r\n\t\tpointer-events: none; /* 防止遮挡 iframe 内的内容 */\r\n\t\tz-index: 10;\r\n\t\tbackground-color: rgba(255, 0, 0, 0.3); /* 红色背景，半透明 */\r\n\t}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}