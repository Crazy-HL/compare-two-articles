{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, withModifiers as _withModifiers, normalizeStyle as _normalizeStyle, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '@/assets/outline-icon.svg';\nconst _withScopeId = n => (_pushScopeId(\"data-v-1f9d3193\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"outline-container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0,\n  alt: \"Outline\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_3 = [_hoisted_2];\nconst _hoisted_4 = {\n  key: 0,\n  class: \"outline-content\"\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"文章大纲\", -1 /* HOISTED */));\nconst _hoisted_6 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" 大纲按钮 \"), _createElementVNode(\"button\", {\n    class: \"outline-toggle\",\n    onClick: $setup.toggleOutline\n  }, [..._hoisted_3]), _createCommentVNode(\" 大纲内容 \"), $setup.showOutline ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_hoisted_5, _createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.outline, item => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: item.id,\n      style: _normalizeStyle({\n        paddingLeft: `${(item.level - 1) * 15}px`\n      })\n    }, [_createElementVNode(\"a\", {\n      href: \"#\",\n      onClick: _withModifiers($event => $setup.scrollToSection(item.id), [\"prevent\"])\n    }, _toDisplayString(item.text), 9 /* TEXT, PROPS */, _hoisted_6)], 4 /* STYLE */);\n  }), 128 /* KEYED_FRAGMENT */))])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["_imports_0","class","_createElementVNode","src","alt","_hoisted_2","key","_createElementBlock","_hoisted_1","_createCommentVNode","onClick","$setup","toggleOutline","_hoisted_3","showOutline","_hoisted_4","_hoisted_5","_Fragment","_renderList","outline","item","id","style","_normalizeStyle","paddingLeft","level","href","_withModifiers","$event","scrollToSection","text","_hoisted_6"],"sources":["D:\\vue_frame\\vue_frame\\wikitable-vue\\client\\src\\components\\compoents_base\\ArticleOutline.vue"],"sourcesContent":["<template>\r\n\t<div class=\"outline-container\">\r\n\t\t<!-- 大纲按钮 -->\r\n\t\t<button class=\"outline-toggle\" @click=\"toggleOutline\">\r\n\t\t\t<img src=\"@/assets/outline-icon.svg\" alt=\"Outline\" />\r\n\t\t</button>\r\n\r\n\t\t<!-- 大纲内容 -->\r\n\t\t<div v-if=\"showOutline\" class=\"outline-content\">\r\n\t\t\t<h3>文章大纲</h3>\r\n\t\t\t<ul>\r\n\t\t\t\t<li\r\n\t\t\t\t\tv-for=\"item in outline\"\r\n\t\t\t\t\t:key=\"item.id\"\r\n\t\t\t\t\t:style=\"{ paddingLeft: `${(item.level - 1) * 15}px` }\">\r\n\t\t\t\t\t<a href=\"#\" @click.prevent=\"scrollToSection(item.id)\">{{\r\n\t\t\t\t\t\titem.text\r\n\t\t\t\t\t}}</a>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ref, watch, nextTick } from \"vue\";\r\n\r\n\tconst props = defineProps({\r\n\t\tcontent: String, // Wikipedia 文章的 HTML\r\n\t\tdivId: String // 确保大纲 ID 绑定到正确的 div\r\n\t});\r\n\r\n\tconst outline = ref([]);\r\n\tconst showOutline = ref(false);\r\n\r\n\t// **提取文章大纲**\r\n\tconst extractOutline = content => {\r\n\t\tif (!content) return [];\r\n\r\n\t\tconst parser = new DOMParser();\r\n\t\tconst doc = parser.parseFromString(content, \"text/html\");\r\n\t\tconst headings = doc.querySelectorAll(\"h1, h2, h3, h4, h5, h6\");\r\n\r\n\t\treturn Array.from(headings).map((heading, index) => ({\r\n\t\t\tid: heading.id, // 确保 ID 绑定到文章中的标题\r\n\t\t\ttext: heading.textContent.trim(),\r\n\t\t\tlevel: parseInt(heading.tagName.substring(1))\r\n\t\t}));\r\n\t};\r\n\r\n\t// **监听 content 变化，动态更新大纲**\r\n\twatch(\r\n\t\t() => props.content,\r\n\t\tnewContent => {\r\n\t\t\toutline.value = extractOutline(newContent);\r\n\t\t},\r\n\t\t{ immediate: true }\r\n\t);\r\n\r\n\t// **点击大纲跳转到对应标题**\r\n\tconst scrollToSection = id => {\r\n\t\tnextTick(() => {\r\n\t\t\tconst target = document.getElementById(id);\r\n\t\t\tif (target) {\r\n\t\t\t\ttarget.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\r\n\t\t\t} else {\r\n\t\t\t\tconsole.error(`未找到 ID: ${id} 的目标元素`);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t// **切换大纲显示**\r\n\tconst toggleOutline = () => {\r\n\t\tshowOutline.value = !showOutline.value;\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t/* 大纲按钮样式 */\r\n\t.outline-toggle {\r\n\t\tposition: fixed;\r\n\t\ttop: 20px;\r\n\t\tleft: 20px;\r\n\t\tbackground: none;\r\n\t\tborder: none;\r\n\t\tcursor: pointer;\r\n\t}\r\n\r\n\t.outline-toggle img {\r\n\t\twidth: 30px;\r\n\t\theight: 30px;\r\n\t}\r\n\r\n\t/* 大纲容器 */\r\n\t.outline-container {\r\n\t\tposition: fixed;\r\n\t\ttop: 50px;\r\n\t\tleft: 20px;\r\n\t\tbackground: white;\r\n\t\tbox-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\r\n\t\tborder-radius: 5px;\r\n\t\tpadding: 10px;\r\n\t\twidth: 250px;\r\n\t\tmax-height: 70vh;\r\n\t\toverflow-y: auto;\r\n\t\tdisplay: none;\r\n\t}\r\n\r\n\t/* 显示大纲时 */\r\n\t.outline-container.show {\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t/* 大纲标题 */\r\n\t.outline-content h3 {\r\n\t\tmargin: 0;\r\n\t\tpadding-bottom: 5px;\r\n\t\tborder-bottom: 1px solid #ddd;\r\n\t}\r\n\r\n\t/* 大纲列表 */\r\n\t.outline-content ul {\r\n\t\tlist-style: none;\r\n\t\tpadding: 0;\r\n\t\tmargin: 0;\r\n\t}\r\n\r\n\t.outline-content li {\r\n\t\tmargin: 5px 0;\r\n\t}\r\n\r\n\t/* 大纲链接 */\r\n\t.outline-content a {\r\n\t\ttext-decoration: none;\r\n\t\tcolor: #007bff;\r\n\t\tcursor: pointer;\r\n\t}\r\n\r\n\t.outline-content a:hover {\r\n\t\ttext-decoration: underline;\r\n\t}\r\n</style>\r\n"],"mappings":";OAIQA,UAA+B;;;EAHjCC,KAAK,EAAC;AAAmB;gEAG5BC,mBAAA,CAAqD;EAAhDC,GAA+B,EAA/BH,UAA+B;EAACI,GAAG,EAAC;;oBAAzCC,UAAqD,C;;EAJxDC,GAAA;EAQ0BL,KAAK,EAAC;;gEAC7BC,mBAAA,CAAa,YAAT,MAAI;mBATX;;uBACCK,mBAAA,CAoBM,OApBNC,UAoBM,GAnBLC,mBAAA,UAAa,EACbP,mBAAA,CAES;IAFDD,KAAK,EAAC,gBAAgB;IAAES,OAAK,EAAEC,MAAA,CAAAC;KAHzC,IAAAC,UAAA,IAOEJ,mBAAA,UAAa,EACFE,MAAA,CAAAG,WAAW,I,cAAtBP,mBAAA,CAYM,OAZNQ,UAYM,GAXLC,UAAa,EACbd,mBAAA,CASK,c,kBARJK,mBAAA,CAOKU,SAAA,QAlBTC,WAAA,CAYoBP,MAAA,CAAAQ,OAAO,EAAfC,IAAI;yBADZb,mBAAA,CAOK;MALHD,GAAG,EAAEc,IAAI,CAACC,EAAE;MACZC,KAAK,EAdXC,eAAA;QAAAC,WAAA,MAcgCJ,IAAI,CAACK,KAAK;MAAA;QACrCvB,mBAAA,CAEM;MAFHwB,IAAI,EAAC,GAAG;MAAEhB,OAAK,EAfvBiB,cAAA,CAAAC,MAAA,IAeiCjB,MAAA,CAAAkB,eAAe,CAACT,IAAI,CAACC,EAAE;wBAClDD,IAAI,CAACU,IAAI,wBAhBfC,UAAA,E;wCAAAtB,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}