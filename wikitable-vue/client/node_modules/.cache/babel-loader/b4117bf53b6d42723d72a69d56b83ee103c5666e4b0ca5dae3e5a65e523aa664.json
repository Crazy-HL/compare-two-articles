{"ast":null,"code":"import \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport { ref, onMounted, watch, computed } from \"vue\";\nimport * as d3 from \"d3\";\nexport default {\n  __name: 'SparklineChart',\n  props: {\n    data: {\n      type: Array,\n      default: () => [],\n      validator: value => Array.isArray(value)\n    },\n    compareData: {\n      type: Array,\n      default: null\n    },\n    width: {\n      type: Number,\n      default: 250\n    },\n    height: {\n      type: Number,\n      default: 80\n    },\n    margin: {\n      type: Object,\n      default: () => ({\n        top: 5,\n        right: 5,\n        bottom: 5,\n        left: 5\n      })\n    },\n    lineColor: {\n      type: String,\n      default: \"#4a90e2\"\n    },\n    highlightColor: {\n      type: String,\n      default: \"#FFD700\"\n    },\n    showYearMarkers: {\n      type: Boolean,\n      default: true\n    },\n    teamColors: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  emits: [\"chart-mounted\"],\n  setup(__props, _ref) {\n    let {\n      expose: __expose,\n      emit: __emit\n    } = _ref;\n    const props = __props;\n    const emit = __emit;\n    const chartContainer = ref(null);\n    const svg = ref(null);\n    const innerWidth = computed(() => props.width - props.margin.left - props.margin.right);\n    const innerHeight = computed(() => props.height - props.margin.top - props.margin.bottom);\n    const sortedData = computed(() => {\n      if (!Array.isArray(props.data)) return [];\n      return [...props.data].filter(item => item && !isNaN(item.year) && !isNaN(item.value)).sort((a, b) => a.year - b.year);\n    });\n    const hasData = computed(() => sortedData.value.length > 0);\n    const noDataMessage = computed(() => \"无数据\");\n    const chartType = computed(() => sortedData.value.length <= 3 ? \"bar\" : \"line\");\n    __expose({\n      chartType\n    });\n\n    // 清理团队名称中的特殊字符\n    const sanitizeTeamName = team => {\n      return team.replace(/[^a-zA-Z0-9]/g, \"-\");\n    };\n    const initChart = () => {\n      if (!chartContainer.value) return;\n      d3.select(chartContainer.value).selectAll(\"*\").remove();\n      if (!hasData.value) return;\n      svg.value = d3.select(chartContainer.value).append(\"svg\").attr(\"width\", props.width).attr(\"height\", props.height);\n      const chart = svg.value.append(\"g\").attr(\"transform\", `translate(${props.margin.left},${props.margin.top})`);\n      if (chartType.value === \"bar\") {\n        drawBarChart(chart);\n      } else {\n        drawLineChart(chart);\n      }\n      emit(\"chart-mounted\", {\n        chartType: chartType.value\n      });\n    };\n    const drawLineChart = chart => {\n      const xScale = d3.scaleLinear().domain(d3.extent(sortedData.value, d => d.year)).range([0, innerWidth.value]);\n      const yScale = d3.scaleLinear().domain([0, d3.max(sortedData.value, d => d.value) * 1.1]).range([innerHeight.value, 0]);\n\n      // 按团队分组\n      const teamGroups = d3.group(sortedData.value, d => d.team || \"Unknown\");\n      teamGroups.forEach((teamData, team) => {\n        const safeTeamName = sanitizeTeamName(team);\n        const line = d3.line().x(d => xScale(d.year)).y(d => yScale(d.value)).curve(d3.curveMonotoneX);\n\n        // 绘制折线\n        chart.append(\"path\").datum(teamData).attr(\"fill\", \"none\").attr(\"stroke\", props.teamColors[team] || props.lineColor).attr(\"stroke-width\", 2).attr(\"d\", line);\n\n        // 绘制数据点\n        chart.selectAll(`.dot-${safeTeamName}`).data(teamData).enter().append(\"circle\").attr(\"class\", `dot-${safeTeamName}`).attr(\"cx\", d => xScale(d.year)).attr(\"cy\", d => yScale(d.value)).attr(\"r\", 3).attr(\"fill\", props.teamColors[team] || props.lineColor);\n      });\n\n      // 高亮相同年份的点\n      if (props.compareData && props.showYearMarkers) {\n        const commonYears = getCommonYears(sortedData.value, props.compareData);\n        commonYears.forEach(year => {\n          const points = sortedData.value.filter(d => d.year === year);\n          points.forEach(point => {\n            chart.append(\"circle\").attr(\"cx\", xScale(point.year)).attr(\"cy\", yScale(point.value)).attr(\"r\", 5).attr(\"fill\", props.highlightColor).attr(\"stroke\", \"#FF8C00\").attr(\"stroke-width\", 1.5);\n          });\n        });\n      }\n    };\n    const drawBarChart = chart => {\n      const xScale = d3.scaleBand().domain(sortedData.value.map(d => d.year.toString())).range([0, innerWidth.value]).paddingInner(0.4).paddingOuter(0.2);\n      const calculatedWidth = xScale.bandwidth();\n      const barWidth = Math.min(calculatedWidth, props.maxBarWidth);\n      const adjustedPadding = (innerWidth.value - barWidth * sortedData.value.length) / (sortedData.value.length + 1);\n      const adjustedXScale = d3.scaleBand().domain(sortedData.value.map(d => d.year.toString())).range([0, innerWidth.value]).paddingInner(adjustedPadding / barWidth).paddingOuter(adjustedPadding / barWidth);\n      const maxValue = d3.max(sortedData.value, d => d.value);\n      const yScale = d3.scaleLinear().domain([0, maxValue * 1.1]).range([innerHeight.value, 0]);\n\n      // 绘制柱子\n      chart.selectAll(\".bar\").data(sortedData.value).enter().append(\"rect\").attr(\"class\", \"bar\").attr(\"x\", d => adjustedXScale(d.year.toString()) + (adjustedXScale.bandwidth() - barWidth) / 2).attr(\"width\", barWidth).attr(\"y\", d => yScale(d.value)).attr(\"height\", d => innerHeight.value - yScale(d.value)).attr(\"fill\", d => props.teamColors[d.team] || props.lineColor).attr(\"rx\", 2).attr(\"ry\", 2);\n\n      // 添加数值标签\n      chart.selectAll(\".bar-label\").data(sortedData.value).enter().append(\"text\").attr(\"class\", \"bar-label\").attr(\"x\", d => adjustedXScale(d.year.toString()) + adjustedXScale.bandwidth() / 2).attr(\"y\", d => yScale(d.value) - 5).attr(\"text-anchor\", \"middle\").text(d => formatValue(d.value)).attr(\"font-size\", \"10px\").attr(\"fill\", \"#64748b\").style(\"visibility\", d => innerHeight.value - yScale(d.value) > 20 ? \"visible\" : \"hidden\");\n    };\n    const getCommonYears = (data1, data2) => {\n      const years1 = new Set(data1.map(d => d.year));\n      const years2 = new Set(data2.filter(d => d).map(d => d.year));\n      return [...years1].filter(year => years2.has(year));\n    };\n    const formatValue = value => {\n      if (value >= 1000000) return `$${(value / 1000000).toFixed(1)}M`;\n      if (value >= 1000) return `$${(value / 1000).toFixed(1)}K`;\n      return value.toLocaleString();\n    };\n    watch(() => [props.data, props.compareData, props.width, props.height, props.showYearMarkers, props.teamColors], initChart, {\n      deep: true\n    });\n    onMounted(initChart);\n    const __returned__ = {\n      props,\n      emit,\n      chartContainer,\n      svg,\n      innerWidth,\n      innerHeight,\n      sortedData,\n      hasData,\n      noDataMessage,\n      chartType,\n      sanitizeTeamName,\n      initChart,\n      drawLineChart,\n      drawBarChart,\n      getCommonYears,\n      formatValue,\n      ref,\n      onMounted,\n      watch,\n      computed,\n      get d3() {\n        return d3;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","watch","computed","d3","props","__props","emit","__emit","chartContainer","svg","innerWidth","width","margin","left","right","innerHeight","height","top","bottom","sortedData","Array","isArray","data","filter","item","isNaN","year","value","sort","a","b","hasData","length","noDataMessage","chartType","__expose","sanitizeTeamName","team","replace","initChart","select","selectAll","remove","append","attr","chart","drawBarChart","drawLineChart","xScale","scaleLinear","domain","extent","d","range","yScale","max","teamGroups","group","forEach","teamData","safeTeamName","line","x","y","curve","curveMonotoneX","datum","teamColors","lineColor","enter","compareData","showYearMarkers","commonYears","getCommonYears","points","point","highlightColor","scaleBand","map","toString","paddingInner","paddingOuter","calculatedWidth","bandwidth","barWidth","Math","min","maxBarWidth","adjustedPadding","adjustedXScale","maxValue","text","formatValue","style","data1","data2","years1","Set","years2","has","toFixed","toLocaleString","deep"],"sources":["D:/vue_frame/vue_frame/wikitable-vue/client/src/components/compoents_base/SparklineChart.vue"],"sourcesContent":["<template>\r\n\t<div ref=\"chartContainer\" class=\"sparkline-container\">\r\n\t\t<div v-if=\"!hasData\" class=\"no-data-message\">\r\n\t\t\t{{ noDataMessage }}\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ref, onMounted, watch, computed } from \"vue\";\r\n\timport * as d3 from \"d3\";\r\n\r\n\tconst props = defineProps({\r\n\t\tdata: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: () => [],\r\n\t\t\tvalidator: value => Array.isArray(value)\r\n\t\t},\r\n\t\tcompareData: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: null\r\n\t\t},\r\n\t\twidth: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 250\r\n\t\t},\r\n\t\theight: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 80\r\n\t\t},\r\n\t\tmargin: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => ({ top: 5, right: 5, bottom: 5, left: 5 })\r\n\t\t},\r\n\t\tlineColor: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"#4a90e2\"\r\n\t\t},\r\n\t\thighlightColor: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"#FFD700\"\r\n\t\t},\r\n\t\tshowYearMarkers: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\tteamColors: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => ({})\r\n\t\t}\r\n\t});\r\n\r\n\tconst emit = defineEmits([\"chart-mounted\"]);\r\n\r\n\tconst chartContainer = ref(null);\r\n\tconst svg = ref(null);\r\n\r\n\tconst innerWidth = computed(\r\n\t\t() => props.width - props.margin.left - props.margin.right\r\n\t);\r\n\tconst innerHeight = computed(\r\n\t\t() => props.height - props.margin.top - props.margin.bottom\r\n\t);\r\n\r\n\tconst sortedData = computed(() => {\r\n\t\tif (!Array.isArray(props.data)) return [];\r\n\t\treturn [...props.data]\r\n\t\t\t.filter(item => item && !isNaN(item.year) && !isNaN(item.value))\r\n\t\t\t.sort((a, b) => a.year - b.year);\r\n\t});\r\n\r\n\tconst hasData = computed(() => sortedData.value.length > 0);\r\n\tconst noDataMessage = computed(() => \"无数据\");\r\n\tconst chartType = computed(() =>\r\n\t\tsortedData.value.length <= 3 ? \"bar\" : \"line\"\r\n\t);\r\n\r\n\tdefineExpose({\r\n\t\tchartType\r\n\t});\r\n\r\n\t// 清理团队名称中的特殊字符\r\n\tconst sanitizeTeamName = team => {\r\n\t\treturn team.replace(/[^a-zA-Z0-9]/g, \"-\");\r\n\t};\r\n\r\n\tconst initChart = () => {\r\n\t\tif (!chartContainer.value) return;\r\n\t\td3.select(chartContainer.value).selectAll(\"*\").remove();\r\n\t\tif (!hasData.value) return;\r\n\r\n\t\tsvg.value = d3\r\n\t\t\t.select(chartContainer.value)\r\n\t\t\t.append(\"svg\")\r\n\t\t\t.attr(\"width\", props.width)\r\n\t\t\t.attr(\"height\", props.height);\r\n\r\n\t\tconst chart = svg.value\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"transform\", `translate(${props.margin.left},${props.margin.top})`);\r\n\r\n\t\tif (chartType.value === \"bar\") {\r\n\t\t\tdrawBarChart(chart);\r\n\t\t} else {\r\n\t\t\tdrawLineChart(chart);\r\n\t\t}\r\n\r\n\t\temit(\"chart-mounted\", {\r\n\t\t\tchartType: chartType.value\r\n\t\t});\r\n\t};\r\n\r\n\tconst drawLineChart = chart => {\r\n\t\tconst xScale = d3\r\n\t\t\t.scaleLinear()\r\n\t\t\t.domain(d3.extent(sortedData.value, d => d.year))\r\n\t\t\t.range([0, innerWidth.value]);\r\n\r\n\t\tconst yScale = d3\r\n\t\t\t.scaleLinear()\r\n\t\t\t.domain([0, d3.max(sortedData.value, d => d.value) * 1.1])\r\n\t\t\t.range([innerHeight.value, 0]);\r\n\r\n\t\t// 按团队分组\r\n\t\tconst teamGroups = d3.group(sortedData.value, d => d.team || \"Unknown\");\r\n\r\n\t\tteamGroups.forEach((teamData, team) => {\r\n\t\t\tconst safeTeamName = sanitizeTeamName(team);\r\n\t\t\tconst line = d3\r\n\t\t\t\t.line()\r\n\t\t\t\t.x(d => xScale(d.year))\r\n\t\t\t\t.y(d => yScale(d.value))\r\n\t\t\t\t.curve(d3.curveMonotoneX);\r\n\r\n\t\t\t// 绘制折线\r\n\t\t\tchart\r\n\t\t\t\t.append(\"path\")\r\n\t\t\t\t.datum(teamData)\r\n\t\t\t\t.attr(\"fill\", \"none\")\r\n\t\t\t\t.attr(\"stroke\", props.teamColors[team] || props.lineColor)\r\n\t\t\t\t.attr(\"stroke-width\", 2)\r\n\t\t\t\t.attr(\"d\", line);\r\n\r\n\t\t\t// 绘制数据点\r\n\t\t\tchart\r\n\t\t\t\t.selectAll(`.dot-${safeTeamName}`)\r\n\t\t\t\t.data(teamData)\r\n\t\t\t\t.enter()\r\n\t\t\t\t.append(\"circle\")\r\n\t\t\t\t.attr(\"class\", `dot-${safeTeamName}`)\r\n\t\t\t\t.attr(\"cx\", d => xScale(d.year))\r\n\t\t\t\t.attr(\"cy\", d => yScale(d.value))\r\n\t\t\t\t.attr(\"r\", 3)\r\n\t\t\t\t.attr(\"fill\", props.teamColors[team] || props.lineColor);\r\n\t\t});\r\n\r\n\t\t// 高亮相同年份的点\r\n\t\tif (props.compareData && props.showYearMarkers) {\r\n\t\t\tconst commonYears = getCommonYears(sortedData.value, props.compareData);\r\n\t\t\tcommonYears.forEach(year => {\r\n\t\t\t\tconst points = sortedData.value.filter(d => d.year === year);\r\n\t\t\t\tpoints.forEach(point => {\r\n\t\t\t\t\tchart\r\n\t\t\t\t\t\t.append(\"circle\")\r\n\t\t\t\t\t\t.attr(\"cx\", xScale(point.year))\r\n\t\t\t\t\t\t.attr(\"cy\", yScale(point.value))\r\n\t\t\t\t\t\t.attr(\"r\", 5)\r\n\t\t\t\t\t\t.attr(\"fill\", props.highlightColor)\r\n\t\t\t\t\t\t.attr(\"stroke\", \"#FF8C00\")\r\n\t\t\t\t\t\t.attr(\"stroke-width\", 1.5);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst drawBarChart = chart => {\r\n\t\tconst xScale = d3\r\n\t\t\t.scaleBand()\r\n\t\t\t.domain(sortedData.value.map(d => d.year.toString()))\r\n\t\t\t.range([0, innerWidth.value])\r\n\t\t\t.paddingInner(0.4)\r\n\t\t\t.paddingOuter(0.2);\r\n\r\n\t\tconst calculatedWidth = xScale.bandwidth();\r\n\t\tconst barWidth = Math.min(calculatedWidth, props.maxBarWidth);\r\n\t\tconst adjustedPadding =\r\n\t\t\t(innerWidth.value - barWidth * sortedData.value.length) /\r\n\t\t\t(sortedData.value.length + 1);\r\n\r\n\t\tconst adjustedXScale = d3\r\n\t\t\t.scaleBand()\r\n\t\t\t.domain(sortedData.value.map(d => d.year.toString()))\r\n\t\t\t.range([0, innerWidth.value])\r\n\t\t\t.paddingInner(adjustedPadding / barWidth)\r\n\t\t\t.paddingOuter(adjustedPadding / barWidth);\r\n\r\n\t\tconst maxValue = d3.max(sortedData.value, d => d.value);\r\n\t\tconst yScale = d3\r\n\t\t\t.scaleLinear()\r\n\t\t\t.domain([0, maxValue * 1.1])\r\n\t\t\t.range([innerHeight.value, 0]);\r\n\r\n\t\t// 绘制柱子\r\n\t\tchart\r\n\t\t\t.selectAll(\".bar\")\r\n\t\t\t.data(sortedData.value)\r\n\t\t\t.enter()\r\n\t\t\t.append(\"rect\")\r\n\t\t\t.attr(\"class\", \"bar\")\r\n\t\t\t.attr(\r\n\t\t\t\t\"x\",\r\n\t\t\t\td =>\r\n\t\t\t\t\tadjustedXScale(d.year.toString()) +\r\n\t\t\t\t\t(adjustedXScale.bandwidth() - barWidth) / 2\r\n\t\t\t)\r\n\t\t\t.attr(\"width\", barWidth)\r\n\t\t\t.attr(\"y\", d => yScale(d.value))\r\n\t\t\t.attr(\"height\", d => innerHeight.value - yScale(d.value))\r\n\t\t\t.attr(\"fill\", d => props.teamColors[d.team] || props.lineColor)\r\n\t\t\t.attr(\"rx\", 2)\r\n\t\t\t.attr(\"ry\", 2);\r\n\r\n\t\t// 添加数值标签\r\n\t\tchart\r\n\t\t\t.selectAll(\".bar-label\")\r\n\t\t\t.data(sortedData.value)\r\n\t\t\t.enter()\r\n\t\t\t.append(\"text\")\r\n\t\t\t.attr(\"class\", \"bar-label\")\r\n\t\t\t.attr(\r\n\t\t\t\t\"x\",\r\n\t\t\t\td => adjustedXScale(d.year.toString()) + adjustedXScale.bandwidth() / 2\r\n\t\t\t)\r\n\t\t\t.attr(\"y\", d => yScale(d.value) - 5)\r\n\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t.text(d => formatValue(d.value))\r\n\t\t\t.attr(\"font-size\", \"10px\")\r\n\t\t\t.attr(\"fill\", \"#64748b\")\r\n\t\t\t.style(\"visibility\", d =>\r\n\t\t\t\tinnerHeight.value - yScale(d.value) > 20 ? \"visible\" : \"hidden\"\r\n\t\t\t);\r\n\t};\r\n\r\n\tconst getCommonYears = (data1, data2) => {\r\n\t\tconst years1 = new Set(data1.map(d => d.year));\r\n\t\tconst years2 = new Set(data2.filter(d => d).map(d => d.year));\r\n\t\treturn [...years1].filter(year => years2.has(year));\r\n\t};\r\n\r\n\tconst formatValue = value => {\r\n\t\tif (value >= 1000000) return `$${(value / 1000000).toFixed(1)}M`;\r\n\t\tif (value >= 1000) return `$${(value / 1000).toFixed(1)}K`;\r\n\t\treturn value.toLocaleString();\r\n\t};\r\n\r\n\twatch(\r\n\t\t() => [\r\n\t\t\tprops.data,\r\n\t\t\tprops.compareData,\r\n\t\t\tprops.width,\r\n\t\t\tprops.height,\r\n\t\t\tprops.showYearMarkers,\r\n\t\t\tprops.teamColors\r\n\t\t],\r\n\t\tinitChart,\r\n\t\t{ deep: true }\r\n\t);\r\n\r\n\tonMounted(initChart);\r\n</script>\r\n\r\n<style scoped>\r\n\t.sparkline-container {\r\n\t\tposition: relative;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.no-data-message {\r\n\t\tposition: absolute;\r\n\t\ttop: 50%;\r\n\t\tleft: 50%;\r\n\t\ttransform: translate(-50%, -50%);\r\n\t\tcolor: #ccc;\r\n\t\tfont-size: 12px;\r\n\t}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}