{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport { ref, watch, onMounted, onUnmounted } from \"vue\";\nimport eventBus from \"@/js/eventBus.js\";\nexport default {\n  __name: 'ArticleOutline',\n  props: {\n    content: String,\n    // 文章 HTML\n    divId: String // \"div1\" 或 \"div3\"\n  },\n  setup(__props, _ref) {\n    let {\n      expose: __expose\n    } = _ref;\n    __expose();\n    const props = __props;\n    const isVisible = ref(false);\n    const outline = ref([]);\n    const linkedOutline = ref([]);\n\n    // **切换大纲**\n    const toggleOutline = () => {\n      isVisible.value = !isVisible.value;\n    };\n\n    // **提取文章大纲**\n    const extractOutline = (content, containerId) => {\n      if (!content) return [];\n      const parser = new DOMParser();\n      const doc = parser.parseFromString(content, \"text/html\");\n      const headings = doc.querySelectorAll(\"h1, h2, h3, h4, h5, h6\");\n      return Array.from(headings).map((heading, index) => {\n        const level = parseInt(heading.tagName.substring(1));\n        const id = `heading-${index}-${containerId}`;\n        heading.id = id;\n        return {\n          id,\n          text: heading.textContent.trim(),\n          level\n        };\n      });\n    };\n\n    // **文本标准化**\n    const normalizeText = text => text.toLowerCase().replace(/[^\\w\\s]/g, \"\").trim();\n\n    // **计算余弦相似度**\n    const cosineSimilarity = (text1, text2) => {\n      const words1 = normalizeText(text1).split(/\\s+/);\n      const words2 = normalizeText(text2).split(/\\s+/);\n      const wordSet = new Set([...words1, ...words2]);\n      let vec1 = [],\n        vec2 = [];\n      wordSet.forEach(word => {\n        vec1.push(words1.filter(w => w === word).length);\n        vec2.push(words2.filter(w => w === word).length);\n      });\n      const dotProduct = vec1.reduce((sum, val, i) => sum + val * vec2[i], 0);\n      const magnitude1 = Math.sqrt(vec1.reduce((sum, val) => sum + val ** 2, 0));\n      const magnitude2 = Math.sqrt(vec2.reduce((sum, val) => sum + val ** 2, 0));\n      return magnitude1 && magnitude2 ? dotProduct / (magnitude1 * magnitude2) : 0;\n    };\n\n    // **编辑距离计算**\n    const levenshteinDistance = (a, b) => {\n      const dp = Array(a.length + 1).fill(null).map(() => Array(b.length + 1).fill(0));\n      for (let i = 0; i <= a.length; i++) dp[i][0] = i;\n      for (let j = 0; j <= b.length; j++) dp[0][j] = j;\n      for (let i = 1; i <= a.length; i++) {\n        for (let j = 1; j <= b.length; j++) {\n          const cost = a[i - 1] === b[j - 1] ? 0 : 1;\n          dp[i][j] = Math.min(dp[i - 1][j] + 1, dp[i][j - 1] + 1, dp[i - 1][j - 1] + cost);\n        }\n      }\n      return dp[a.length][b.length];\n    };\n\n    // **匹配逻辑**\n    const isSimilar = (text1, text2) => {\n      const sim1 = cosineSimilarity(text1, text2); // 余弦相似度\n      const sim2 = levenshteinDistance(text1, text2); // 编辑距离\n      return sim1 > 0.4 || sim2 <= 3; // 调整余弦相似度阈值为 0.4，编辑距离阈值 3\n    };\n\n    // **生成匹配大纲**\n    const generateLinkedOutline = (outline1, outline2) => {\n      const linked = [];\n      outline1.forEach(item1 => {\n        outline2.forEach(item2 => {\n          if (isSimilar(item1.text, item2.text)) {\n            linked.push({\n              leftId: item1.id,\n              rightId: item2.id\n            });\n          }\n        });\n      });\n      return linked;\n    };\n\n    // **监听内容变化**\n    watch(() => props.content, newContent => {\n      outline.value = extractOutline(newContent, props.divId);\n\n      // 仅在 div1 计算匹配，并广播给 div3\n      if (props.divId === \"div1\") {\n        const otherContent = document.getElementById(\"div3\")?.innerHTML;\n        const otherOutline = extractOutline(otherContent, \"div3\");\n        const newLinkedOutline = generateLinkedOutline(outline.value, otherOutline);\n        linkedOutline.value = newLinkedOutline;\n        eventBus.emit(\"update-linked-outline\", newLinkedOutline);\n      }\n    }, {\n      immediate: true\n    });\n\n    // **监听 eventBus**\n    eventBus.on(\"update-linked-outline\", newLinkedOutline => {\n      linkedOutline.value = newLinkedOutline;\n    });\n\n    // **高亮匹配项**\n    const isLinked = item => linkedOutline.value.some(linked => linked.leftId === item.id || linked.rightId === item.id);\n\n    // **滚动到章节**\n    const scrollToChapter = id => {\n      document.getElementById(id)?.scrollIntoView({\n        behavior: \"smooth\"\n      });\n      const linkedItem = linkedOutline.value.find(linked => linked.leftId === id || linked.rightId === id);\n      if (linkedItem) {\n        const targetId = linkedItem.leftId === id ? linkedItem.rightId : linkedItem.leftId;\n        eventBus.emit(\"scroll-to-chapter\", targetId);\n      }\n    };\n    eventBus.on(\"scroll-to-chapter\", targetId => {\n      document.getElementById(targetId)?.scrollIntoView({\n        behavior: \"smooth\"\n      });\n    });\n\n    // **初始化**\n    onMounted(() => {\n      outline.value = extractOutline(props.content, props.divId);\n    });\n    onUnmounted(() => {\n      eventBus.off(\"update-linked-outline\");\n      eventBus.off(\"scroll-to-chapter\");\n    });\n    const __returned__ = {\n      props,\n      isVisible,\n      outline,\n      linkedOutline,\n      toggleOutline,\n      extractOutline,\n      normalizeText,\n      cosineSimilarity,\n      levenshteinDistance,\n      isSimilar,\n      generateLinkedOutline,\n      isLinked,\n      scrollToChapter,\n      ref,\n      watch,\n      onMounted,\n      onUnmounted,\n      get eventBus() {\n        return eventBus;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","watch","onMounted","onUnmounted","eventBus","props","__props","isVisible","outline","linkedOutline","toggleOutline","value","extractOutline","content","containerId","parser","DOMParser","doc","parseFromString","headings","querySelectorAll","Array","from","map","heading","index","level","parseInt","tagName","substring","id","text","textContent","trim","normalizeText","toLowerCase","replace","cosineSimilarity","text1","text2","words1","split","words2","wordSet","Set","vec1","vec2","forEach","word","push","filter","w","length","dotProduct","reduce","sum","val","i","magnitude1","Math","sqrt","magnitude2","levenshteinDistance","a","b","dp","fill","j","cost","min","isSimilar","sim1","sim2","generateLinkedOutline","outline1","outline2","linked","item1","item2","leftId","rightId","newContent","divId","otherContent","document","getElementById","innerHTML","otherOutline","newLinkedOutline","emit","immediate","on","isLinked","item","some","scrollToChapter","scrollIntoView","behavior","linkedItem","find","targetId","off"],"sources":["D:/vue_frame/vue_frame/wikitable-vue/client/src/components/compoents_base/ArticleOutline.vue"],"sourcesContent":["<script setup>\r\n\timport { ref, watch, onMounted, onUnmounted } from \"vue\";\r\n\timport eventBus from \"@/js/eventBus.js\";\r\n\r\n\tconst props = defineProps({\r\n\t\tcontent: String, // 文章 HTML\r\n\t\tdivId: String // \"div1\" 或 \"div3\"\r\n\t});\r\n\r\n\tconst isVisible = ref(false);\r\n\tconst outline = ref([]);\r\n\tconst linkedOutline = ref([]);\r\n\r\n\t// **切换大纲**\r\n\tconst toggleOutline = () => {\r\n\t\tisVisible.value = !isVisible.value;\r\n\t};\r\n\r\n\t// **提取文章大纲**\r\n\tconst extractOutline = (content, containerId) => {\r\n\t\tif (!content) return [];\r\n\t\tconst parser = new DOMParser();\r\n\t\tconst doc = parser.parseFromString(content, \"text/html\");\r\n\t\tconst headings = doc.querySelectorAll(\"h1, h2, h3, h4, h5, h6\");\r\n\r\n\t\treturn Array.from(headings).map((heading, index) => {\r\n\t\t\tconst level = parseInt(heading.tagName.substring(1));\r\n\t\t\tconst id = `heading-${index}-${containerId}`;\r\n\t\t\theading.id = id;\r\n\t\t\treturn { id, text: heading.textContent.trim(), level };\r\n\t\t});\r\n\t};\r\n\r\n\t// **文本标准化**\r\n\tconst normalizeText = text =>\r\n\t\ttext\r\n\t\t\t.toLowerCase()\r\n\t\t\t.replace(/[^\\w\\s]/g, \"\")\r\n\t\t\t.trim();\r\n\r\n\t// **计算余弦相似度**\r\n\tconst cosineSimilarity = (text1, text2) => {\r\n\t\tconst words1 = normalizeText(text1).split(/\\s+/);\r\n\t\tconst words2 = normalizeText(text2).split(/\\s+/);\r\n\t\tconst wordSet = new Set([...words1, ...words2]);\r\n\r\n\t\tlet vec1 = [],\r\n\t\t\tvec2 = [];\r\n\t\twordSet.forEach(word => {\r\n\t\t\tvec1.push(words1.filter(w => w === word).length);\r\n\t\t\tvec2.push(words2.filter(w => w === word).length);\r\n\t\t});\r\n\r\n\t\tconst dotProduct = vec1.reduce((sum, val, i) => sum + val * vec2[i], 0);\r\n\t\tconst magnitude1 = Math.sqrt(vec1.reduce((sum, val) => sum + val ** 2, 0));\r\n\t\tconst magnitude2 = Math.sqrt(vec2.reduce((sum, val) => sum + val ** 2, 0));\r\n\r\n\t\treturn magnitude1 && magnitude2\r\n\t\t\t? dotProduct / (magnitude1 * magnitude2)\r\n\t\t\t: 0;\r\n\t};\r\n\r\n\t// **编辑距离计算**\r\n\tconst levenshteinDistance = (a, b) => {\r\n\t\tconst dp = Array(a.length + 1)\r\n\t\t\t.fill(null)\r\n\t\t\t.map(() => Array(b.length + 1).fill(0));\r\n\r\n\t\tfor (let i = 0; i <= a.length; i++) dp[i][0] = i;\r\n\t\tfor (let j = 0; j <= b.length; j++) dp[0][j] = j;\r\n\r\n\t\tfor (let i = 1; i <= a.length; i++) {\r\n\t\t\tfor (let j = 1; j <= b.length; j++) {\r\n\t\t\t\tconst cost = a[i - 1] === b[j - 1] ? 0 : 1;\r\n\t\t\t\tdp[i][j] = Math.min(\r\n\t\t\t\t\tdp[i - 1][j] + 1,\r\n\t\t\t\t\tdp[i][j - 1] + 1,\r\n\t\t\t\t\tdp[i - 1][j - 1] + cost\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn dp[a.length][b.length];\r\n\t};\r\n\r\n\t// **匹配逻辑**\r\n\tconst isSimilar = (text1, text2) => {\r\n\t\tconst sim1 = cosineSimilarity(text1, text2); // 余弦相似度\r\n\t\tconst sim2 = levenshteinDistance(text1, text2); // 编辑距离\r\n\t\treturn sim1 > 0.4 || sim2 <= 3; // 调整余弦相似度阈值为 0.4，编辑距离阈值 3\r\n\t};\r\n\r\n\t// **生成匹配大纲**\r\n\tconst generateLinkedOutline = (outline1, outline2) => {\r\n\t\tconst linked = [];\r\n\t\toutline1.forEach(item1 => {\r\n\t\t\toutline2.forEach(item2 => {\r\n\t\t\t\tif (isSimilar(item1.text, item2.text)) {\r\n\t\t\t\t\tlinked.push({ leftId: item1.id, rightId: item2.id });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t\treturn linked;\r\n\t};\r\n\r\n\t// **监听内容变化**\r\n\twatch(\r\n\t\t() => props.content,\r\n\t\tnewContent => {\r\n\t\t\toutline.value = extractOutline(newContent, props.divId);\r\n\r\n\t\t\t// 仅在 div1 计算匹配，并广播给 div3\r\n\t\t\tif (props.divId === \"div1\") {\r\n\t\t\t\tconst otherContent = document.getElementById(\"div3\")?.innerHTML;\r\n\t\t\t\tconst otherOutline = extractOutline(otherContent, \"div3\");\r\n\t\t\t\tconst newLinkedOutline = generateLinkedOutline(\r\n\t\t\t\t\toutline.value,\r\n\t\t\t\t\totherOutline\r\n\t\t\t\t);\r\n\t\t\t\tlinkedOutline.value = newLinkedOutline;\r\n\t\t\t\teventBus.emit(\"update-linked-outline\", newLinkedOutline);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{ immediate: true }\r\n\t);\r\n\r\n\t// **监听 eventBus**\r\n\teventBus.on(\"update-linked-outline\", newLinkedOutline => {\r\n\t\tlinkedOutline.value = newLinkedOutline;\r\n\t});\r\n\r\n\t// **高亮匹配项**\r\n\tconst isLinked = item =>\r\n\t\tlinkedOutline.value.some(\r\n\t\t\tlinked => linked.leftId === item.id || linked.rightId === item.id\r\n\t\t);\r\n\r\n\t// **滚动到章节**\r\n\tconst scrollToChapter = id => {\r\n\t\tdocument.getElementById(id)?.scrollIntoView({ behavior: \"smooth\" });\r\n\r\n\t\tconst linkedItem = linkedOutline.value.find(\r\n\t\t\tlinked => linked.leftId === id || linked.rightId === id\r\n\t\t);\r\n\t\tif (linkedItem) {\r\n\t\t\tconst targetId =\r\n\t\t\t\tlinkedItem.leftId === id ? linkedItem.rightId : linkedItem.leftId;\r\n\t\t\teventBus.emit(\"scroll-to-chapter\", targetId);\r\n\t\t}\r\n\t};\r\n\r\n\teventBus.on(\"scroll-to-chapter\", targetId => {\r\n\t\tdocument.getElementById(targetId)?.scrollIntoView({ behavior: \"smooth\" });\r\n\t});\r\n\r\n\t// **初始化**\r\n\tonMounted(() => {\r\n\t\toutline.value = extractOutline(props.content, props.divId);\r\n\t});\r\n\r\n\tonUnmounted(() => {\r\n\t\teventBus.off(\"update-linked-outline\");\r\n\t\teventBus.off(\"scroll-to-chapter\");\r\n\t});\r\n</script>\r\n\r\n<template>\r\n\t<div>\r\n\t\t<!-- 目录按钮 -->\r\n\t\t<button @click=\"toggleOutline\">\r\n\t\t\t{{ isVisible ? \"隐藏目录\" : \"显示目录\" }}\r\n\t\t</button>\r\n\r\n\t\t<!-- 目录列表 -->\r\n\t\t<ul v-if=\"isVisible\">\r\n\t\t\t<li v-for=\"item in outline\" :key=\"item.id\">\r\n\t\t\t\t<a\r\n\t\t\t\t\t:href=\"'#' + item.id\"\r\n\t\t\t\t\t:class=\"{ linked: isLinked(item) }\"\r\n\t\t\t\t\t@click.prevent=\"scrollToChapter(item.id)\">\r\n\t\t\t\t\t{{ item.text }}\r\n\t\t\t\t</a>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t</div>\r\n</template>\r\n\r\n<style scoped>\r\n\tbutton {\r\n\t\tmargin-bottom: 10px;\r\n\t\tpadding: 8px 12px;\r\n\t\tbackground-color: #007bff;\r\n\t\tcolor: white;\r\n\t\tborder: none;\r\n\t\tborder-radius: 4px;\r\n\t\tcursor: pointer;\r\n\t}\r\n\tbutton:hover {\r\n\t\tbackground-color: #0056b3;\r\n\t}\r\n\tul {\r\n\t\tlist-style: none;\r\n\t\tpadding: 0;\r\n\t}\r\n\tli {\r\n\t\tmargin: 5px 0;\r\n\t}\r\n\ta {\r\n\t\ttext-decoration: none;\r\n\t\tcolor: black;\r\n\t}\r\n\t.linked {\r\n\t\tcolor: red;\r\n\t\tfont-weight: bold;\r\n\t}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}