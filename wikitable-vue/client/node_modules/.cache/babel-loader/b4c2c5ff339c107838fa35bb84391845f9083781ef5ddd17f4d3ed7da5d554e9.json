{"ast":null,"code":"import { ref, computed, onMounted, watch } from \"vue\";\nimport * as d3 from \"d3\";\nexport default {\n  __name: 'FieldVisualization',\n  props: {\n    field: [Object, Array, String, Number],\n    type: {\n      type: String,\n      default: \"number\"\n    }\n  },\n  setup(__props, _ref) {\n    let {\n      expose: __expose\n    } = _ref;\n    __expose();\n    const props = __props;\n    const pieChart = ref(null);\n    const barChart = ref(null);\n    const lineChart = ref(null);\n\n    // 安全提取数值（处理带单位的数据）\n    const extractNumber = value => {\n      if (value === null || value === undefined) return NaN;\n      if (typeof value === \"number\") return value;\n\n      // 移除常见单位符号\n      const cleaned = String(value).replace(/[$,%¥€£]/g, \"\").replace(/\\(.*?\\)/g, \"\") // 移除括号内容\n      .trim();\n      return parseFloat(cleaned) || NaN;\n    };\n\n    // 计算属性\n    const hasData = computed(() => {\n      if (props.field === null || props.field === undefined) return false;\n      if (Array.isArray(props.field)) return props.field.length > 0;\n      return props.field.value !== undefined && props.field.value !== null;\n    });\n    const isPercentage = computed(() => {\n      return props.type === \"percentage\" && !isNaN(extractNumber(props.field?.value));\n    });\n    const isArray = computed(() => Array.isArray(props.field));\n    const processedArray = computed(() => {\n      if (!isArray.value) return [];\n      return props.field.map(item => ({\n        value: extractNumber(item.value),\n        unit: item.unit,\n        year: item.year,\n        raw: item.value // 保留原始值\n      })).filter(item => !isNaN(item.value)); // 过滤掉无效数据\n    });\n    const isBarChart = computed(() => {\n      return isArray.value && processedArray.value.length <= 3 && processedArray.value.length > 0;\n    });\n    const isLineChart = computed(() => {\n      return isArray.value && processedArray.value.length > 3 && processedArray.value.every(item => item.year);\n    });\n    const formatValue = value => {\n      if (isNaN(value)) return \"-\";\n      if (props.type === \"percentage\") return `${value}%`;\n      if (props.type === \"number\") return value.toLocaleString();\n      return value;\n    };\n    const displayValue = computed(() => {\n      if (!props.field?.value && props.field?.value !== 0) return \"-\";\n      return formatValue(extractNumber(props.field.value));\n    });\n\n    // 图表绘制方法（添加数据验证）\n    const drawPieChart = () => {\n      clearChart(pieChart);\n      if (!pieChart.value) return;\n      const percent = Math.min(100, Math.max(0, extractNumber(props.field.value)));\n      if (isNaN(percent)) return;\n      const data = [percent, 100 - percent];\n      const color = d3.scaleOrdinal([\"#4CAF50\", \"#eee\"]);\n      const width = 80;\n      const height = 80;\n      const radius = Math.min(width, height) / 2;\n      const svg = d3.select(pieChart.value).append(\"svg\").attr(\"width\", width).attr(\"height\", height).append(\"g\").attr(\"transform\", `translate(${width / 2},${height / 2})`);\n      const pie = d3.pie();\n      const arc = d3.arc().innerRadius(0).outerRadius(radius);\n      svg.selectAll(\"path\").data(pie(data)).enter().append(\"path\").attr(\"d\", arc).attr(\"fill\", d => color(d.index));\n      svg.append(\"text\").attr(\"text-anchor\", \"middle\").attr(\"dy\", \"0.3em\").text(`${percent}%`).style(\"font-size\", \"14px\").style(\"font-weight\", \"bold\");\n    };\n    const drawBarChart = () => {\n      clearChart(barChart);\n      if (!barChart.value || !processedArray.value.length) return;\n      const width = 150;\n      const height = 80;\n      const margin = {\n        top: 10,\n        right: 10,\n        bottom: 20,\n        left: 10\n      };\n      const data = processedArray.value.map(item => ({\n        label: item.year || item.raw || \"\",\n        value: item.value\n      }));\n      const svg = d3.select(barChart.value).append(\"svg\").attr(\"width\", width).attr(\"height\", height);\n      const x = d3.scaleBand().domain(data.map(d => d.label)).range([margin.left, width - margin.right]).padding(0.2);\n      const y = d3.scaleLinear().domain([0, d3.max(data, d => d.value)]).nice().range([height - margin.bottom, margin.top]);\n      svg.selectAll(\"rect\").data(data).enter().append(\"rect\").attr(\"x\", d => x(d.label)).attr(\"y\", d => y(d.value)).attr(\"width\", x.bandwidth()).attr(\"height\", d => {\n        const heightVal = y(0) - y(d.value);\n        return isNaN(heightVal) ? 0 : heightVal; // 防止NaN\n      }).attr(\"fill\", \"#2196F3\");\n      svg.selectAll(\"text\").data(data).enter().append(\"text\").attr(\"x\", d => x(d.label) + x.bandwidth() / 2).attr(\"y\", d => y(d.value) - 5).attr(\"text-anchor\", \"middle\").text(d => formatValue(d.value)).style(\"font-size\", \"10px\").style(\"fill\", \"#333\");\n    };\n    const drawLineChart = () => {\n      clearChart(lineChart);\n      if (!lineChart.value || !processedArray.value.length) return;\n      const width = 200;\n      const height = 80;\n      const margin = {\n        top: 10,\n        right: 10,\n        bottom: 20,\n        left: 10\n      };\n      const validData = processedArray.value.filter(item => item.year && !isNaN(item.value));\n      if (validData.length < 2) return; // 至少需要2个点绘制线段\n\n      const svg = d3.select(lineChart.value).append(\"svg\").attr(\"width\", width).attr(\"height\", height);\n      const x = d3.scaleLinear().domain(d3.extent(validData, d => d.year)).range([margin.left, width - margin.right]);\n      const y = d3.scaleLinear().domain([0, d3.max(validData, d => d.value)]).nice().range([height - margin.bottom, margin.top]);\n      const line = d3.line().x(d => x(d.year)).y(d => y(d.value)).curve(d3.curveMonotoneX);\n      svg.append(\"path\").datum(validData).attr(\"fill\", \"none\").attr(\"stroke\", \"#9C27B0\").attr(\"stroke-width\", 2).attr(\"d\", line);\n      svg.selectAll(\"circle\").data(validData).enter().append(\"circle\").attr(\"cx\", d => x(d.year)).attr(\"cy\", d => y(d.value)).attr(\"r\", 3).attr(\"fill\", \"#9C27B0\");\n      const lastPoint = validData[validData.length - 1];\n      svg.append(\"text\").attr(\"x\", x(lastPoint.year) + 10).attr(\"y\", y(lastPoint.value)).attr(\"dy\", \"0.3em\").text(formatValue(lastPoint.value)).style(\"font-size\", \"10px\").style(\"fill\", \"#333\");\n    };\n    const clearChart = element => {\n      if (element?.value) d3.select(element.value).selectAll(\"*\").remove();\n    };\n\n    // 监听数据变化\n    watch(() => [props.field, props.type], () => {\n      if (!hasData.value) return;\n      if (isPercentage.value) drawPieChart();else if (isBarChart.value) drawBarChart();else if (isLineChart.value) drawLineChart();\n    }, {\n      deep: true,\n      immediate: true\n    });\n    onMounted(() => {\n      if (!hasData.value) return;\n      if (isPercentage.value) drawPieChart();else if (isBarChart.value) drawBarChart();else if (isLineChart.value) drawLineChart();\n    });\n    const __returned__ = {\n      props,\n      pieChart,\n      barChart,\n      lineChart,\n      extractNumber,\n      hasData,\n      isPercentage,\n      isArray,\n      processedArray,\n      isBarChart,\n      isLineChart,\n      formatValue,\n      displayValue,\n      drawPieChart,\n      drawBarChart,\n      drawLineChart,\n      clearChart,\n      ref,\n      computed,\n      onMounted,\n      watch,\n      get d3() {\n        return d3;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","watch","d3","props","__props","pieChart","barChart","lineChart","extractNumber","value","undefined","NaN","cleaned","String","replace","trim","parseFloat","hasData","field","Array","isArray","length","isPercentage","type","isNaN","processedArray","map","item","unit","year","raw","filter","isBarChart","isLineChart","every","formatValue","toLocaleString","displayValue","drawPieChart","clearChart","percent","Math","min","max","data","color","scaleOrdinal","width","height","radius","svg","select","append","attr","pie","arc","innerRadius","outerRadius","selectAll","enter","d","index","text","style","drawBarChart","margin","top","right","bottom","left","label","x","scaleBand","domain","range","padding","y","scaleLinear","nice","bandwidth","heightVal","drawLineChart","validData","extent","line","curve","curveMonotoneX","datum","lastPoint","element","remove","deep","immediate"],"sources":["D:/vue_frame/vue_frame/wikitable-vue/client/src/components/compoents_base/FieldVisualization.vue"],"sourcesContent":["<template>\r\n\t<div class=\"field-visualization\">\r\n\t\t<template v-if=\"hasData\">\r\n\t\t\t<!-- 百分比数据 -->\r\n\t\t\t<div v-if=\"isPercentage\" class=\"pie-chart\" ref=\"pieChart\"></div>\r\n\r\n\t\t\t<!-- 少量数据 -->\r\n\t\t\t<div v-else-if=\"isBarChart\" class=\"bar-chart\" ref=\"barChart\"></div>\r\n\r\n\t\t\t<!-- 时间序列 -->\r\n\t\t\t<div v-else-if=\"isLineChart\" class=\"line-chart\" ref=\"lineChart\"></div>\r\n\r\n\t\t\t<!-- 文本或简单数值 -->\r\n\t\t\t<div v-else class=\"simple-value\">\r\n\t\t\t\t<template v-if=\"isArray\">\r\n\t\t\t\t\t<div v-for=\"(item, index) in processedArray\" :key=\"index\">\r\n\t\t\t\t\t\t{{ formatValue(item.value) }}\r\n\t\t\t\t\t\t<span v-if=\"item.unit\" class=\"unit\">{{ item.unit }}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-else>\r\n\t\t\t\t\t{{ displayValue }}\r\n\t\t\t\t\t<span v-if=\"field?.unit\" class=\"unit\">{{ field.unit }}</span>\r\n\t\t\t\t</template>\r\n\t\t\t</div>\r\n\t\t</template>\r\n\t\t<div v-else class=\"no-data\">无数据</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ref, computed, onMounted, watch } from \"vue\";\r\n\timport * as d3 from \"d3\";\r\n\r\n\tconst props = defineProps({\r\n\t\tfield: [Object, Array, String, Number],\r\n\t\ttype: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"number\"\r\n\t\t}\r\n\t});\r\n\r\n\tconst pieChart = ref(null);\r\n\tconst barChart = ref(null);\r\n\tconst lineChart = ref(null);\r\n\r\n\t// 安全提取数值（处理带单位的数据）\r\n\tconst extractNumber = value => {\r\n\t\tif (value === null || value === undefined) return NaN;\r\n\t\tif (typeof value === \"number\") return value;\r\n\r\n\t\t// 移除常见单位符号\r\n\t\tconst cleaned = String(value)\r\n\t\t\t.replace(/[$,%¥€£]/g, \"\")\r\n\t\t\t.replace(/\\(.*?\\)/g, \"\") // 移除括号内容\r\n\t\t\t.trim();\r\n\r\n\t\treturn parseFloat(cleaned) || NaN;\r\n\t};\r\n\r\n\t// 计算属性\r\n\tconst hasData = computed(() => {\r\n\t\tif (props.field === null || props.field === undefined) return false;\r\n\t\tif (Array.isArray(props.field)) return props.field.length > 0;\r\n\t\treturn props.field.value !== undefined && props.field.value !== null;\r\n\t});\r\n\r\n\tconst isPercentage = computed(() => {\r\n\t\treturn (\r\n\t\t\tprops.type === \"percentage\" && !isNaN(extractNumber(props.field?.value))\r\n\t\t);\r\n\t});\r\n\r\n\tconst isArray = computed(() => Array.isArray(props.field));\r\n\r\n\tconst processedArray = computed(() => {\r\n\t\tif (!isArray.value) return [];\r\n\t\treturn props.field\r\n\t\t\t.map(item => ({\r\n\t\t\t\tvalue: extractNumber(item.value),\r\n\t\t\t\tunit: item.unit,\r\n\t\t\t\tyear: item.year,\r\n\t\t\t\traw: item.value // 保留原始值\r\n\t\t\t}))\r\n\t\t\t.filter(item => !isNaN(item.value)); // 过滤掉无效数据\r\n\t});\r\n\r\n\tconst isBarChart = computed(() => {\r\n\t\treturn (\r\n\t\t\tisArray.value &&\r\n\t\t\tprocessedArray.value.length <= 3 &&\r\n\t\t\tprocessedArray.value.length > 0\r\n\t\t);\r\n\t});\r\n\r\n\tconst isLineChart = computed(() => {\r\n\t\treturn (\r\n\t\t\tisArray.value &&\r\n\t\t\tprocessedArray.value.length > 3 &&\r\n\t\t\tprocessedArray.value.every(item => item.year)\r\n\t\t);\r\n\t});\r\n\r\n\tconst formatValue = value => {\r\n\t\tif (isNaN(value)) return \"-\";\r\n\t\tif (props.type === \"percentage\") return `${value}%`;\r\n\t\tif (props.type === \"number\") return value.toLocaleString();\r\n\t\treturn value;\r\n\t};\r\n\r\n\tconst displayValue = computed(() => {\r\n\t\tif (!props.field?.value && props.field?.value !== 0) return \"-\";\r\n\t\treturn formatValue(extractNumber(props.field.value));\r\n\t});\r\n\r\n\t// 图表绘制方法（添加数据验证）\r\n\tconst drawPieChart = () => {\r\n\t\tclearChart(pieChart);\r\n\t\tif (!pieChart.value) return;\r\n\r\n\t\tconst percent = Math.min(\r\n\t\t\t100,\r\n\t\t\tMath.max(0, extractNumber(props.field.value))\r\n\t\t);\r\n\t\tif (isNaN(percent)) return;\r\n\r\n\t\tconst data = [percent, 100 - percent];\r\n\t\tconst color = d3.scaleOrdinal([\"#4CAF50\", \"#eee\"]);\r\n\r\n\t\tconst width = 80;\r\n\t\tconst height = 80;\r\n\t\tconst radius = Math.min(width, height) / 2;\r\n\r\n\t\tconst svg = d3\r\n\t\t\t.select(pieChart.value)\r\n\t\t\t.append(\"svg\")\r\n\t\t\t.attr(\"width\", width)\r\n\t\t\t.attr(\"height\", height)\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"transform\", `translate(${width / 2},${height / 2})`);\r\n\r\n\t\tconst pie = d3.pie();\r\n\t\tconst arc = d3.arc().innerRadius(0).outerRadius(radius);\r\n\r\n\t\tsvg\r\n\t\t\t.selectAll(\"path\")\r\n\t\t\t.data(pie(data))\r\n\t\t\t.enter()\r\n\t\t\t.append(\"path\")\r\n\t\t\t.attr(\"d\", arc)\r\n\t\t\t.attr(\"fill\", d => color(d.index));\r\n\r\n\t\tsvg\r\n\t\t\t.append(\"text\")\r\n\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t.attr(\"dy\", \"0.3em\")\r\n\t\t\t.text(`${percent}%`)\r\n\t\t\t.style(\"font-size\", \"14px\")\r\n\t\t\t.style(\"font-weight\", \"bold\");\r\n\t};\r\n\r\n\tconst drawBarChart = () => {\r\n\t\tclearChart(barChart);\r\n\t\tif (!barChart.value || !processedArray.value.length) return;\r\n\r\n\t\tconst width = 150;\r\n\t\tconst height = 80;\r\n\t\tconst margin = { top: 10, right: 10, bottom: 20, left: 10 };\r\n\r\n\t\tconst data = processedArray.value.map(item => ({\r\n\t\t\tlabel: item.year || item.raw || \"\",\r\n\t\t\tvalue: item.value\r\n\t\t}));\r\n\r\n\t\tconst svg = d3\r\n\t\t\t.select(barChart.value)\r\n\t\t\t.append(\"svg\")\r\n\t\t\t.attr(\"width\", width)\r\n\t\t\t.attr(\"height\", height);\r\n\r\n\t\tconst x = d3\r\n\t\t\t.scaleBand()\r\n\t\t\t.domain(data.map(d => d.label))\r\n\t\t\t.range([margin.left, width - margin.right])\r\n\t\t\t.padding(0.2);\r\n\r\n\t\tconst y = d3\r\n\t\t\t.scaleLinear()\r\n\t\t\t.domain([0, d3.max(data, d => d.value)])\r\n\t\t\t.nice()\r\n\t\t\t.range([height - margin.bottom, margin.top]);\r\n\r\n\t\tsvg\r\n\t\t\t.selectAll(\"rect\")\r\n\t\t\t.data(data)\r\n\t\t\t.enter()\r\n\t\t\t.append(\"rect\")\r\n\t\t\t.attr(\"x\", d => x(d.label))\r\n\t\t\t.attr(\"y\", d => y(d.value))\r\n\t\t\t.attr(\"width\", x.bandwidth())\r\n\t\t\t.attr(\"height\", d => {\r\n\t\t\t\tconst heightVal = y(0) - y(d.value);\r\n\t\t\t\treturn isNaN(heightVal) ? 0 : heightVal; // 防止NaN\r\n\t\t\t})\r\n\t\t\t.attr(\"fill\", \"#2196F3\");\r\n\r\n\t\tsvg\r\n\t\t\t.selectAll(\"text\")\r\n\t\t\t.data(data)\r\n\t\t\t.enter()\r\n\t\t\t.append(\"text\")\r\n\t\t\t.attr(\"x\", d => x(d.label) + x.bandwidth() / 2)\r\n\t\t\t.attr(\"y\", d => y(d.value) - 5)\r\n\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t.text(d => formatValue(d.value))\r\n\t\t\t.style(\"font-size\", \"10px\")\r\n\t\t\t.style(\"fill\", \"#333\");\r\n\t};\r\n\r\n\tconst drawLineChart = () => {\r\n\t\tclearChart(lineChart);\r\n\t\tif (!lineChart.value || !processedArray.value.length) return;\r\n\r\n\t\tconst width = 200;\r\n\t\tconst height = 80;\r\n\t\tconst margin = { top: 10, right: 10, bottom: 20, left: 10 };\r\n\r\n\t\tconst validData = processedArray.value.filter(\r\n\t\t\titem => item.year && !isNaN(item.value)\r\n\t\t);\r\n\t\tif (validData.length < 2) return; // 至少需要2个点绘制线段\r\n\r\n\t\tconst svg = d3\r\n\t\t\t.select(lineChart.value)\r\n\t\t\t.append(\"svg\")\r\n\t\t\t.attr(\"width\", width)\r\n\t\t\t.attr(\"height\", height);\r\n\r\n\t\tconst x = d3\r\n\t\t\t.scaleLinear()\r\n\t\t\t.domain(d3.extent(validData, d => d.year))\r\n\t\t\t.range([margin.left, width - margin.right]);\r\n\r\n\t\tconst y = d3\r\n\t\t\t.scaleLinear()\r\n\t\t\t.domain([0, d3.max(validData, d => d.value)])\r\n\t\t\t.nice()\r\n\t\t\t.range([height - margin.bottom, margin.top]);\r\n\r\n\t\tconst line = d3\r\n\t\t\t.line()\r\n\t\t\t.x(d => x(d.year))\r\n\t\t\t.y(d => y(d.value))\r\n\t\t\t.curve(d3.curveMonotoneX);\r\n\r\n\t\tsvg\r\n\t\t\t.append(\"path\")\r\n\t\t\t.datum(validData)\r\n\t\t\t.attr(\"fill\", \"none\")\r\n\t\t\t.attr(\"stroke\", \"#9C27B0\")\r\n\t\t\t.attr(\"stroke-width\", 2)\r\n\t\t\t.attr(\"d\", line);\r\n\r\n\t\tsvg\r\n\t\t\t.selectAll(\"circle\")\r\n\t\t\t.data(validData)\r\n\t\t\t.enter()\r\n\t\t\t.append(\"circle\")\r\n\t\t\t.attr(\"cx\", d => x(d.year))\r\n\t\t\t.attr(\"cy\", d => y(d.value))\r\n\t\t\t.attr(\"r\", 3)\r\n\t\t\t.attr(\"fill\", \"#9C27B0\");\r\n\r\n\t\tconst lastPoint = validData[validData.length - 1];\r\n\t\tsvg\r\n\t\t\t.append(\"text\")\r\n\t\t\t.attr(\"x\", x(lastPoint.year) + 10)\r\n\t\t\t.attr(\"y\", y(lastPoint.value))\r\n\t\t\t.attr(\"dy\", \"0.3em\")\r\n\t\t\t.text(formatValue(lastPoint.value))\r\n\t\t\t.style(\"font-size\", \"10px\")\r\n\t\t\t.style(\"fill\", \"#333\");\r\n\t};\r\n\r\n\tconst clearChart = element => {\r\n\t\tif (element?.value) d3.select(element.value).selectAll(\"*\").remove();\r\n\t};\r\n\r\n\t// 监听数据变化\r\n\twatch(\r\n\t\t() => [props.field, props.type],\r\n\t\t() => {\r\n\t\t\tif (!hasData.value) return;\r\n\r\n\t\t\tif (isPercentage.value) drawPieChart();\r\n\t\t\telse if (isBarChart.value) drawBarChart();\r\n\t\t\telse if (isLineChart.value) drawLineChart();\r\n\t\t},\r\n\t\t{ deep: true, immediate: true }\r\n\t);\r\n\r\n\tonMounted(() => {\r\n\t\tif (!hasData.value) return;\r\n\r\n\t\tif (isPercentage.value) drawPieChart();\r\n\t\telse if (isBarChart.value) drawBarChart();\r\n\t\telse if (isLineChart.value) drawLineChart();\r\n\t});\r\n</script>\r\n\r\n<style scoped>\r\n\t/* 保持原有样式不变 */\r\n\t.field-visualization {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.simple-value {\r\n\t\tfont-size: 16px;\r\n\t\ttext-align: center;\r\n\t\tpadding: 5px;\r\n\t}\r\n\r\n\t.simple-value .unit {\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #666;\r\n\t\tmargin-left: 2px;\r\n\t}\r\n\r\n\t.pie-chart,\r\n\t.bar-chart,\r\n\t.line-chart {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.no-data {\r\n\t\tcolor: #999;\r\n\t\tfont-style: italic;\r\n\t}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}