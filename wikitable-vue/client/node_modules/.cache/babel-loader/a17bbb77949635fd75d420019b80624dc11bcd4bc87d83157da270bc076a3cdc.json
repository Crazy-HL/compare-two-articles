{"ast":null,"code":"import { ref, computed, onMounted, watch, nextTick } from \"vue\";\nimport * as d3 from \"d3\";\nexport default {\n  __name: 'FieldVisualization',\n  props: {\n    field: [Object, Array, String, Number],\n    type: String,\n    visualization: String,\n    fieldKey: String,\n    yRange: Array,\n    compareData: [Object, Array]\n  },\n  setup(__props, _ref) {\n    let {\n      expose: __expose\n    } = _ref;\n    __expose();\n    const props = __props;\n    const pieChart = ref(null);\n    const barChart = ref(null);\n    const lineChart = ref(null);\n    const cleanValue = value => {\n      if (value === null || value === undefined) return null;\n      if (typeof value === \"number\") return value;\n      if (typeof value === \"string\") {\n        // 处理百分比值\n        const percentValue = parseFloat(value.replace(\"%\", \"\"));\n        if (!isNaN(percentValue)) return percentValue;\n        // 处理其他数值\n        const num = parseFloat(value.replace(/[^0-9.-]/g, \"\"));\n        return isNaN(num) ? value : num;\n      }\n      return value;\n    };\n    const processedArray = computed(() => {\n      if (!props.field) return [];\n\n      // 处理劳动力分布的特殊格式\n      if (Array.isArray(props.field) && props.fieldKey === \"Labor force by occupation\") {\n        return props.field.filter(item => item.value && typeof cleanValue(item.value) === \"number\").map(item => {\n          const rawText = item.raw || \"\";\n          const nameMatch = rawText.match(/^([^:]+):/);\n          const name = nameMatch ? nameMatch[1].trim() : \"未知行业\";\n          return {\n            name: name,\n            value: cleanValue(item.value),\n            unit: item.unit || \"%\",\n            raw: item.raw,\n            year: item.year\n          };\n        });\n      }\n\n      // 处理普通数组数据\n      if (Array.isArray(props.field)) {\n        return props.field.map(item => {\n          const year = item.year ? parseInt(item.year) : null;\n          return {\n            name: item.name || item.key || \"数据\",\n            value: cleanValue(item.value ?? item.raw),\n            unit: item.unit || \"\",\n            raw: item.raw || item.value,\n            year: year\n          };\n        }).filter(item => item.value !== null && !isNaN(item.value));\n      }\n\n      // 处理单值对象\n      if (typeof props.field === \"object\" && !Array.isArray(props.field)) {\n        // 如果是类似 {value: 10, unit: '%'} 的结构\n        if (\"value\" in props.field) {\n          return [{\n            name: props.fieldKey || \"数据\",\n            value: cleanValue(props.field.value),\n            unit: props.field.unit || \"\",\n            raw: props.field.raw || props.field.value\n          }];\n        }\n        // 如果是键值对形式 {Agriculture: \"22.8%\"}\n        return Object.entries(props.field).map(_ref2 => {\n          let [name, value] = _ref2;\n          return {\n            name: name,\n            value: cleanValue(value),\n            unit: \"%\",\n            raw: `${name}: ${value}`\n          };\n        }).filter(item => !isNaN(item.value));\n      }\n\n      // 处理原始值\n      return [{\n        name: props.fieldKey || \"数据\",\n        value: cleanValue(props.field),\n        unit: \"\",\n        raw: props.field\n      }];\n    });\n    const visualizationType = computed(() => {\n      // 优先使用props指定的类型\n      if (props.visualization) return props.visualization;\n\n      // 特殊字段处理\n      if (props.fieldKey === \"Labor force by occupation\") return \"pie-chart\";\n\n      // 自动判断图表类型\n      if (isTimeSeriesData.value) return \"line-chart\";\n      if (isComparisonData.value) return \"bar-chart\";\n      if (isSinglePercentage.value) return \"pie-chart\";\n      return \"text-only\";\n    });\n    const isTimeSeriesData = computed(() => {\n      return processedArray.value.length >= 2 && processedArray.value.every(item => item.year && typeof item.value === \"number\");\n    });\n    const isComparisonData = computed(() => {\n      return processedArray.value.length >= 1 && processedArray.value.every(item => typeof item.value === \"number\");\n    });\n    const isSinglePercentage = computed(() => {\n      return props.type === \"percentage\" && processedArray.value.length === 1 && typeof processedArray.value[0].value === \"number\";\n    });\n    const hasData = computed(() => {\n      if (props.field === null || props.field === undefined) return false;\n      if (Array.isArray(props.field)) return processedArray.value.length > 0;\n      if (typeof props.field === \"object\") return Object.keys(props.field).length > 0;\n      return props.field !== undefined && props.field !== null;\n    });\n    const isArray = computed(() => Array.isArray(props.field));\n    const formatTextValue = item => {\n      const value = item?.value ?? item;\n      if (value === null || value === undefined) return \"-\";\n      if (typeof value === \"number\") {\n        if (props.type === \"percentage\") return `${value}%`;\n        return value.toLocaleString();\n      }\n      return value;\n    };\n    const drawPieChart = () => {\n      const container = pieChart.value;\n      if (!container || processedArray.value.length === 0) return;\n      container.innerHTML = \"\";\n      const width = container.clientWidth;\n      const height = container.clientHeight;\n      const radius = Math.min(width, height) / 2 - 10;\n      const labelRadius = radius * 0.7;\n      const svg = d3.select(container).append(\"svg\").attr(\"width\", width).attr(\"height\", height).append(\"g\").attr(\"transform\", `translate(${width / 2},${height / 2})`);\n      const color = d3.scaleOrdinal(d3.schemeCategory10);\n      const pie = d3.pie().value(d => d.value);\n      const arc = d3.arc().innerRadius(0).outerRadius(radius);\n      const labelArc = d3.arc().innerRadius(labelRadius).outerRadius(labelRadius);\n      const arcs = svg.selectAll(\".arc\").data(pie(processedArray.value)).enter().append(\"g\").attr(\"class\", \"arc\");\n\n      // 绘制扇形\n      arcs.append(\"path\").attr(\"d\", arc).attr(\"fill\", (d, i) => color(i)).attr(\"stroke\", \"white\").attr(\"stroke-width\", 1).on(\"mouseover\", function (event, d) {\n        d3.select(this).attr(\"opacity\", 0.8);\n        tooltip.style(\"visibility\", \"visible\").html(`${d.data.name}<br>${d.data.value}${d.data.unit}`);\n      }).on(\"mousemove\", function (event) {\n        tooltip.style(\"top\", event.pageY - 10 + \"px\").style(\"left\", event.pageX + 10 + \"px\");\n      }).on(\"mouseout\", function () {\n        d3.select(this).attr(\"opacity\", 1);\n        tooltip.style(\"visibility\", \"hidden\");\n      });\n\n      // 添加标签\n      arcs.append(\"text\").attr(\"transform\", d => `translate(${labelArc.centroid(d)})`).attr(\"text-anchor\", \"middle\").text(d => `${d.data.value}${d.data.unit}`).style(\"font-size\", \"12px\").style(\"font-weight\", \"bold\").style(\"fill\", \"white\");\n\n      // 添加图例\n      const legend = svg.selectAll(\".legend\").data(processedArray.value).enter().append(\"g\").attr(\"class\", \"legend\").attr(\"transform\", (d, i) => `translate(${radius + 20},${i * 20 - radius / 2})`);\n      legend.append(\"rect\").attr(\"width\", 18).attr(\"height\", 18).attr(\"fill\", (d, i) => color(i));\n      legend.append(\"text\").attr(\"x\", 24).attr(\"y\", 9).attr(\"dy\", \".35em\").text(d => d.name).style(\"font-size\", \"12px\");\n\n      // 添加悬浮提示框\n      const tooltip = d3.select(container).append(\"div\").attr(\"class\", \"tooltip\").style(\"position\", \"absolute\").style(\"visibility\", \"hidden\").style(\"background\", \"rgba(0,0,0,0.7)\").style(\"color\", \"white\").style(\"padding\", \"5px 10px\").style(\"border-radius\", \"4px\").style(\"font-size\", \"12px\");\n\n      // 添加年份信息\n      const yearItem = Array.isArray(props.field) ? props.field.find(item => item.raw && /\\(.*\\d{4}.*\\)/.test(item.raw)) : null;\n      if (yearItem) {\n        svg.append(\"text\").attr(\"y\", radius + 20).attr(\"text-anchor\", \"middle\").text(yearItem.raw).style(\"font-size\", \"10px\").style(\"fill\", \"#666\");\n      }\n    };\n    const drawBarChart = () => {\n      const container = barChart.value;\n      if (!container || processedArray.value.length === 0) return;\n      container.innerHTML = \"\";\n      const width = container.clientWidth;\n      const height = container.clientHeight;\n      const margin = {\n        top: 10,\n        right: 10,\n        bottom: 30,\n        left: 30\n      };\n      const svg = d3.select(container).append(\"svg\").attr(\"width\", width).attr(\"height\", height);\n\n      // 使用传入的yRange或自动计算范围\n      const maxValue = props.yRange ? props.yRange[1] : d3.max(processedArray.value, d => d.value) * 1.1;\n      const minValue = props.yRange ? props.yRange[0] : 0;\n      const x = d3.scaleBand().domain(processedArray.value.map((d, i) => d.name || i)).range([margin.left, width - margin.right]).padding(0.4);\n      const y = d3.scaleLinear().domain([minValue, maxValue]).range([height - margin.bottom, margin.top]);\n\n      // 绘制坐标轴\n      svg.append(\"g\").attr(\"transform\", `translate(0,${height - margin.bottom})`).call(d3.axisBottom(x));\n      svg.append(\"g\").attr(\"transform\", `translate(${margin.left},0)`).call(d3.axisLeft(y));\n\n      // 绘制柱子\n      svg.selectAll(\".bar\").data(processedArray.value).enter().append(\"rect\").attr(\"class\", \"bar\").attr(\"x\", d => x(d.name || \"\")).attr(\"y\", d => y(d.value)).attr(\"width\", x.bandwidth()).attr(\"height\", d => height - margin.bottom - y(d.value)).attr(\"fill\", \"#2196F3\").on(\"mouseover\", function (event, d) {\n        d3.select(this).attr(\"opacity\", 0.8);\n        tooltip.style(\"visibility\", \"visible\").html(`${d.name || \"数据\"}: ${d.value}${d.unit}`);\n      }).on(\"mousemove\", function (event) {\n        tooltip.style(\"top\", event.pageY - 10 + \"px\").style(\"left\", event.pageX + 10 + \"px\");\n      }).on(\"mouseout\", function () {\n        d3.select(this).attr(\"opacity\", 1);\n        tooltip.style(\"visibility\", \"hidden\");\n      });\n\n      // 添加数值标签\n      svg.selectAll(\".bar-label\").data(processedArray.value).enter().append(\"text\").attr(\"class\", \"bar-label\").attr(\"x\", d => x(d.name || \"\") + x.bandwidth() / 2).attr(\"y\", d => y(d.value) - 5).attr(\"text-anchor\", \"middle\").text(d => `${d.value}${d.unit}`);\n\n      // 添加悬浮提示框\n      const tooltip = d3.select(container).append(\"div\").attr(\"class\", \"tooltip\").style(\"position\", \"absolute\").style(\"visibility\", \"hidden\").style(\"background\", \"rgba(0,0,0,0.7)\").style(\"color\", \"white\").style(\"padding\", \"5px 10px\").style(\"border-radius\", \"4px\").style(\"font-size\", \"12px\");\n    };\n    const drawLineChart = () => {\n      const container = lineChart.value;\n      if (!container || processedArray.value.length < 2) return;\n      container.innerHTML = \"\";\n      const width = container.clientWidth;\n      const height = container.clientHeight;\n      const margin = {\n        top: 20,\n        right: 20,\n        bottom: 30,\n        left: 30\n      };\n      const svg = d3.select(container).append(\"svg\").attr(\"width\", width).attr(\"height\", height);\n\n      // 按年份排序\n      const chartData = [...processedArray.value].sort((a, b) => a.year - b.year);\n      const x = d3.scaleLinear().domain(d3.extent(chartData, d => d.year)).range([margin.left, width - margin.right]);\n      const y = d3.scaleLinear().domain([0, d3.max(chartData, d => d.value) * 1.1]).range([height - margin.bottom, margin.top]);\n\n      // 绘制坐标轴\n      svg.append(\"g\").attr(\"transform\", `translate(0,${height - margin.bottom})`).call(d3.axisBottom(x).tickFormat(d3.format(\"d\"))); // 年份格式化为整数\n\n      svg.append(\"g\").attr(\"transform\", `translate(${margin.left},0)`).call(d3.axisLeft(y));\n\n      // 绘制折线\n      const line = d3.line().x(d => x(d.year)).y(d => y(d.value)).curve(d3.curveMonotoneX);\n      svg.append(\"path\").datum(chartData).attr(\"d\", line).attr(\"fill\", \"none\").attr(\"stroke\", \"#2196F3\").attr(\"stroke-width\", 3);\n\n      // 绘制数据点\n      svg.selectAll(\".dot\").data(chartData).enter().append(\"circle\").attr(\"class\", \"dot\").attr(\"cx\", d => x(d.year)).attr(\"cy\", d => y(d.value)).attr(\"r\", 5).attr(\"fill\", \"#2196F3\").on(\"mouseover\", function (event, d) {\n        d3.select(this).attr(\"r\", 8);\n        tooltip.style(\"visibility\", \"visible\").html(`${d.year}: ${d.value}${d.unit}`);\n      }).on(\"mousemove\", function (event) {\n        tooltip.style(\"top\", event.pageY - 10 + \"px\").style(\"left\", event.pageX + 10 + \"px\");\n      }).on(\"mouseout\", function () {\n        d3.select(this).attr(\"r\", 5);\n        tooltip.style(\"visibility\", \"hidden\");\n      });\n\n      // 添加悬浮提示框\n      const tooltip = d3.select(container).append(\"div\").attr(\"class\", \"tooltip\").style(\"position\", \"absolute\").style(\"visibility\", \"hidden\").style(\"background\", \"rgba(0,0,0,0.7)\").style(\"color\", \"white\").style(\"padding\", \"5px 10px\").style(\"border-radius\", \"4px\").style(\"font-size\", \"12px\");\n    };\n    watch(() => [props.field, visualizationType.value], () => {\n      nextTick(() => {\n        if (!hasData.value) return;\n        switch (visualizationType.value) {\n          case \"pie-chart\":\n            drawPieChart();\n            break;\n          case \"line-chart\":\n            drawLineChart();\n            break;\n          case \"bar-chart\":\n            drawBarChart();\n            break;\n        }\n      });\n    }, {\n      immediate: true,\n      deep: true\n    });\n    const __returned__ = {\n      props,\n      pieChart,\n      barChart,\n      lineChart,\n      cleanValue,\n      processedArray,\n      visualizationType,\n      isTimeSeriesData,\n      isComparisonData,\n      isSinglePercentage,\n      hasData,\n      isArray,\n      formatTextValue,\n      drawPieChart,\n      drawBarChart,\n      drawLineChart,\n      ref,\n      computed,\n      onMounted,\n      watch,\n      nextTick,\n      get d3() {\n        return d3;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","watch","nextTick","d3","props","__props","pieChart","barChart","lineChart","cleanValue","value","undefined","percentValue","parseFloat","replace","isNaN","num","processedArray","field","Array","isArray","fieldKey","filter","item","map","rawText","raw","nameMatch","match","name","trim","unit","year","parseInt","key","Object","entries","_ref2","visualizationType","visualization","isTimeSeriesData","isComparisonData","isSinglePercentage","length","every","type","hasData","keys","formatTextValue","toLocaleString","drawPieChart","container","innerHTML","width","clientWidth","height","clientHeight","radius","Math","min","labelRadius","svg","select","append","attr","color","scaleOrdinal","schemeCategory10","pie","d","arc","innerRadius","outerRadius","labelArc","arcs","selectAll","data","enter","i","on","event","tooltip","style","html","pageY","pageX","centroid","text","legend","yearItem","find","test","drawBarChart","margin","top","right","bottom","left","maxValue","yRange","max","minValue","x","scaleBand","domain","range","padding","y","scaleLinear","call","axisBottom","axisLeft","bandwidth","drawLineChart","chartData","sort","a","b","extent","tickFormat","format","line","curve","curveMonotoneX","datum","immediate","deep"],"sources":["D:/vue_frame/vue_frame/wikitable-vue/client/src/components/compoents_base/FieldVisualization.vue"],"sourcesContent":["<template>\r\n\t<div class=\"field-visualization\">\r\n\t\t<template v-if=\"hasData\">\r\n\t\t\t<!-- 百分比饼图 -->\r\n\t\t\t<div\r\n\t\t\t\tv-if=\"visualizationType === 'pie-chart'\"\r\n\t\t\t\tclass=\"chart-container pie-chart\"\r\n\t\t\t\tref=\"pieChart\"></div>\r\n\r\n\t\t\t<!-- 时间序列折线图 -->\r\n\t\t\t<div\r\n\t\t\t\tv-if=\"visualizationType === 'line-chart'\"\r\n\t\t\t\tclass=\"chart-container line-chart\"\r\n\t\t\t\tref=\"lineChart\"></div>\r\n\r\n\t\t\t<!-- 比较柱状图 -->\r\n\t\t\t<div\r\n\t\t\t\tv-if=\"visualizationType === 'bar-chart'\"\r\n\t\t\t\tclass=\"chart-container bar-chart\"\r\n\t\t\t\tref=\"barChart\"></div>\r\n\r\n\t\t\t<!-- 文本显示 -->\r\n\t\t\t<div v-if=\"visualizationType === 'text-only'\" class=\"text-display\">\r\n\t\t\t\t<template v-if=\"isArray\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tv-for=\"(item, index) in processedArray\"\r\n\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\tclass=\"text-item\">\r\n\t\t\t\t\t\t{{ formatTextValue(item) }}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-else>\r\n\t\t\t\t\t{{ formatTextValue(field) }}\r\n\t\t\t\t</template>\r\n\t\t\t</div>\r\n\t\t</template>\r\n\t\t<div v-else class=\"no-data\">无数据</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ref, computed, onMounted, watch, nextTick } from \"vue\";\r\n\timport * as d3 from \"d3\";\r\n\r\n\tconst props = defineProps({\r\n\t\tfield: [Object, Array, String, Number],\r\n\t\ttype: String,\r\n\t\tvisualization: String,\r\n\t\tfieldKey: String,\r\n\t\tyRange: Array,\r\n\t\tcompareData: [Object, Array]\r\n\t});\r\n\r\n\tconst pieChart = ref(null);\r\n\tconst barChart = ref(null);\r\n\tconst lineChart = ref(null);\r\n\r\n\tconst cleanValue = value => {\r\n\t\tif (value === null || value === undefined) return null;\r\n\t\tif (typeof value === \"number\") return value;\r\n\t\tif (typeof value === \"string\") {\r\n\t\t\t// 处理百分比值\r\n\t\t\tconst percentValue = parseFloat(value.replace(\"%\", \"\"));\r\n\t\t\tif (!isNaN(percentValue)) return percentValue;\r\n\t\t\t// 处理其他数值\r\n\t\t\tconst num = parseFloat(value.replace(/[^0-9.-]/g, \"\"));\r\n\t\t\treturn isNaN(num) ? value : num;\r\n\t\t}\r\n\t\treturn value;\r\n\t};\r\n\r\n\tconst processedArray = computed(() => {\r\n\t\tif (!props.field) return [];\r\n\r\n\t\t// 处理劳动力分布的特殊格式\r\n\t\tif (\r\n\t\t\tArray.isArray(props.field) &&\r\n\t\t\tprops.fieldKey === \"Labor force by occupation\"\r\n\t\t) {\r\n\t\t\treturn props.field\r\n\t\t\t\t.filter(\r\n\t\t\t\t\titem => item.value && typeof cleanValue(item.value) === \"number\"\r\n\t\t\t\t)\r\n\t\t\t\t.map(item => {\r\n\t\t\t\t\tconst rawText = item.raw || \"\";\r\n\t\t\t\t\tconst nameMatch = rawText.match(/^([^:]+):/);\r\n\t\t\t\t\tconst name = nameMatch ? nameMatch[1].trim() : \"未知行业\";\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tname: name,\r\n\t\t\t\t\t\tvalue: cleanValue(item.value),\r\n\t\t\t\t\t\tunit: item.unit || \"%\",\r\n\t\t\t\t\t\traw: item.raw,\r\n\t\t\t\t\t\tyear: item.year\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\t// 处理普通数组数据\r\n\t\tif (Array.isArray(props.field)) {\r\n\t\t\treturn props.field\r\n\t\t\t\t.map(item => {\r\n\t\t\t\t\tconst year = item.year ? parseInt(item.year) : null;\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tname: item.name || item.key || \"数据\",\r\n\t\t\t\t\t\tvalue: cleanValue(item.value ?? item.raw),\r\n\t\t\t\t\t\tunit: item.unit || \"\",\r\n\t\t\t\t\t\traw: item.raw || item.value,\r\n\t\t\t\t\t\tyear: year\r\n\t\t\t\t\t};\r\n\t\t\t\t})\r\n\t\t\t\t.filter(item => item.value !== null && !isNaN(item.value));\r\n\t\t}\r\n\r\n\t\t// 处理单值对象\r\n\t\tif (typeof props.field === \"object\" && !Array.isArray(props.field)) {\r\n\t\t\t// 如果是类似 {value: 10, unit: '%'} 的结构\r\n\t\t\tif (\"value\" in props.field) {\r\n\t\t\t\treturn [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: props.fieldKey || \"数据\",\r\n\t\t\t\t\t\tvalue: cleanValue(props.field.value),\r\n\t\t\t\t\t\tunit: props.field.unit || \"\",\r\n\t\t\t\t\t\traw: props.field.raw || props.field.value\r\n\t\t\t\t\t}\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\t// 如果是键值对形式 {Agriculture: \"22.8%\"}\r\n\t\t\treturn Object.entries(props.field)\r\n\t\t\t\t.map(([name, value]) => ({\r\n\t\t\t\t\tname: name,\r\n\t\t\t\t\tvalue: cleanValue(value),\r\n\t\t\t\t\tunit: \"%\",\r\n\t\t\t\t\traw: `${name}: ${value}`\r\n\t\t\t\t}))\r\n\t\t\t\t.filter(item => !isNaN(item.value));\r\n\t\t}\r\n\r\n\t\t// 处理原始值\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tname: props.fieldKey || \"数据\",\r\n\t\t\t\tvalue: cleanValue(props.field),\r\n\t\t\t\tunit: \"\",\r\n\t\t\t\traw: props.field\r\n\t\t\t}\r\n\t\t];\r\n\t});\r\n\r\n\tconst visualizationType = computed(() => {\r\n\t\t// 优先使用props指定的类型\r\n\t\tif (props.visualization) return props.visualization;\r\n\r\n\t\t// 特殊字段处理\r\n\t\tif (props.fieldKey === \"Labor force by occupation\") return \"pie-chart\";\r\n\r\n\t\t// 自动判断图表类型\r\n\t\tif (isTimeSeriesData.value) return \"line-chart\";\r\n\t\tif (isComparisonData.value) return \"bar-chart\";\r\n\t\tif (isSinglePercentage.value) return \"pie-chart\";\r\n\r\n\t\treturn \"text-only\";\r\n\t});\r\n\r\n\tconst isTimeSeriesData = computed(() => {\r\n\t\treturn (\r\n\t\t\tprocessedArray.value.length >= 2 &&\r\n\t\t\tprocessedArray.value.every(\r\n\t\t\t\titem => item.year && typeof item.value === \"number\"\r\n\t\t\t)\r\n\t\t);\r\n\t});\r\n\r\n\tconst isComparisonData = computed(() => {\r\n\t\treturn (\r\n\t\t\tprocessedArray.value.length >= 1 &&\r\n\t\t\tprocessedArray.value.every(item => typeof item.value === \"number\")\r\n\t\t);\r\n\t});\r\n\r\n\tconst isSinglePercentage = computed(() => {\r\n\t\treturn (\r\n\t\t\tprops.type === \"percentage\" &&\r\n\t\t\tprocessedArray.value.length === 1 &&\r\n\t\t\ttypeof processedArray.value[0].value === \"number\"\r\n\t\t);\r\n\t});\r\n\r\n\tconst hasData = computed(() => {\r\n\t\tif (props.field === null || props.field === undefined) return false;\r\n\t\tif (Array.isArray(props.field)) return processedArray.value.length > 0;\r\n\t\tif (typeof props.field === \"object\")\r\n\t\t\treturn Object.keys(props.field).length > 0;\r\n\t\treturn props.field !== undefined && props.field !== null;\r\n\t});\r\n\r\n\tconst isArray = computed(() => Array.isArray(props.field));\r\n\r\n\tconst formatTextValue = item => {\r\n\t\tconst value = item?.value ?? item;\r\n\t\tif (value === null || value === undefined) return \"-\";\r\n\t\tif (typeof value === \"number\") {\r\n\t\t\tif (props.type === \"percentage\") return `${value}%`;\r\n\t\t\treturn value.toLocaleString();\r\n\t\t}\r\n\t\treturn value;\r\n\t};\r\n\r\n\tconst drawPieChart = () => {\r\n\t\tconst container = pieChart.value;\r\n\t\tif (!container || processedArray.value.length === 0) return;\r\n\r\n\t\tcontainer.innerHTML = \"\";\r\n\r\n\t\tconst width = container.clientWidth;\r\n\t\tconst height = container.clientHeight;\r\n\t\tconst radius = Math.min(width, height) / 2 - 10;\r\n\t\tconst labelRadius = radius * 0.7;\r\n\r\n\t\tconst svg = d3\r\n\t\t\t.select(container)\r\n\t\t\t.append(\"svg\")\r\n\t\t\t.attr(\"width\", width)\r\n\t\t\t.attr(\"height\", height)\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"transform\", `translate(${width / 2},${height / 2})`);\r\n\r\n\t\tconst color = d3.scaleOrdinal(d3.schemeCategory10);\r\n\r\n\t\tconst pie = d3.pie().value(d => d.value);\r\n\r\n\t\tconst arc = d3.arc().innerRadius(0).outerRadius(radius);\r\n\t\tconst labelArc = d3.arc().innerRadius(labelRadius).outerRadius(labelRadius);\r\n\r\n\t\tconst arcs = svg\r\n\t\t\t.selectAll(\".arc\")\r\n\t\t\t.data(pie(processedArray.value))\r\n\t\t\t.enter()\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"class\", \"arc\");\r\n\r\n\t\t// 绘制扇形\r\n\t\tarcs\r\n\t\t\t.append(\"path\")\r\n\t\t\t.attr(\"d\", arc)\r\n\t\t\t.attr(\"fill\", (d, i) => color(i))\r\n\t\t\t.attr(\"stroke\", \"white\")\r\n\t\t\t.attr(\"stroke-width\", 1)\r\n\t\t\t.on(\"mouseover\", function (event, d) {\r\n\t\t\t\td3.select(this).attr(\"opacity\", 0.8);\r\n\t\t\t\ttooltip\r\n\t\t\t\t\t.style(\"visibility\", \"visible\")\r\n\t\t\t\t\t.html(`${d.data.name}<br>${d.data.value}${d.data.unit}`);\r\n\t\t\t})\r\n\t\t\t.on(\"mousemove\", function (event) {\r\n\t\t\t\ttooltip\r\n\t\t\t\t\t.style(\"top\", event.pageY - 10 + \"px\")\r\n\t\t\t\t\t.style(\"left\", event.pageX + 10 + \"px\");\r\n\t\t\t})\r\n\t\t\t.on(\"mouseout\", function () {\r\n\t\t\t\td3.select(this).attr(\"opacity\", 1);\r\n\t\t\t\ttooltip.style(\"visibility\", \"hidden\");\r\n\t\t\t});\r\n\r\n\t\t// 添加标签\r\n\t\tarcs\r\n\t\t\t.append(\"text\")\r\n\t\t\t.attr(\"transform\", d => `translate(${labelArc.centroid(d)})`)\r\n\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t.text(d => `${d.data.value}${d.data.unit}`)\r\n\t\t\t.style(\"font-size\", \"12px\")\r\n\t\t\t.style(\"font-weight\", \"bold\")\r\n\t\t\t.style(\"fill\", \"white\");\r\n\r\n\t\t// 添加图例\r\n\t\tconst legend = svg\r\n\t\t\t.selectAll(\".legend\")\r\n\t\t\t.data(processedArray.value)\r\n\t\t\t.enter()\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"class\", \"legend\")\r\n\t\t\t.attr(\r\n\t\t\t\t\"transform\",\r\n\t\t\t\t(d, i) => `translate(${radius + 20},${i * 20 - radius / 2})`\r\n\t\t\t);\r\n\r\n\t\tlegend\r\n\t\t\t.append(\"rect\")\r\n\t\t\t.attr(\"width\", 18)\r\n\t\t\t.attr(\"height\", 18)\r\n\t\t\t.attr(\"fill\", (d, i) => color(i));\r\n\r\n\t\tlegend\r\n\t\t\t.append(\"text\")\r\n\t\t\t.attr(\"x\", 24)\r\n\t\t\t.attr(\"y\", 9)\r\n\t\t\t.attr(\"dy\", \".35em\")\r\n\t\t\t.text(d => d.name)\r\n\t\t\t.style(\"font-size\", \"12px\");\r\n\r\n\t\t// 添加悬浮提示框\r\n\t\tconst tooltip = d3\r\n\t\t\t.select(container)\r\n\t\t\t.append(\"div\")\r\n\t\t\t.attr(\"class\", \"tooltip\")\r\n\t\t\t.style(\"position\", \"absolute\")\r\n\t\t\t.style(\"visibility\", \"hidden\")\r\n\t\t\t.style(\"background\", \"rgba(0,0,0,0.7)\")\r\n\t\t\t.style(\"color\", \"white\")\r\n\t\t\t.style(\"padding\", \"5px 10px\")\r\n\t\t\t.style(\"border-radius\", \"4px\")\r\n\t\t\t.style(\"font-size\", \"12px\");\r\n\r\n\t\t// 添加年份信息\r\n\t\tconst yearItem = Array.isArray(props.field)\r\n\t\t\t? props.field.find(item => item.raw && /\\(.*\\d{4}.*\\)/.test(item.raw))\r\n\t\t\t: null;\r\n\t\tif (yearItem) {\r\n\t\t\tsvg\r\n\t\t\t\t.append(\"text\")\r\n\t\t\t\t.attr(\"y\", radius + 20)\r\n\t\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t\t.text(yearItem.raw)\r\n\t\t\t\t.style(\"font-size\", \"10px\")\r\n\t\t\t\t.style(\"fill\", \"#666\");\r\n\t\t}\r\n\t};\r\n\r\n\tconst drawBarChart = () => {\r\n\t\tconst container = barChart.value;\r\n\t\tif (!container || processedArray.value.length === 0) return;\r\n\r\n\t\tcontainer.innerHTML = \"\";\r\n\r\n\t\tconst width = container.clientWidth;\r\n\t\tconst height = container.clientHeight;\r\n\t\tconst margin = { top: 10, right: 10, bottom: 30, left: 30 };\r\n\r\n\t\tconst svg = d3\r\n\t\t\t.select(container)\r\n\t\t\t.append(\"svg\")\r\n\t\t\t.attr(\"width\", width)\r\n\t\t\t.attr(\"height\", height);\r\n\r\n\t\t// 使用传入的yRange或自动计算范围\r\n\t\tconst maxValue = props.yRange\r\n\t\t\t? props.yRange[1]\r\n\t\t\t: d3.max(processedArray.value, d => d.value) * 1.1;\r\n\t\tconst minValue = props.yRange ? props.yRange[0] : 0;\r\n\r\n\t\tconst x = d3\r\n\t\t\t.scaleBand()\r\n\t\t\t.domain(processedArray.value.map((d, i) => d.name || i))\r\n\t\t\t.range([margin.left, width - margin.right])\r\n\t\t\t.padding(0.4);\r\n\r\n\t\tconst y = d3\r\n\t\t\t.scaleLinear()\r\n\t\t\t.domain([minValue, maxValue])\r\n\t\t\t.range([height - margin.bottom, margin.top]);\r\n\r\n\t\t// 绘制坐标轴\r\n\t\tsvg\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"transform\", `translate(0,${height - margin.bottom})`)\r\n\t\t\t.call(d3.axisBottom(x));\r\n\r\n\t\tsvg\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"transform\", `translate(${margin.left},0)`)\r\n\t\t\t.call(d3.axisLeft(y));\r\n\r\n\t\t// 绘制柱子\r\n\t\tsvg\r\n\t\t\t.selectAll(\".bar\")\r\n\t\t\t.data(processedArray.value)\r\n\t\t\t.enter()\r\n\t\t\t.append(\"rect\")\r\n\t\t\t.attr(\"class\", \"bar\")\r\n\t\t\t.attr(\"x\", d => x(d.name || \"\"))\r\n\t\t\t.attr(\"y\", d => y(d.value))\r\n\t\t\t.attr(\"width\", x.bandwidth())\r\n\t\t\t.attr(\"height\", d => height - margin.bottom - y(d.value))\r\n\t\t\t.attr(\"fill\", \"#2196F3\")\r\n\t\t\t.on(\"mouseover\", function (event, d) {\r\n\t\t\t\td3.select(this).attr(\"opacity\", 0.8);\r\n\t\t\t\ttooltip\r\n\t\t\t\t\t.style(\"visibility\", \"visible\")\r\n\t\t\t\t\t.html(`${d.name || \"数据\"}: ${d.value}${d.unit}`);\r\n\t\t\t})\r\n\t\t\t.on(\"mousemove\", function (event) {\r\n\t\t\t\ttooltip\r\n\t\t\t\t\t.style(\"top\", event.pageY - 10 + \"px\")\r\n\t\t\t\t\t.style(\"left\", event.pageX + 10 + \"px\");\r\n\t\t\t})\r\n\t\t\t.on(\"mouseout\", function () {\r\n\t\t\t\td3.select(this).attr(\"opacity\", 1);\r\n\t\t\t\ttooltip.style(\"visibility\", \"hidden\");\r\n\t\t\t});\r\n\r\n\t\t// 添加数值标签\r\n\t\tsvg\r\n\t\t\t.selectAll(\".bar-label\")\r\n\t\t\t.data(processedArray.value)\r\n\t\t\t.enter()\r\n\t\t\t.append(\"text\")\r\n\t\t\t.attr(\"class\", \"bar-label\")\r\n\t\t\t.attr(\"x\", d => x(d.name || \"\") + x.bandwidth() / 2)\r\n\t\t\t.attr(\"y\", d => y(d.value) - 5)\r\n\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t.text(d => `${d.value}${d.unit}`);\r\n\r\n\t\t// 添加悬浮提示框\r\n\t\tconst tooltip = d3\r\n\t\t\t.select(container)\r\n\t\t\t.append(\"div\")\r\n\t\t\t.attr(\"class\", \"tooltip\")\r\n\t\t\t.style(\"position\", \"absolute\")\r\n\t\t\t.style(\"visibility\", \"hidden\")\r\n\t\t\t.style(\"background\", \"rgba(0,0,0,0.7)\")\r\n\t\t\t.style(\"color\", \"white\")\r\n\t\t\t.style(\"padding\", \"5px 10px\")\r\n\t\t\t.style(\"border-radius\", \"4px\")\r\n\t\t\t.style(\"font-size\", \"12px\");\r\n\t};\r\n\r\n\tconst drawLineChart = () => {\r\n\t\tconst container = lineChart.value;\r\n\t\tif (!container || processedArray.value.length < 2) return;\r\n\r\n\t\tcontainer.innerHTML = \"\";\r\n\r\n\t\tconst width = container.clientWidth;\r\n\t\tconst height = container.clientHeight;\r\n\t\tconst margin = { top: 20, right: 20, bottom: 30, left: 30 };\r\n\r\n\t\tconst svg = d3\r\n\t\t\t.select(container)\r\n\t\t\t.append(\"svg\")\r\n\t\t\t.attr(\"width\", width)\r\n\t\t\t.attr(\"height\", height);\r\n\r\n\t\t// 按年份排序\r\n\t\tconst chartData = [...processedArray.value].sort((a, b) => a.year - b.year);\r\n\r\n\t\tconst x = d3\r\n\t\t\t.scaleLinear()\r\n\t\t\t.domain(d3.extent(chartData, d => d.year))\r\n\t\t\t.range([margin.left, width - margin.right]);\r\n\r\n\t\tconst y = d3\r\n\t\t\t.scaleLinear()\r\n\t\t\t.domain([0, d3.max(chartData, d => d.value) * 1.1])\r\n\t\t\t.range([height - margin.bottom, margin.top]);\r\n\r\n\t\t// 绘制坐标轴\r\n\t\tsvg\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"transform\", `translate(0,${height - margin.bottom})`)\r\n\t\t\t.call(d3.axisBottom(x).tickFormat(d3.format(\"d\"))); // 年份格式化为整数\r\n\r\n\t\tsvg\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"transform\", `translate(${margin.left},0)`)\r\n\t\t\t.call(d3.axisLeft(y));\r\n\r\n\t\t// 绘制折线\r\n\t\tconst line = d3\r\n\t\t\t.line()\r\n\t\t\t.x(d => x(d.year))\r\n\t\t\t.y(d => y(d.value))\r\n\t\t\t.curve(d3.curveMonotoneX);\r\n\r\n\t\tsvg\r\n\t\t\t.append(\"path\")\r\n\t\t\t.datum(chartData)\r\n\t\t\t.attr(\"d\", line)\r\n\t\t\t.attr(\"fill\", \"none\")\r\n\t\t\t.attr(\"stroke\", \"#2196F3\")\r\n\t\t\t.attr(\"stroke-width\", 3);\r\n\r\n\t\t// 绘制数据点\r\n\t\tsvg\r\n\t\t\t.selectAll(\".dot\")\r\n\t\t\t.data(chartData)\r\n\t\t\t.enter()\r\n\t\t\t.append(\"circle\")\r\n\t\t\t.attr(\"class\", \"dot\")\r\n\t\t\t.attr(\"cx\", d => x(d.year))\r\n\t\t\t.attr(\"cy\", d => y(d.value))\r\n\t\t\t.attr(\"r\", 5)\r\n\t\t\t.attr(\"fill\", \"#2196F3\")\r\n\t\t\t.on(\"mouseover\", function (event, d) {\r\n\t\t\t\td3.select(this).attr(\"r\", 8);\r\n\t\t\t\ttooltip\r\n\t\t\t\t\t.style(\"visibility\", \"visible\")\r\n\t\t\t\t\t.html(`${d.year}: ${d.value}${d.unit}`);\r\n\t\t\t})\r\n\t\t\t.on(\"mousemove\", function (event) {\r\n\t\t\t\ttooltip\r\n\t\t\t\t\t.style(\"top\", event.pageY - 10 + \"px\")\r\n\t\t\t\t\t.style(\"left\", event.pageX + 10 + \"px\");\r\n\t\t\t})\r\n\t\t\t.on(\"mouseout\", function () {\r\n\t\t\t\td3.select(this).attr(\"r\", 5);\r\n\t\t\t\ttooltip.style(\"visibility\", \"hidden\");\r\n\t\t\t});\r\n\r\n\t\t// 添加悬浮提示框\r\n\t\tconst tooltip = d3\r\n\t\t\t.select(container)\r\n\t\t\t.append(\"div\")\r\n\t\t\t.attr(\"class\", \"tooltip\")\r\n\t\t\t.style(\"position\", \"absolute\")\r\n\t\t\t.style(\"visibility\", \"hidden\")\r\n\t\t\t.style(\"background\", \"rgba(0,0,0,0.7)\")\r\n\t\t\t.style(\"color\", \"white\")\r\n\t\t\t.style(\"padding\", \"5px 10px\")\r\n\t\t\t.style(\"border-radius\", \"4px\")\r\n\t\t\t.style(\"font-size\", \"12px\");\r\n\t};\r\n\r\n\twatch(\r\n\t\t() => [props.field, visualizationType.value],\r\n\t\t() => {\r\n\t\t\tnextTick(() => {\r\n\t\t\t\tif (!hasData.value) return;\r\n\r\n\t\t\t\tswitch (visualizationType.value) {\r\n\t\t\t\t\tcase \"pie-chart\":\r\n\t\t\t\t\t\tdrawPieChart();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"line-chart\":\r\n\t\t\t\t\t\tdrawLineChart();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"bar-chart\":\r\n\t\t\t\t\t\tdrawBarChart();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t{ immediate: true, deep: true }\r\n\t);\r\n</script>\r\n\r\n<style scoped>\r\n\t.field-visualization {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tmin-height: 120px;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.chart-container {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.text-display {\r\n\t\tpadding: 8px;\r\n\t\ttext-align: center;\r\n\t\tfont-size: 14px;\r\n\t\tline-height: 1.5;\r\n\t}\r\n\r\n\t.text-item {\r\n\t\tmargin: 4px 0;\r\n\t}\r\n\r\n\t.no-data {\r\n\t\tposition: absolute;\r\n\t\ttop: 50%;\r\n\t\tleft: 50%;\r\n\t\ttransform: translate(-50%, -50%);\r\n\t\tcolor: #999;\r\n\t}\r\n</style>\r\n\r\n<style>\r\n\t/* 全局工具提示样式 */\r\n\t.tooltip {\r\n\t\tposition: absolute;\r\n\t\tz-index: 100;\r\n\t\tpointer-events: none;\r\n\t\ttransition: all 0.2s ease;\r\n\t}\r\n\r\n\t.pie-chart .legend {\r\n\t\tfont-size: 12px;\r\n\t\tfont-family: Arial, sans-serif;\r\n\t}\r\n\r\n\t.pie-chart .legend rect {\r\n\t\tstroke: #fff;\r\n\t\tstroke-width: 1px;\r\n\t}\r\n\r\n\t.bar-label {\r\n\t\tfont-size: 12px;\r\n\t\tfont-weight: bold;\r\n\t\tfill: #333;\r\n\t}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}