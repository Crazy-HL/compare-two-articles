{"ast":null,"code":"import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, createVNode as _createVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-2e821d1e\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"main-container\"\n};\nconst _hoisted_2 = {\n  class: \"chat-container\"\n};\nconst _hoisted_3 = {\n  class: \"chat-history\"\n};\nconst _hoisted_4 = [\"innerHTML\"];\nconst _hoisted_5 = {\n  key: 0,\n  class: \"followup-section\"\n};\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = {\n  key: 0,\n  class: \"loading-indicator\"\n};\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"loading-spinner\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_9 = {\n  class: \"vis-container\"\n};\nconst _hoisted_10 = {\n  class: \"input\"\n};\nconst _hoisted_11 = {\n  class: \"input-container\"\n};\nconst _hoisted_12 = [\"disabled\"];\nconst _hoisted_13 = {\n  class: \"button-container\"\n};\nconst _hoisted_14 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.chatHistory, (message, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      class: _normalizeClass(['message', message.role, {\n        error: message.error\n      }])\n    }, [_createElementVNode(\"div\", {\n      class: \"message-content\",\n      innerHTML: message.content\n    }, null, 8 /* PROPS */, _hoisted_4), message.showFollowup ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createElementVNode(\"button\", {\n      class: \"followup-btn\",\n      onClick: $event => $setup.handleFollowupQuestion(message.fieldKey)\n    }, \" 结合其他属性深入分析原因 \", 8 /* PROPS */, _hoisted_6)])) : _createCommentVNode(\"v-if\", true)], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */)), $setup.isLoading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_hoisted_8, _createTextVNode(\" 正在处理中... \")])) : _createCommentVNode(\"v-if\", true)])]), _createElementVNode(\"div\", _hoisted_9, [_createVNode($setup[\"CompareTable\"], {\n    class: \"compare-table\",\n    \"div1-raw-data\": $setup.div1RawData,\n    \"div3-raw-data\": $setup.div3RawData,\n    onCompareAttribute: $setup.handleAttributeComparison\n  }, null, 8 /* PROPS */, [\"div1-raw-data\", \"div3-raw-data\"])]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"div\", _hoisted_11, [_withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.userQuestion = $event),\n    rows: \"2\",\n    placeholder: \"请输入你想问的问题...\",\n    disabled: $setup.isLoading\n  }, null, 8 /* PROPS */, _hoisted_12), [[_vModelText, $setup.userQuestion]]), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"button\", {\n    onClick: $setup.askQuestion,\n    disabled: $setup.isLoading\n  }, _toDisplayString($setup.isLoading ? \"处理中...\" : \"发送\"), 9 /* TEXT, PROPS */, _hoisted_14)])])])]);\n}","map":{"version":3,"names":["class","key","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_Fragment","_renderList","$setup","chatHistory","message","index","_normalizeClass","role","error","innerHTML","content","_hoisted_4","showFollowup","_hoisted_5","onClick","$event","handleFollowupQuestion","fieldKey","_hoisted_6","_createCommentVNode","isLoading","_hoisted_7","_hoisted_8","_createTextVNode","_hoisted_9","_createVNode","div1RawData","div3RawData","onCompareAttribute","handleAttributeComparison","_hoisted_10","_hoisted_11","_cache","userQuestion","rows","placeholder","disabled","_hoisted_12","_hoisted_13","askQuestion","_hoisted_14"],"sources":["D:\\vue_frame\\vue_frame\\wikitable-vue\\client\\src\\components\\Div2.vue"],"sourcesContent":["<template>\r\n\t<div class=\"main-container\">\r\n\t\t<div class=\"chat-container\">\r\n\t\t\t<div class=\"chat-history\">\r\n\t\t\t\t<div\r\n\t\t\t\t\tv-for=\"(message, index) in chatHistory\"\r\n\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t:class=\"['message', message.role, { error: message.error }]\">\r\n\t\t\t\t\t<div class=\"message-content\" v-html=\"message.content\"></div>\r\n\t\t\t\t\t<div v-if=\"message.showFollowup\" class=\"followup-section\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\"followup-btn\"\r\n\t\t\t\t\t\t\t@click=\"handleFollowupQuestion(message.fieldKey)\">\r\n\t\t\t\t\t\t\t结合其他属性深入分析原因\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div v-if=\"isLoading\" class=\"loading-indicator\">\r\n\t\t\t\t\t<div class=\"loading-spinner\"></div>\r\n\t\t\t\t\t正在处理中...\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"vis-container\">\r\n\t\t\t<CompareTable\r\n\t\t\t\tclass=\"compare-table\"\r\n\t\t\t\t:div1-raw-data=\"div1RawData\"\r\n\t\t\t\t:div3-raw-data=\"div3RawData\"\r\n\t\t\t\t@compareAttribute=\"handleAttributeComparison\" />\r\n\t\t</div>\r\n\t\t<div class=\"input\">\r\n\t\t\t<div class=\"input-container\">\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tv-model=\"userQuestion\"\r\n\t\t\t\t\trows=\"2\"\r\n\t\t\t\t\tplaceholder=\"请输入你想问的问题...\"\r\n\t\t\t\t\t:disabled=\"isLoading\"></textarea>\r\n\t\t\t\t<div class=\"button-container\">\r\n\t\t\t\t\t<button @click=\"askQuestion\" :disabled=\"isLoading\">\r\n\t\t\t\t\t\t{{ isLoading ? \"处理中...\" : \"发送\" }}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ref, onMounted, onUnmounted, watch, nextTick } from \"vue\";\r\n\timport bus from \"@/js/eventBus.js\";\r\n\timport CompareTable from \"@/components/compoents_base/CompareTable.vue\";\r\n\r\n\tconst userQuestion = ref(\"\");\r\n\tconst chatHistory = ref([]);\r\n\tconst selectText2 = ref(\"\");\r\n\tconst selectText3 = ref(\"\");\r\n\tconst currentChartData = ref(null);\r\n\tconst currentChartType = ref(null);\r\n\tconst div1RawData = ref(null);\r\n\tconst div3RawData = ref(null);\r\n\tconst isLoading = ref(false);\r\n\tconst div1InfoboxData = ref(null);\r\n\tconst div3InfoboxData = ref(null);\r\n\r\n\t// 加载聊天历史\r\n\tconst loadChatHistory = () => {\r\n\t\tconst saved = localStorage.getItem(\"chatHistory\");\r\n\t\tif (saved) {\r\n\t\t\ttry {\r\n\t\t\t\tchatHistory.value = JSON.parse(saved);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(\"加载聊天记录失败:\", e);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// 保存聊天历史\r\n\twatch(\r\n\t\tchatHistory,\r\n\t\tnewVal => {\r\n\t\t\tlocalStorage.removeItem(\"chatHistory\");\r\n\t\t\tlocalStorage.setItem(\"chatHistory\", JSON.stringify(newVal));\r\n\t\t\tlocalStorage.removeItem(\"chatHistory\");\r\n\t\t},\r\n\t\t{ deep: true }\r\n\t);\r\n\r\n\t// 滚动到底部\r\n\tconst scrollToBottom = () => {\r\n\t\tnextTick(() => {\r\n\t\t\tconst container = document.querySelector(\".chat-history\");\r\n\t\t\tif (container) {\r\n\t\t\t\tcontainer.scrollTop = container.scrollHeight;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleDiv1Event = data => handleSelection(data, \"div1\");\r\n\tconst handleDiv3Event = data => handleSelection(data, \"div3\");\r\n\r\n\tonMounted(() => {\r\n\t\tloadChatHistory();\r\n\t\tbus.on(\"div1_Event\", handleDiv1Event);\r\n\t\tbus.on(\"div3_Event\", handleDiv3Event);\r\n\t\tbus.on(\"div1_InfoboxData\", data => {\r\n\t\t\tdiv1InfoboxData.value = data;\r\n\t\t\tconsole.log(\"Received div1 infobox:\", data);\r\n\t\t});\r\n\t\tbus.on(\"div3_InfoboxData\", data => {\r\n\t\t\tdiv3InfoboxData.value = data;\r\n\t\t\tconsole.log(\"Received div3 infobox:\", data);\r\n\t\t});\r\n\t});\r\n\r\n\tonUnmounted(() => {\r\n\t\tbus.off(\"div1_Event\", handleDiv1Event);\r\n\t\tbus.off(\"div3_Event\", handleDiv3Event);\r\n\t\tbus.off(\"div1_InfoboxData\");\r\n\t\tbus.off(\"div3_InfoboxData\");\r\n\t});\r\n\r\n\tfunction handleSelection(data, source) {\r\n\t\tconst plainText = getPlainTextFromSelection(data.content);\r\n\t\tif (source === \"div1\") {\r\n\t\t\tselectText2.value = plainText;\r\n\t\t\tdiv1RawData.value = data.content;\r\n\t\t} else if (source === \"div3\") {\r\n\t\t\tselectText3.value = plainText;\r\n\t\t\tdiv3RawData.value = data.content;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getPlainTextFromSelection(htmlContent) {\r\n\t\tconst container = document.createElement(\"div\");\r\n\t\tcontainer.innerHTML = htmlContent;\r\n\t\treturn container.innerText || container.textContent || \"\";\r\n\t}\r\n\r\n\tconst formatAnalysisResult = text => {\r\n\t\tif (!text) return \"\";\r\n\r\n\t\t// 增强的Markdown转换\r\n\t\ttext = text\r\n\t\t\t.replace(/^# (.*$)/gm, \"<h1>$1</h1>\")\r\n\t\t\t.replace(/^## (.*$)/gm, \"<h2>$1</h2>\")\r\n\t\t\t.replace(/^### (.*$)/gm, \"<h3>$1</h3>\")\r\n\t\t\t.replace(/\\*\\*(.*?)\\*\\*/g, \"<strong>$1</strong>\")\r\n\t\t\t.replace(/\\*(.*?)\\*/g, \"<em>$1</em>\")\r\n\t\t\t.replace(/`(.*?)`/g, \"<code>$1</code>\")\r\n\t\t\t.replace(/!\\[(.*?)\\]\\((.*?)\\)/g, '<img alt=\"$1\" src=\"$2\">')\r\n\t\t\t.replace(/\\[(.*?)\\]\\((.*?)\\)/g, '<a href=\"$2\">$1</a>')\r\n\t\t\t.replace(/(?:^|\\n)\\d+\\.\\s+(.*)/g, \"<li>$1</li>\")\r\n\t\t\t.replace(/(?:^|\\n)-\\s+(.*)/g, \"<li>$1</li>\")\r\n\t\t\t.replace(/(?:^|\\n)\\>\\s+(.*)/g, \"<blockquote>$1</blockquote>\")\r\n\t\t\t.replace(/(<li>.*<\\/li>)/gs, \"<ul>$1</ul>\")\r\n\t\t\t.replace(/\\n\\n/g, \"<br><br>\")\r\n\t\t\t.replace(/\\n/g, \"<br>\");\r\n\r\n\t\treturn `<div class=\"markdown-content\">${text}</div>`;\r\n\t};\r\n\r\n\tconst askQuestion = async () => {\r\n\t\tif (!userQuestion.value.trim()) {\r\n\t\t\tchatHistory.value.push({\r\n\t\t\t\trole: \"assistant\",\r\n\t\t\t\tcontent: \"问题不能为空\",\r\n\t\t\t\ttimestamp: new Date().toLocaleString(),\r\n\t\t\t\terror: true\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst question = userQuestion.value;\r\n\t\tchatHistory.value.push({\r\n\t\t\trole: \"user\",\r\n\t\t\tcontent: question,\r\n\t\t\ttimestamp: new Date().toLocaleString()\r\n\t\t});\r\n\t\tuserQuestion.value = \"\";\r\n\r\n\t\tisLoading.value = true;\r\n\r\n\t\ttry {\r\n\t\t\tawait api.post(\r\n\t\t\t\t\"gpt_ask_chart\",\r\n\t\t\t\t{\r\n\t\t\t\t\tquestion: question,\r\n\t\t\t\t\tchartData: currentChartData.value,\r\n\t\t\t\t\tchartType: currentChartType.value\r\n\t\t\t\t},\r\n\t\t\t\tresponse => {\r\n\t\t\t\t\tconst formattedAnswer = formatAnalysisResult(response.answer);\r\n\t\t\t\t\tchatHistory.value.push({\r\n\t\t\t\t\t\trole: \"assistant\",\r\n\t\t\t\t\t\tcontent: formattedAnswer,\r\n\t\t\t\t\t\ttimestamp: new Date().toLocaleString()\r\n\t\t\t\t\t});\r\n\t\t\t\t\tscrollToBottom();\r\n\t\t\t\t},\r\n\t\t\t\terror => {\r\n\t\t\t\t\tthrow error;\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"请求失败:\", error);\r\n\t\t\tchatHistory.value.push({\r\n\t\t\t\trole: \"assistant\",\r\n\t\t\t\tcontent: `请求失败: ${error.message || \"未知错误\"}`,\r\n\t\t\t\ttimestamp: new Date().toLocaleString(),\r\n\t\t\t\terror: true\r\n\t\t\t});\r\n\t\t} finally {\r\n\t\t\tisLoading.value = false;\r\n\t\t\tscrollToBottom();\r\n\t\t}\r\n\t};\r\n\r\n\tconst simplifyInfobox = infobox => {\r\n\t\tif (!infobox) return {};\r\n\t\tconst simpleData = {};\r\n\t\tconst fieldsToKeep = [\"score\", \"rate\", \"value\", \"amount\", \"size\", \"level\"]; // 关键数值字段\r\n\r\n\t\tObject.entries(infobox).forEach(([key, value]) => {\r\n\t\t\t// 保留数值型字段和短文本\r\n\t\t\tif (\r\n\t\t\t\tfieldsToKeep.includes(key) ||\r\n\t\t\t\ttypeof value === \"number\" ||\r\n\t\t\t\t(typeof value === \"string\" && value.length < 30)\r\n\t\t\t) {\r\n\t\t\t\tsimpleData[key] = value;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn simpleData;\r\n\t};\r\n\r\n\tconst getSummary = htmlContent => {\r\n\t\tconst div = document.createElement(\"div\");\r\n\t\tdiv.innerHTML = htmlContent;\r\n\t\tconst text = div.textContent || \"\";\r\n\t\tconst maxLength = 200;\r\n\r\n\t\tif (text.length <= maxLength) return text;\r\n\r\n\t\t// 提取开头和结论部分\r\n\t\tconst start = text.substring(0, maxLength);\r\n\t\tconst conclusionIndex =\r\n\t\t\ttext.lastIndexOf(\"结论\") > -1\r\n\t\t\t\t? text.lastIndexOf(\"结论\")\r\n\t\t\t\t: text.lastIndexOf(\"因此\");\r\n\r\n\t\tconst end =\r\n\t\t\tconclusionIndex > -1\r\n\t\t\t\t? text.substring(conclusionIndex)\r\n\t\t\t\t: text.substring(text.length - 100);\r\n\r\n\t\treturn `${start}...\\n[关键结论]: ${end}`;\r\n\t};\r\n\r\n\tconst handleAttributeComparison = async ({\r\n\t\tfieldKey,\r\n\t\tleftData,\r\n\t\trightData,\r\n\t\tleftTitle,\r\n\t\trightTitle,\r\n\t\tfieldType,\r\n\t\tfieldLabel\r\n\t}) => {\r\n\t\tif (!leftData || !rightData) {\r\n\t\t\tchatHistory.value.push({\r\n\t\t\t\trole: \"assistant\",\r\n\t\t\t\tcontent: \"请先选择要对比的数据\",\r\n\t\t\t\ttimestamp: new Date().toLocaleString(),\r\n\t\t\t\terror: true\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tisLoading.value = true;\r\n\r\n\t\ttry {\r\n\t\t\tchatHistory.value.push({\r\n\t\t\t\trole: \"assistant\",\r\n\t\t\t\tcontent: `正在对比分析<strong>${fieldKey}</strong>属性...`,\r\n\t\t\t\ttimestamp: new Date().toLocaleString()\r\n\t\t\t});\r\n\r\n\t\t\tconst requestPayload = {\r\n\t\t\t\tchartData: {\r\n\t\t\t\t\tleftData,\r\n\t\t\t\t\trightData,\r\n\t\t\t\t\tleftTitle,\r\n\t\t\t\t\trightTitle,\r\n\t\t\t\t\tfieldKey,\r\n\t\t\t\t\tfieldType,\r\n\t\t\t\t\tallFields: Object.keys({\r\n\t\t\t\t\t\t...div1InfoboxData.value,\r\n\t\t\t\t\t\t...div3InfoboxData.value\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tleftInfobox: simplifyInfobox(div1InfoboxData.value),\r\n\t\t\t\t\trightInfobox: simplifyInfobox(div3InfoboxData.value)\r\n\t\t\t\t},\r\n\t\t\t\tchartType: \"comparison\"\r\n\t\t\t};\r\n\r\n\t\t\tawait api.post(\r\n\t\t\t\t\"compare_attributes\",\r\n\t\t\t\trequestPayload,\r\n\t\t\t\tresponse => {\r\n\t\t\t\t\tconst formattedAnalysis = formatAnalysisResult(response.analysis);\r\n\t\t\t\t\tchatHistory.value.push({\r\n\t\t\t\t\t\trole: \"assistant\",\r\n\t\t\t\t\t\tcontent: formattedAnalysis,\r\n\t\t\t\t\t\ttimestamp: new Date().toLocaleString(),\r\n\t\t\t\t\t\tshowFollowup: true,\r\n\t\t\t\t\t\tfieldKey: fieldKey\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\terror => {\r\n\t\t\t\t\tthrow error;\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"对比分析失败:\", error);\r\n\t\t\tchatHistory.value.push({\r\n\t\t\t\trole: \"assistant\",\r\n\t\t\t\tcontent: `对比分析失败: ${error.message || \"未知错误\"}`,\r\n\t\t\t\ttimestamp: new Date().toLocaleString(),\r\n\t\t\t\terror: true\r\n\t\t\t});\r\n\t\t} finally {\r\n\t\t\tisLoading.value = false;\r\n\t\t\tscrollToBottom();\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleFollowupQuestion = async fieldKey => {\r\n\t\tisLoading.value = true;\r\n\r\n\t\ttry {\r\n\t\t\tconst payload = {\r\n\t\t\t\tchartData: {\r\n\t\t\t\t\tfieldKey,\r\n\t\t\t\t\tleftInfobox: simplifyInfobox(div1InfoboxData.value),\r\n\t\t\t\t\trightInfobox: simplifyInfobox(div3InfoboxData.value),\r\n\t\t\t\t\tpreviousAnalysis: getSummary(\r\n\t\t\t\t\t\tchatHistory.value[chatHistory.value.length - 2].content\r\n\t\t\t\t\t)\r\n\t\t\t\t},\r\n\t\t\t\tchartType: \"comparison\",\r\n\t\t\t\tfollowUp: true\r\n\t\t\t};\r\n\r\n\t\t\t// 检查数据大小\r\n\t\t\tconst payloadSize = JSON.stringify(payload).length;\r\n\t\t\tif (payloadSize > 20000) {\r\n\t\t\t\tpayload.chartData.leftInfobox = furtherSimplify(\r\n\t\t\t\t\tpayload.chartData.leftInfobox\r\n\t\t\t\t);\r\n\t\t\t\tpayload.chartData.rightInfobox = furtherSimplify(\r\n\t\t\t\t\tpayload.chartData.rightInfobox\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tawait api.post(\r\n\t\t\t\t\"compare_attributes\",\r\n\t\t\t\tpayload,\r\n\t\t\t\tresponse => {\r\n\t\t\t\t\tconst formattedAnalysis = formatAnalysisResult(response.analysis);\r\n\t\t\t\t\tchatHistory.value.push({\r\n\t\t\t\t\t\trole: \"assistant\",\r\n\t\t\t\t\t\tcontent: formattedAnalysis,\r\n\t\t\t\t\t\ttimestamp: new Date().toLocaleString()\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\terror => {\r\n\t\t\t\t\tthrow error;\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"深入分析失败:\", error);\r\n\t\t\tchatHistory.value.push({\r\n\t\t\t\trole: \"assistant\",\r\n\t\t\t\tcontent: `深入分析失败: ${error.message || \"未知错误\"}`,\r\n\t\t\t\ttimestamp: new Date().toLocaleString(),\r\n\t\t\t\terror: true\r\n\t\t\t});\r\n\t\t} finally {\r\n\t\t\tisLoading.value = false;\r\n\t\t\tscrollToBottom();\r\n\t\t}\r\n\t};\r\n\r\n\t// 进一步精简数据\r\n\tconst furtherSimplify = data => {\r\n\t\tconst result = {};\r\n\t\tconst priorityFields = [\"score\", \"value\", \"rate\", \"average\"];\r\n\r\n\t\tpriorityFields.forEach(field => {\r\n\t\t\tif (data[field] !== undefined) {\r\n\t\t\t\tresult[field] = data[field];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// 最多保留5个字段\r\n\t\tconst otherFields = Object.keys(data)\r\n\t\t\t.filter(k => !priorityFields.includes(k))\r\n\t\t\t.slice(0, 5 - priorityFields.length);\r\n\r\n\t\totherFields.forEach(field => {\r\n\t\t\tresult[field] = data[field];\r\n\t\t});\r\n\r\n\t\treturn result;\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t/* 原有样式保持不变，新增以下样式 */\r\n\t.markdown-content {\r\n\t\tline-height: 1.6;\r\n\t\tfont-size: 15px;\r\n\t\toverflow-wrap: break-word;\r\n\t}\r\n\r\n\t.markdown-content h1 {\r\n\t\tfont-size: 1.4em;\r\n\t\tmargin: 20px 0 15px;\r\n\t\tpadding-bottom: 5px;\r\n\t\tborder-bottom: 1px solid #eee;\r\n\t}\r\n\r\n\t.markdown-content h2 {\r\n\t\tfont-size: 1.2em;\r\n\t\tmargin: 18px 0 12px;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.markdown-content h3 {\r\n\t\tfont-size: 1.1em;\r\n\t\tmargin: 15px 0 10px;\r\n\t\tcolor: #444;\r\n\t}\r\n\r\n\t.markdown-content ul,\r\n\t.markdown-content ol {\r\n\t\tpadding-left: 25px;\r\n\t\tmargin: 10px 0;\r\n\t}\r\n\r\n\t.markdown-content li {\r\n\t\tmargin-bottom: 6px;\r\n\t}\r\n\r\n\t.markdown-content strong {\r\n\t\tcolor: #2c3e50;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.markdown-content code {\r\n\t\tbackground: #f3f3f3;\r\n\t\tpadding: 2px 6px;\r\n\t\tborder-radius: 3px;\r\n\t\tfont-family: \"Courier New\", monospace;\r\n\t\tfont-size: 0.9em;\r\n\t}\r\n\r\n\t.markdown-content blockquote {\r\n\t\tborder-left: 3px solid #ddd;\r\n\t\tpadding-left: 12px;\r\n\t\tmargin: 12px 0;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.markdown-content a {\r\n\t\tcolor: #4285f4;\r\n\t\ttext-decoration: none;\r\n\t}\r\n\r\n\t.markdown-content a:hover {\r\n\t\ttext-decoration: underline;\r\n\t}\r\n\r\n\t.followup-section {\r\n\t\tmargin-top: 15px;\r\n\t\tpadding-top: 10px;\r\n\t\tborder-top: 1px dashed #e0e0e0;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.followup-btn {\r\n\t\tbackground-color: #f8f9fa;\r\n\t\tborder: 1px solid #dadce0;\r\n\t\tcolor: #3c4043;\r\n\t\tpadding: 6px 16px;\r\n\t\tborder-radius: 4px;\r\n\t\tfont-size: 13px;\r\n\t\tcursor: pointer;\r\n\t\ttransition: all 0.2s;\r\n\t}\r\n\r\n\t.followup-btn:hover {\r\n\t\tbackground-color: #f1f3f4;\r\n\t\tborder-color: #d2e3fc;\r\n\t}\r\n\r\n\t.followup-btn:active {\r\n\t\tbackground-color: #e8f0fe;\r\n\t}\r\n\r\n\t.data-size-warning {\r\n\t\tcolor: #f44336;\r\n\t\tfont-size: 12px;\r\n\t\tmargin-top: 5px;\r\n\t}\r\n</style>\r\n"],"mappings":";;;EACMA,KAAK,EAAC;AAAgB;;EACrBA,KAAK,EAAC;AAAgB;;EACrBA,KAAK,EAAC;AAAc;mBAH5B;;EAAAC,GAAA;EASsCD,KAAK,EAAC;;mBAT5C;;EAAAC,GAAA;EAiB0BD,KAAK,EAAC;;gEAC3BE,mBAAA,CAAmC;EAA9BF,KAAK,EAAC;AAAiB;;EAM1BA,KAAK,EAAC;AAAe;;EAOrBA,KAAK,EAAC;AAAO;;EACZA,KAAK,EAAC;AAAiB;oBAhC/B;;EAsCSA,KAAK,EAAC;AAAkB;oBAtCjC;;uBACCG,mBAAA,CA4CM,OA5CNC,UA4CM,GA3CLF,mBAAA,CAoBM,OApBNG,UAoBM,GAnBLH,mBAAA,CAkBM,OAlBNI,UAkBM,I,kBAjBLH,mBAAA,CAYMI,SAAA,QAhBVC,WAAA,CAKgCC,MAAA,CAAAC,WAAW,EAL3C,CAKaC,OAAO,EAAEC,KAAK;yBADvBT,mBAAA,CAYM;MAVJF,GAAG,EAAEW,KAAK;MACVZ,KAAK,EAPXa,eAAA,aAOyBF,OAAO,CAACG,IAAI;QAAAC,KAAA,EAAWJ,OAAO,CAACI;MAAK;QACxDb,mBAAA,CAA4D;MAAvDF,KAAK,EAAC,iBAAiB;MAACgB,SAAwB,EAAhBL,OAAO,CAACM;4BARlDC,UAAA,GASgBP,OAAO,CAACQ,YAAY,I,cAA/BhB,mBAAA,CAMM,OANNiB,UAMM,GALLlB,mBAAA,CAIS;MAHRF,KAAK,EAAC,cAAc;MACnBqB,OAAK,EAAAC,MAAA,IAAEb,MAAA,CAAAc,sBAAsB,CAACZ,OAAO,CAACa,QAAQ;OAAG,gBAEnD,iBAdNC,UAAA,E,KAAAC,mBAAA,e;kCAiBejB,MAAA,CAAAkB,SAAS,I,cAApBxB,mBAAA,CAGM,OAHNyB,UAGM,GAFLC,UAAmC,EAlBxCC,gBAAA,CAkBwC,YAEpC,E,KApBJJ,mBAAA,e,KAwBExB,mBAAA,CAMM,OANN6B,UAMM,GALLC,YAAA,CAIiDvB,MAAA;IAHhDT,KAAK,EAAC,eAAe;IACpB,eAAa,EAAES,MAAA,CAAAwB,WAAW;IAC1B,eAAa,EAAExB,MAAA,CAAAyB,WAAW;IAC1BC,kBAAgB,EAAE1B,MAAA,CAAA2B;iEAErBlC,mBAAA,CAaM,OAbNmC,WAaM,GAZLnC,mBAAA,CAWM,OAXNoC,WAWM,G,gBAVLpC,mBAAA,CAIkC;IArCtC,uBAAAqC,MAAA,QAAAA,MAAA,MAAAjB,MAAA,IAkCcb,MAAA,CAAA+B,YAAY,GAAAlB,MAAA;IACrBmB,IAAI,EAAC,GAAG;IACRC,WAAW,EAAC,cAAc;IACzBC,QAAQ,EAAElC,MAAA,CAAAkB;0BArChBiB,WAAA,I,cAkCcnC,MAAA,CAAA+B,YAAY,E,GAItBtC,mBAAA,CAIM,OAJN2C,WAIM,GAHL3C,mBAAA,CAES;IAFAmB,OAAK,EAAEZ,MAAA,CAAAqC,WAAW;IAAGH,QAAQ,EAAElC,MAAA,CAAAkB;sBACpClB,MAAA,CAAAkB,SAAS,0CAxClBoB,WAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}