{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, computed, onMounted, onUnmounted, nextTick } from \"vue\";\nimport { useChartRenderer } from \"@/composables/useChartRenderer\";\nexport default {\n  setup() {\n    // 状态管理\n    const userInput = ref(\"\");\n    const chatHistory = ref([]);\n    const sourceTexts = ref({\n      text1: null,\n      text2: null\n    });\n    const articleData = ref(null);\n    const commonAttributes = ref([]);\n    const activeAttributeIndex = ref(-1);\n    const chartRefs = ref({\n      chart1: [],\n      chart2: []\n    });\n\n    // 组合式函数\n    const {\n      renderChart\n    } = useChartRenderer();\n\n    // 计算属性\n    const filteredChatHistory = computed(() => {\n      return chatHistory.value.map(msg => ({\n        ...msg,\n        content: msg.content || \"[内容不可用]\"\n      }));\n    });\n    const displayAttributes = computed(() => {\n      // 确保至少显示2行\n      const emptyRows = 2 - commonAttributes.value.length;\n      return [...commonAttributes.value, ...(emptyRows > 0 ? Array(emptyRows).fill(null) : [])];\n    });\n    const hasCommonAttributes = computed(() => {\n      return commonAttributes.value.length > 0 || !sourceTexts.value.text1 || !sourceTexts.value.text2;\n    });\n    const emptyTableMessage = computed(() => {\n      if (!sourceTexts.value.text1 && !sourceTexts.value.text2) return \"请选择两篇文章\";\n      if (!sourceTexts.value.text1) return \"请选择文章1\";\n      if (!sourceTexts.value.text2) return \"请选择文章2\";\n      return \"没有公共属性\";\n    });\n    const isCompareReady = computed(() => {\n      return !!sourceTexts.value.text1 && !!sourceTexts.value.text2;\n    });\n\n    // 方法定义\n    const safeSetChartRef = (el, index, type) => {\n      try {\n        if (el && index >= 0) {\n          chartRefs.value[type][index] = el;\n        }\n      } catch (error) {\n        console.error(\"设置图表引用失败:\", error);\n      }\n    };\n    const selectAttribute = index => {\n      try {\n        if (index < 0 || index >= commonAttributes.value.length) return;\n        activeAttributeIndex.value = index;\n        renderSelectedCharts();\n      } catch (error) {\n        console.error(\"选择属性失败:\", error);\n      }\n    };\n    const renderSelectedCharts = () => {\n      try {\n        const index = activeAttributeIndex.value;\n        if (index === -1) return;\n        const attr = commonAttributes.value[index];\n        if (!attr) return;\n        const chartData1 = articleData.value?.article1?.[attr] || null;\n        const chartData2 = articleData.value?.article2?.[attr] || null;\n        if (chartData1 && chartRefs.value.chart1[index]) {\n          renderChart(chartRefs.value.chart1[index], chartData1);\n        }\n        if (chartData2 && chartRefs.value.chart2[index]) {\n          renderChart(chartRefs.value.chart2[index], chartData2);\n        }\n      } catch (error) {\n        console.error(\"渲染图表失败:\", error);\n      }\n    };\n    const safeCompareAttributes = async () => {\n      if (!isCompareReady.value) return;\n      try {\n        const response = await api.post(\"/compare\", {\n          text1: sourceTexts.value.text1 || \"\",\n          text2: sourceTexts.value.text2 || \"\"\n        });\n        if (response?.data) {\n          commonAttributes.value = response.data.attributes || [];\n          articleData.value = response.data.chartData || null;\n          activeAttributeIndex.value = commonAttributes.value.length > 0 ? 0 : -1;\n          nextTick(() => {\n            if (activeAttributeIndex.value !== -1) {\n              renderSelectedCharts();\n            }\n          });\n        }\n      } catch (error) {\n        console.error(\"对比失败:\", error);\n        chatHistory.value.push({\n          role: \"assistant\",\n          content: `对比失败: ${error.message || \"未知错误\"}`\n        });\n      }\n    };\n    const handleTextSelection = (data, source) => {\n      try {\n        const content = data?.content || null;\n        if (!content) {\n          console.warn(`从${source}接收到空内容`);\n          return;\n        }\n        const text = extractTextContent(content);\n        if (source === \"div1\") {\n          sourceTexts.value.text1 = text;\n        } else {\n          sourceTexts.value.text2 = text;\n        }\n      } catch (error) {\n        console.error(\"处理文本选择失败:\", error);\n      }\n    };\n    const extractTextContent = html => {\n      try {\n        if (!html) return \"\";\n        const div = document.createElement(\"div\");\n        div.innerHTML = html;\n        return div.textContent || div.innerText || \"\";\n      } catch (error) {\n        console.error(\"提取文本内容失败:\", error);\n        return \"\";\n      }\n    };\n\n    // 事件监听\n    const setupEventListeners = () => {\n      try {\n        bus.on(\"div1_Event\", data => handleTextSelection(data, \"div1\"));\n        bus.on(\"div3_Event\", data => handleTextSelection(data, \"div3\"));\n      } catch (error) {\n        console.error(\"初始化事件监听失败:\", error);\n      }\n    };\n    const cleanupEventListeners = () => {\n      try {\n        bus.off(\"div1_Event\");\n        bus.off(\"div3_Event\");\n      } catch (error) {\n        console.error(\"清理事件监听失败:\", error);\n      }\n    };\n\n    // 生命周期\n    onMounted(() => {\n      setupEventListeners();\n    });\n    onUnmounted(() => {\n      cleanupEventListeners();\n    });\n    return {\n      userInput,\n      chatHistory: filteredChatHistory,\n      commonAttributes,\n      displayAttributes,\n      emptyTableMessage,\n      isCompareReady,\n      hasCommonAttributes,\n      safeSetChartRef,\n      selectAttribute,\n      safeCompareAttributes\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","onUnmounted","nextTick","useChartRenderer","setup","userInput","chatHistory","sourceTexts","text1","text2","articleData","commonAttributes","activeAttributeIndex","chartRefs","chart1","chart2","renderChart","filteredChatHistory","value","map","msg","content","displayAttributes","emptyRows","length","Array","fill","hasCommonAttributes","emptyTableMessage","isCompareReady","safeSetChartRef","el","index","type","error","console","selectAttribute","renderSelectedCharts","attr","chartData1","article1","chartData2","article2","safeCompareAttributes","response","api","post","data","attributes","chartData","push","role","message","handleTextSelection","source","warn","text","extractTextContent","html","div","document","createElement","innerHTML","textContent","innerText","setupEventListeners","bus","on","cleanupEventListeners","off"],"sources":["D:\\vue_frame\\vue_frame\\wikitable-vue\\client\\src\\components\\Div2.vue"],"sourcesContent":["<template>\r\n\t<div class=\"main-container\">\r\n\t\t<!-- 聊天容器 -->\r\n\t\t<div class=\"chat-container\" @dragover.prevent @drop.prevent=\"handleDrop\">\r\n\t\t\t<div class=\"chat-history\">\r\n\t\t\t\t<template v-for=\"(message, index) in filteredChatHistory\" :key=\"index\">\r\n\t\t\t\t\t<div :class=\"['message', message.role]\">\r\n\t\t\t\t\t\t<div class=\"message-content\">\r\n\t\t\t\t\t\t\t<strong>{{ message.role === \"user\" ? \"用户\" : \"GPT\" }}:</strong>\r\n\t\t\t\t\t\t\t<p v-if=\"message.content\" v-html=\"message.content\"></p>\r\n\t\t\t\t\t\t\t<p v-else class=\"error-message\">[内容加载失败]</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</template>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- 视觉内容容器 -->\r\n\t\t<div class=\"vis-container\">\r\n\t\t\t<!-- 三列对比表格 -->\r\n\t\t\t<div class=\"comparison-table\">\r\n\t\t\t\t<!-- 表头 -->\r\n\t\t\t\t<div class=\"table-header\">\r\n\t\t\t\t\t<div class=\"header-cell left-column\">文章1可视化</div>\r\n\t\t\t\t\t<div class=\"header-cell middle-column\">公共属性</div>\r\n\t\t\t\t\t<div class=\"header-cell right-column\">文章2可视化</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<!-- 表格内容 -->\r\n\t\t\t\t<div class=\"table-body\">\r\n\t\t\t\t\t<template v-if=\"hasCommonAttributes\">\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tv-for=\"(attr, index) in displayAttributes\"\r\n\t\t\t\t\t\t\t:key=\"attr || `empty-${index}`\"\r\n\t\t\t\t\t\t\tclass=\"table-row\">\r\n\t\t\t\t\t\t\t<!-- 左侧图表 -->\r\n\t\t\t\t\t\t\t<div class=\"table-cell left-column chart-cell\">\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tv-if=\"attr\"\r\n\t\t\t\t\t\t\t\t\t:ref=\"el => safeSetChartRef(el, index, 'chart1')\"\r\n\t\t\t\t\t\t\t\t\tclass=\"chart-box\"></div>\r\n\t\t\t\t\t\t\t\t<div v-else class=\"empty-chart\">-</div>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<!-- 中间属性 -->\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\"table-cell middle-column attr-cell\"\r\n\t\t\t\t\t\t\t\t:class=\"{ clickable: attr }\"\r\n\t\t\t\t\t\t\t\t@click=\"attr && selectAttribute(index)\">\r\n\t\t\t\t\t\t\t\t{{ attr || \"-\" }}\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<!-- 右侧图表 -->\r\n\t\t\t\t\t\t\t<div class=\"table-cell right-column chart-cell\">\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tv-if=\"attr\"\r\n\t\t\t\t\t\t\t\t\t:ref=\"el => safeSetChartRef(el, index, 'chart2')\"\r\n\t\t\t\t\t\t\t\t\tclass=\"chart-box\"></div>\r\n\t\t\t\t\t\t\t\t<div v-else class=\"empty-chart\">-</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</template>\r\n\r\n\t\t\t\t\t<div v-else class=\"empty-table\">\r\n\t\t\t\t\t\t{{ emptyTableMessage }}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<!-- 输入区域 -->\r\n\t\t\t<div class=\"input-area\">\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tv-model=\"userInput\"\r\n\t\t\t\t\tplaceholder=\"请输入问题...\"\r\n\t\t\t\t\trows=\"3\"></textarea>\r\n\t\t\t\t<div class=\"action-buttons\">\r\n\t\t\t\t\t<button @click=\"submitQuestion\">发送</button>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\t@click=\"safeCompareAttributes\"\r\n\t\t\t\t\t\t:disabled=\"!isCompareReady\"\r\n\t\t\t\t\t\tclass=\"compare-btn\">\r\n\t\t\t\t\t\t对比属性\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport { ref, computed, onMounted, onUnmounted, nextTick } from \"vue\";\r\n\timport { useChartRenderer } from \"@/composables/useChartRenderer\";\r\n\r\n\texport default {\r\n\t\tsetup() {\r\n\t\t\t// 状态管理\r\n\t\t\tconst userInput = ref(\"\");\r\n\t\t\tconst chatHistory = ref([]);\r\n\t\t\tconst sourceTexts = ref({ text1: null, text2: null });\r\n\t\t\tconst articleData = ref(null);\r\n\t\t\tconst commonAttributes = ref([]);\r\n\t\t\tconst activeAttributeIndex = ref(-1);\r\n\t\t\tconst chartRefs = ref({ chart1: [], chart2: [] });\r\n\r\n\t\t\t// 组合式函数\r\n\t\t\tconst { renderChart } = useChartRenderer();\r\n\r\n\t\t\t// 计算属性\r\n\t\t\tconst filteredChatHistory = computed(() => {\r\n\t\t\t\treturn chatHistory.value.map(msg => ({\r\n\t\t\t\t\t...msg,\r\n\t\t\t\t\tcontent: msg.content || \"[内容不可用]\"\r\n\t\t\t\t}));\r\n\t\t\t});\r\n\r\n\t\t\tconst displayAttributes = computed(() => {\r\n\t\t\t\t// 确保至少显示2行\r\n\t\t\t\tconst emptyRows = 2 - commonAttributes.value.length;\r\n\t\t\t\treturn [\r\n\t\t\t\t\t...commonAttributes.value,\r\n\t\t\t\t\t...(emptyRows > 0 ? Array(emptyRows).fill(null) : [])\r\n\t\t\t\t];\r\n\t\t\t});\r\n\r\n\t\t\tconst hasCommonAttributes = computed(() => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tcommonAttributes.value.length > 0 ||\r\n\t\t\t\t\t!sourceTexts.value.text1 ||\r\n\t\t\t\t\t!sourceTexts.value.text2\r\n\t\t\t\t);\r\n\t\t\t});\r\n\r\n\t\t\tconst emptyTableMessage = computed(() => {\r\n\t\t\t\tif (!sourceTexts.value.text1 && !sourceTexts.value.text2)\r\n\t\t\t\t\treturn \"请选择两篇文章\";\r\n\t\t\t\tif (!sourceTexts.value.text1) return \"请选择文章1\";\r\n\t\t\t\tif (!sourceTexts.value.text2) return \"请选择文章2\";\r\n\t\t\t\treturn \"没有公共属性\";\r\n\t\t\t});\r\n\r\n\t\t\tconst isCompareReady = computed(() => {\r\n\t\t\t\treturn !!sourceTexts.value.text1 && !!sourceTexts.value.text2;\r\n\t\t\t});\r\n\r\n\t\t\t// 方法定义\r\n\t\t\tconst safeSetChartRef = (el, index, type) => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (el && index >= 0) {\r\n\t\t\t\t\t\tchartRefs.value[type][index] = el;\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error(\"设置图表引用失败:\", error);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tconst selectAttribute = index => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (index < 0 || index >= commonAttributes.value.length) return;\r\n\t\t\t\t\tactiveAttributeIndex.value = index;\r\n\t\t\t\t\trenderSelectedCharts();\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error(\"选择属性失败:\", error);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tconst renderSelectedCharts = () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst index = activeAttributeIndex.value;\r\n\t\t\t\t\tif (index === -1) return;\r\n\r\n\t\t\t\t\tconst attr = commonAttributes.value[index];\r\n\t\t\t\t\tif (!attr) return;\r\n\r\n\t\t\t\t\tconst chartData1 = articleData.value?.article1?.[attr] || null;\r\n\t\t\t\t\tconst chartData2 = articleData.value?.article2?.[attr] || null;\r\n\r\n\t\t\t\t\tif (chartData1 && chartRefs.value.chart1[index]) {\r\n\t\t\t\t\t\trenderChart(chartRefs.value.chart1[index], chartData1);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (chartData2 && chartRefs.value.chart2[index]) {\r\n\t\t\t\t\t\trenderChart(chartRefs.value.chart2[index], chartData2);\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error(\"渲染图表失败:\", error);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tconst safeCompareAttributes = async () => {\r\n\t\t\t\tif (!isCompareReady.value) return;\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await api.post(\"/compare\", {\r\n\t\t\t\t\t\ttext1: sourceTexts.value.text1 || \"\",\r\n\t\t\t\t\t\ttext2: sourceTexts.value.text2 || \"\"\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (response?.data) {\r\n\t\t\t\t\t\tcommonAttributes.value = response.data.attributes || [];\r\n\t\t\t\t\t\tarticleData.value = response.data.chartData || null;\r\n\t\t\t\t\t\tactiveAttributeIndex.value =\r\n\t\t\t\t\t\t\tcommonAttributes.value.length > 0 ? 0 : -1;\r\n\r\n\t\t\t\t\t\tnextTick(() => {\r\n\t\t\t\t\t\t\tif (activeAttributeIndex.value !== -1) {\r\n\t\t\t\t\t\t\t\trenderSelectedCharts();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error(\"对比失败:\", error);\r\n\t\t\t\t\tchatHistory.value.push({\r\n\t\t\t\t\t\trole: \"assistant\",\r\n\t\t\t\t\t\tcontent: `对比失败: ${error.message || \"未知错误\"}`\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tconst handleTextSelection = (data, source) => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst content = data?.content || null;\r\n\t\t\t\t\tif (!content) {\r\n\t\t\t\t\t\tconsole.warn(`从${source}接收到空内容`);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst text = extractTextContent(content);\r\n\t\t\t\t\tif (source === \"div1\") {\r\n\t\t\t\t\t\tsourceTexts.value.text1 = text;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsourceTexts.value.text2 = text;\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error(\"处理文本选择失败:\", error);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tconst extractTextContent = html => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (!html) return \"\";\r\n\t\t\t\t\tconst div = document.createElement(\"div\");\r\n\t\t\t\t\tdiv.innerHTML = html;\r\n\t\t\t\t\treturn div.textContent || div.innerText || \"\";\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error(\"提取文本内容失败:\", error);\r\n\t\t\t\t\treturn \"\";\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t// 事件监听\r\n\t\t\tconst setupEventListeners = () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tbus.on(\"div1_Event\", data => handleTextSelection(data, \"div1\"));\r\n\t\t\t\t\tbus.on(\"div3_Event\", data => handleTextSelection(data, \"div3\"));\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error(\"初始化事件监听失败:\", error);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tconst cleanupEventListeners = () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tbus.off(\"div1_Event\");\r\n\t\t\t\t\tbus.off(\"div3_Event\");\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error(\"清理事件监听失败:\", error);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t// 生命周期\r\n\t\t\tonMounted(() => {\r\n\t\t\t\tsetupEventListeners();\r\n\t\t\t});\r\n\r\n\t\t\tonUnmounted(() => {\r\n\t\t\t\tcleanupEventListeners();\r\n\t\t\t});\r\n\r\n\t\t\treturn {\r\n\t\t\t\tuserInput,\r\n\t\t\t\tchatHistory: filteredChatHistory,\r\n\t\t\t\tcommonAttributes,\r\n\t\t\t\tdisplayAttributes,\r\n\t\t\t\temptyTableMessage,\r\n\t\t\t\tisCompareReady,\r\n\t\t\t\thasCommonAttributes,\r\n\t\t\t\tsafeSetChartRef,\r\n\t\t\t\tselectAttribute,\r\n\t\t\t\tsafeCompareAttributes\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t/* 错误消息样式 */\r\n\t.error-message {\r\n\t\tcolor: #f44336;\r\n\t\tfont-style: italic;\r\n\t}\r\n\r\n\t/* 其余样式保持不变... */\r\n</style>\r\n\r\n<style scoped>\r\n\t/* 主容器 */\r\n\t.main-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\twidth: 100%; /* 固定宽度 */\r\n\t\theight: 100vh;\r\n\t\tmargin: 0 auto;\r\n\t\tpadding: 5px;\r\n\t\tbackground-color: #f5f5f5;\r\n\t}\r\n\r\n\t/* 聊天容器 */\r\n\t.chat-container {\r\n\t\tflex: 0.5;\r\n\t\tbackground-color: #ffffff;\r\n\t\tpadding: 20px;\r\n\t\tborder-radius: 12px;\r\n\t\tbox-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\r\n\t/* 历史对话记录 */\r\n\t.chat-history {\r\n\t\tflex: 0.5;\r\n\t\toverflow-y: auto;\r\n\t\theight: 95%;\r\n\t\t/* max-height: 200px; */\r\n\t\tpadding: 10px;\r\n\t\tbackground-color: #fafafa;\r\n\t\tborder-radius: 8px;\r\n\t\tborder: 1px solid #e0e0e0;\r\n\t\tmargin-bottom: 20px;\r\n\t}\r\n\r\n\t/* 消息样式 */\r\n\t.message {\r\n\t\tmargin-bottom: 15px;\r\n\t}\r\n\r\n\t.message-content {\r\n\t\tpadding: 12px;\r\n\t\tborder-radius: 8px;\r\n\t\tbackground-color: #f0f0f0;\r\n\t\tline-height: 1.5;\r\n\t}\r\n\r\n\t.message.user .message-content {\r\n\t\tbackground-color: #e3f2fd;\r\n\t\ttext-align: right;\r\n\t}\r\n\r\n\t.message.assistant .message-content {\r\n\t\tbackground-color: #f5f5f5;\r\n\t\ttext-align: left;\r\n\t}\r\n\r\n\t/* 分析结果的样式 */\r\n\t.message-content p {\r\n\t\tfont-family: Arial, sans-serif;\r\n\t\tline-height: 1.6;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.message-content h3 {\r\n\t\tfont-size: 1.2em;\r\n\t\tfont-weight: bold;\r\n\t\tmargin: 10px 0;\r\n\t\tcolor: #0077b6;\r\n\t}\r\n\r\n\t.message-content strong {\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #d90429;\r\n\t}\r\n\r\n\t.message-content ul {\r\n\t\tmargin: 10px 0;\r\n\t\tpadding-left: 20px;\r\n\t}\r\n\r\n\t.message-content li {\r\n\t\tmargin-bottom: 5px;\r\n\t}\r\n\r\n\t.message-content br {\r\n\t\tdisplay: block;\r\n\t\tmargin: 10px 0;\r\n\t}\r\n\t/* 视觉内容容器 */\r\n\t.vis-container {\r\n\t\tflex: 1;\r\n\t\tbackground-color: #ffffff;\r\n\t\tborder-radius: 12px;\r\n\t\tborder: 1px solid #e0e0e0;\r\n\t\tbox-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n\t\tpadding: 20px;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 20px;\r\n\t}\r\n\r\n\t.chart-container {\r\n\t\tflex: 1;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t/* 输入框和按钮容器 */\r\n\t.input-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 10px;\r\n\t}\r\n\r\n\ttextarea {\r\n\t\twidth: 100%;\r\n\t\theight: 80px;\r\n\t\tresize: none;\r\n\t\tpadding: 12px;\r\n\t\tfont-size: 14px;\r\n\t\tborder: 1px solid #ddd;\r\n\t\tborder-radius: 8px;\r\n\t\tbackground-color: #fafafa;\r\n\t\ttransition: border-color 0.3s ease;\r\n\t}\r\n\r\n\ttextarea:focus {\r\n\t\toutline: none;\r\n\t\tborder-color: #4caf50;\r\n\t}\r\n\r\n\t.button-container {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tgap: 10px;\r\n\t}\r\n\r\n\tbutton {\r\n\t\tflex: 1; /* 按钮宽度占满容器 */\r\n\t\tpadding: 10px 20px;\r\n\t\tbackground-color: #4caf50;\r\n\t\tcolor: white;\r\n\t\tborder: none;\r\n\t\tborder-radius: 8px;\r\n\t\tcursor: pointer;\r\n\t\tfont-size: 14px;\r\n\t\ttransition: background-color 0.3s ease;\r\n\t}\r\n\r\n\tbutton:hover {\r\n\t\tbackground-color: #45a049;\r\n\t}\r\n\r\n\tbutton:active {\r\n\t\tbackground-color: #3d8b40;\r\n\t}\r\n\r\n\t/* 新增提交按钮样式 */\r\n\t.submit-btn {\r\n\t\tbackground-color: #ff9800;\r\n\t}\r\n\r\n\t.submit-btn:hover {\r\n\t\tbackground-color: #fb8c00;\r\n\t}\r\n\r\n\t.submit-btn:active {\r\n\t\tbackground-color: #f57c00;\r\n\t}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}