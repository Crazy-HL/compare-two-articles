{"ast":null,"code":"import { ref, onMounted, onUnmounted } from \"vue\";\nimport bus from \"@/js/eventBus.js\";\nimport TextPopup from \"@/components/TextPopup.vue\"; // 引入弹出框组件\n\nexport default {\n  __name: 'Div1',\n  setup(__props, _ref) {\n    let {\n      expose: __expose\n    } = _ref;\n    __expose();\n    const contentList = ref([{\n      id: \"section-1\",\n      title: \"Section 1\",\n      content: \"This is section 1 content.\"\n    }, {\n      id: \"section-2\",\n      title: \"Section 2\",\n      content: \"This is section 2 content.\"\n    }\n    // 其他内容...\n    ]);\n    const popupVisible = ref(false);\n    const popupContent = ref(\"\");\n\n    // 监听 eventBus，处理弹出框显示\n    const handleLinkedPopup = _ref2 => {\n      let {\n        keywords,\n        sourceDivId\n      } = _ref2;\n      // 如果当前 Div 不是来源 Div，则处理\n      if (sourceDivId !== props.divId) {\n        // 根据关键词找到相似内容\n        const matchedSection = findMatchingSection(keywords);\n        if (matchedSection) {\n          // 滚动到对应章节\n          scrollToSection(matchedSection.id);\n          // 显示弹出框\n          popupContent.value = matchedSection.content;\n          popupVisible.value = true;\n        }\n      }\n    };\n\n    // 根据关键词找到匹配的章节\n    const findMatchingSection = keywords => {\n      return contentList.value.find(item => item.content.toLowerCase().includes(keywords.toLowerCase()));\n    };\n\n    // 滚动到指定章节\n    const scrollToSection = id => {\n      const element = document.getElementById(id);\n      if (element) {\n        element.scrollIntoView({\n          behavior: \"smooth\"\n        });\n      }\n    };\n\n    // 关闭弹出框\n    const closePopup = () => {\n      popupVisible.value = false;\n    };\n    onMounted(() => {\n      bus.on(\"show-linked-popup\", handleLinkedPopup);\n    });\n    onUnmounted(() => {\n      bus.off(\"show-linked-popup\", handleLinkedPopup);\n    });\n    const __returned__ = {\n      contentList,\n      popupVisible,\n      popupContent,\n      handleLinkedPopup,\n      findMatchingSection,\n      scrollToSection,\n      closePopup,\n      ref,\n      onMounted,\n      onUnmounted,\n      get bus() {\n        return bus;\n      },\n      TextPopup\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","onUnmounted","bus","TextPopup","contentList","id","title","content","popupVisible","popupContent","handleLinkedPopup","_ref2","keywords","sourceDivId","props","divId","matchedSection","findMatchingSection","scrollToSection","value","find","item","toLowerCase","includes","element","document","getElementById","scrollIntoView","behavior","closePopup","on","off"],"sources":["D:/vue_frame/vue_frame/wikitable-vue/client/src/components/Div1.vue"],"sourcesContent":["<template>\r\n\t<div>\r\n\t\t<!-- Div 的内容 -->\r\n\t\t<div v-for=\"item in contentList\" :key=\"item.id\" :id=\"item.id\">\r\n\t\t\t<h2>{{ item.title }}</h2>\r\n\t\t\t<p>{{ item.content }}</p>\r\n\t\t</div>\r\n\r\n\t\t<!-- 弹出框 -->\r\n\t\t<TextPopup\r\n\t\t\tv-if=\"popupVisible\"\r\n\t\t\t:visible=\"popupVisible\"\r\n\t\t\t:content=\"popupContent\"\r\n\t\t\t@close=\"closePopup\" />\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ref, onMounted, onUnmounted } from \"vue\";\r\n\timport bus from \"@/js/eventBus.js\";\r\n\timport TextPopup from \"@/components/TextPopup.vue\"; // 引入弹出框组件\r\n\r\n\tconst contentList = ref([\r\n\t\t{\r\n\t\t\tid: \"section-1\",\r\n\t\t\ttitle: \"Section 1\",\r\n\t\t\tcontent: \"This is section 1 content.\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: \"section-2\",\r\n\t\t\ttitle: \"Section 2\",\r\n\t\t\tcontent: \"This is section 2 content.\"\r\n\t\t}\r\n\t\t// 其他内容...\r\n\t]);\r\n\r\n\tconst popupVisible = ref(false);\r\n\tconst popupContent = ref(\"\");\r\n\r\n\t// 监听 eventBus，处理弹出框显示\r\n\tconst handleLinkedPopup = ({ keywords, sourceDivId }) => {\r\n\t\t// 如果当前 Div 不是来源 Div，则处理\r\n\t\tif (sourceDivId !== props.divId) {\r\n\t\t\t// 根据关键词找到相似内容\r\n\t\t\tconst matchedSection = findMatchingSection(keywords);\r\n\t\t\tif (matchedSection) {\r\n\t\t\t\t// 滚动到对应章节\r\n\t\t\t\tscrollToSection(matchedSection.id);\r\n\t\t\t\t// 显示弹出框\r\n\t\t\t\tpopupContent.value = matchedSection.content;\r\n\t\t\t\tpopupVisible.value = true;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// 根据关键词找到匹配的章节\r\n\tconst findMatchingSection = keywords => {\r\n\t\treturn contentList.value.find(item =>\r\n\t\t\titem.content.toLowerCase().includes(keywords.toLowerCase())\r\n\t\t);\r\n\t};\r\n\r\n\t// 滚动到指定章节\r\n\tconst scrollToSection = id => {\r\n\t\tconst element = document.getElementById(id);\r\n\t\tif (element) {\r\n\t\t\telement.scrollIntoView({ behavior: \"smooth\" });\r\n\t\t}\r\n\t};\r\n\r\n\t// 关闭弹出框\r\n\tconst closePopup = () => {\r\n\t\tpopupVisible.value = false;\r\n\t};\r\n\r\n\tonMounted(() => {\r\n\t\tbus.on(\"show-linked-popup\", handleLinkedPopup);\r\n\t});\r\n\r\n\tonUnmounted(() => {\r\n\t\tbus.off(\"show-linked-popup\", handleLinkedPopup);\r\n\t});\r\n</script>\r\n"],"mappings":"AAkBC,SAASA,GAAG,EAAEC,SAAS,EAAEC,WAAW,QAAQ,KAAK;AACjD,OAAOC,GAAG,MAAM,kBAAkB;AAClC,OAAOC,SAAS,MAAM,4BAA4B,CAAC,CAAC;;;;;;;;;IAEpD,MAAMC,WAAW,GAAGL,GAAG,CAAC,CACvB;MACCM,EAAE,EAAE,WAAW;MACfC,KAAK,EAAE,WAAW;MAClBC,OAAO,EAAE;IACV,CAAC,EACD;MACCF,EAAE,EAAE,WAAW;MACfC,KAAK,EAAE,WAAW;MAClBC,OAAO,EAAE;IACV;IACA;IAAA,CACA,CAAC;IAEF,MAAMC,YAAY,GAAGT,GAAG,CAAC,KAAK,CAAC;IAC/B,MAAMU,YAAY,GAAGV,GAAG,CAAC,EAAE,CAAC;;IAE5B;IACA,MAAMW,iBAAiB,GAAGC,KAAA,IAA+B;MAAA,IAA9B;QAAEC,QAAQ;QAAEC;MAAY,CAAC,GAAAF,KAAA;MACnD;MACA,IAAIE,WAAW,KAAKC,KAAK,CAACC,KAAK,EAAE;QAChC;QACA,MAAMC,cAAc,GAAGC,mBAAmB,CAACL,QAAQ,CAAC;QACpD,IAAII,cAAc,EAAE;UACnB;UACAE,eAAe,CAACF,cAAc,CAACX,EAAE,CAAC;UAClC;UACAI,YAAY,CAACU,KAAK,GAAGH,cAAc,CAACT,OAAO;UAC3CC,YAAY,CAACW,KAAK,GAAG,IAAI;QAC1B;MACD;IACD,CAAC;;IAED;IACA,MAAMF,mBAAmB,GAAGL,QAAQ,IAAI;MACvC,OAAOR,WAAW,CAACe,KAAK,CAACC,IAAI,CAACC,IAAI,IACjCA,IAAI,CAACd,OAAO,CAACe,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACX,QAAQ,CAACU,WAAW,CAAC,CAAC,CAC3D,CAAC;IACF,CAAC;;IAED;IACA,MAAMJ,eAAe,GAAGb,EAAE,IAAI;MAC7B,MAAMmB,OAAO,GAAGC,QAAQ,CAACC,cAAc,CAACrB,EAAE,CAAC;MAC3C,IAAImB,OAAO,EAAE;QACZA,OAAO,CAACG,cAAc,CAAC;UAAEC,QAAQ,EAAE;QAAS,CAAC,CAAC;MAC/C;IACD,CAAC;;IAED;IACA,MAAMC,UAAU,GAAGA,CAAA,KAAM;MACxBrB,YAAY,CAACW,KAAK,GAAG,KAAK;IAC3B,CAAC;IAEDnB,SAAS,CAAC,MAAM;MACfE,GAAG,CAAC4B,EAAE,CAAC,mBAAmB,EAAEpB,iBAAiB,CAAC;IAC/C,CAAC,CAAC;IAEFT,WAAW,CAAC,MAAM;MACjBC,GAAG,CAAC6B,GAAG,CAAC,mBAAmB,EAAErB,iBAAiB,CAAC;IAChD,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}