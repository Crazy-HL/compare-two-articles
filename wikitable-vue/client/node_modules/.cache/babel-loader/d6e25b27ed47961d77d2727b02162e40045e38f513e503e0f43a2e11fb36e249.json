{"ast":null,"code":"import ParentComponent from \"@/components/compoents_base/ParentComponent.vue\";\nimport { onMounted, onUnmounted } from \"vue\";\nimport bus from \"@/js/eventBus.js\";\n\n// 处理图表交互事件\n\nexport default {\n  __name: 'Div1',\n  setup(__props, _ref) {\n    let {\n      expose: __expose\n    } = _ref;\n    __expose();\n    function handleChartInteraction(eventData) {\n      if (eventData.source === \"div1\") {\n        // 将事件传递给 Div2\n        bus.emit(\"chartInteraction\", eventData);\n      }\n    }\n    onMounted(() => {\n      // 监听来自 Div2 的图表交互事件\n      bus.on(\"chartInteraction\", eventData => {\n        if (eventData.source === \"div2\") {\n          // 根据 eventData.data 更新 Div1 的图表\n          updateChart(eventData.data);\n        }\n      });\n    });\n    onUnmounted(() => {\n      bus.off(\"chartInteraction\");\n    });\n\n    // 更新图表\n    function updateChart(data) {\n      const chartContainer = document.querySelector(\".chart-container1\");\n      if (!chartContainer) return;\n\n      // 高亮对应的数据点\n      const bars = chartContainer.querySelectorAll(\".bar\");\n      bars.forEach(bar => {\n        if (bar.__data__ === data) {\n          bar.style.fill = \"orange\"; // 高亮颜色\n        } else {\n          bar.style.fill = \"steelblue\"; // 默认颜色\n        }\n      });\n    }\n    const __returned__ = {\n      handleChartInteraction,\n      updateChart,\n      ParentComponent,\n      onMounted,\n      onUnmounted,\n      get bus() {\n        return bus;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ParentComponent","onMounted","onUnmounted","bus","handleChartInteraction","eventData","source","emit","on","updateChart","data","off","chartContainer","document","querySelector","bars","querySelectorAll","forEach","bar","__data__","style","fill"],"sources":["D:/vue_frame/vue_frame/wikitable-vue/client/src/components/Div1.vue"],"sourcesContent":["<template>\r\n\t<ParentComponent\r\n\t\tpageTitle=\"LeBron James\"\r\n\t\tdivId=\"div1\"\r\n\t\tselectContentClass=\"custom-class\"\r\n\t\t@chartInteraction=\"handleChartInteraction\" />\r\n</template>\r\n\r\n<script setup>\r\n\timport ParentComponent from \"@/components/compoents_base/ParentComponent.vue\";\r\n\timport { onMounted, onUnmounted } from \"vue\";\r\n\timport bus from \"@/js/eventBus.js\";\r\n\r\n\t// 处理图表交互事件\r\n\tfunction handleChartInteraction(eventData) {\r\n\t\tif (eventData.source === \"div1\") {\r\n\t\t\t// 将事件传递给 Div2\r\n\t\t\tbus.emit(\"chartInteraction\", eventData);\r\n\t\t}\r\n\t}\r\n\r\n\tonMounted(() => {\r\n\t\t// 监听来自 Div2 的图表交互事件\r\n\t\tbus.on(\"chartInteraction\", eventData => {\r\n\t\t\tif (eventData.source === \"div2\") {\r\n\t\t\t\t// 根据 eventData.data 更新 Div1 的图表\r\n\t\t\t\tupdateChart(eventData.data);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\tonUnmounted(() => {\r\n\t\tbus.off(\"chartInteraction\");\r\n\t});\r\n\r\n\t// 更新图表\r\n\tfunction updateChart(data) {\r\n\t\tconst chartContainer = document.querySelector(\".chart-container1\");\r\n\t\tif (!chartContainer) return;\r\n\r\n\t\t// 高亮对应的数据点\r\n\t\tconst bars = chartContainer.querySelectorAll(\".bar\");\r\n\t\tbars.forEach(bar => {\r\n\t\t\tif (bar.__data__ === data) {\r\n\t\t\t\tbar.style.fill = \"orange\"; // 高亮颜色\r\n\t\t\t} else {\r\n\t\t\t\tbar.style.fill = \"steelblue\"; // 默认颜色\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n</script>\r\n"],"mappings":"AASC,OAAOA,eAAe,MAAM,iDAAiD;AAC7E,SAASC,SAAS,EAAEC,WAAW,QAAQ,KAAK;AAC5C,OAAOC,GAAG,MAAM,kBAAkB;;AAElC;;;;;;;;;IACA,SAASC,sBAAsBA,CAACC,SAAS,EAAE;MAC1C,IAAIA,SAAS,CAACC,MAAM,KAAK,MAAM,EAAE;QAChC;QACAH,GAAG,CAACI,IAAI,CAAC,kBAAkB,EAAEF,SAAS,CAAC;MACxC;IACD;IAEAJ,SAAS,CAAC,MAAM;MACf;MACAE,GAAG,CAACK,EAAE,CAAC,kBAAkB,EAAEH,SAAS,IAAI;QACvC,IAAIA,SAAS,CAACC,MAAM,KAAK,MAAM,EAAE;UAChC;UACAG,WAAW,CAACJ,SAAS,CAACK,IAAI,CAAC;QAC5B;MACD,CAAC,CAAC;IACH,CAAC,CAAC;IAEFR,WAAW,CAAC,MAAM;MACjBC,GAAG,CAACQ,GAAG,CAAC,kBAAkB,CAAC;IAC5B,CAAC,CAAC;;IAEF;IACA,SAASF,WAAWA,CAACC,IAAI,EAAE;MAC1B,MAAME,cAAc,GAAGC,QAAQ,CAACC,aAAa,CAAC,mBAAmB,CAAC;MAClE,IAAI,CAACF,cAAc,EAAE;;MAErB;MACA,MAAMG,IAAI,GAAGH,cAAc,CAACI,gBAAgB,CAAC,MAAM,CAAC;MACpDD,IAAI,CAACE,OAAO,CAACC,GAAG,IAAI;QACnB,IAAIA,GAAG,CAACC,QAAQ,KAAKT,IAAI,EAAE;UAC1BQ,GAAG,CAACE,KAAK,CAACC,IAAI,GAAG,QAAQ,CAAC,CAAC;QAC5B,CAAC,MAAM;UACNH,GAAG,CAACE,KAAK,CAACC,IAAI,GAAG,WAAW,CAAC,CAAC;QAC/B;MACD,CAAC,CAAC;IACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}