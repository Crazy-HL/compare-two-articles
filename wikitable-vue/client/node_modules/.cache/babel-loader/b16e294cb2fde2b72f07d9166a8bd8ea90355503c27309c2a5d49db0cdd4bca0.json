{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport { ref, onMounted, watch, computed, onBeforeUnmount } from \"vue\";\nimport * as d3 from \"d3\";\nexport default {\n  __name: 'SparklineChart',\n  props: {\n    data: {\n      type: Array,\n      default: () => [],\n      validator: value => Array.isArray(value)\n    },\n    compareData: {\n      type: Array,\n      default: null\n    },\n    width: {\n      type: Number,\n      default: 180\n    },\n    height: {\n      type: Number,\n      default: 80\n    },\n    margin: {\n      type: Object,\n      default: () => ({\n        top: 5,\n        right: 5,\n        bottom: 5,\n        left: 5\n      })\n    },\n    lineColor: {\n      type: String,\n      default: \"#4a90e2\"\n    },\n    areaColor: {\n      type: String,\n      default: \"#4a90e2\"\n    },\n    dotColor: {\n      type: String,\n      default: \"#4a90e2\"\n    },\n    highlightColor: {\n      type: String,\n      default: \"#ef4444\"\n    },\n    showTooltip: {\n      type: Boolean,\n      default: true\n    },\n    showDots: {\n      type: Boolean,\n      default: true\n    },\n    showArea: {\n      type: Boolean,\n      default: true\n    },\n    showYearMarkers: {\n      type: Boolean,\n      default: true\n    },\n    curveType: {\n      type: String,\n      default: \"curveMonotoneX\"\n    }\n  },\n  setup(__props, _ref) {\n    let {\n      expose: __expose\n    } = _ref;\n    __expose();\n    const props = __props;\n    const chartContainer = ref(null);\n    const svg = ref(null);\n    const tooltip = ref(null);\n    const isInitialized = ref(false);\n    const mounted = ref(false);\n    const innerWidth = computed(() => props.width - props.margin.left - props.margin.right);\n    const innerHeight = computed(() => props.height - props.margin.top - props.margin.bottom);\n    const sortedData = computed(() => {\n      if (!Array.isArray(props.data)) return [];\n      return [...props.data].filter(item => item && !isNaN(item.year) && !isNaN(item.value)).sort((a, b) => a.year - b.year);\n    });\n    const hasEnoughData = computed(() => sortedData.value.length >= 2);\n    const noDataMessage = computed(() => sortedData.value.length === 0 ? \"无数据\" : \"数据不足，至少需要2个数据点\");\n    const commonYears = computed(() => {\n      if (!props.compareData || !Array.isArray(props.compareData) || !props.showYearMarkers) {\n        return new Set();\n      }\n      const currentYears = new Set(sortedData.value.map(d => d.year));\n      const compareYears = new Set(props.compareData.filter(item => item && !isNaN(item.year)).map(d => d.year));\n      return new Set([...currentYears].filter(year => compareYears.has(year)));\n    });\n    const xScale = computed(() => {\n      if (!hasEnoughData.value) return null;\n      const years = sortedData.value.map(d => d.year);\n      return d3.scaleLinear().domain(d3.extent(years)).range([0, innerWidth.value]);\n    });\n    const yScale = computed(() => {\n      if (!hasEnoughData.value) return null;\n      const values = sortedData.value.map(d => d.value);\n      const minValue = d3.min(values);\n      const maxValue = d3.max(values);\n      const padding = (maxValue - minValue) * 0.1;\n      return d3.scaleLinear().domain([minValue - padding, maxValue + padding]).range([innerHeight.value, 0]);\n    });\n    const lineGenerator = computed(() => {\n      if (!hasEnoughData.value || !xScale.value || !yScale.value) {\n        return () => \"\";\n      }\n      return d3.line().x(d => xScale.value(d.year)).y(d => yScale.value(d.value)).curve(d3[props.curveType]);\n    });\n    const areaGenerator = computed(() => {\n      if (!hasEnoughData.value || !xScale.value || !yScale.value || !props.showArea) {\n        return () => \"\";\n      }\n      return d3.area().x(d => xScale.value(d.year)).y0(innerHeight.value).y1(d => yScale.value(d.value)).curve(d3[props.curveType]);\n    });\n    const formatValue = value => {\n      if (value >= 1000000) return `$${(value / 1000000).toFixed(1)}M`;\n      if (value >= 1000) return `$${(value / 1000).toFixed(1)}K`;\n      return value.toLocaleString();\n    };\n    const getYearBands = () => {\n      const years = Array.from(commonYears.value).sort((a, b) => a - b);\n      if (years.length === 0) return [];\n      const bands = [];\n      let currentBand = {\n        start: years[0],\n        end: years[0]\n      };\n      for (let i = 1; i < years.length; i++) {\n        if (years[i] === currentBand.end + 1) {\n          currentBand.end = years[i];\n        } else {\n          bands.push({\n            ...currentBand\n          });\n          currentBand = {\n            start: years[i],\n            end: years[i]\n          };\n        }\n      }\n      bands.push(currentBand);\n      return bands;\n    };\n    const destroyChart = () => {\n      try {\n        if (chartContainer.value) {\n          // 使用原生DOM操作确保完全清理\n          chartContainer.value.innerHTML = \"\";\n        }\n        svg.value = null;\n        tooltip.value = null;\n      } catch (error) {\n        console.error(\"销毁图表时出错:\", error);\n      }\n    };\n    const initChart = () => {\n      if (!mounted.value || !chartContainer.value) return;\n      destroyChart();\n      if (!hasEnoughData.value) {\n        isInitialized.value = false;\n        return;\n      }\n      try {\n        svg.value = d3.select(chartContainer.value).append(\"svg\").attr(\"width\", props.width).attr(\"height\", props.height).attr(\"viewBox\", `0 0 ${props.width} ${props.height}`).attr(\"preserveAspectRatio\", \"xMidYMid meet\");\n\n        // ...保持原有的图表绘制逻辑...\n\n        isInitialized.value = true;\n      } catch (error) {\n        console.error(\"图表初始化错误:\", error);\n        destroyChart();\n      }\n    };\n    const addTooltip = chart => {\n      // ...保持原有的工具提示逻辑...\n    };\n    onMounted(() => {\n      mounted.value = true;\n      // 使用requestAnimationFrame确保DOM就绪\n      requestAnimationFrame(() => {\n        initChart();\n      });\n    });\n    onBeforeUnmount(() => {\n      mounted.value = false;\n      destroyChart();\n    });\n    watch(() => [props.data, props.compareData, props.width, props.height, props.margin, props.lineColor, props.areaColor, props.dotColor, props.highlightColor, props.showTooltip, props.showDots, props.showArea, props.showYearMarkers, props.curveType, hasEnoughData.value], () => {\n      if (mounted.value) {\n        requestAnimationFrame(initChart);\n      }\n    }, {\n      deep: true\n    });\n    const __returned__ = {\n      props,\n      chartContainer,\n      svg,\n      tooltip,\n      isInitialized,\n      mounted,\n      innerWidth,\n      innerHeight,\n      sortedData,\n      hasEnoughData,\n      noDataMessage,\n      commonYears,\n      xScale,\n      yScale,\n      lineGenerator,\n      areaGenerator,\n      formatValue,\n      getYearBands,\n      destroyChart,\n      initChart,\n      addTooltip,\n      ref,\n      onMounted,\n      watch,\n      computed,\n      onBeforeUnmount,\n      get d3() {\n        return d3;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","watch","computed","onBeforeUnmount","d3","props","__props","chartContainer","svg","tooltip","isInitialized","mounted","innerWidth","width","margin","left","right","innerHeight","height","top","bottom","sortedData","Array","isArray","data","filter","item","isNaN","year","value","sort","a","b","hasEnoughData","length","noDataMessage","commonYears","compareData","showYearMarkers","Set","currentYears","map","d","compareYears","has","xScale","years","scaleLinear","domain","extent","range","yScale","values","minValue","min","maxValue","max","padding","lineGenerator","line","x","y","curve","curveType","areaGenerator","showArea","area","y0","y1","formatValue","toFixed","toLocaleString","getYearBands","from","bands","currentBand","start","end","i","push","destroyChart","innerHTML","error","console","initChart","select","append","attr","addTooltip","chart","requestAnimationFrame","lineColor","areaColor","dotColor","highlightColor","showTooltip","showDots","deep"],"sources":["D:/vue_frame/vue_frame/wikitable-vue/client/src/components/compoents_base/SparklineChart.vue"],"sourcesContent":["<template>\r\n\t<div ref=\"chartContainer\" class=\"sparkline-container\">\r\n\t\t<div v-if=\"!hasEnoughData\" class=\"no-data-message\">\r\n\t\t\t{{ noDataMessage }}\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ref, onMounted, watch, computed, onBeforeUnmount } from \"vue\";\r\n\timport * as d3 from \"d3\";\r\n\r\n\tconst props = defineProps({\r\n\t\tdata: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: () => [],\r\n\t\t\tvalidator: value => Array.isArray(value)\r\n\t\t},\r\n\t\tcompareData: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: null\r\n\t\t},\r\n\t\twidth: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 180\r\n\t\t},\r\n\t\theight: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 80\r\n\t\t},\r\n\t\tmargin: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => ({ top: 5, right: 5, bottom: 5, left: 5 })\r\n\t\t},\r\n\t\tlineColor: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"#4a90e2\"\r\n\t\t},\r\n\t\tareaColor: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"#4a90e2\"\r\n\t\t},\r\n\t\tdotColor: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"#4a90e2\"\r\n\t\t},\r\n\t\thighlightColor: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"#ef4444\"\r\n\t\t},\r\n\t\tshowTooltip: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\tshowDots: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\tshowArea: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\tshowYearMarkers: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\tcurveType: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"curveMonotoneX\"\r\n\t\t}\r\n\t});\r\n\r\n\tconst chartContainer = ref(null);\r\n\tconst svg = ref(null);\r\n\tconst tooltip = ref(null);\r\n\tconst isInitialized = ref(false);\r\n\tconst mounted = ref(false);\r\n\r\n\tconst innerWidth = computed(\r\n\t\t() => props.width - props.margin.left - props.margin.right\r\n\t);\r\n\tconst innerHeight = computed(\r\n\t\t() => props.height - props.margin.top - props.margin.bottom\r\n\t);\r\n\r\n\tconst sortedData = computed(() => {\r\n\t\tif (!Array.isArray(props.data)) return [];\r\n\t\treturn [...props.data]\r\n\t\t\t.filter(item => item && !isNaN(item.year) && !isNaN(item.value))\r\n\t\t\t.sort((a, b) => a.year - b.year);\r\n\t});\r\n\r\n\tconst hasEnoughData = computed(() => sortedData.value.length >= 2);\r\n\tconst noDataMessage = computed(() =>\r\n\t\tsortedData.value.length === 0 ? \"无数据\" : \"数据不足，至少需要2个数据点\"\r\n\t);\r\n\r\n\tconst commonYears = computed(() => {\r\n\t\tif (\r\n\t\t\t!props.compareData ||\r\n\t\t\t!Array.isArray(props.compareData) ||\r\n\t\t\t!props.showYearMarkers\r\n\t\t) {\r\n\t\t\treturn new Set();\r\n\t\t}\r\n\r\n\t\tconst currentYears = new Set(sortedData.value.map(d => d.year));\r\n\t\tconst compareYears = new Set(\r\n\t\t\tprops.compareData\r\n\t\t\t\t.filter(item => item && !isNaN(item.year))\r\n\t\t\t\t.map(d => d.year)\r\n\t\t);\r\n\r\n\t\treturn new Set([...currentYears].filter(year => compareYears.has(year)));\r\n\t});\r\n\r\n\tconst xScale = computed(() => {\r\n\t\tif (!hasEnoughData.value) return null;\r\n\r\n\t\tconst years = sortedData.value.map(d => d.year);\r\n\t\treturn d3\r\n\t\t\t.scaleLinear()\r\n\t\t\t.domain(d3.extent(years))\r\n\t\t\t.range([0, innerWidth.value]);\r\n\t});\r\n\r\n\tconst yScale = computed(() => {\r\n\t\tif (!hasEnoughData.value) return null;\r\n\r\n\t\tconst values = sortedData.value.map(d => d.value);\r\n\t\tconst minValue = d3.min(values);\r\n\t\tconst maxValue = d3.max(values);\r\n\t\tconst padding = (maxValue - minValue) * 0.1;\r\n\r\n\t\treturn d3\r\n\t\t\t.scaleLinear()\r\n\t\t\t.domain([minValue - padding, maxValue + padding])\r\n\t\t\t.range([innerHeight.value, 0]);\r\n\t});\r\n\r\n\tconst lineGenerator = computed(() => {\r\n\t\tif (!hasEnoughData.value || !xScale.value || !yScale.value) {\r\n\t\t\treturn () => \"\";\r\n\t\t}\r\n\r\n\t\treturn d3\r\n\t\t\t.line()\r\n\t\t\t.x(d => xScale.value(d.year))\r\n\t\t\t.y(d => yScale.value(d.value))\r\n\t\t\t.curve(d3[props.curveType]);\r\n\t});\r\n\r\n\tconst areaGenerator = computed(() => {\r\n\t\tif (\r\n\t\t\t!hasEnoughData.value ||\r\n\t\t\t!xScale.value ||\r\n\t\t\t!yScale.value ||\r\n\t\t\t!props.showArea\r\n\t\t) {\r\n\t\t\treturn () => \"\";\r\n\t\t}\r\n\r\n\t\treturn d3\r\n\t\t\t.area()\r\n\t\t\t.x(d => xScale.value(d.year))\r\n\t\t\t.y0(innerHeight.value)\r\n\t\t\t.y1(d => yScale.value(d.value))\r\n\t\t\t.curve(d3[props.curveType]);\r\n\t});\r\n\r\n\tconst formatValue = value => {\r\n\t\tif (value >= 1000000) return `$${(value / 1000000).toFixed(1)}M`;\r\n\t\tif (value >= 1000) return `$${(value / 1000).toFixed(1)}K`;\r\n\t\treturn value.toLocaleString();\r\n\t};\r\n\r\n\tconst getYearBands = () => {\r\n\t\tconst years = Array.from(commonYears.value).sort((a, b) => a - b);\r\n\t\tif (years.length === 0) return [];\r\n\r\n\t\tconst bands = [];\r\n\t\tlet currentBand = { start: years[0], end: years[0] };\r\n\r\n\t\tfor (let i = 1; i < years.length; i++) {\r\n\t\t\tif (years[i] === currentBand.end + 1) {\r\n\t\t\t\tcurrentBand.end = years[i];\r\n\t\t\t} else {\r\n\t\t\t\tbands.push({ ...currentBand });\r\n\t\t\t\tcurrentBand = { start: years[i], end: years[i] };\r\n\t\t\t}\r\n\t\t}\r\n\t\tbands.push(currentBand);\r\n\r\n\t\treturn bands;\r\n\t};\r\n\r\n\tconst destroyChart = () => {\r\n\t\ttry {\r\n\t\t\tif (chartContainer.value) {\r\n\t\t\t\t// 使用原生DOM操作确保完全清理\r\n\t\t\t\tchartContainer.value.innerHTML = \"\";\r\n\t\t\t}\r\n\t\t\tsvg.value = null;\r\n\t\t\ttooltip.value = null;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"销毁图表时出错:\", error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst initChart = () => {\r\n\t\tif (!mounted.value || !chartContainer.value) return;\r\n\r\n\t\tdestroyChart();\r\n\r\n\t\tif (!hasEnoughData.value) {\r\n\t\t\tisInitialized.value = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tsvg.value = d3\r\n\t\t\t\t.select(chartContainer.value)\r\n\t\t\t\t.append(\"svg\")\r\n\t\t\t\t.attr(\"width\", props.width)\r\n\t\t\t\t.attr(\"height\", props.height)\r\n\t\t\t\t.attr(\"viewBox\", `0 0 ${props.width} ${props.height}`)\r\n\t\t\t\t.attr(\"preserveAspectRatio\", \"xMidYMid meet\");\r\n\r\n\t\t\t// ...保持原有的图表绘制逻辑...\r\n\r\n\t\t\tisInitialized.value = true;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"图表初始化错误:\", error);\r\n\t\t\tdestroyChart();\r\n\t\t}\r\n\t};\r\n\r\n\tconst addTooltip = chart => {\r\n\t\t// ...保持原有的工具提示逻辑...\r\n\t};\r\n\r\n\tonMounted(() => {\r\n\t\tmounted.value = true;\r\n\t\t// 使用requestAnimationFrame确保DOM就绪\r\n\t\trequestAnimationFrame(() => {\r\n\t\t\tinitChart();\r\n\t\t});\r\n\t});\r\n\r\n\tonBeforeUnmount(() => {\r\n\t\tmounted.value = false;\r\n\t\tdestroyChart();\r\n\t});\r\n\r\n\twatch(\r\n\t\t() => [\r\n\t\t\tprops.data,\r\n\t\t\tprops.compareData,\r\n\t\t\tprops.width,\r\n\t\t\tprops.height,\r\n\t\t\tprops.margin,\r\n\t\t\tprops.lineColor,\r\n\t\t\tprops.areaColor,\r\n\t\t\tprops.dotColor,\r\n\t\t\tprops.highlightColor,\r\n\t\t\tprops.showTooltip,\r\n\t\t\tprops.showDots,\r\n\t\t\tprops.showArea,\r\n\t\t\tprops.showYearMarkers,\r\n\t\t\tprops.curveType,\r\n\t\t\thasEnoughData.value\r\n\t\t],\r\n\t\t() => {\r\n\t\t\tif (mounted.value) {\r\n\t\t\t\trequestAnimationFrame(initChart);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{ deep: true }\r\n\t);\r\n</script>\r\n\r\n<style scoped>\r\n\t.sparkline-container {\r\n\t\tposition: relative;\r\n\t\tdisplay: inline-block;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tmin-height: 60px; /* 确保最小高度 */\r\n\t\tfont-family: system-ui, -apple-system, sans-serif;\r\n\t}\r\n\r\n\t.no-data-message {\r\n\t\tposition: absolute;\r\n\t\ttop: 50%;\r\n\t\tleft: 50%;\r\n\t\ttransform: translate(-50%, -50%);\r\n\t\tcolor: #94a3b8;\r\n\t\tfont-size: 12px;\r\n\t\ttext-align: center;\r\n\t\twidth: 100%;\r\n\t\tpadding: 0 10px;\r\n\t\tbox-sizing: border-box;\r\n\t\tword-break: keep-all; /* 防止文字换行 */\r\n\t\twhite-space: nowrap; /* 确保文字水平排列 */\r\n\t\tpointer-events: none;\r\n\t}\r\n\r\n\t/* 保持其他样式不变 */\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}