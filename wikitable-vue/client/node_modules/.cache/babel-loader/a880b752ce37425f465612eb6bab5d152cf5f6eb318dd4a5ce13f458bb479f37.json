{"ast":null,"code":"import { computed, onMounted, ref, watch } from \"vue\";\nimport * as d3 from \"d3\";\nexport default {\n  __name: 'FullChart',\n  props: {\n    field: [Object, Array, String, Number],\n    type: String,\n    visualization: String,\n    fieldKey: String\n  },\n  setup(__props, _ref) {\n    let {\n      expose: __expose\n    } = _ref;\n    __expose();\n    const props = __props;\n    const chartContainer = ref(null);\n    const renderChart = () => {\n      const container = chartContainer.value;\n      const width = container.clientWidth;\n      const height = container.clientHeight;\n      const margin = {\n        top: 20,\n        right: 30,\n        bottom: 40,\n        left: 40\n      };\n      const svg = d3.select(container).append(\"svg\").attr(\"width\", width).attr(\"height\", height).append(\"g\").attr(\"transform\", `translate(${margin.left},${margin.top})`);\n      if (props.visualization === \"bar-chart\") {\n        const data = barChartData();\n        const x = d3.scaleBand().domain(data.map(d => d.name)).range([0, width - margin.left - margin.right]).padding(0.1);\n        const y = d3.scaleLinear().domain([0, d3.max(data, d => d.value)]).nice().range([height - margin.top - margin.bottom, 0]);\n        svg.append(\"g\").attr(\"class\", \"x-axis\").attr(\"transform\", `translate(0,${height - margin.top - margin.bottom})`).call(d3.axisBottom(x));\n        svg.append(\"g\").attr(\"class\", \"y-axis\").call(d3.axisLeft(y));\n        svg.selectAll(\".bar\").data(data).enter().append(\"rect\").attr(\"class\", \"bar\").attr(\"x\", d => x(d.name)).attr(\"y\", d => y(d.value)).attr(\"width\", x.bandwidth()).attr(\"height\", d => y(0) - y(d.value)).attr(\"fill\", \"#3498db\").on(\"mouseover\", function (event, d) {\n          d3.select(this).attr(\"fill\", \"#2980b9\");\n        }).on(\"mouseout\", function (event, d) {\n          d3.select(this).attr(\"fill\", \"#3498db\");\n        });\n\n        // 添加图注\n        svg.append(\"text\").attr(\"x\", width / 2).attr(\"y\", -10).attr(\"text-anchor\", \"middle\").style(\"font-size\", \"16px\").text(\"柱状图\");\n      } else if (props.visualization === \"pie-chart\") {\n        const data = pieChartData();\n        const radius = Math.min(width, height) / 2;\n        const pie = d3.pie().value(d => d.value);\n        const arc = d3.arc().innerRadius(0).outerRadius(radius);\n        const arcs = svg.selectAll(\".arc\").data(pie(data)).enter().append(\"g\").attr(\"class\", \"arc\").attr(\"transform\", `translate(${width / 2},${height / 2})`);\n        arcs.append(\"path\").attr(\"d\", arc).attr(\"fill\", (d, i) => d3.schemeCategory10[i % 10]).on(\"mouseover\", function (event, d) {\n          d3.select(this).attr(\"opacity\", 0.7);\n        }).on(\"mouseout\", function (event, d) {\n          d3.select(this).attr(\"opacity\", 1);\n        });\n\n        // 添加图注\n        svg.append(\"text\").attr(\"x\", width / 2).attr(\"y\", -10).attr(\"text-anchor\", \"middle\").style(\"font-size\", \"16px\").text(\"饼图\");\n      } else if (props.visualization === \"line-chart\") {\n        const data = lineChartData();\n        const x = d3.scaleLinear().domain([0, data.length - 1]).range([0, width - margin.left - margin.right]);\n        const y = d3.scaleLinear().domain([d3.min(data, d => d.value), d3.max(data, d => d.value)]).nice().range([height - margin.top - margin.bottom, 0]);\n        svg.append(\"g\").attr(\"class\", \"x-axis\").attr(\"transform\", `translate(0,${height - margin.top - margin.bottom})`).call(d3.axisBottom(x));\n        svg.append(\"g\").attr(\"class\", \"y-axis\").call(d3.axisLeft(y));\n        const line = d3.line().x((d, i) => x(i)).y(d => y(d.value)).curve(d3.curveMonotoneX);\n        svg.append(\"path\").datum(data).attr(\"fill\", \"none\").attr(\"stroke\", \"#3498db\").attr(\"stroke-width\", 2).attr(\"d\", line);\n\n        // 添加图注\n        svg.append(\"text\").attr(\"x\", width / 2).attr(\"y\", -10).attr(\"text-anchor\", \"middle\").style(\"font-size\", \"16px\").text(\"折线图\");\n      }\n    };\n    const barChartData = () => {\n      if (!props.field) return [];\n      if (Array.isArray(props.field)) {\n        return props.field.map((item, index) => ({\n          name: item.raw || `项目${index + 1}`,\n          value: safeToNumber(item.value || item.raw)\n        }));\n      }\n      return [{\n        name: props.field.raw || \"项目\",\n        value: safeToNumber(props.field.value || props.field.raw)\n      }];\n    };\n    const pieChartData = () => {\n      if (!props.field) return [];\n      if (Array.isArray(props.field)) {\n        return props.field.map((item, index) => ({\n          name: item.raw || `项目${index + 1}`,\n          value: safeToNumber(item.value || item.raw)\n        }));\n      }\n      return [{\n        name: props.field.raw || \"项目\",\n        value: safeToNumber(props.field.value || props.field.raw)\n      }];\n    };\n    const lineChartData = () => {\n      if (!props.field) return [];\n      if (Array.isArray(props.field)) {\n        return props.field.map((item, index) => ({\n          value: safeToNumber(item.value || item.raw)\n        }));\n      }\n      return [{\n        value: safeToNumber(props.field.value || props.field.raw)\n      }];\n    };\n    const safeToNumber = value => {\n      if (value === null || value === undefined) return 0;\n      if (typeof value === \"number\") return value;\n      if (typeof value === \"string\") {\n        const numStr = value.toString().replace(/[^0-9.-]/g, \"\");\n        const num = parseFloat(numStr);\n        return isNaN(num) ? 0 : num;\n      }\n      return 0;\n    };\n\n    // 格式化文本\n    const formattedText = computed(() => {\n      if (!props.field) return [\"-\"];\n      if (Array.isArray(props.field)) {\n        return props.field.map(item => {\n          if (typeof item === \"object\") {\n            let text = \"\";\n            if (item.raw) text = item.raw;else if (item.value) text = item.value;else text = JSON.stringify(item);\n            if (item.unit) text += ` ${item.unit}`;\n            if (item.year) text += ` (${item.year})`;\n            return text;\n          }\n          return item.toString();\n        });\n      }\n      if (typeof props.field === \"object\") {\n        let text = \"\";\n        if (props.field.raw) text = props.field.raw;else if (props.field.value) text = props.field.value;else text = JSON.stringify(props.field);\n        if (props.field.unit) text += ` ${props.field.unit}`;\n        if (props.field.year) text += ` (${props.field.year})`;\n        return [text];\n      }\n      return [props.field.toString()];\n    });\n    const hasData = computed(() => {\n      if (!props.field) return false;\n      if (Array.isArray(props.field)) return props.field.length > 0;\n      if (typeof props.field === \"object\") return Object.keys(props.field).length > 0;\n      return String(props.field).trim().length > 0;\n    });\n    onMounted(() => {\n      renderChart();\n    });\n    watch(() => [props.field, props.visualization], renderChart);\n    const __returned__ = {\n      props,\n      chartContainer,\n      renderChart,\n      barChartData,\n      pieChartData,\n      lineChartData,\n      safeToNumber,\n      formattedText,\n      hasData,\n      computed,\n      onMounted,\n      ref,\n      watch,\n      get d3() {\n        return d3;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["computed","onMounted","ref","watch","d3","props","__props","chartContainer","renderChart","container","value","width","clientWidth","height","clientHeight","margin","top","right","bottom","left","svg","select","append","attr","visualization","data","barChartData","x","scaleBand","domain","map","d","name","range","padding","y","scaleLinear","max","nice","call","axisBottom","axisLeft","selectAll","enter","bandwidth","on","event","style","text","pieChartData","radius","Math","min","pie","arc","innerRadius","outerRadius","arcs","i","schemeCategory10","lineChartData","length","line","curve","curveMonotoneX","datum","field","Array","isArray","item","index","raw","safeToNumber","undefined","numStr","toString","replace","num","parseFloat","isNaN","formattedText","JSON","stringify","unit","year","hasData","Object","keys","String","trim"],"sources":["D:/vue_frame/vue_frame/wikitable-vue/client/src/components/compoents_base/FullChart.vue"],"sourcesContent":["<template>\r\n\t<div class=\"full-chart\">\r\n\t\t<!-- 文本显示 -->\r\n\t\t<template v-if=\"visualization === 'text-only'\">\r\n\t\t\t<div class=\"full-text\">\r\n\t\t\t\t<div\r\n\t\t\t\t\tv-for=\"(item, index) in formattedText\"\r\n\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\tclass=\"text-item\">\r\n\t\t\t\t\t{{ item }}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</template>\r\n\r\n\t\t<!-- 完整饼图 -->\r\n\t\t<template v-else-if=\"visualization === 'pie-chart'\">\r\n\t\t\t<div v-if=\"hasData\" class=\"chart-container\" ref=\"chartContainer\"></div>\r\n\t\t\t<div v-else class=\"no-data\">无可用数据</div>\r\n\t\t</template>\r\n\r\n\t\t<!-- 完整柱状图 -->\r\n\t\t<template v-else-if=\"visualization === 'bar-chart'\">\r\n\t\t\t<div v-if=\"hasData\" class=\"chart-container\" ref=\"chartContainer\"></div>\r\n\t\t\t<div v-else class=\"no-data\">无可用数据</div>\r\n\t\t</template>\r\n\r\n\t\t<!-- 完整折线图 -->\r\n\t\t<template v-else-if=\"visualization === 'line-chart'\">\r\n\t\t\t<div v-if=\"hasData\" class=\"chart-container\" ref=\"chartContainer\"></div>\r\n\t\t\t<div v-else class=\"no-data\">无可用数据</div>\r\n\t\t</template>\r\n\r\n\t\t<!-- 默认显示 -->\r\n\t\t<template v-else>\r\n\t\t\t<div class=\"full-text\">\r\n\t\t\t\t<div\r\n\t\t\t\t\tv-for=\"(item, index) in formattedText\"\r\n\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\tclass=\"text-item\">\r\n\t\t\t\t\t{{ item }}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</template>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { computed, onMounted, ref, watch } from \"vue\";\r\n\timport * as d3 from \"d3\";\r\n\r\n\tconst props = defineProps({\r\n\t\tfield: [Object, Array, String, Number],\r\n\t\ttype: String,\r\n\t\tvisualization: String,\r\n\t\tfieldKey: String\r\n\t});\r\n\r\n\tconst chartContainer = ref(null);\r\n\r\n\tconst renderChart = () => {\r\n\t\tconst container = chartContainer.value;\r\n\t\tconst width = container.clientWidth;\r\n\t\tconst height = container.clientHeight;\r\n\t\tconst margin = { top: 20, right: 30, bottom: 40, left: 40 };\r\n\r\n\t\tconst svg = d3\r\n\t\t\t.select(container)\r\n\t\t\t.append(\"svg\")\r\n\t\t\t.attr(\"width\", width)\r\n\t\t\t.attr(\"height\", height)\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"transform\", `translate(${margin.left},${margin.top})`);\r\n\r\n\t\tif (props.visualization === \"bar-chart\") {\r\n\t\t\tconst data = barChartData();\r\n\t\t\tconst x = d3\r\n\t\t\t\t.scaleBand()\r\n\t\t\t\t.domain(data.map(d => d.name))\r\n\t\t\t\t.range([0, width - margin.left - margin.right])\r\n\t\t\t\t.padding(0.1);\r\n\r\n\t\t\tconst y = d3\r\n\t\t\t\t.scaleLinear()\r\n\t\t\t\t.domain([0, d3.max(data, d => d.value)])\r\n\t\t\t\t.nice()\r\n\t\t\t\t.range([height - margin.top - margin.bottom, 0]);\r\n\r\n\t\t\tsvg\r\n\t\t\t\t.append(\"g\")\r\n\t\t\t\t.attr(\"class\", \"x-axis\")\r\n\t\t\t\t.attr(\r\n\t\t\t\t\t\"transform\",\r\n\t\t\t\t\t`translate(0,${height - margin.top - margin.bottom})`\r\n\t\t\t\t)\r\n\t\t\t\t.call(d3.axisBottom(x));\r\n\r\n\t\t\tsvg.append(\"g\").attr(\"class\", \"y-axis\").call(d3.axisLeft(y));\r\n\r\n\t\t\tsvg\r\n\t\t\t\t.selectAll(\".bar\")\r\n\t\t\t\t.data(data)\r\n\t\t\t\t.enter()\r\n\t\t\t\t.append(\"rect\")\r\n\t\t\t\t.attr(\"class\", \"bar\")\r\n\t\t\t\t.attr(\"x\", d => x(d.name))\r\n\t\t\t\t.attr(\"y\", d => y(d.value))\r\n\t\t\t\t.attr(\"width\", x.bandwidth())\r\n\t\t\t\t.attr(\"height\", d => y(0) - y(d.value))\r\n\t\t\t\t.attr(\"fill\", \"#3498db\")\r\n\t\t\t\t.on(\"mouseover\", function (event, d) {\r\n\t\t\t\t\td3.select(this).attr(\"fill\", \"#2980b9\");\r\n\t\t\t\t})\r\n\t\t\t\t.on(\"mouseout\", function (event, d) {\r\n\t\t\t\t\td3.select(this).attr(\"fill\", \"#3498db\");\r\n\t\t\t\t});\r\n\r\n\t\t\t// 添加图注\r\n\t\t\tsvg\r\n\t\t\t\t.append(\"text\")\r\n\t\t\t\t.attr(\"x\", width / 2)\r\n\t\t\t\t.attr(\"y\", -10)\r\n\t\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t\t.style(\"font-size\", \"16px\")\r\n\t\t\t\t.text(\"柱状图\");\r\n\t\t} else if (props.visualization === \"pie-chart\") {\r\n\t\t\tconst data = pieChartData();\r\n\t\t\tconst radius = Math.min(width, height) / 2;\r\n\r\n\t\t\tconst pie = d3.pie().value(d => d.value);\r\n\t\t\tconst arc = d3.arc().innerRadius(0).outerRadius(radius);\r\n\r\n\t\t\tconst arcs = svg\r\n\t\t\t\t.selectAll(\".arc\")\r\n\t\t\t\t.data(pie(data))\r\n\t\t\t\t.enter()\r\n\t\t\t\t.append(\"g\")\r\n\t\t\t\t.attr(\"class\", \"arc\")\r\n\t\t\t\t.attr(\"transform\", `translate(${width / 2},${height / 2})`);\r\n\r\n\t\t\tarcs\r\n\t\t\t\t.append(\"path\")\r\n\t\t\t\t.attr(\"d\", arc)\r\n\t\t\t\t.attr(\"fill\", (d, i) => d3.schemeCategory10[i % 10])\r\n\t\t\t\t.on(\"mouseover\", function (event, d) {\r\n\t\t\t\t\td3.select(this).attr(\"opacity\", 0.7);\r\n\t\t\t\t})\r\n\t\t\t\t.on(\"mouseout\", function (event, d) {\r\n\t\t\t\t\td3.select(this).attr(\"opacity\", 1);\r\n\t\t\t\t});\r\n\r\n\t\t\t// 添加图注\r\n\t\t\tsvg\r\n\t\t\t\t.append(\"text\")\r\n\t\t\t\t.attr(\"x\", width / 2)\r\n\t\t\t\t.attr(\"y\", -10)\r\n\t\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t\t.style(\"font-size\", \"16px\")\r\n\t\t\t\t.text(\"饼图\");\r\n\t\t} else if (props.visualization === \"line-chart\") {\r\n\t\t\tconst data = lineChartData();\r\n\t\t\tconst x = d3\r\n\t\t\t\t.scaleLinear()\r\n\t\t\t\t.domain([0, data.length - 1])\r\n\t\t\t\t.range([0, width - margin.left - margin.right]);\r\n\r\n\t\t\tconst y = d3\r\n\t\t\t\t.scaleLinear()\r\n\t\t\t\t.domain([d3.min(data, d => d.value), d3.max(data, d => d.value)])\r\n\t\t\t\t.nice()\r\n\t\t\t\t.range([height - margin.top - margin.bottom, 0]);\r\n\r\n\t\t\tsvg\r\n\t\t\t\t.append(\"g\")\r\n\t\t\t\t.attr(\"class\", \"x-axis\")\r\n\t\t\t\t.attr(\r\n\t\t\t\t\t\"transform\",\r\n\t\t\t\t\t`translate(0,${height - margin.top - margin.bottom})`\r\n\t\t\t\t)\r\n\t\t\t\t.call(d3.axisBottom(x));\r\n\r\n\t\t\tsvg.append(\"g\").attr(\"class\", \"y-axis\").call(d3.axisLeft(y));\r\n\r\n\t\t\tconst line = d3\r\n\t\t\t\t.line()\r\n\t\t\t\t.x((d, i) => x(i))\r\n\t\t\t\t.y(d => y(d.value))\r\n\t\t\t\t.curve(d3.curveMonotoneX);\r\n\r\n\t\t\tsvg\r\n\t\t\t\t.append(\"path\")\r\n\t\t\t\t.datum(data)\r\n\t\t\t\t.attr(\"fill\", \"none\")\r\n\t\t\t\t.attr(\"stroke\", \"#3498db\")\r\n\t\t\t\t.attr(\"stroke-width\", 2)\r\n\t\t\t\t.attr(\"d\", line);\r\n\r\n\t\t\t// 添加图注\r\n\t\t\tsvg\r\n\t\t\t\t.append(\"text\")\r\n\t\t\t\t.attr(\"x\", width / 2)\r\n\t\t\t\t.attr(\"y\", -10)\r\n\t\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t\t.style(\"font-size\", \"16px\")\r\n\t\t\t\t.text(\"折线图\");\r\n\t\t}\r\n\t};\r\n\r\n\tconst barChartData = () => {\r\n\t\tif (!props.field) return [];\r\n\t\tif (Array.isArray(props.field)) {\r\n\t\t\treturn props.field.map((item, index) => ({\r\n\t\t\t\tname: item.raw || `项目${index + 1}`,\r\n\t\t\t\tvalue: safeToNumber(item.value || item.raw)\r\n\t\t\t}));\r\n\t\t}\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tname: props.field.raw || \"项目\",\r\n\t\t\t\tvalue: safeToNumber(props.field.value || props.field.raw)\r\n\t\t\t}\r\n\t\t];\r\n\t};\r\n\r\n\tconst pieChartData = () => {\r\n\t\tif (!props.field) return [];\r\n\t\tif (Array.isArray(props.field)) {\r\n\t\t\treturn props.field.map((item, index) => ({\r\n\t\t\t\tname: item.raw || `项目${index + 1}`,\r\n\t\t\t\tvalue: safeToNumber(item.value || item.raw)\r\n\t\t\t}));\r\n\t\t}\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tname: props.field.raw || \"项目\",\r\n\t\t\t\tvalue: safeToNumber(props.field.value || props.field.raw)\r\n\t\t\t}\r\n\t\t];\r\n\t};\r\n\r\n\tconst lineChartData = () => {\r\n\t\tif (!props.field) return [];\r\n\t\tif (Array.isArray(props.field)) {\r\n\t\t\treturn props.field.map((item, index) => ({\r\n\t\t\t\tvalue: safeToNumber(item.value || item.raw)\r\n\t\t\t}));\r\n\t\t}\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tvalue: safeToNumber(props.field.value || props.field.raw)\r\n\t\t\t}\r\n\t\t];\r\n\t};\r\n\r\n\tconst safeToNumber = value => {\r\n\t\tif (value === null || value === undefined) return 0;\r\n\t\tif (typeof value === \"number\") return value;\r\n\t\tif (typeof value === \"string\") {\r\n\t\t\tconst numStr = value.toString().replace(/[^0-9.-]/g, \"\");\r\n\t\t\tconst num = parseFloat(numStr);\r\n\t\t\treturn isNaN(num) ? 0 : num;\r\n\t\t}\r\n\t\treturn 0;\r\n\t};\r\n\r\n\t// 格式化文本\r\n\tconst formattedText = computed(() => {\r\n\t\tif (!props.field) return [\"-\"];\r\n\r\n\t\tif (Array.isArray(props.field)) {\r\n\t\t\treturn props.field.map(item => {\r\n\t\t\t\tif (typeof item === \"object\") {\r\n\t\t\t\t\tlet text = \"\";\r\n\t\t\t\t\tif (item.raw) text = item.raw;\r\n\t\t\t\t\telse if (item.value) text = item.value;\r\n\t\t\t\t\telse text = JSON.stringify(item);\r\n\r\n\t\t\t\t\tif (item.unit) text += ` ${item.unit}`;\r\n\t\t\t\t\tif (item.year) text += ` (${item.year})`;\r\n\t\t\t\t\treturn text;\r\n\t\t\t\t}\r\n\t\t\t\treturn item.toString();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (typeof props.field === \"object\") {\r\n\t\t\tlet text = \"\";\r\n\t\t\tif (props.field.raw) text = props.field.raw;\r\n\t\t\telse if (props.field.value) text = props.field.value;\r\n\t\t\telse text = JSON.stringify(props.field);\r\n\r\n\t\t\tif (props.field.unit) text += ` ${props.field.unit}`;\r\n\t\t\tif (props.field.year) text += ` (${props.field.year})`;\r\n\t\t\treturn [text];\r\n\t\t}\r\n\r\n\t\treturn [props.field.toString()];\r\n\t});\r\n\r\n\tconst hasData = computed(() => {\r\n\t\tif (!props.field) return false;\r\n\t\tif (Array.isArray(props.field)) return props.field.length > 0;\r\n\t\tif (typeof props.field === \"object\")\r\n\t\t\treturn Object.keys(props.field).length > 0;\r\n\t\treturn String(props.field).trim().length > 0;\r\n\t});\r\n\r\n\tonMounted(() => {\r\n\t\trenderChart();\r\n\t});\r\n\r\n\twatch(() => [props.field, props.visualization], renderChart);\r\n</script>\r\n\r\n<style scoped>\r\n\t.full-chart {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.full-text {\r\n\t\tpadding: 10px;\r\n\t}\r\n\r\n\t.text-item {\r\n\t\tmargin-bottom: 8px;\r\n\t\tpadding: 5px;\r\n\t\tborder-bottom: 1px solid #eee;\r\n\t}\r\n\r\n\t.chart-container {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tmin-height: 300px;\r\n\t}\r\n\r\n\t.no-data {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\theight: 100%;\r\n\t\tcolor: #999;\r\n\t\tfont-style: italic;\r\n\t}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}