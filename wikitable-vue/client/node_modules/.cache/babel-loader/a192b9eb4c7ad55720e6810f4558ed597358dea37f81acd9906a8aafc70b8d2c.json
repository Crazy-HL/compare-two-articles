{"ast":null,"code":"import { computed } from \"vue\";\nimport PieChart from \"./charts/PieChart.vue\";\nimport BarChart from \"./charts/BarChart.vue\";\nimport LineChart from \"./charts/LineChart.vue\";\nimport * as d3 from \"d3\";\nexport default {\n  __name: 'FullChart',\n  props: {\n    field: [Object, Array, String, Number],\n    type: String,\n    visualization: String,\n    fieldKey: String\n  },\n  setup(__props, _ref) {\n    let {\n      expose: __expose\n    } = _ref;\n    __expose();\n    const props = __props;\n\n    // 安全转换为数字\n    const safeToNumber = value => {\n      if (value === null || value === undefined) return 0;\n      if (typeof value === \"number\") return value;\n      if (typeof value === \"string\") {\n        const numStr = value.toString().replace(/[^0-9.-]/g, \"\");\n        const num = parseFloat(numStr);\n        return isNaN(num) ? 0 : num;\n      }\n      return 0;\n    };\n\n    // 格式化文本\n    const formattedText = computed(() => {\n      if (!props.field) return [\"-\"];\n      if (Array.isArray(props.field)) {\n        return props.field.map(item => {\n          if (typeof item === \"object\") {\n            let text = \"\";\n            if (item.raw) text = item.raw;else if (item.value) text = item.value;else text = JSON.stringify(item);\n            if (item.unit) text += ` ${item.unit}`;\n            if (item.year) text += ` (${item.year})`;\n            return text;\n          }\n          return item.toString();\n        });\n      }\n      if (typeof props.field === \"object\") {\n        let text = \"\";\n        if (props.field.raw) text = props.field.raw;else if (props.field.value) text = props.field.value;else text = JSON.stringify(props.field);\n        if (props.field.unit) text += ` ${props.field.unit}`;\n        if (props.field.year) text += ` (${props.field.year})`;\n        return [text];\n      }\n      return [props.field.toString()];\n    });\n\n    // 饼图数据\n    const pieChartData = computed(() => {\n      if (!props.field) return [];\n      if (Array.isArray(props.field)) {\n        return props.field.filter(item => {\n          const value = item?.value || item?.raw;\n          return value !== undefined && value !== null;\n        }).map((item, index) => {\n          let value = safeToNumber(item.value || item.raw);\n          value = Math.min(100, Math.max(0, value));\n          return {\n            name: item.raw ? item.raw.replace(/:\\s*\\d+\\.?\\d*%?/g, \"\") : `项目${index + 1}`,\n            value,\n            ...(item.unit ? {\n              unit: item.unit\n            } : {}),\n            ...(item.year ? {\n              year: item.year\n            } : {})\n          };\n        });\n      }\n      if (typeof props.field === \"object\") {\n        let value = safeToNumber(props.field.value || props.field.raw);\n        value = Math.min(100, Math.max(0, value));\n        return [{\n          name: props.field.raw ? props.field.raw.replace(/:\\s*\\d+\\.?\\d*%?/g, \"\") : \"项目\",\n          value,\n          ...(props.field.unit ? {\n            unit: props.field.unit\n          } : {}),\n          ...(props.field.year ? {\n            year: props.field.year\n          } : {})\n        }];\n      }\n      return [];\n    });\n\n    // 柱状图数据\n    const barChartData = computed(() => {\n      if (!props.field) return [];\n      if (Array.isArray(props.field)) {\n        return props.field.filter(item => {\n          const value = item?.value || item?.raw;\n          return value !== undefined && value !== null;\n        }).map((item, index) => {\n          const value = safeToNumber(item.value || item.raw);\n          return {\n            name: item.raw ? item.raw.replace(/:\\s*\\d+\\.?\\d*%?/g, \"\") : `项目${index + 1}`,\n            value,\n            ...(item.unit ? {\n              unit: item.unit\n            } : {}),\n            ...(item.year ? {\n              year: item.year\n            } : {})\n          };\n        });\n      }\n      if (typeof props.field === \"object\") {\n        const value = safeToNumber(props.field.value || props.field.raw);\n        return [{\n          name: props.field.raw ? props.field.raw.replace(/:\\s*\\d+\\.?\\d*%?/g, \"\") : \"项目\",\n          value,\n          ...(props.field.unit ? {\n            unit: props.field.unit\n          } : {}),\n          ...(props.field.year ? {\n            year: props.field.year\n          } : {})\n        }];\n      }\n      const value = safeToNumber(props.field);\n      return [{\n        name: \"值\",\n        value\n      }];\n    });\n\n    // 折线图数据\n    const lineChartData = computed(() => {\n      if (!props.field) return [];\n      if (Array.isArray(props.field)) {\n        return props.field.filter(item => {\n          const value = item?.value || item?.raw;\n          return value !== undefined && value !== null;\n        }).map((item, index) => {\n          const value = safeToNumber(item.value || item.raw);\n          const year = item.year || index + 1;\n          return {\n            year,\n            value,\n            ...(item.unit ? {\n              unit: item.unit\n            } : {})\n          };\n        }).sort((a, b) => a.year - b.year);\n      }\n      if (typeof props.field === \"object\") {\n        const value = safeToNumber(props.field.value || props.field.raw);\n        const year = props.field.year || 1;\n        return [{\n          year,\n          value,\n          ...(props.field.unit ? {\n            unit: props.field.unit\n          } : {})\n        }];\n      }\n      const value = safeToNumber(props.field);\n      return [{\n        year: 1,\n        value\n      }];\n    });\n    const hasData = computed(() => {\n      if (!props.field) return false;\n      if (Array.isArray(props.field)) return props.field.length > 0;\n      if (typeof props.field === \"object\") return Object.keys(props.field).length > 0;\n      return String(props.field).trim().length > 0;\n    });\n    const renderChart = () => {\n      const container = document.querySelector(\".chart-container\");\n      const width = container.clientWidth;\n      const height = container.clientHeight;\n      const margin = {\n        top: 20,\n        right: 30,\n        bottom: 40,\n        left: 40\n      };\n      const svg = d3.select(container).append(\"svg\").attr(\"width\", width).attr(\"height\", height).append(\"g\").attr(\"transform\", `translate(${margin.left},${margin.top})`);\n      const x = d3.scaleBand().domain(barChartData.value.map(d => d.name)).range([0, width - margin.left - margin.right]).padding(0.1);\n      const y = d3.scaleLinear().domain([0, d3.max(barChartData.value, d => d.value)]).nice().range([height - margin.top - margin.bottom, 0]);\n      svg.append(\"g\").attr(\"class\", \"x-axis\").attr(\"transform\", `translate(0,${height - margin.top - margin.bottom})`).call(d3.axisBottom(x));\n      svg.append(\"g\").attr(\"class\", \"y-axis\").call(d3.axisLeft(y));\n      svg.selectAll(\".bar\").data(barChartData.value).enter().append(\"rect\").attr(\"class\", \"bar\").attr(\"x\", d => x(d.name)).attr(\"y\", d => y(d.value)).attr(\"width\", x.bandwidth()).attr(\"height\", d => y(0) - y(d.value)).attr(\"fill\", \"#3498db\").on(\"mouseover\", function (event, d) {\n        d3.select(this).attr(\"fill\", \"#2980b9\");\n      }).on(\"mouseout\", function (event, d) {\n        d3.select(this).attr(\"fill\", \"#3498db\");\n      });\n\n      // 添加图注\n      svg.append(\"text\").attr(\"x\", width / 2).attr(\"y\", -10).attr(\"text-anchor\", \"middle\").style(\"font-size\", \"16px\").text(\"图表标题\");\n    };\n    const __returned__ = {\n      props,\n      safeToNumber,\n      formattedText,\n      pieChartData,\n      barChartData,\n      lineChartData,\n      hasData,\n      renderChart,\n      computed,\n      PieChart,\n      BarChart,\n      LineChart,\n      get d3() {\n        return d3;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["computed","PieChart","BarChart","LineChart","d3","props","__props","safeToNumber","value","undefined","numStr","toString","replace","num","parseFloat","isNaN","formattedText","field","Array","isArray","map","item","text","raw","JSON","stringify","unit","year","pieChartData","filter","index","Math","min","max","name","barChartData","lineChartData","sort","a","b","hasData","length","Object","keys","String","trim","renderChart","container","document","querySelector","width","clientWidth","height","clientHeight","margin","top","right","bottom","left","svg","select","append","attr","x","scaleBand","domain","d","range","padding","y","scaleLinear","nice","call","axisBottom","axisLeft","selectAll","data","enter","bandwidth","on","event","style"],"sources":["D:/vue_frame/vue_frame/wikitable-vue/client/src/components/compoents_base/FullChart.vue"],"sourcesContent":["<template>\r\n\t<div class=\"full-chart\">\r\n\t\t<!-- 文本显示 -->\r\n\t\t<template v-if=\"visualization === 'text-only'\">\r\n\t\t\t<div class=\"full-text\">\r\n\t\t\t\t<div\r\n\t\t\t\t\tv-for=\"(item, index) in formattedText\"\r\n\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\tclass=\"text-item\">\r\n\t\t\t\t\t{{ item }}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</template>\r\n\r\n\t\t<!-- 完整饼图 -->\r\n\t\t<template v-else-if=\"visualization === 'pie-chart'\">\r\n\t\t\t<div v-if=\"hasData\" class=\"chart-container\">\r\n\t\t\t\t<PieChart :data=\"pieChartData\" />\r\n\t\t\t</div>\r\n\t\t\t<div v-else class=\"no-data\">无可用数据</div>\r\n\t\t</template>\r\n\r\n\t\t<!-- 完整柱状图 -->\r\n\t\t<template v-else-if=\"visualization === 'bar-chart'\">\r\n\t\t\t<div v-if=\"hasData\" class=\"chart-container\">\r\n\t\t\t\t<BarChart :data=\"barChartData\" :field-key=\"fieldKey\" />\r\n\t\t\t</div>\r\n\t\t\t<div v-else class=\"no-data\">无可用数据</div>\r\n\t\t</template>\r\n\r\n\t\t<!-- 完整折线图 -->\r\n\t\t<template v-else-if=\"visualization === 'line-chart'\">\r\n\t\t\t<div v-if=\"hasData\" class=\"chart-container\">\r\n\t\t\t\t<LineChart :data=\"lineChartData\" />\r\n\t\t\t</div>\r\n\t\t\t<div v-else class=\"no-data\">无可用数据</div>\r\n\t\t</template>\r\n\r\n\t\t<!-- 默认显示 -->\r\n\t\t<template v-else>\r\n\t\t\t<div class=\"full-text\">\r\n\t\t\t\t<div\r\n\t\t\t\t\tv-for=\"(item, index) in formattedText\"\r\n\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\tclass=\"text-item\">\r\n\t\t\t\t\t{{ item }}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</template>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { computed } from \"vue\";\r\n\timport PieChart from \"./charts/PieChart.vue\";\r\n\timport BarChart from \"./charts/BarChart.vue\";\r\n\timport LineChart from \"./charts/LineChart.vue\";\r\n\timport * as d3 from \"d3\";\r\n\r\n\tconst props = defineProps({\r\n\t\tfield: [Object, Array, String, Number],\r\n\t\ttype: String,\r\n\t\tvisualization: String,\r\n\t\tfieldKey: String\r\n\t});\r\n\r\n\t// 安全转换为数字\r\n\tconst safeToNumber = value => {\r\n\t\tif (value === null || value === undefined) return 0;\r\n\t\tif (typeof value === \"number\") return value;\r\n\t\tif (typeof value === \"string\") {\r\n\t\t\tconst numStr = value.toString().replace(/[^0-9.-]/g, \"\");\r\n\t\t\tconst num = parseFloat(numStr);\r\n\t\t\treturn isNaN(num) ? 0 : num;\r\n\t\t}\r\n\t\treturn 0;\r\n\t};\r\n\r\n\t// 格式化文本\r\n\tconst formattedText = computed(() => {\r\n\t\tif (!props.field) return [\"-\"];\r\n\r\n\t\tif (Array.isArray(props.field)) {\r\n\t\t\treturn props.field.map(item => {\r\n\t\t\t\tif (typeof item === \"object\") {\r\n\t\t\t\t\tlet text = \"\";\r\n\t\t\t\t\tif (item.raw) text = item.raw;\r\n\t\t\t\t\telse if (item.value) text = item.value;\r\n\t\t\t\t\telse text = JSON.stringify(item);\r\n\r\n\t\t\t\t\tif (item.unit) text += ` ${item.unit}`;\r\n\t\t\t\t\tif (item.year) text += ` (${item.year})`;\r\n\t\t\t\t\treturn text;\r\n\t\t\t\t}\r\n\t\t\t\treturn item.toString();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (typeof props.field === \"object\") {\r\n\t\t\tlet text = \"\";\r\n\t\t\tif (props.field.raw) text = props.field.raw;\r\n\t\t\telse if (props.field.value) text = props.field.value;\r\n\t\t\telse text = JSON.stringify(props.field);\r\n\r\n\t\t\tif (props.field.unit) text += ` ${props.field.unit}`;\r\n\t\t\tif (props.field.year) text += ` (${props.field.year})`;\r\n\t\t\treturn [text];\r\n\t\t}\r\n\r\n\t\treturn [props.field.toString()];\r\n\t});\r\n\r\n\t// 饼图数据\r\n\tconst pieChartData = computed(() => {\r\n\t\tif (!props.field) return [];\r\n\r\n\t\tif (Array.isArray(props.field)) {\r\n\t\t\treturn props.field\r\n\t\t\t\t.filter(item => {\r\n\t\t\t\t\tconst value = item?.value || item?.raw;\r\n\t\t\t\t\treturn value !== undefined && value !== null;\r\n\t\t\t\t})\r\n\t\t\t\t.map((item, index) => {\r\n\t\t\t\t\tlet value = safeToNumber(item.value || item.raw);\r\n\t\t\t\t\tvalue = Math.min(100, Math.max(0, value));\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tname: item.raw\r\n\t\t\t\t\t\t\t? item.raw.replace(/:\\s*\\d+\\.?\\d*%?/g, \"\")\r\n\t\t\t\t\t\t\t: `项目${index + 1}`,\r\n\t\t\t\t\t\tvalue,\r\n\t\t\t\t\t\t...(item.unit ? { unit: item.unit } : {}),\r\n\t\t\t\t\t\t...(item.year ? { year: item.year } : {})\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (typeof props.field === \"object\") {\r\n\t\t\tlet value = safeToNumber(props.field.value || props.field.raw);\r\n\t\t\tvalue = Math.min(100, Math.max(0, value));\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tname: props.field.raw\r\n\t\t\t\t\t\t? props.field.raw.replace(/:\\s*\\d+\\.?\\d*%?/g, \"\")\r\n\t\t\t\t\t\t: \"项目\",\r\n\t\t\t\t\tvalue,\r\n\t\t\t\t\t...(props.field.unit ? { unit: props.field.unit } : {}),\r\n\t\t\t\t\t...(props.field.year ? { year: props.field.year } : {})\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t}\r\n\r\n\t\treturn [];\r\n\t});\r\n\r\n\t// 柱状图数据\r\n\tconst barChartData = computed(() => {\r\n\t\tif (!props.field) return [];\r\n\r\n\t\tif (Array.isArray(props.field)) {\r\n\t\t\treturn props.field\r\n\t\t\t\t.filter(item => {\r\n\t\t\t\t\tconst value = item?.value || item?.raw;\r\n\t\t\t\t\treturn value !== undefined && value !== null;\r\n\t\t\t\t})\r\n\t\t\t\t.map((item, index) => {\r\n\t\t\t\t\tconst value = safeToNumber(item.value || item.raw);\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tname: item.raw\r\n\t\t\t\t\t\t\t? item.raw.replace(/:\\s*\\d+\\.?\\d*%?/g, \"\")\r\n\t\t\t\t\t\t\t: `项目${index + 1}`,\r\n\t\t\t\t\t\tvalue,\r\n\t\t\t\t\t\t...(item.unit ? { unit: item.unit } : {}),\r\n\t\t\t\t\t\t...(item.year ? { year: item.year } : {})\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (typeof props.field === \"object\") {\r\n\t\t\tconst value = safeToNumber(props.field.value || props.field.raw);\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tname: props.field.raw\r\n\t\t\t\t\t\t? props.field.raw.replace(/:\\s*\\d+\\.?\\d*%?/g, \"\")\r\n\t\t\t\t\t\t: \"项目\",\r\n\t\t\t\t\tvalue,\r\n\t\t\t\t\t...(props.field.unit ? { unit: props.field.unit } : {}),\r\n\t\t\t\t\t...(props.field.year ? { year: props.field.year } : {})\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t}\r\n\r\n\t\tconst value = safeToNumber(props.field);\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tname: \"值\",\r\n\t\t\t\tvalue\r\n\t\t\t}\r\n\t\t];\r\n\t});\r\n\r\n\t// 折线图数据\r\n\tconst lineChartData = computed(() => {\r\n\t\tif (!props.field) return [];\r\n\r\n\t\tif (Array.isArray(props.field)) {\r\n\t\t\treturn props.field\r\n\t\t\t\t.filter(item => {\r\n\t\t\t\t\tconst value = item?.value || item?.raw;\r\n\t\t\t\t\treturn value !== undefined && value !== null;\r\n\t\t\t\t})\r\n\t\t\t\t.map((item, index) => {\r\n\t\t\t\t\tconst value = safeToNumber(item.value || item.raw);\r\n\t\t\t\t\tconst year = item.year || index + 1;\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tyear,\r\n\t\t\t\t\t\tvalue,\r\n\t\t\t\t\t\t...(item.unit ? { unit: item.unit } : {})\r\n\t\t\t\t\t};\r\n\t\t\t\t})\r\n\t\t\t\t.sort((a, b) => a.year - b.year);\r\n\t\t}\r\n\r\n\t\tif (typeof props.field === \"object\") {\r\n\t\t\tconst value = safeToNumber(props.field.value || props.field.raw);\r\n\t\t\tconst year = props.field.year || 1;\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tyear,\r\n\t\t\t\t\tvalue,\r\n\t\t\t\t\t...(props.field.unit ? { unit: props.field.unit } : {})\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t}\r\n\r\n\t\tconst value = safeToNumber(props.field);\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tyear: 1,\r\n\t\t\t\tvalue\r\n\t\t\t}\r\n\t\t];\r\n\t});\r\n\r\n\tconst hasData = computed(() => {\r\n\t\tif (!props.field) return false;\r\n\t\tif (Array.isArray(props.field)) return props.field.length > 0;\r\n\t\tif (typeof props.field === \"object\")\r\n\t\t\treturn Object.keys(props.field).length > 0;\r\n\t\treturn String(props.field).trim().length > 0;\r\n\t});\r\n\r\n\tconst renderChart = () => {\r\n\t\tconst container = document.querySelector(\".chart-container\");\r\n\t\tconst width = container.clientWidth;\r\n\t\tconst height = container.clientHeight;\r\n\t\tconst margin = { top: 20, right: 30, bottom: 40, left: 40 };\r\n\r\n\t\tconst svg = d3\r\n\t\t\t.select(container)\r\n\t\t\t.append(\"svg\")\r\n\t\t\t.attr(\"width\", width)\r\n\t\t\t.attr(\"height\", height)\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"transform\", `translate(${margin.left},${margin.top})`);\r\n\r\n\t\tconst x = d3\r\n\t\t\t.scaleBand()\r\n\t\t\t.domain(barChartData.value.map(d => d.name))\r\n\t\t\t.range([0, width - margin.left - margin.right])\r\n\t\t\t.padding(0.1);\r\n\r\n\t\tconst y = d3\r\n\t\t\t.scaleLinear()\r\n\t\t\t.domain([0, d3.max(barChartData.value, d => d.value)])\r\n\t\t\t.nice()\r\n\t\t\t.range([height - margin.top - margin.bottom, 0]);\r\n\r\n\t\tsvg\r\n\t\t\t.append(\"g\")\r\n\t\t\t.attr(\"class\", \"x-axis\")\r\n\t\t\t.attr(\"transform\", `translate(0,${height - margin.top - margin.bottom})`)\r\n\t\t\t.call(d3.axisBottom(x));\r\n\r\n\t\tsvg.append(\"g\").attr(\"class\", \"y-axis\").call(d3.axisLeft(y));\r\n\r\n\t\tsvg\r\n\t\t\t.selectAll(\".bar\")\r\n\t\t\t.data(barChartData.value)\r\n\t\t\t.enter()\r\n\t\t\t.append(\"rect\")\r\n\t\t\t.attr(\"class\", \"bar\")\r\n\t\t\t.attr(\"x\", d => x(d.name))\r\n\t\t\t.attr(\"y\", d => y(d.value))\r\n\t\t\t.attr(\"width\", x.bandwidth())\r\n\t\t\t.attr(\"height\", d => y(0) - y(d.value))\r\n\t\t\t.attr(\"fill\", \"#3498db\")\r\n\t\t\t.on(\"mouseover\", function (event, d) {\r\n\t\t\t\td3.select(this).attr(\"fill\", \"#2980b9\");\r\n\t\t\t})\r\n\t\t\t.on(\"mouseout\", function (event, d) {\r\n\t\t\t\td3.select(this).attr(\"fill\", \"#3498db\");\r\n\t\t\t});\r\n\r\n\t\t// 添加图注\r\n\t\tsvg\r\n\t\t\t.append(\"text\")\r\n\t\t\t.attr(\"x\", width / 2)\r\n\t\t\t.attr(\"y\", -10)\r\n\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t.style(\"font-size\", \"16px\")\r\n\t\t\t.text(\"图表标题\");\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t.full-chart {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.full-text {\r\n\t\tpadding: 10px;\r\n\t}\r\n\r\n\t.text-item {\r\n\t\tmargin-bottom: 8px;\r\n\t\tpadding: 5px;\r\n\t\tborder-bottom: 1px solid #eee;\r\n\t}\r\n\r\n\t.chart-container {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tmin-height: 300px;\r\n\t}\r\n\r\n\t.no-data {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\theight: 100%;\r\n\t\tcolor: #999;\r\n\t\tfont-style: italic;\r\n\t}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}