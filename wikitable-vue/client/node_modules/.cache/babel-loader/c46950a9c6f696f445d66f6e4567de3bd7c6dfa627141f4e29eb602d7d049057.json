{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted, onUnmounted, watch, nextTick } from \"vue\";\nimport bus from \"@/js/eventBus.js\";\nimport CompareTable from \"@/components/compoents_base/CompareTable.vue\";\n\n// 状态变量\n\nexport default {\n  __name: 'Div2',\n  setup(__props, _ref) {\n    let {\n      expose: __expose\n    } = _ref;\n    __expose();\n    const userQuestion = ref(\"\");\n    const chatHistory = ref([]);\n    const isLoading = ref(false);\n    const showSuggestedQuestion = ref(false);\n    const suggestedQuestion = ref(\"结合其他属性深入分析原因\");\n    const currentComparison = ref(null);\n\n    // 数据存储\n    const div1RawData = ref(null);\n    const div3RawData = ref(null);\n    const div1InfoboxData = ref(null);\n    const div3InfoboxData = ref(null);\n\n    // 初始化监听\n    onMounted(() => {\n      bus.on(\"div1_InfoboxData\", data => {\n        div1InfoboxData.value = data;\n      });\n      bus.on(\"div3_InfoboxData\", data => {\n        div3InfoboxData.value = data;\n      });\n    });\n    onUnmounted(() => {\n      bus.off(\"div1_InfoboxData\");\n      bus.off(\"div3_InfoboxData\");\n    });\n\n    // 处理属性对比\n    const handleAttributeComparison = async _ref2 => {\n      let {\n        fieldKey,\n        leftData,\n        rightData,\n        leftTitle,\n        rightTitle,\n        fieldType,\n        fieldLabel\n      } = _ref2;\n      currentComparison.value = {\n        fieldKey,\n        leftData,\n        rightData,\n        leftTitle,\n        rightTitle,\n        fieldType,\n        fieldLabel\n      };\n      const payload = {\n        chartType: \"comparison\",\n        chartData: {\n          fieldKey,\n          leftData,\n          rightData,\n          leftTitle,\n          rightTitle,\n          fieldType,\n          fieldLabel,\n          leftInfobox: simplifyInfobox(div1InfoboxData.value),\n          rightInfobox: simplifyInfobox(div3InfoboxData.value)\n        }\n      };\n      await callAnalysisAPI(payload, `系统正在对比【${fieldLabel}】属性`);\n    };\n\n    // 处理用户提问\n    const askQuestion = async () => {\n      if (!userQuestion.value.trim()) {\n        showError(\"问题不能为空\");\n        return;\n      }\n      const payload = {\n        chartType: \"comparison\",\n        chartData: {\n          leftInfobox: simplifyInfobox(div1InfoboxData.value),\n          rightInfobox: simplifyInfobox(div3InfoboxData.value),\n          fieldKey: currentComparison.value?.fieldKey,\n          previousAnalysis: getLastAnalysis(),\n          userQuestion: userQuestion.value\n        },\n        followUp: true\n      };\n      await callAnalysisAPI(payload, userQuestion.value);\n      userQuestion.value = \"\";\n    };\n\n    // 统一API调用\n    const callAnalysisAPI = async (payload, userMessage) => {\n      addMessage(\"user\", userMessage);\n      isLoading.value = true;\n      showSuggestedQuestion.value = false;\n      try {\n        await api.post(\"compare_attributes\", payload, response => {\n          addMessage(\"assistant\", response.analysis);\n          if (response.suggestedFollowup) {\n            showSuggestedQuestion.value = true;\n          }\n        }, error => {\n          throw error;\n        });\n      } catch (error) {\n        showError(`请求失败: ${error.message || \"未知错误\"}`);\n      } finally {\n        isLoading.value = false;\n        scrollToBottom();\n      }\n    };\n\n    // 使用建议问题\n    const useSuggestedQuestion = () => {\n      userQuestion.value = suggestedQuestion.value;\n      showSuggestedQuestion.value = false;\n      nextTick(() => {\n        const textarea = document.querySelector(\".input-container textarea\");\n        textarea.focus();\n        textarea.setSelectionRange(textarea.value.length, textarea.value.length);\n      });\n    };\n\n    // 辅助方法\n    const simplifyInfobox = infobox => {\n      if (!infobox) return {};\n      const fieldsToKeep = [\"score\", \"rate\", \"value\", \"amount\", \"size\", \"level\"];\n      return Object.fromEntries(Object.entries(infobox).filter(_ref3 => {\n        let [key, value] = _ref3;\n        return fieldsToKeep.includes(key) || typeof value === \"number\" || typeof value === \"string\" && value.length < 30;\n      }));\n    };\n    const getLastAnalysis = () => {\n      for (let i = chatHistory.value.length - 1; i >= 0; i--) {\n        if (chatHistory.value[i].role === \"assistant\") {\n          const div = document.createElement(\"div\");\n          div.innerHTML = chatHistory.value[i].content;\n          return div.textContent.substring(0, 200);\n        }\n      }\n      return \"\";\n    };\n    const addMessage = function (role, content) {\n      let error = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      chatHistory.value.push({\n        role,\n        content: formatAnalysisResult(content),\n        timestamp: new Date().toLocaleString(),\n        error\n      });\n    };\n    const showError = message => {\n      addMessage(\"assistant\", message, true);\n    };\n    const scrollToBottom = () => {\n      nextTick(() => {\n        const container = document.querySelector(\".chat-history\");\n        if (container) container.scrollTop = container.scrollHeight;\n      });\n    };\n    const formatAnalysisResult = text => {\n      if (!text) return \"\";\n      return text.replace(/^# (.*$)/gm, \"<h1>$1</h1>\").replace(/^## (.*$)/gm, \"<h2>$1</h2>\").replace(/^### (.*$)/gm, \"<h3>$1</h3>\").replace(/\\*\\*(.*?)\\*\\*/g, \"<strong>$1</strong>\").replace(/\\*(.*?)\\*/g, \"<em>$1</em>\").replace(/`(.*?)`/g, \"<code>$1</code>\").replace(/(?:^|\\n)\\d+\\.\\s+(.*)/g, \"<li>$1</li>\").replace(/(?:^|\\n)-\\s+(.*)/g, \"<li>$1</li>\").replace(/(?:^|\\n)\\>\\s+(.*)/g, \"<blockquote>$1</blockquote>\").replace(/(<li>.*<\\/li>)/gs, \"<ul>$1</ul>\").replace(/\\n\\n/g, \"<br><br>\").replace(/\\n/g, \"<br>\");\n    };\n\n    // 监听聊天历史变化自动保存\n    watch(chatHistory, newVal => {\n      localStorage.setItem(\"chatHistory\", JSON.stringify(newVal));\n    }, {\n      deep: true\n    });\n\n    // 初始化加载聊天记录\n    const loadChatHistory = () => {\n      const saved = localStorage.getItem(\"chatHistory\");\n      if (saved) {\n        try {\n          chatHistory.value = JSON.parse(saved);\n        } catch (e) {\n          console.error(\"加载聊天记录失败:\", e);\n        }\n      }\n    };\n\n    // 组件挂载时加载记录\n    onMounted(loadChatHistory);\n    const __returned__ = {\n      userQuestion,\n      chatHistory,\n      isLoading,\n      showSuggestedQuestion,\n      suggestedQuestion,\n      currentComparison,\n      div1RawData,\n      div3RawData,\n      div1InfoboxData,\n      div3InfoboxData,\n      handleAttributeComparison,\n      askQuestion,\n      callAnalysisAPI,\n      useSuggestedQuestion,\n      simplifyInfobox,\n      getLastAnalysis,\n      addMessage,\n      showError,\n      scrollToBottom,\n      formatAnalysisResult,\n      loadChatHistory,\n      ref,\n      onMounted,\n      onUnmounted,\n      watch,\n      nextTick,\n      get bus() {\n        return bus;\n      },\n      CompareTable\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","onUnmounted","watch","nextTick","bus","CompareTable","userQuestion","chatHistory","isLoading","showSuggestedQuestion","suggestedQuestion","currentComparison","div1RawData","div3RawData","div1InfoboxData","div3InfoboxData","on","data","value","off","handleAttributeComparison","_ref2","fieldKey","leftData","rightData","leftTitle","rightTitle","fieldType","fieldLabel","payload","chartType","chartData","leftInfobox","simplifyInfobox","rightInfobox","callAnalysisAPI","askQuestion","trim","showError","previousAnalysis","getLastAnalysis","followUp","userMessage","addMessage","api","post","response","analysis","suggestedFollowup","error","message","scrollToBottom","useSuggestedQuestion","textarea","document","querySelector","focus","setSelectionRange","length","infobox","fieldsToKeep","Object","fromEntries","entries","filter","_ref3","key","includes","i","role","div","createElement","innerHTML","content","textContent","substring","arguments","undefined","push","formatAnalysisResult","timestamp","Date","toLocaleString","container","scrollTop","scrollHeight","text","replace","newVal","localStorage","setItem","JSON","stringify","deep","loadChatHistory","saved","getItem","parse","e","console"],"sources":["D:/vue_frame/vue_frame/wikitable-vue/client/src/components/Div2.vue"],"sourcesContent":["<template>\r\n\t<div class=\"main-container\">\r\n\t\t<div class=\"chat-container\">\r\n\t\t\t<div class=\"chat-history\">\r\n\t\t\t\t<div\r\n\t\t\t\t\tv-for=\"(message, index) in chatHistory\"\r\n\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t:class=\"['message', message.role, { error: message.error }]\">\r\n\t\t\t\t\t<div class=\"message-content\" v-html=\"message.content\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div v-if=\"isLoading\" class=\"loading-indicator\">\r\n\t\t\t\t\t<div class=\"loading-spinner\"></div>\r\n\t\t\t\t\t正在处理中...\r\n\t\t\t\t</div>\r\n\t\t\t\t<div v-if=\"showSuggestedQuestion\" class=\"suggested-question\">\r\n\t\t\t\t\t<div class=\"suggestion-text\">建议深入分析的问题：</div>\r\n\t\t\t\t\t<div class=\"suggestion-content\" @click=\"useSuggestedQuestion\">\r\n\t\t\t\t\t\t结合其他属性深入分析原因\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"vis-container\">\r\n\t\t\t<CompareTable\r\n\t\t\t\tclass=\"compare-table\"\r\n\t\t\t\t:div1-raw-data=\"div1RawData\"\r\n\t\t\t\t:div3-raw-data=\"div3RawData\"\r\n\t\t\t\t@compareAttribute=\"handleAttributeComparison\" />\r\n\t\t</div>\r\n\t\t<div class=\"input-area\">\r\n\t\t\t<div class=\"input-container\">\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tv-model=\"userQuestion\"\r\n\t\t\t\t\trows=\"2\"\r\n\t\t\t\t\tplaceholder=\"请输入你想问的问题...\"\r\n\t\t\t\t\t:disabled=\"isLoading\"\r\n\t\t\t\t\t@keyup.enter=\"askQuestion\"></textarea>\r\n\t\t\t\t<div class=\"button-container\">\r\n\t\t\t\t\t<button @click=\"askQuestion\" :disabled=\"isLoading\">\r\n\t\t\t\t\t\t{{ isLoading ? \"处理中...\" : \"发送\" }}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ref, onMounted, onUnmounted, watch, nextTick } from \"vue\";\r\n\timport bus from \"@/js/eventBus.js\";\r\n\timport CompareTable from \"@/components/compoents_base/CompareTable.vue\";\r\n\r\n\t// 状态变量\r\n\tconst userQuestion = ref(\"\");\r\n\tconst chatHistory = ref([]);\r\n\tconst isLoading = ref(false);\r\n\tconst showSuggestedQuestion = ref(false);\r\n\tconst suggestedQuestion = ref(\"结合其他属性深入分析原因\");\r\n\tconst currentComparison = ref(null);\r\n\r\n\t// 数据存储\r\n\tconst div1RawData = ref(null);\r\n\tconst div3RawData = ref(null);\r\n\tconst div1InfoboxData = ref(null);\r\n\tconst div3InfoboxData = ref(null);\r\n\r\n\t// 初始化监听\r\n\tonMounted(() => {\r\n\t\tbus.on(\"div1_InfoboxData\", data => {\r\n\t\t\tdiv1InfoboxData.value = data;\r\n\t\t});\r\n\t\tbus.on(\"div3_InfoboxData\", data => {\r\n\t\t\tdiv3InfoboxData.value = data;\r\n\t\t});\r\n\t});\r\n\r\n\tonUnmounted(() => {\r\n\t\tbus.off(\"div1_InfoboxData\");\r\n\t\tbus.off(\"div3_InfoboxData\");\r\n\t});\r\n\r\n\t// 处理属性对比\r\n\tconst handleAttributeComparison = async ({\r\n\t\tfieldKey,\r\n\t\tleftData,\r\n\t\trightData,\r\n\t\tleftTitle,\r\n\t\trightTitle,\r\n\t\tfieldType,\r\n\t\tfieldLabel\r\n\t}) => {\r\n\t\tcurrentComparison.value = {\r\n\t\t\tfieldKey,\r\n\t\t\tleftData,\r\n\t\t\trightData,\r\n\t\t\tleftTitle,\r\n\t\t\trightTitle,\r\n\t\t\tfieldType,\r\n\t\t\tfieldLabel\r\n\t\t};\r\n\r\n\t\tconst payload = {\r\n\t\t\tchartType: \"comparison\",\r\n\t\t\tchartData: {\r\n\t\t\t\tfieldKey,\r\n\t\t\t\tleftData,\r\n\t\t\t\trightData,\r\n\t\t\t\tleftTitle,\r\n\t\t\t\trightTitle,\r\n\t\t\t\tfieldType,\r\n\t\t\t\tfieldLabel,\r\n\t\t\t\tleftInfobox: simplifyInfobox(div1InfoboxData.value),\r\n\t\t\t\trightInfobox: simplifyInfobox(div3InfoboxData.value)\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tawait callAnalysisAPI(payload, `系统正在对比【${fieldLabel}】属性`);\r\n\t};\r\n\r\n\t// 处理用户提问\r\n\tconst askQuestion = async () => {\r\n\t\tif (!userQuestion.value.trim()) {\r\n\t\t\tshowError(\"问题不能为空\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst payload = {\r\n\t\t\tchartType: \"comparison\",\r\n\t\t\tchartData: {\r\n\t\t\t\tleftInfobox: simplifyInfobox(div1InfoboxData.value),\r\n\t\t\t\trightInfobox: simplifyInfobox(div3InfoboxData.value),\r\n\t\t\t\tfieldKey: currentComparison.value?.fieldKey,\r\n\t\t\t\tpreviousAnalysis: getLastAnalysis(),\r\n\t\t\t\tuserQuestion: userQuestion.value\r\n\t\t\t},\r\n\t\t\tfollowUp: true\r\n\t\t};\r\n\r\n\t\tawait callAnalysisAPI(payload, userQuestion.value);\r\n\t\tuserQuestion.value = \"\";\r\n\t};\r\n\r\n\t// 统一API调用\r\n\tconst callAnalysisAPI = async (payload, userMessage) => {\r\n\t\taddMessage(\"user\", userMessage);\r\n\t\tisLoading.value = true;\r\n\t\tshowSuggestedQuestion.value = false;\r\n\r\n\t\ttry {\r\n\t\t\tawait api.post(\r\n\t\t\t\t\"compare_attributes\",\r\n\t\t\t\tpayload,\r\n\t\t\t\tresponse => {\r\n\t\t\t\t\taddMessage(\"assistant\", response.analysis);\r\n\t\t\t\t\tif (response.suggestedFollowup) {\r\n\t\t\t\t\t\tshowSuggestedQuestion.value = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\terror => {\r\n\t\t\t\t\tthrow error;\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t} catch (error) {\r\n\t\t\tshowError(`请求失败: ${error.message || \"未知错误\"}`);\r\n\t\t} finally {\r\n\t\t\tisLoading.value = false;\r\n\t\t\tscrollToBottom();\r\n\t\t}\r\n\t};\r\n\r\n\t// 使用建议问题\r\n\tconst useSuggestedQuestion = () => {\r\n\t\tuserQuestion.value = suggestedQuestion.value;\r\n\t\tshowSuggestedQuestion.value = false;\r\n\t\tnextTick(() => {\r\n\t\t\tconst textarea = document.querySelector(\".input-container textarea\");\r\n\t\t\ttextarea.focus();\r\n\t\t\ttextarea.setSelectionRange(textarea.value.length, textarea.value.length);\r\n\t\t});\r\n\t};\r\n\r\n\t// 辅助方法\r\n\tconst simplifyInfobox = infobox => {\r\n\t\tif (!infobox) return {};\r\n\t\tconst fieldsToKeep = [\"score\", \"rate\", \"value\", \"amount\", \"size\", \"level\"];\r\n\t\treturn Object.fromEntries(\r\n\t\t\tObject.entries(infobox).filter(\r\n\t\t\t\t([key, value]) =>\r\n\t\t\t\t\tfieldsToKeep.includes(key) ||\r\n\t\t\t\t\ttypeof value === \"number\" ||\r\n\t\t\t\t\t(typeof value === \"string\" && value.length < 30)\r\n\t\t\t)\r\n\t\t);\r\n\t};\r\n\r\n\tconst getLastAnalysis = () => {\r\n\t\tfor (let i = chatHistory.value.length - 1; i >= 0; i--) {\r\n\t\t\tif (chatHistory.value[i].role === \"assistant\") {\r\n\t\t\t\tconst div = document.createElement(\"div\");\r\n\t\t\t\tdiv.innerHTML = chatHistory.value[i].content;\r\n\t\t\t\treturn div.textContent.substring(0, 200);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t};\r\n\r\n\tconst addMessage = (role, content, error = false) => {\r\n\t\tchatHistory.value.push({\r\n\t\t\trole,\r\n\t\t\tcontent: formatAnalysisResult(content),\r\n\t\t\ttimestamp: new Date().toLocaleString(),\r\n\t\t\terror\r\n\t\t});\r\n\t};\r\n\r\n\tconst showError = message => {\r\n\t\taddMessage(\"assistant\", message, true);\r\n\t};\r\n\r\n\tconst scrollToBottom = () => {\r\n\t\tnextTick(() => {\r\n\t\t\tconst container = document.querySelector(\".chat-history\");\r\n\t\t\tif (container) container.scrollTop = container.scrollHeight;\r\n\t\t});\r\n\t};\r\n\r\n\tconst formatAnalysisResult = text => {\r\n\t\tif (!text) return \"\";\r\n\t\treturn text\r\n\t\t\t.replace(/^# (.*$)/gm, \"<h1>$1</h1>\")\r\n\t\t\t.replace(/^## (.*$)/gm, \"<h2>$1</h2>\")\r\n\t\t\t.replace(/^### (.*$)/gm, \"<h3>$1</h3>\")\r\n\t\t\t.replace(/\\*\\*(.*?)\\*\\*/g, \"<strong>$1</strong>\")\r\n\t\t\t.replace(/\\*(.*?)\\*/g, \"<em>$1</em>\")\r\n\t\t\t.replace(/`(.*?)`/g, \"<code>$1</code>\")\r\n\t\t\t.replace(/(?:^|\\n)\\d+\\.\\s+(.*)/g, \"<li>$1</li>\")\r\n\t\t\t.replace(/(?:^|\\n)-\\s+(.*)/g, \"<li>$1</li>\")\r\n\t\t\t.replace(/(?:^|\\n)\\>\\s+(.*)/g, \"<blockquote>$1</blockquote>\")\r\n\t\t\t.replace(/(<li>.*<\\/li>)/gs, \"<ul>$1</ul>\")\r\n\t\t\t.replace(/\\n\\n/g, \"<br><br>\")\r\n\t\t\t.replace(/\\n/g, \"<br>\");\r\n\t};\r\n\r\n\t// 监听聊天历史变化自动保存\r\n\twatch(\r\n\t\tchatHistory,\r\n\t\tnewVal => {\r\n\t\t\tlocalStorage.setItem(\"chatHistory\", JSON.stringify(newVal));\r\n\t\t},\r\n\t\t{ deep: true }\r\n\t);\r\n\r\n\t// 初始化加载聊天记录\r\n\tconst loadChatHistory = () => {\r\n\t\tconst saved = localStorage.getItem(\"chatHistory\");\r\n\t\tif (saved) {\r\n\t\t\ttry {\r\n\t\t\t\tchatHistory.value = JSON.parse(saved);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(\"加载聊天记录失败:\", e);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// 组件挂载时加载记录\r\n\tonMounted(loadChatHistory);\r\n</script>\r\n\r\n<style scoped>\r\n\t.main-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\theight: 100vh;\r\n\t\tbackground: #f5f7fa;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.chat-container {\r\n\t\theight: 50vh;\r\n\t\tmin-height: 50vh;\r\n\t\toverflow: hidden;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tmargin: 10px;\r\n\t}\r\n\r\n\t.chat-history {\r\n\t\tflex: 1;\r\n\t\toverflow-y: auto;\r\n\t\tpadding: 20px;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-radius: 12px;\r\n\t\tbox-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\r\n\t\tscroll-behavior: smooth;\r\n\t\tborder: 1px solid #e0e0e0;\r\n\t}\r\n\r\n\t.vis-container {\r\n\t\theight: 30vh;\r\n\t\tmin-height: 30vh;\r\n\t\tpadding: 10px;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-radius: 12px;\r\n\t\tmargin: 0 10px;\r\n\t\tbox-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\r\n\t\toverflow: auto;\r\n\t\tborder: 1px solid #e0e0e0;\r\n\t}\r\n\r\n\t.compare-table {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.input-area {\r\n\t\theight: 15vh;\r\n\t\tmin-height: 15vh;\r\n\t\tpadding: 15px;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-top: 1px solid #e0e0e0;\r\n\t\tflex-shrink: 0;\r\n\t}\r\n\r\n\t.message {\r\n\t\tmargin-bottom: 20px;\r\n\t\tpadding: 15px 20px;\r\n\t\tborder-radius: 12px;\r\n\t\tline-height: 1.6;\r\n\t\tposition: relative;\r\n\t\tmax-width: 85%;\r\n\t\tbox-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);\r\n\t}\r\n\r\n\t.message.user {\r\n\t\tbackground: #e3f2fd;\r\n\t\tmargin-left: auto;\r\n\t\tborder-bottom-right-radius: 4px;\r\n\t\tborder: 1px solid #bbdefb;\r\n\t}\r\n\r\n\t.message.assistant {\r\n\t\tbackground: #f8f9fa;\r\n\t\tmargin-right: auto;\r\n\t\tborder-bottom-left-radius: 4px;\r\n\t\tborder: 1px solid #e0e0e0;\r\n\t}\r\n\r\n\t.message.error {\r\n\t\tbackground: #ffebee;\r\n\t\tborder-left: 4px solid #f44336;\r\n\t}\r\n\r\n\t.message-content {\r\n\t\tword-wrap: break-word;\r\n\t}\r\n\r\n\t.input-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-radius: 12px;\r\n\t\tbox-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n\t\theight: 100%;\r\n\t\tborder: 1px solid #e0e0e0;\r\n\t}\r\n\r\n\t.input-container textarea {\r\n\t\twidth: 100%;\r\n\t\tpadding: 12px 16px;\r\n\t\tborder: none;\r\n\t\tborder-radius: 12px;\r\n\t\tresize: none;\r\n\t\tfont-size: 14px;\r\n\t\toutline: none;\r\n\t\tbackground: #f9f9f9;\r\n\t}\r\n\r\n\t.input-container textarea:focus {\r\n\t\tbackground: #ffffff;\r\n\t}\r\n\r\n\t.button-container {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-end;\r\n\t\tpadding: 8px;\r\n\t}\r\n\r\n\t.button-container button {\r\n\t\tbackground: #4285f4;\r\n\t\tcolor: white;\r\n\t\tborder: none;\r\n\t\tpadding: 8px 20px;\r\n\t\tborder-radius: 8px;\r\n\t\tcursor: pointer;\r\n\t\tfont-size: 14px;\r\n\t\tfont-weight: 500;\r\n\t\ttransition: all 0.2s;\r\n\t}\r\n\r\n\t.button-container button:hover {\r\n\t\tbackground: #3367d6;\r\n\t\ttransform: translateY(-1px);\r\n\t}\r\n\r\n\t.button-container button:disabled {\r\n\t\tbackground: #b3c6e0;\r\n\t\tcursor: not-allowed;\r\n\t\ttransform: none;\r\n\t}\r\n\r\n\t.loading-indicator {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 15px;\r\n\t\tcolor: #666;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t.loading-spinner {\r\n\t\tborder: 3px solid rgba(66, 133, 244, 0.2);\r\n\t\tborder-radius: 50%;\r\n\t\tborder-top: 3px solid #4285f4;\r\n\t\twidth: 20px;\r\n\t\theight: 20px;\r\n\t\tanimation: spin 1s linear infinite;\r\n\t\tmargin-right: 10px;\r\n\t}\r\n\r\n\t@keyframes spin {\r\n\t\t0% {\r\n\t\t\ttransform: rotate(0deg);\r\n\t\t}\r\n\t\t100% {\r\n\t\t\ttransform: rotate(360deg);\r\n\t\t}\r\n\t}\r\n\r\n\t.markdown-content {\r\n\t\tline-height: 1.7;\r\n\t\tfont-size: 15px;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.markdown-content h1 {\r\n\t\tfont-size: 1.5em;\r\n\t\tmargin: 20px 0 15px;\r\n\t\tpadding-bottom: 5px;\r\n\t\tborder-bottom: 1px solid #eee;\r\n\t\tcolor: #2c3e50;\r\n\t}\r\n\r\n\t.markdown-content h2 {\r\n\t\tfont-size: 1.3em;\r\n\t\tmargin: 18px 0 12px;\r\n\t\tcolor: #34495e;\r\n\t}\r\n\r\n\t.markdown-content h3 {\r\n\t\tfont-size: 1.1em;\r\n\t\tmargin: 15px 0 10px;\r\n\t\tcolor: #4285f4;\r\n\t}\r\n\r\n\t.markdown-content ul,\r\n\t.markdown-content ol {\r\n\t\tpadding-left: 25px;\r\n\t\tmargin: 12px 0;\r\n\t}\r\n\r\n\t.markdown-content li {\r\n\t\tmargin-bottom: 8px;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.markdown-content ul li::before {\r\n\t\tcontent: \"•\";\r\n\t\tcolor: #4285f4;\r\n\t\tposition: absolute;\r\n\t\tleft: -15px;\r\n\t}\r\n\r\n\t.markdown-content strong {\r\n\t\tcolor: #2c3e50;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.markdown-content em {\r\n\t\tcolor: #666;\r\n\t\tfont-style: italic;\r\n\t}\r\n\r\n\t.markdown-content code {\r\n\t\tbackground: rgba(66, 133, 244, 0.1);\r\n\t\tpadding: 2px 6px;\r\n\t\tborder-radius: 4px;\r\n\t\tfont-family: \"SFMono-Regular\", Consolas, \"Liberation Mono\", Menlo, monospace;\r\n\t\tfont-size: 0.9em;\r\n\t\tcolor: #d63384;\r\n\t}\r\n\r\n\t.markdown-content blockquote {\r\n\t\tborder-left: 3px solid #4285f4;\r\n\t\tpadding: 10px 15px;\r\n\t\tmargin: 15px 0;\r\n\t\tbackground: rgba(66, 133, 244, 0.05);\r\n\t\tcolor: #555;\r\n\t}\r\n\r\n\t.suggested-question {\r\n\t\tmargin: 15px 0;\r\n\t\tpadding: 12px;\r\n\t\tbackground-color: #f5f7fa;\r\n\t\tborder-radius: 8px;\r\n\t\tborder: 1px dashed #4285f4;\r\n\t\tcursor: pointer;\r\n\t\ttransition: all 0.2s;\r\n\t}\r\n\r\n\t.suggested-question:hover {\r\n\t\tbackground-color: #e8f0fe;\r\n\t}\r\n\r\n\t.suggestion-text {\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #666;\r\n\t\tmargin-bottom: 5px;\r\n\t}\r\n\r\n\t.suggestion-content {\r\n\t\tcolor: #4285f4;\r\n\t\tfont-weight: 500;\r\n\t\tpadding: 5px;\r\n\t\tborder-radius: 4px;\r\n\t}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}