{"ast":null,"code":"import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createVNode as _createVNode, vModelText as _vModelText, withDirectives as _withDirectives, createStaticVNode as _createStaticVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-2e821d1e\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"main-container\"\n};\nconst _hoisted_2 = {\n  class: \"chat-container\"\n};\nconst _hoisted_3 = {\n  class: \"chat-history\"\n};\nconst _hoisted_4 = [\"innerHTML\"];\nconst _hoisted_5 = {\n  key: 0,\n  class: \"loading-indicator\"\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"loading-spinner\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_7 = {\n  key: 1,\n  class: \"suggested-question\"\n};\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"suggestion-text\"\n}, \"建议深入分析的问题：\", -1 /* HOISTED */));\nconst _hoisted_9 = {\n  key: 2,\n  class: \"causal-graph\"\n};\nconst _hoisted_10 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"graph-title\\\" data-v-2e821d1e>因果关系可视化分析</div><div id=\\\"causal-graph-container\\\" style=\\\"height:500px;\\\" data-v-2e821d1e></div><div class=\\\"graph-legend\\\" data-v-2e821d1e><div data-v-2e821d1e><span class=\\\"legend-node cause-node\\\" data-v-2e821d1e></span> 原因因素</div><div data-v-2e821d1e><span class=\\\"legend-node effect-node\\\" data-v-2e821d1e></span> 结果影响</div><div data-v-2e821d1e><span class=\\\"legend-link main-link\\\" data-v-2e821d1e></span> 主要因果关系</div><div data-v-2e821d1e><span class=\\\"legend-link secondary-link\\\" data-v-2e821d1e></span> 次要关联</div></div>\", 3);\nconst _hoisted_13 = [_hoisted_10];\nconst _hoisted_14 = {\n  class: \"vis-container\"\n};\nconst _hoisted_15 = {\n  class: \"input-area\"\n};\nconst _hoisted_16 = {\n  class: \"input-container\"\n};\nconst _hoisted_17 = [\"disabled\"];\nconst _hoisted_18 = {\n  class: \"button-container\"\n};\nconst _hoisted_19 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.chatHistory, (message, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      class: _normalizeClass(['message', message.role, {\n        error: message.error\n      }])\n    }, [_createElementVNode(\"div\", {\n      class: \"message-content\",\n      innerHTML: message.content\n    }, null, 8 /* PROPS */, _hoisted_4)], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */)), $setup.isLoading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_hoisted_6, _createTextVNode(\" 正在处理中... \")])) : _createCommentVNode(\"v-if\", true), $setup.showSuggestedQuestion ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_hoisted_8, _createElementVNode(\"div\", {\n    class: \"suggestion-content\",\n    onClick: $setup.useSuggestedQuestion\n  }, _toDisplayString($setup.suggestedQuestion), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), $setup.showCausalGraph ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [..._hoisted_13])) : _createCommentVNode(\"v-if\", true)])]), _createElementVNode(\"div\", _hoisted_14, [_createVNode($setup[\"CompareTable\"], {\n    class: \"compare-table\",\n    \"div1-raw-data\": $setup.div1RawData,\n    \"div3-raw-data\": $setup.div3RawData,\n    onCompareAttribute: $setup.handleAttributeComparison\n  }, null, 8 /* PROPS */, [\"div1-raw-data\", \"div3-raw-data\"])]), _createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"div\", _hoisted_16, [_withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.userQuestion = $event),\n    rows: \"2\",\n    placeholder: \"请输入你想问的问题...\",\n    disabled: $setup.isLoading\n  }, null, 8 /* PROPS */, _hoisted_17), [[_vModelText, $setup.userQuestion]]), _createElementVNode(\"div\", _hoisted_18, [_createElementVNode(\"button\", {\n    onClick: $setup.askQuestion,\n    disabled: $setup.isLoading\n  }, _toDisplayString($setup.isLoading ? \"处理中...\" : \"发送\"), 9 /* TEXT, PROPS */, _hoisted_19)])])])]);\n}","map":{"version":3,"names":["class","key","_createElementVNode","_createStaticVNode","_hoisted_10","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_Fragment","_renderList","$setup","chatHistory","message","index","_normalizeClass","role","error","innerHTML","content","_hoisted_4","isLoading","_hoisted_5","_hoisted_6","_createTextVNode","_createCommentVNode","showSuggestedQuestion","_hoisted_7","_hoisted_8","onClick","useSuggestedQuestion","suggestedQuestion","showCausalGraph","_hoisted_9","_hoisted_13","_hoisted_14","_createVNode","div1RawData","div3RawData","onCompareAttribute","handleAttributeComparison","_hoisted_15","_hoisted_16","_cache","$event","userQuestion","rows","placeholder","disabled","_hoisted_17","_hoisted_18","askQuestion","_hoisted_19"],"sources":["D:\\vue_frame\\vue_frame\\wikitable-vue\\client\\src\\components\\Div2.vue"],"sourcesContent":["<!-- Div2.vue -->\r\n<template>\r\n\t<div class=\"main-container\">\r\n\t\t<div class=\"chat-container\">\r\n\t\t\t<div class=\"chat-history\">\r\n\t\t\t\t<div\r\n\t\t\t\t\tv-for=\"(message, index) in chatHistory\"\r\n\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t:class=\"['message', message.role, { error: message.error }]\">\r\n\t\t\t\t\t<div class=\"message-content\" v-html=\"message.content\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div v-if=\"isLoading\" class=\"loading-indicator\">\r\n\t\t\t\t\t<div class=\"loading-spinner\"></div>\r\n\t\t\t\t\t正在处理中...\r\n\t\t\t\t</div>\r\n\t\t\t\t<div v-if=\"showSuggestedQuestion\" class=\"suggested-question\">\r\n\t\t\t\t\t<div class=\"suggestion-text\">建议深入分析的问题：</div>\r\n\t\t\t\t\t<div class=\"suggestion-content\" @click=\"useSuggestedQuestion\">\r\n\t\t\t\t\t\t{{ suggestedQuestion }}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div v-if=\"showCausalGraph\" class=\"causal-graph\">\r\n\t\t\t\t\t<div class=\"graph-title\">因果关系可视化分析</div>\r\n\t\t\t\t\t<div id=\"causal-graph-container\" style=\"height: 500px\"></div>\r\n\t\t\t\t\t<div class=\"graph-legend\">\r\n\t\t\t\t\t\t<div><span class=\"legend-node cause-node\"></span> 原因因素</div>\r\n\t\t\t\t\t\t<div><span class=\"legend-node effect-node\"></span> 结果影响</div>\r\n\t\t\t\t\t\t<div><span class=\"legend-link main-link\"></span> 主要因果关系</div>\r\n\t\t\t\t\t\t<div><span class=\"legend-link secondary-link\"></span> 次要关联</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"vis-container\">\r\n\t\t\t<CompareTable\r\n\t\t\t\tclass=\"compare-table\"\r\n\t\t\t\t:div1-raw-data=\"div1RawData\"\r\n\t\t\t\t:div3-raw-data=\"div3RawData\"\r\n\t\t\t\t@compareAttribute=\"handleAttributeComparison\" />\r\n\t\t</div>\r\n\t\t<div class=\"input-area\">\r\n\t\t\t<div class=\"input-container\">\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tv-model=\"userQuestion\"\r\n\t\t\t\t\trows=\"2\"\r\n\t\t\t\t\tplaceholder=\"请输入你想问的问题...\"\r\n\t\t\t\t\t:disabled=\"isLoading\"></textarea>\r\n\t\t\t\t<div class=\"button-container\">\r\n\t\t\t\t\t<button @click=\"askQuestion\" :disabled=\"isLoading\">\r\n\t\t\t\t\t\t{{ isLoading ? \"处理中...\" : \"发送\" }}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ref, onMounted, onUnmounted, watch, nextTick } from \"vue\";\r\n\timport bus from \"@/js/eventBus.js\";\r\n\timport CompareTable from \"@/components/compoents_base/CompareTable.vue\";\r\n\timport * as echarts from \"echarts\";\r\n\r\n\t// 数据状态\r\n\tconst userQuestion = ref(\"\");\r\n\tconst chatHistory = ref([]);\r\n\tconst selectText2 = ref(\"\");\r\n\tconst selectText3 = ref(\"\");\r\n\tconst div1RawData = ref(null);\r\n\tconst div3RawData = ref(null);\r\n\tconst isLoading = ref(false);\r\n\tconst div1InfoboxData = ref(null);\r\n\tconst div3InfoboxData = ref(null);\r\n\tconst showSuggestedQuestion = ref(false);\r\n\tconst suggestedQuestion = ref(\"\");\r\n\tconst currentFieldKey = ref(\"\");\r\n\tconst leftData = ref(null);\r\n\tconst rightData = ref(null);\r\n\r\n\t// 图表相关状态\r\n\tconst showCausalGraph = ref(false);\r\n\tlet causalChart = null;\r\n\r\n\t// 定义需要保留的关键字段\r\n\tconst PRESERVED_FIELDS_BY_SECTION = {\r\n\t\tStatistics: [\r\n\t\t\t\"Population\",\r\n\t\t\t\"GDP\",\r\n\t\t\t\"GDP rank\",\r\n\t\t\t\"GDP growth\",\r\n\t\t\t\"GDP per capita\",\r\n\t\t\t\"GDP per capita rank\",\r\n\t\t\t\"GDP by sector\",\r\n\t\t\t\"Inflation (CPI)\",\r\n\t\t\t\"Population below poverty line\",\r\n\t\t\t\"Gini coefficient\",\r\n\t\t\t\"Human Development Index\",\r\n\t\t\t\"Corruption Perceptions Index\",\r\n\t\t\t\"Labor force\",\r\n\t\t\t\"Labor force by occupation\",\r\n\t\t\t\"Unemployment\",\r\n\t\t\t\"Average gross salary\",\r\n\t\t\t\"Average net salary\",\r\n\t\t\t\"Main industries\"\r\n\t\t],\r\n\t\t\"Public finances\": [\r\n\t\t\t\"Government debt\",\r\n\t\t\t\"Foreign reserves\",\r\n\t\t\t\"Budget balance\",\r\n\t\t\t\"Revenues\",\r\n\t\t\t\"Expenses\",\r\n\t\t\t\"Economic aid\",\r\n\t\t\t\"Credit rating\"\r\n\t\t]\r\n\t};\r\n\r\n\t// 方法定义\r\n\tconst loadChatHistory = () => {\r\n\t\tconst saved = localStorage.getItem(\"chatHistory\");\r\n\t\tif (saved) {\r\n\t\t\ttry {\r\n\t\t\t\tchatHistory.value = JSON.parse(saved);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(\"加载聊天记录失败:\", e);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tconst saveChatHistory = () => {\r\n\t\tlocalStorage.setItem(\"chatHistory\", JSON.stringify(chatHistory.value));\r\n\t};\r\n\r\n\tconst scrollToBottom = () => {\r\n\t\tnextTick(() => {\r\n\t\t\tconst container = document.querySelector(\".chat-history\");\r\n\t\t\tif (container) {\r\n\t\t\t\tcontainer.scrollTop = container.scrollHeight;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tconst getLastAnalysis = () => {\r\n\t\tconst reversed = [...chatHistory.value].reverse();\r\n\t\tconst lastAssistantMsg = reversed.find(\r\n\t\t\tmsg => msg.role === \"assistant\" && !msg.error\r\n\t\t);\r\n\t\treturn lastAssistantMsg ? lastAssistantMsg.content : \"\";\r\n\t};\r\n\r\n\tconst handleDiv1Event = data => handleSelection(data, \"div1\");\r\n\tconst handleDiv3Event = data => handleSelection(data, \"div3\");\r\n\r\n\tconst handleSelection = (data, source) => {\r\n\t\tconst plainText = getPlainTextFromSelection(data.content);\r\n\t\tif (source === \"div1\") {\r\n\t\t\tselectText2.value = plainText;\r\n\t\t\tdiv1RawData.value = data.content;\r\n\t\t} else if (source === \"div3\") {\r\n\t\t\tselectText3.value = plainText;\r\n\t\t\tdiv3RawData.value = data.content;\r\n\t\t}\r\n\t};\r\n\r\n\tconst getPlainTextFromSelection = htmlContent => {\r\n\t\tconst container = document.createElement(\"div\");\r\n\t\tcontainer.innerHTML = htmlContent;\r\n\t\treturn container.innerText || container.textContent || \"\";\r\n\t};\r\n\r\n\tconst formatAnalysisResult = (text, isGraph = false) => {\r\n\t\tif (isGraph) {\r\n\t\t\ttry {\r\n\t\t\t\tconst graphData = JSON.parse(text);\r\n\t\t\t\treturn {\r\n\t\t\t\t\trole: \"assistant\",\r\n\t\t\t\t\tcontent: generateGraphHTML(graphData),\r\n\t\t\t\t\tgraphData: graphData,\r\n\t\t\t\t\ttimestamp: new Date().toLocaleString()\r\n\t\t\t\t};\r\n\t\t\t} catch (e) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\trole: \"assistant\",\r\n\t\t\t\t\tcontent: \"图形数据解析失败，显示原始分析结果\",\r\n\t\t\t\t\ttimestamp: new Date().toLocaleString(),\r\n\t\t\t\t\terror: true\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttext = text\r\n\t\t\t.replace(/^# (.*$)/gm, \"<h1>$1</h1>\")\r\n\t\t\t.replace(/^## (.*$)/gm, \"<h2>$1</h2>\")\r\n\t\t\t.replace(/^### (.*$)/gm, \"<h3>$1</h3>\")\r\n\t\t\t.replace(/\\*\\*(.*?)\\*\\*/g, \"<strong>$1</strong>\")\r\n\t\t\t.replace(/\\*(.*?)\\*/g, \"<em>$1</em>\")\r\n\t\t\t.replace(/`(.*?)`/g, \"<code>$1</code>\")\r\n\t\t\t.replace(/!\\[(.*?)\\]\\((.*?)\\)/g, '<img alt=\"$1\" src=\"$2\">')\r\n\t\t\t.replace(/\\[(.*?)\\]\\((.*?)\\)/g, '<a href=\"$2\">$1</a>')\r\n\t\t\t.replace(/(?:^|\\n)\\d+\\.\\s+(.*)/g, \"<li>$1</li>\")\r\n\t\t\t.replace(/(?:^|\\n)-\\s+(.*)/g, \"<li>$1</li>\")\r\n\t\t\t.replace(/(?:^|\\n)\\>\\s+(.*)/g, \"<blockquote>$1</blockquote>\")\r\n\t\t\t.replace(/(<li>.*<\\/li>)/gs, \"<ul>$1</ul>\")\r\n\t\t\t.replace(/\\n\\n/g, \"<br><br>\")\r\n\t\t\t.replace(/\\n/g, \"<br>\");\r\n\r\n\t\treturn `<div class=\"markdown-content\">${text}</div>`;\r\n\t};\r\n\r\n\tconst generateGraphHTML = graphData => {\r\n\t\treturn `\r\n    <div class=\"graph-summary\">\r\n      <h4>已生成因果关系网络图</h4>\r\n      <p>包含 ${graphData.nodes.length} 个关键因素和 ${graphData.links.length} 条因果关系链</p>\r\n      <p>点击节点查看详细信息，拖动可调整布局</p>\r\n    </div>\r\n  `;\r\n\t};\r\n\r\n\tconst initChart = () => {\r\n\t\tnextTick(() => {\r\n\t\t\tconst container = document.getElementById(\"causal-graph-container\");\r\n\t\t\tif (container && !causalChart) {\r\n\t\t\t\tcausalChart = echarts.init(container);\r\n\t\t\t\twindow.addEventListener(\"resize\", () => {\r\n\t\t\t\t\tif (causalChart) {\r\n\t\t\t\t\t\tcausalChart.resize();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tconst renderCausalGraph = graphData => {\r\n\t\tnextTick(() => {\r\n\t\t\tif (!causalChart) {\r\n\t\t\t\tinitChart();\r\n\t\t\t}\r\n\r\n\t\t\tif (!causalChart) return;\r\n\r\n\t\t\tconst option = {\r\n\t\t\t\ttitle: {\r\n\t\t\t\t\ttext: \"经济指标因果关系网络\",\r\n\t\t\t\t\tsubtext: \"节点大小表示因素重要性\",\r\n\t\t\t\t\tleft: \"center\",\r\n\t\t\t\t\ttextStyle: {\r\n\t\t\t\t\t\tcolor: \"#2c3e50\",\r\n\t\t\t\t\t\tfontSize: 18\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsubtextStyle: {\r\n\t\t\t\t\t\tcolor: \"#666\",\r\n\t\t\t\t\t\tfontSize: 12\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\ttooltip: {\r\n\t\t\t\t\ttrigger: \"item\",\r\n\t\t\t\t\tformatter: ({ data }) => `\r\n          <div style=\"padding: 10px; background: white; border-radius: 4px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border: 1px solid #eee\">\r\n            <strong style=\"color:#4285f4; font-size:14px\">${data.name}</strong>\r\n            ${\r\n\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t\t\t? `<div style=\"margin-top:5px; color:#666\">${data.detail}</div>`\r\n\t\t\t\t\t\t\t\t: \"\"\r\n\t\t\t\t\t\t}\r\n            ${\r\n\t\t\t\t\t\t\tdata.note\r\n\t\t\t\t\t\t\t\t? `<div style=\"margin-top:5px; color:#888; font-size:12px\">${data.note}</div>`\r\n\t\t\t\t\t\t\t\t: \"\"\r\n\t\t\t\t\t\t}\r\n          </div>\r\n        `\r\n\t\t\t\t},\r\n\t\t\t\tanimationDuration: 2000,\r\n\t\t\t\tseries: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: \"graph\",\r\n\t\t\t\t\t\tlayout: \"force\",\r\n\t\t\t\t\t\tforce: {\r\n\t\t\t\t\t\t\trepulsion: 150,\r\n\t\t\t\t\t\t\tedgeLength: [80, 150],\r\n\t\t\t\t\t\t\tgravity: 0.1\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\troam: true,\r\n\t\t\t\t\t\tdraggable: true,\r\n\t\t\t\t\t\tfocusNodeAdjacency: true,\r\n\t\t\t\t\t\tdata: graphData.nodes.map(node => ({\r\n\t\t\t\t\t\t\t...node,\r\n\t\t\t\t\t\t\tsymbolSize: node.level * 15 + 30,\r\n\t\t\t\t\t\t\titemStyle: {\r\n\t\t\t\t\t\t\t\tcolor: node.type === \"cause\" ? \"#5470c6\" : \"#91cc75\",\r\n\t\t\t\t\t\t\t\tborderColor: \"#fff\",\r\n\t\t\t\t\t\t\t\tborderWidth: 2,\r\n\t\t\t\t\t\t\t\tshadowColor: \"rgba(0, 0, 0, 0.1)\",\r\n\t\t\t\t\t\t\t\tshadowBlur: 5\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tlabel: {\r\n\t\t\t\t\t\t\t\tshow: true,\r\n\t\t\t\t\t\t\t\tposition: \"inside\",\r\n\t\t\t\t\t\t\t\tformatter: ({ name }) =>\r\n\t\t\t\t\t\t\t\t\tname.length > 6 ? name.substring(0, 5) + \"...\" : name,\r\n\t\t\t\t\t\t\t\tfontSize: 12,\r\n\t\t\t\t\t\t\t\tcolor: \"#fff\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\temphasis: {\r\n\t\t\t\t\t\t\t\tlabel: {\r\n\t\t\t\t\t\t\t\t\tshow: true,\r\n\t\t\t\t\t\t\t\t\tposition: \"top\",\r\n\t\t\t\t\t\t\t\t\tcolor: \"#2c3e50\",\r\n\t\t\t\t\t\t\t\t\tfontSize: 14,\r\n\t\t\t\t\t\t\t\t\tbackgroundColor: \"rgba(255,255,255,0.9)\",\r\n\t\t\t\t\t\t\t\t\tpadding: [4, 8],\r\n\t\t\t\t\t\t\t\t\tborderRadius: 4\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})),\r\n\t\t\t\t\t\tedges: graphData.links.map(link => ({\r\n\t\t\t\t\t\t\t...link,\r\n\t\t\t\t\t\t\tlineStyle: {\r\n\t\t\t\t\t\t\t\tcolor: link.type === \"main\" ? \"#666\" : \"#999\",\r\n\t\t\t\t\t\t\t\twidth: link.type === \"main\" ? 2 : 1,\r\n\t\t\t\t\t\t\t\tcurveness: 0.2,\r\n\t\t\t\t\t\t\t\topacity: 0.8\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tlabel: {\r\n\t\t\t\t\t\t\t\tshow: true,\r\n\t\t\t\t\t\t\t\tformatter: link.label,\r\n\t\t\t\t\t\t\t\tfontSize: 10,\r\n\t\t\t\t\t\t\t\tbackgroundColor: \"rgba(255,255,255,0.8)\",\r\n\t\t\t\t\t\t\t\tpadding: [2, 4],\r\n\t\t\t\t\t\t\t\tborderRadius: 3\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})),\r\n\t\t\t\t\t\tcategories: [{ name: \"原因因素\" }, { name: \"结果影响\" }]\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t};\r\n\r\n\t\t\ttry {\r\n\t\t\t\tcausalChart.setOption(option);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(\"图表渲染失败:\", e);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tconst extractEssentialData = fieldData => {\r\n\t\tif (!fieldData) return null;\r\n\r\n\t\tconst essential = {\r\n\t\t\tvalue: fieldData.value,\r\n\t\t\ttype: fieldData.type\r\n\t\t};\r\n\r\n\t\tif (fieldData.unit) essential.unit = fieldData.unit;\r\n\t\tif (fieldData.currency) essential.currency = fieldData.currency;\r\n\t\tif (fieldData.extracted) {\r\n\t\t\tessential.raw = fieldData.raw;\r\n\t\t}\r\n\r\n\t\treturn essential;\r\n\t};\r\n\r\n\tconst simplifyInfobox = infobox => {\r\n\t\tif (!infobox) return {};\r\n\r\n\t\tconst result = {\r\n\t\t\ttitle: infobox.title,\r\n\t\t\ttype: infobox.type\r\n\t\t};\r\n\r\n\t\tif (infobox.sections) {\r\n\t\t\tresult.sections = {};\r\n\r\n\t\t\tObject.entries(infobox.sections).forEach(([sectionName, sectionData]) => {\r\n\t\t\t\tif (PRESERVED_FIELDS_BY_SECTION[sectionName]) {\r\n\t\t\t\t\tresult.sections[sectionName] = {};\r\n\r\n\t\t\t\t\tPRESERVED_FIELDS_BY_SECTION[sectionName].forEach(fieldName => {\r\n\t\t\t\t\t\tif (sectionData[fieldName]) {\r\n\t\t\t\t\t\t\tif (Array.isArray(sectionData[fieldName])) {\r\n\t\t\t\t\t\t\t\tresult.sections[sectionName][fieldName] = sectionData[\r\n\t\t\t\t\t\t\t\t\tfieldName\r\n\t\t\t\t\t\t\t\t].map(item => {\r\n\t\t\t\t\t\t\t\t\treturn extractEssentialData(item);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tresult.sections[sectionName][fieldName] = extractEssentialData(\r\n\t\t\t\t\t\t\t\t\tsectionData[fieldName]\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn result;\r\n\t};\r\n\r\n\tconst askQuestion = async () => {\r\n\t\tif (!userQuestion.value.trim()) {\r\n\t\t\tchatHistory.value.push({\r\n\t\t\t\trole: \"assistant\",\r\n\t\t\t\tcontent: \"问题不能为空\",\r\n\t\t\t\ttimestamp: new Date().toLocaleString(),\r\n\t\t\t\terror: true\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst question = userQuestion.value;\r\n\t\tchatHistory.value.push({\r\n\t\t\trole: \"user\",\r\n\t\t\tcontent: question,\r\n\t\t\ttimestamp: new Date().toLocaleString()\r\n\t\t});\r\n\t\tuserQuestion.value = \"\";\r\n\t\tshowSuggestedQuestion.value = false;\r\n\t\tshowCausalGraph.value = false;\r\n\r\n\t\tisLoading.value = true;\r\n\r\n\t\ttry {\r\n\t\t\tif (\r\n\t\t\t\tcurrentFieldKey.value &&\r\n\t\t\t\tquestion.includes(\"分析\") &&\r\n\t\t\t\tquestion.includes(\"原因\")\r\n\t\t\t) {\r\n\t\t\t\tawait api.post(\r\n\t\t\t\t\t\"compare_attributes\",\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tchartData: {\r\n\t\t\t\t\t\t\tleftData: leftData.value,\r\n\t\t\t\t\t\t\trightData: rightData.value,\r\n\t\t\t\t\t\t\tleftTitle: \"当前选择\",\r\n\t\t\t\t\t\t\trightTitle: \"对比选择\",\r\n\t\t\t\t\t\t\tfieldKey: currentFieldKey.value,\r\n\t\t\t\t\t\t\tleftInfobox: simplifyInfobox(div1InfoboxData.value),\r\n\t\t\t\t\t\t\trightInfobox: simplifyInfobox(div3InfoboxData.value)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tchartType: \"comparison\",\r\n\t\t\t\t\t\tfollowUp: true,\r\n\t\t\t\t\t\tpreviousAnalysis: getLastAnalysis()\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresponse => {\r\n\t\t\t\t\t\tconst formattedAnswer = formatAnalysisResult(\r\n\t\t\t\t\t\t\tresponse.analysis,\r\n\t\t\t\t\t\t\t!!response.graphData\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tchatHistory.value.push(formattedAnswer);\r\n\t\t\t\t\t\tscrollToBottom();\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror => {\r\n\t\t\t\t\t\tthrow error;\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t} else if (currentFieldKey.value && !question.includes(\"分析\")) {\r\n\t\t\t\tawait api.post(\r\n\t\t\t\t\t\"compare_attributes\",\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tchartData: {\r\n\t\t\t\t\t\t\tleftData: leftData.value,\r\n\t\t\t\t\t\t\trightData: rightData.value,\r\n\t\t\t\t\t\t\tleftTitle: \"当前选择\",\r\n\t\t\t\t\t\t\trightTitle: \"对比选择\",\r\n\t\t\t\t\t\t\tfieldKey: currentFieldKey.value\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tchartType: \"comparison\",\r\n\t\t\t\t\t\tfollowUp: false\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresponse => {\r\n\t\t\t\t\t\tconst formattedAnswer = formatAnalysisResult(\r\n\t\t\t\t\t\t\tresponse.analysis,\r\n\t\t\t\t\t\t\t!!response.graphData\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tchatHistory.value.push(formattedAnswer);\r\n\t\t\t\t\t\tsuggestedQuestion.value = `请结合其他属性深入分析${currentFieldKey.value}差异的原因`;\r\n\t\t\t\t\t\tshowSuggestedQuestion.value = true;\r\n\t\t\t\t\t\tscrollToBottom();\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror => {\r\n\t\t\t\t\t\tthrow error;\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tawait api.post(\r\n\t\t\t\t\t\"ask_infobox\",\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tquestion: question,\r\n\t\t\t\t\t\tleftInfobox: simplifyInfobox(div1InfoboxData.value),\r\n\t\t\t\t\t\trightInfobox: simplifyInfobox(div3InfoboxData.value)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresponse => {\r\n\t\t\t\t\t\tconst formattedAnswer = formatAnalysisResult(response.answer);\r\n\t\t\t\t\t\tchatHistory.value.push(formattedAnswer);\r\n\t\t\t\t\t\tscrollToBottom();\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror => {\r\n\t\t\t\t\t\tthrow error;\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"请求失败:\", error);\r\n\t\t\tchatHistory.value.push({\r\n\t\t\t\trole: \"assistant\",\r\n\t\t\t\tcontent: `请求失败: ${error.message || \"未知错误\"}`,\r\n\t\t\t\ttimestamp: new Date().toLocaleString(),\r\n\t\t\t\terror: true\r\n\t\t\t});\r\n\r\n\t\t\tshowCausalGraph.value = false;\r\n\t\t\tif (causalChart) {\r\n\t\t\t\tcausalChart.dispose();\r\n\t\t\t\tcausalChart = null;\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tisLoading.value = false;\r\n\t\t\tscrollToBottom();\r\n\t\t}\r\n\t};\r\n\r\n\tconst useSuggestedQuestion = () => {\r\n\t\tuserQuestion.value = suggestedQuestion.value;\r\n\t\tshowSuggestedQuestion.value = false;\r\n\t\tnextTick(() => {\r\n\t\t\tconst textarea = document.querySelector(\".input-container textarea\");\r\n\t\t\tif (textarea) {\r\n\t\t\t\ttextarea.focus();\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleAttributeComparison = async ({\r\n\t\tfieldKey,\r\n\t\tleftData: incomingLeftData,\r\n\t\trightData: incomingRightData,\r\n\t\tleftTitle,\r\n\t\trightTitle,\r\n\t\tfieldType,\r\n\t\tfieldLabel\r\n\t}) => {\r\n\t\tif (!incomingLeftData || !incomingRightData) {\r\n\t\t\tchatHistory.value.push({\r\n\t\t\t\trole: \"assistant\",\r\n\t\t\t\tcontent: \"请先选择要对比的数据\",\r\n\t\t\t\ttimestamp: new Date().toLocaleString(),\r\n\t\t\t\terror: true\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tleftData.value = incomingLeftData;\r\n\t\trightData.value = incomingRightData;\r\n\t\tcurrentFieldKey.value = fieldKey;\r\n\r\n\t\tisLoading.value = true;\r\n\r\n\t\ttry {\r\n\t\t\tchatHistory.value.push({\r\n\t\t\t\trole: \"assistant\",\r\n\t\t\t\tcontent: `正在对比分析<strong>${fieldKey}</strong>属性...`,\r\n\t\t\t\ttimestamp: new Date().toLocaleString()\r\n\t\t\t});\r\n\r\n\t\t\tconst requestPayload = {\r\n\t\t\t\tchartData: {\r\n\t\t\t\t\tleftData: leftData.value,\r\n\t\t\t\t\trightData: rightData.value,\r\n\t\t\t\t\tleftTitle,\r\n\t\t\t\t\trightTitle,\r\n\t\t\t\t\tfieldKey,\r\n\t\t\t\t\tfieldType,\r\n\t\t\t\t\tallFields: Object.keys({\r\n\t\t\t\t\t\t...div1InfoboxData.value,\r\n\t\t\t\t\t\t...div3InfoboxData.value\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tleftInfobox: simplifyInfobox(div1InfoboxData.value),\r\n\t\t\t\t\trightInfobox: simplifyInfobox(div3InfoboxData.value)\r\n\t\t\t\t},\r\n\t\t\t\tchartType: \"comparison\"\r\n\t\t\t};\r\n\r\n\t\t\tawait api.post(\r\n\t\t\t\t\"compare_attributes\",\r\n\t\t\t\trequestPayload,\r\n\t\t\t\tresponse => {\r\n\t\t\t\t\tconst formattedAnalysis = formatAnalysisResult(\r\n\t\t\t\t\t\tresponse.analysis,\r\n\t\t\t\t\t\t!!response.graphData\r\n\t\t\t\t\t);\r\n\t\t\t\t\tchatHistory.value.push(formattedAnalysis);\r\n\r\n\t\t\t\t\tsuggestedQuestion.value = `请结合其他属性深入分析得出上述结论的原因`;\r\n\t\t\t\t\tshowSuggestedQuestion.value = true;\r\n\t\t\t\t\tscrollToBottom();\r\n\t\t\t\t},\r\n\t\t\t\terror => {\r\n\t\t\t\t\tthrow error;\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"对比分析失败:\", error);\r\n\t\t\tchatHistory.value.push({\r\n\t\t\t\trole: \"assistant\",\r\n\t\t\t\tcontent: `对比分析失败: ${error.message || \"未知错误\"}`,\r\n\t\t\t\ttimestamp: new Date().toLocaleString(),\r\n\t\t\t\terror: true\r\n\t\t\t});\r\n\r\n\t\t\tshowCausalGraph.value = false;\r\n\t\t\tif (causalChart) {\r\n\t\t\t\tcausalChart.dispose();\r\n\t\t\t\tcausalChart = null;\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tisLoading.value = false;\r\n\t\t\tscrollToBottom();\r\n\t\t}\r\n\t};\r\n\r\n\t// 监听聊天记录变化\r\n\twatch(\r\n\t\tchatHistory,\r\n\t\tnewVal => {\r\n\t\t\tconst lastMessage = newVal[newVal.length - 1];\r\n\t\t\tif (lastMessage?.graphData) {\r\n\t\t\t\tshowCausalGraph.value = true;\r\n\t\t\t\tnextTick(() => {\r\n\t\t\t\t\trenderCausalGraph(lastMessage.graphData);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tshowCausalGraph.value = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t{ deep: true }\r\n\t);\r\n\r\n\t// 组件生命周期\r\n\tonMounted(() => {\r\n\t\tloadChatHistory();\r\n\t\tbus.on(\"div1_Event\", handleDiv1Event);\r\n\t\tbus.on(\"div3_Event\", handleDiv3Event);\r\n\t\tbus.on(\"div1_InfoboxData\", data => {\r\n\t\t\tdiv1InfoboxData.value = data;\r\n\t\t});\r\n\t\tbus.on(\"div3_InfoboxData\", data => {\r\n\t\t\tdiv3InfoboxData.value = data;\r\n\t\t});\r\n\t});\r\n\r\n\tonUnmounted(() => {\r\n\t\tbus.off(\"div1_Event\", handleDiv1Event);\r\n\t\tbus.off(\"div3_Event\", handleDiv3Event);\r\n\t\tbus.off(\"div1_InfoboxData\");\r\n\t\tbus.off(\"div3_InfoboxData\");\r\n\t\tif (causalChart) {\r\n\t\t\tcausalChart.dispose();\r\n\t\t\tcausalChart = null;\r\n\t\t}\r\n\t\twindow.removeEventListener(\"resize\", () => {\r\n\t\t\tif (causalChart) {\r\n\t\t\t\tcausalChart.resize();\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n</script>\r\n\r\n<style scoped>\r\n\t.main-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\theight: 100vh;\r\n\t\tbackground: #f5f7fa;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.chat-container {\r\n\t\theight: 50vh;\r\n\t\tmin-height: 50vh;\r\n\t\toverflow: hidden;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tmargin: 10px;\r\n\t}\r\n\r\n\t.chat-history {\r\n\t\tflex: 1;\r\n\t\toverflow-y: auto;\r\n\t\tpadding: 20px;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-radius: 12px;\r\n\t\tbox-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\r\n\t\tscroll-behavior: smooth;\r\n\t\tborder: 1px solid #e0e0e0;\r\n\t}\r\n\r\n\t.vis-container {\r\n\t\theight: 30vh;\r\n\t\tmin-height: 30vh;\r\n\t\tpadding: 10px;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-radius: 12px;\r\n\t\tmargin: 0 10px;\r\n\t\tbox-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\r\n\t\toverflow: auto;\r\n\t\tborder: 1px solid #e0e0e0;\r\n\t}\r\n\r\n\t.compare-table {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.input-area {\r\n\t\theight: 15vh;\r\n\t\tmin-height: 15vh;\r\n\t\tpadding: 15px;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-top: 1px solid #e0e0e0;\r\n\t\tflex-shrink: 0;\r\n\t}\r\n\r\n\t.message {\r\n\t\tmargin-bottom: 20px;\r\n\t\tpadding: 15px 20px;\r\n\t\tborder-radius: 12px;\r\n\t\tline-height: 1.6;\r\n\t\tposition: relative;\r\n\t\tmax-width: 85%;\r\n\t\tbox-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);\r\n\t}\r\n\r\n\t.message.user {\r\n\t\tbackground: #e3f2fd;\r\n\t\tmargin-left: auto;\r\n\t\tborder-bottom-right-radius: 4px;\r\n\t\tborder: 1px solid #bbdefb;\r\n\t}\r\n\r\n\t.message.assistant {\r\n\t\tbackground: #f8f9fa;\r\n\t\tmargin-right: auto;\r\n\t\tborder-bottom-left-radius: 4px;\r\n\t\tborder: 1px solid #e0e0e0;\r\n\t}\r\n\r\n\t.message.error {\r\n\t\tbackground: #ffebee;\r\n\t\tborder-left: 4px solid #f44336;\r\n\t}\r\n\r\n\t.message-content {\r\n\t\tword-wrap: break-word;\r\n\t}\r\n\r\n\t.input-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-radius: 12px;\r\n\t\tbox-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n\t\theight: 100%;\r\n\t\tborder: 1px solid #e0e0e0;\r\n\t}\r\n\r\n\t.input-container textarea {\r\n\t\twidth: 100%;\r\n\t\tpadding: 12px 16px;\r\n\t\tborder: none;\r\n\t\tborder-radius: 12px;\r\n\t\tresize: none;\r\n\t\tfont-size: 14px;\r\n\t\toutline: none;\r\n\t\tbackground: #f9f9f9;\r\n\t}\r\n\r\n\t.input-container textarea:focus {\r\n\t\tbackground: #ffffff;\r\n\t}\r\n\r\n\t.button-container {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-end;\r\n\t\tpadding: 8px;\r\n\t}\r\n\r\n\t.button-container button {\r\n\t\tbackground: #4285f4;\r\n\t\tcolor: white;\r\n\t\tborder: none;\r\n\t\tpadding: 8px 20px;\r\n\t\tborder-radius: 8px;\r\n\t\tcursor: pointer;\r\n\t\tfont-size: 14px;\r\n\t\tfont-weight: 500;\r\n\t\ttransition: all 0.2s;\r\n\t}\r\n\r\n\t.button-container button:hover {\r\n\t\tbackground: #3367d6;\r\n\t\ttransform: translateY(-1px);\r\n\t}\r\n\r\n\t.button-container button:disabled {\r\n\t\tbackground: #b3c6e0;\r\n\t\tcursor: not-allowed;\r\n\t\ttransform: none;\r\n\t}\r\n\r\n\t.loading-indicator {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding: 15px;\r\n\t\tcolor: #666;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t.loading-spinner {\r\n\t\tborder: 3px solid rgba(66, 133, 244, 0.2);\r\n\t\tborder-radius: 50%;\r\n\t\tborder-top: 3px solid #4285f4;\r\n\t\twidth: 20px;\r\n\t\theight: 20px;\r\n\t\tanimation: spin 1s linear infinite;\r\n\t\tmargin-right: 10px;\r\n\t}\r\n\r\n\t@keyframes spin {\r\n\t\t0% {\r\n\t\t\ttransform: rotate(0deg);\r\n\t\t}\r\n\t\t100% {\r\n\t\t\ttransform: rotate(360deg);\r\n\t\t}\r\n\t}\r\n\r\n\t.markdown-content {\r\n\t\tline-height: 1.7;\r\n\t\tfont-size: 15px;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.markdown-content h1 {\r\n\t\tfont-size: 1.5em;\r\n\t\tmargin: 20px 0 15px;\r\n\t\tpadding-bottom: 5px;\r\n\t\tborder-bottom: 1px solid #eee;\r\n\t\tcolor: #2c3e50;\r\n\t}\r\n\r\n\t.markdown-content h2 {\r\n\t\tfont-size: 1.3em;\r\n\t\tmargin: 18px 0 12px;\r\n\t\tcolor: #34495e;\r\n\t}\r\n\r\n\t.markdown-content h3 {\r\n\t\tfont-size: 1.1em;\r\n\t\tmargin: 15px 0 10px;\r\n\t\tcolor: #4285f4;\r\n\t}\r\n\r\n\t.markdown-content ul,\r\n\t.markdown-content ol {\r\n\t\tpadding-left: 25px;\r\n\t\tmargin: 12px 0;\r\n\t}\r\n\r\n\t.markdown-content li {\r\n\t\tmargin-bottom: 8px;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.markdown-content ul li::before {\r\n\t\tcontent: \"•\";\r\n\t\tcolor: #4285f4;\r\n\t\tposition: absolute;\r\n\t\tleft: -15px;\r\n\t}\r\n\r\n\t.markdown-content strong {\r\n\t\tcolor: #2c3e50;\r\n\t\tfont-weight: 600;\r\n\t}\r\n\r\n\t.markdown-content em {\r\n\t\tcolor: #666;\r\n\t\tfont-style: italic;\r\n\t}\r\n\r\n\t.markdown-content code {\r\n\t\tbackground: rgba(66, 133, 244, 0.1);\r\n\t\tpadding: 2px 6px;\r\n\t\tborder-radius: 4px;\r\n\t\tfont-family: \"SFMono-Regular\", Consolas, \"Liberation Mono\", Menlo, monospace;\r\n\t\tfont-size: 0.9em;\r\n\t\tcolor: #d63384;\r\n\t}\r\n\r\n\t.markdown-content blockquote {\r\n\t\tborder-left: 3px solid #4285f4;\r\n\t\tpadding: 10px 15px;\r\n\t\tmargin: 15px 0;\r\n\t\tbackground: rgba(66, 133, 244, 0.05);\r\n\t\tcolor: #555;\r\n\t}\r\n\r\n\t.markdown-content a {\r\n\t\tcolor: #4285f4;\r\n\t\ttext-decoration: none;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t.markdown-content a:hover {\r\n\t\ttext-decoration: underline;\r\n\t}\r\n\r\n\t.suggested-question {\r\n\t\tmargin: 15px 0;\r\n\t\tpadding: 12px;\r\n\t\tbackground-color: #f5f7fa;\r\n\t\tborder-radius: 8px;\r\n\t\tborder: 1px dashed #4285f4;\r\n\t\tcursor: pointer;\r\n\t\ttransition: all 0.2s;\r\n\t}\r\n\r\n\t.suggested-question:hover {\r\n\t\tbackground-color: #e8f0fe;\r\n\t}\r\n\r\n\t.suggestion-text {\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #666;\r\n\t\tmargin-bottom: 5px;\r\n\t}\r\n\r\n\t.suggestion-content {\r\n\t\tcolor: #4285f4;\r\n\t\tfont-weight: 500;\r\n\t\tpadding: 5px;\r\n\t\tborder-radius: 4px;\r\n\t}\r\n\r\n\t.causal-graph {\r\n\t\tmargin: 20px 0;\r\n\t\tpadding: 20px;\r\n\t\tbackground: white;\r\n\t\tborder-radius: 12px;\r\n\t\tbox-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\r\n\t\tborder: 1px solid #e0e0e0;\r\n\t}\r\n\r\n\t.graph-title {\r\n\t\tfont-size: 16px;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #2c3e50;\r\n\t\tmargin-bottom: 15px;\r\n\t\tpadding-bottom: 10px;\r\n\t\tborder-bottom: 2px solid #eee;\r\n\t}\r\n\r\n\t.graph-summary {\r\n\t\tpadding: 15px;\r\n\t\tbackground: #f8f9fa;\r\n\t\tborder-radius: 8px;\r\n\t\tmargin: 10px 0;\r\n\t\ttext-align: center;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t#causal-graph-container {\r\n\t\twidth: 100%;\r\n\t\tmin-height: 500px;\r\n\t\ttransition: height 0.3s ease;\r\n\t}\r\n\r\n\t.graph-legend {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tgap: 15px;\r\n\t\tmargin-top: 15px;\r\n\t\tpadding: 10px;\r\n\t\tbackground: #f9f9f9;\r\n\t\tborder-radius: 6px;\r\n\t\tfont-size: 12px;\r\n\t}\r\n\r\n\t.legend-node {\r\n\t\tdisplay: inline-block;\r\n\t\twidth: 12px;\r\n\t\theight: 12px;\r\n\t\tborder-radius: 50%;\r\n\t\tmargin-right: 5px;\r\n\t\tborder: 1px solid #fff;\r\n\t}\r\n\r\n\t.cause-node {\r\n\t\tbackground: #5470c6;\r\n\t}\r\n\r\n\t.effect-node {\r\n\t\tbackground: #91cc75;\r\n\t}\r\n\r\n\t.legend-link {\r\n\t\tdisplay: inline-block;\r\n\t\twidth: 20px;\r\n\t\theight: 2px;\r\n\t\tmargin: 5px 5px 0 0;\r\n\t\tvertical-align: middle;\r\n\t}\r\n\r\n\t.main-link {\r\n\t\tbackground: #666;\r\n\t}\r\n\r\n\t.secondary-link {\r\n\t\tbackground: #999;\r\n\t\tborder-style: dashed;\r\n\t}\r\n</style>\r\n"],"mappings":";;;EAEMA,KAAK,EAAC;AAAgB;;EACrBA,KAAK,EAAC;AAAgB;;EACrBA,KAAK,EAAC;AAAc;mBAJ5B;;EAAAC,GAAA;EAW0BD,KAAK,EAAC;;gEAC3BE,mBAAA,CAAmC;EAA9BF,KAAK,EAAC;AAAiB;;EAZjCC,GAAA;EAesCD,KAAK,EAAC;;gEACvCE,mBAAA,CAA6C;EAAxCF,KAAK,EAAC;AAAiB,GAAC,YAAU;;EAhB5CC,GAAA;EAqBgCD,KAAK,EAAC;;iCArBtCG,kBAAA;qBAsBKC,WAAwC,C;;EAYtCJ,KAAK,EAAC;AAAe;;EAOrBA,KAAK,EAAC;AAAY;;EACjBA,KAAK,EAAC;AAAiB;oBA1C/B;;EAgDSA,KAAK,EAAC;AAAkB;oBAhDjC;;uBAECK,mBAAA,CAqDM,OArDNC,UAqDM,GApDLJ,mBAAA,CA6BM,OA7BNK,UA6BM,GA5BLL,mBAAA,CA2BM,OA3BNM,UA2BM,I,kBA1BLH,mBAAA,CAKMI,SAAA,QAVVC,WAAA,CAMgCC,MAAA,CAAAC,WAAW,EAN3C,CAMaC,OAAO,EAAEC,KAAK;yBADvBT,mBAAA,CAKM;MAHJJ,GAAG,EAAEa,KAAK;MACVd,KAAK,EARXe,eAAA,aAQyBF,OAAO,CAACG,IAAI;QAAAC,KAAA,EAAWJ,OAAO,CAACI;MAAK;QACxDf,mBAAA,CAA4D;MAAvDF,KAAK,EAAC,iBAAiB;MAACkB,SAAwB,EAAhBL,OAAO,CAACM;4BATlDC,UAAA,E;kCAWeT,MAAA,CAAAU,SAAS,I,cAApBhB,mBAAA,CAGM,OAHNiB,UAGM,GAFLC,UAAmC,EAZxCC,gBAAA,CAYwC,YAEpC,E,KAdJC,mBAAA,gBAeed,MAAA,CAAAe,qBAAqB,I,cAAhCrB,mBAAA,CAKM,OALNsB,UAKM,GAJLC,UAA6C,EAC7C1B,mBAAA,CAEM;IAFDF,KAAK,EAAC,oBAAoB;IAAE6B,OAAK,EAAElB,MAAA,CAAAmB;sBACpCnB,MAAA,CAAAoB,iBAAiB,iB,KAlB1BN,mBAAA,gBAqBed,MAAA,CAAAqB,eAAe,I,cAA1B3B,mBAAA,CASM,OATN4B,UASM,EA9BV,IAAAC,WAAA,MAAAT,mBAAA,e,KAkCEvB,mBAAA,CAMM,OANNiC,WAMM,GALLC,YAAA,CAIiDzB,MAAA;IAHhDX,KAAK,EAAC,eAAe;IACpB,eAAa,EAAEW,MAAA,CAAA0B,WAAW;IAC1B,eAAa,EAAE1B,MAAA,CAAA2B,WAAW;IAC1BC,kBAAgB,EAAE5B,MAAA,CAAA6B;iEAErBtC,mBAAA,CAaM,OAbNuC,WAaM,GAZLvC,mBAAA,CAWM,OAXNwC,WAWM,G,gBAVLxC,mBAAA,CAIkC;IA/CtC,uBAAAyC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IA4CcjC,MAAA,CAAAkC,YAAY,GAAAD,MAAA;IACrBE,IAAI,EAAC,GAAG;IACRC,WAAW,EAAC,cAAc;IACzBC,QAAQ,EAAErC,MAAA,CAAAU;0BA/ChB4B,WAAA,I,cA4CctC,MAAA,CAAAkC,YAAY,E,GAItB3C,mBAAA,CAIM,OAJNgD,WAIM,GAHLhD,mBAAA,CAES;IAFA2B,OAAK,EAAElB,MAAA,CAAAwC,WAAW;IAAGH,QAAQ,EAAErC,MAAA,CAAAU;sBACpCV,MAAA,CAAAU,SAAS,0CAlDlB+B,WAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}