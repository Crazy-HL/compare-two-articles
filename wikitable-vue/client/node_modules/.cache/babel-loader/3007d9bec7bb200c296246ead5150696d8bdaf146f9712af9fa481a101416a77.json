{"ast":null,"code":"import \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport { ref, computed, onMounted, watch, onUnmounted } from \"vue\";\nimport * as d3 from \"d3\";\nconst highlightColor = \"#FFD700\";\nexport default {\n  __name: 'FullChart',\n  props: {\n    data: {\n      type: Object,\n      default: () => ({\n        type: \"line\",\n        data: []\n      }),\n      validator: value => {\n        return value && [\"line\", \"bar\"].includes(value.type) && Array.isArray(value.data);\n      }\n    },\n    compareData: {\n      type: Array,\n      default: () => [],\n      validator: value => Array.isArray(value)\n    },\n    title: {\n      type: String,\n      default: \"\"\n    },\n    side: {\n      type: String,\n      default: \"left\",\n      validator: value => [\"left\", \"right\"].includes(value)\n    }\n  },\n  setup(__props, _ref) {\n    let {\n      expose: __expose\n    } = _ref;\n    __expose();\n    const props = __props;\n    const chartContainer = ref(null);\n    const color = computed(() => props.side === \"left\" ? \"#4a90e2\" : \"#ef4444\");\n    const hasData = computed(() => {\n      return props.data?.data?.length > 0 && props.data.data.every(item => item && !isNaN(item.year) && !isNaN(item.value));\n    });\n    const formatValue = value => {\n      if (value >= 1000000) return `$${(value / 1000000).toFixed(1)}M`;\n      if (value >= 1000) return `$${(value / 1000).toFixed(1)}K`;\n      return value.toLocaleString();\n    };\n    const getCommonYears = (data1, data2) => {\n      const years1 = new Set(data1.map(d => d.year));\n      const years2 = new Set(data2.map(d => d.year));\n      return [...years1].filter(year => years2.has(year));\n    };\n    const drawBarChart = (svg, data, x, y, width, height) => {\n      svg.selectAll(\".bar\").data(data).enter().append(\"rect\").attr(\"class\", \"bar\").attr(\"x\", d => x(d.year.toString())).attr(\"width\", x.bandwidth()).attr(\"y\", d => y(d.value)).attr(\"height\", d => height - y(d.value)).attr(\"fill\", color.value).attr(\"rx\", 2).attr(\"ry\", 2);\n      svg.selectAll(\".bar-label\").data(data).enter().append(\"text\").attr(\"class\", \"bar-label\").attr(\"x\", d => x(d.year.toString()) + x.bandwidth() / 2).attr(\"y\", d => y(d.value) - 5).attr(\"text-anchor\", \"middle\").text(d => formatValue(d.value)).attr(\"font-size\", \"12px\").attr(\"fill\", \"#64748b\").style(\"visibility\", d => height - y(d.value) > 20 ? \"visible\" : \"hidden\");\n    };\n    const drawLineChart = (svg, data, x, y) => {\n      const line = d3.line().x(d => x(d.year)).y(d => y(d.value)).curve(d3.curveMonotoneX);\n      svg.append(\"path\").datum(data).attr(\"fill\", \"none\").attr(\"stroke\", color.value).attr(\"stroke-width\", 3).attr(\"d\", line);\n      svg.selectAll(\".dot\").data(data).enter().append(\"circle\").attr(\"class\", \"dot\").attr(\"cx\", d => x(d.year)).attr(\"cy\", d => y(d.value)).attr(\"r\", 6).attr(\"fill\", color.value).attr(\"stroke\", \"white\").attr(\"stroke-width\", 2);\n      if (props.compareData && props.compareData.length > 0) {\n        const validCompareData = props.compareData.filter(item => item && !isNaN(item.year) && !isNaN(item.value));\n        if (validCompareData.length > 0) {\n          const commonYears = getCommonYears(data, validCompareData);\n          commonYears.forEach(year => {\n            const points = data.filter(d => d.year === year);\n            points.forEach(point => {\n              svg.append(\"circle\").attr(\"cx\", x(point.year)).attr(\"cy\", y(point.value)).attr(\"r\", 8).attr(\"fill\", highlightColor).attr(\"stroke\", \"#FF8C00\").attr(\"stroke-width\", 2).attr(\"class\", \"highlight-point\");\n            });\n          });\n        }\n      }\n      svg.selectAll(\".text\").data(data).enter().append(\"text\").attr(\"x\", d => x(d.year)).attr(\"y\", d => y(d.value) - 12).text(d => formatValue(d.value)).attr(\"font-size\", \"12px\").attr(\"text-anchor\", \"middle\").attr(\"fill\", color.value);\n    };\n    const drawChart = () => {\n      if (!chartContainer.value || !hasData.value) {\n        d3.select(chartContainer.value).selectAll(\"*\").remove();\n        return;\n      }\n      try {\n        d3.select(chartContainer.value).selectAll(\"*\").remove();\n        const containerWidth = chartContainer.value.clientWidth;\n        const containerHeight = chartContainer.value.clientHeight;\n        const margin = {\n          top: Math.min(30, containerHeight * 0.1),\n          right: Math.min(30, containerWidth * 0.05),\n          bottom: Math.min(50, containerHeight * 0.15),\n          left: Math.min(50, containerWidth * 0.1)\n        };\n        const width = containerWidth - margin.left - margin.right;\n        const height = containerHeight - margin.top - margin.bottom;\n        const svg = d3.select(chartContainer.value).append(\"svg\").attr(\"width\", \"100%\").attr(\"height\", \"100%\").attr(\"viewBox\", `0 0 ${containerWidth} ${containerHeight}`).append(\"g\").attr(\"transform\", `translate(${margin.left},${margin.top})`);\n        const validData = props.data.data.filter(item => item && !isNaN(item.year) && !isNaN(item.value)).sort((a, b) => a.year - b.year);\n        if (validData.length === 0) return;\n        const x = props.data.type === \"bar\" ? d3.scaleBand().domain(validData.map(d => d.year.toString())).range([0, width]).padding(0.2) : d3.scaleLinear().domain(d3.extent(validData, d => d.year)).range([0, width]);\n        const y = d3.scaleLinear().domain([0, d3.max(validData, d => d.value) * 1.1]).range([height, 0]);\n        svg.append(\"g\").attr(\"class\", \"grid\").call(d3.axisLeft(y).tickSize(-width).tickFormat(\"\")).selectAll(\"line\").attr(\"stroke\", \"#e2e8f0\").attr(\"stroke-dasharray\", \"2,2\");\n        svg.append(\"g\").attr(\"transform\", `translate(0,${height})`).call(props.data.type === \"bar\" ? d3.axisBottom(x) : d3.axisBottom(x).tickFormat(d3.format(\"d\")));\n        svg.append(\"g\").call(d3.axisLeft(y));\n        svg.append(\"text\").attr(\"transform\", `translate(${width / 2},${height + margin.bottom * 0.7})`).style(\"text-anchor\", \"middle\").style(\"font-size\", \"12px\").text(\"年份\");\n        svg.append(\"text\").attr(\"transform\", \"rotate(-90)\").attr(\"y\", 0 - margin.left * 0.7).attr(\"x\", 0 - height / 2).attr(\"dy\", \"1em\").style(\"text-anchor\", \"middle\").style(\"font-size\", \"12px\").text(\"数值\");\n        svg.append(\"text\").attr(\"x\", width / 2).attr(\"y\", 0 - margin.top / 2).attr(\"text-anchor\", \"middle\").style(\"font-size\", \"16px\").style(\"font-weight\", \"bold\").text(props.title);\n        if (props.data.type === \"bar\") {\n          drawBarChart(svg, validData, x, y, width, height);\n        } else {\n          drawLineChart(svg, validData, x, y);\n        }\n      } catch (error) {\n        console.error(\"图表渲染错误:\", error);\n      }\n    };\n    watch(() => [props.data, props.compareData, props.title], () => {\n      if (chartContainer.value) {\n        setTimeout(drawChart, 50);\n      }\n    }, {\n      deep: true\n    });\n    onMounted(() => {\n      setTimeout(drawChart, 100);\n      window.addEventListener(\"resize\", drawChart);\n    });\n    onUnmounted(() => {\n      window.removeEventListener(\"resize\", drawChart);\n    });\n    const __returned__ = {\n      props,\n      chartContainer,\n      color,\n      highlightColor,\n      hasData,\n      formatValue,\n      getCommonYears,\n      drawBarChart,\n      drawLineChart,\n      drawChart,\n      ref,\n      computed,\n      onMounted,\n      watch,\n      onUnmounted,\n      get d3() {\n        return d3;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","watch","onUnmounted","d3","highlightColor","props","__props","chartContainer","color","side","hasData","data","length","every","item","isNaN","year","value","formatValue","toFixed","toLocaleString","getCommonYears","data1","data2","years1","Set","map","d","years2","filter","has","drawBarChart","svg","x","y","width","height","selectAll","enter","append","attr","toString","bandwidth","text","style","drawLineChart","line","curve","curveMonotoneX","datum","compareData","validCompareData","commonYears","forEach","points","point","drawChart","select","remove","containerWidth","clientWidth","containerHeight","clientHeight","margin","top","Math","min","right","bottom","left","validData","sort","a","b","type","scaleBand","domain","range","padding","scaleLinear","extent","max","call","axisLeft","tickSize","tickFormat","axisBottom","format","title","error","console","setTimeout","deep","window","addEventListener","removeEventListener"],"sources":["D:/vue_frame/vue_frame/wikitable-vue/client/src/components/compoents_base/FullChart.vue"],"sourcesContent":["<template>\r\n\t<div class=\"full-chart-container\">\r\n\t\t<div ref=\"chartContainer\" class=\"full-chart\">\r\n\t\t\t<div v-if=\"!hasData\" class=\"no-data-message\">\r\n\t\t\t\t<span>无数据可显示</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ref, computed, onMounted, watch, onUnmounted } from \"vue\";\r\n\timport * as d3 from \"d3\";\r\n\r\n\tconst props = defineProps({\r\n\t\tdata: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => ({\r\n\t\t\t\ttype: \"line\",\r\n\t\t\t\tdata: []\r\n\t\t\t}),\r\n\t\t\tvalidator: value => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tvalue &&\r\n\t\t\t\t\t[\"line\", \"bar\"].includes(value.type) &&\r\n\t\t\t\t\tArray.isArray(value.data)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t},\r\n\t\tcompareData: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: () => [],\r\n\t\t\tvalidator: value => Array.isArray(value)\r\n\t\t},\r\n\t\ttitle: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"\"\r\n\t\t},\r\n\t\tside: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"left\",\r\n\t\t\tvalidator: value => [\"left\", \"right\"].includes(value)\r\n\t\t}\r\n\t});\r\n\r\n\tconst chartContainer = ref(null);\r\n\tconst color = computed(() => (props.side === \"left\" ? \"#4a90e2\" : \"#ef4444\"));\r\n\tconst highlightColor = \"#FFD700\";\r\n\tconst hasData = computed(() => {\r\n\t\treturn (\r\n\t\t\tprops.data?.data?.length > 0 &&\r\n\t\t\tprops.data.data.every(\r\n\t\t\t\titem => item && !isNaN(item.year) && !isNaN(item.value)\r\n\t\t\t)\r\n\t\t);\r\n\t});\r\n\r\n\tconst formatValue = value => {\r\n\t\tif (value >= 1000000) return `$${(value / 1000000).toFixed(1)}M`;\r\n\t\tif (value >= 1000) return `$${(value / 1000).toFixed(1)}K`;\r\n\t\treturn value.toLocaleString();\r\n\t};\r\n\r\n\tconst getCommonYears = (data1, data2) => {\r\n\t\tconst years1 = new Set(data1.map(d => d.year));\r\n\t\tconst years2 = new Set(data2.map(d => d.year));\r\n\t\treturn [...years1].filter(year => years2.has(year));\r\n\t};\r\n\r\n\tconst drawBarChart = (svg, data, x, y, width, height) => {\r\n\t\tsvg\r\n\t\t\t.selectAll(\".bar\")\r\n\t\t\t.data(data)\r\n\t\t\t.enter()\r\n\t\t\t.append(\"rect\")\r\n\t\t\t.attr(\"class\", \"bar\")\r\n\t\t\t.attr(\"x\", d => x(d.year.toString()))\r\n\t\t\t.attr(\"width\", x.bandwidth())\r\n\t\t\t.attr(\"y\", d => y(d.value))\r\n\t\t\t.attr(\"height\", d => height - y(d.value))\r\n\t\t\t.attr(\"fill\", color.value)\r\n\t\t\t.attr(\"rx\", 2)\r\n\t\t\t.attr(\"ry\", 2);\r\n\r\n\t\tsvg\r\n\t\t\t.selectAll(\".bar-label\")\r\n\t\t\t.data(data)\r\n\t\t\t.enter()\r\n\t\t\t.append(\"text\")\r\n\t\t\t.attr(\"class\", \"bar-label\")\r\n\t\t\t.attr(\"x\", d => x(d.year.toString()) + x.bandwidth() / 2)\r\n\t\t\t.attr(\"y\", d => y(d.value) - 5)\r\n\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t.text(d => formatValue(d.value))\r\n\t\t\t.attr(\"font-size\", \"12px\")\r\n\t\t\t.attr(\"fill\", \"#64748b\")\r\n\t\t\t.style(\"visibility\", d =>\r\n\t\t\t\theight - y(d.value) > 20 ? \"visible\" : \"hidden\"\r\n\t\t\t);\r\n\t};\r\n\r\n\tconst drawLineChart = (svg, data, x, y) => {\r\n\t\tconst line = d3\r\n\t\t\t.line()\r\n\t\t\t.x(d => x(d.year))\r\n\t\t\t.y(d => y(d.value))\r\n\t\t\t.curve(d3.curveMonotoneX);\r\n\r\n\t\tsvg\r\n\t\t\t.append(\"path\")\r\n\t\t\t.datum(data)\r\n\t\t\t.attr(\"fill\", \"none\")\r\n\t\t\t.attr(\"stroke\", color.value)\r\n\t\t\t.attr(\"stroke-width\", 3)\r\n\t\t\t.attr(\"d\", line);\r\n\r\n\t\tsvg\r\n\t\t\t.selectAll(\".dot\")\r\n\t\t\t.data(data)\r\n\t\t\t.enter()\r\n\t\t\t.append(\"circle\")\r\n\t\t\t.attr(\"class\", \"dot\")\r\n\t\t\t.attr(\"cx\", d => x(d.year))\r\n\t\t\t.attr(\"cy\", d => y(d.value))\r\n\t\t\t.attr(\"r\", 6)\r\n\t\t\t.attr(\"fill\", color.value)\r\n\t\t\t.attr(\"stroke\", \"white\")\r\n\t\t\t.attr(\"stroke-width\", 2);\r\n\r\n\t\tif (props.compareData && props.compareData.length > 0) {\r\n\t\t\tconst validCompareData = props.compareData.filter(\r\n\t\t\t\titem => item && !isNaN(item.year) && !isNaN(item.value)\r\n\t\t\t);\r\n\r\n\t\t\tif (validCompareData.length > 0) {\r\n\t\t\t\tconst commonYears = getCommonYears(data, validCompareData);\r\n\r\n\t\t\t\tcommonYears.forEach(year => {\r\n\t\t\t\t\tconst points = data.filter(d => d.year === year);\r\n\t\t\t\t\tpoints.forEach(point => {\r\n\t\t\t\t\t\tsvg\r\n\t\t\t\t\t\t\t.append(\"circle\")\r\n\t\t\t\t\t\t\t.attr(\"cx\", x(point.year))\r\n\t\t\t\t\t\t\t.attr(\"cy\", y(point.value))\r\n\t\t\t\t\t\t\t.attr(\"r\", 8)\r\n\t\t\t\t\t\t\t.attr(\"fill\", highlightColor)\r\n\t\t\t\t\t\t\t.attr(\"stroke\", \"#FF8C00\")\r\n\t\t\t\t\t\t\t.attr(\"stroke-width\", 2)\r\n\t\t\t\t\t\t\t.attr(\"class\", \"highlight-point\");\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsvg\r\n\t\t\t.selectAll(\".text\")\r\n\t\t\t.data(data)\r\n\t\t\t.enter()\r\n\t\t\t.append(\"text\")\r\n\t\t\t.attr(\"x\", d => x(d.year))\r\n\t\t\t.attr(\"y\", d => y(d.value) - 12)\r\n\t\t\t.text(d => formatValue(d.value))\r\n\t\t\t.attr(\"font-size\", \"12px\")\r\n\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t.attr(\"fill\", color.value);\r\n\t};\r\n\r\n\tconst drawChart = () => {\r\n\t\tif (!chartContainer.value || !hasData.value) {\r\n\t\t\td3.select(chartContainer.value).selectAll(\"*\").remove();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\td3.select(chartContainer.value).selectAll(\"*\").remove();\r\n\r\n\t\t\tconst containerWidth = chartContainer.value.clientWidth;\r\n\t\t\tconst containerHeight = chartContainer.value.clientHeight;\r\n\t\t\tconst margin = {\r\n\t\t\t\ttop: Math.min(30, containerHeight * 0.1),\r\n\t\t\t\tright: Math.min(30, containerWidth * 0.05),\r\n\t\t\t\tbottom: Math.min(50, containerHeight * 0.15),\r\n\t\t\t\tleft: Math.min(50, containerWidth * 0.1)\r\n\t\t\t};\r\n\r\n\t\t\tconst width = containerWidth - margin.left - margin.right;\r\n\t\t\tconst height = containerHeight - margin.top - margin.bottom;\r\n\r\n\t\t\tconst svg = d3\r\n\t\t\t\t.select(chartContainer.value)\r\n\t\t\t\t.append(\"svg\")\r\n\t\t\t\t.attr(\"width\", \"100%\")\r\n\t\t\t\t.attr(\"height\", \"100%\")\r\n\t\t\t\t.attr(\"viewBox\", `0 0 ${containerWidth} ${containerHeight}`)\r\n\t\t\t\t.append(\"g\")\r\n\t\t\t\t.attr(\"transform\", `translate(${margin.left},${margin.top})`);\r\n\r\n\t\t\tconst validData = props.data.data\r\n\t\t\t\t.filter(item => item && !isNaN(item.year) && !isNaN(item.value))\r\n\t\t\t\t.sort((a, b) => a.year - b.year);\r\n\r\n\t\t\tif (validData.length === 0) return;\r\n\r\n\t\t\tconst x =\r\n\t\t\t\tprops.data.type === \"bar\"\r\n\t\t\t\t\t? d3\r\n\t\t\t\t\t\t\t.scaleBand()\r\n\t\t\t\t\t\t\t.domain(validData.map(d => d.year.toString()))\r\n\t\t\t\t\t\t\t.range([0, width])\r\n\t\t\t\t\t\t\t.padding(0.2)\r\n\t\t\t\t\t: d3\r\n\t\t\t\t\t\t\t.scaleLinear()\r\n\t\t\t\t\t\t\t.domain(d3.extent(validData, d => d.year))\r\n\t\t\t\t\t\t\t.range([0, width]);\r\n\r\n\t\t\tconst y = d3\r\n\t\t\t\t.scaleLinear()\r\n\t\t\t\t.domain([0, d3.max(validData, d => d.value) * 1.1])\r\n\t\t\t\t.range([height, 0]);\r\n\r\n\t\t\tsvg\r\n\t\t\t\t.append(\"g\")\r\n\t\t\t\t.attr(\"class\", \"grid\")\r\n\t\t\t\t.call(d3.axisLeft(y).tickSize(-width).tickFormat(\"\"))\r\n\t\t\t\t.selectAll(\"line\")\r\n\t\t\t\t.attr(\"stroke\", \"#e2e8f0\")\r\n\t\t\t\t.attr(\"stroke-dasharray\", \"2,2\");\r\n\r\n\t\t\tsvg\r\n\t\t\t\t.append(\"g\")\r\n\t\t\t\t.attr(\"transform\", `translate(0,${height})`)\r\n\t\t\t\t.call(\r\n\t\t\t\t\tprops.data.type === \"bar\"\r\n\t\t\t\t\t\t? d3.axisBottom(x)\r\n\t\t\t\t\t\t: d3.axisBottom(x).tickFormat(d3.format(\"d\"))\r\n\t\t\t\t);\r\n\r\n\t\t\tsvg.append(\"g\").call(d3.axisLeft(y));\r\n\r\n\t\t\tsvg\r\n\t\t\t\t.append(\"text\")\r\n\t\t\t\t.attr(\r\n\t\t\t\t\t\"transform\",\r\n\t\t\t\t\t`translate(${width / 2},${height + margin.bottom * 0.7})`\r\n\t\t\t\t)\r\n\t\t\t\t.style(\"text-anchor\", \"middle\")\r\n\t\t\t\t.style(\"font-size\", \"12px\")\r\n\t\t\t\t.text(\"年份\");\r\n\r\n\t\t\tsvg\r\n\t\t\t\t.append(\"text\")\r\n\t\t\t\t.attr(\"transform\", \"rotate(-90)\")\r\n\t\t\t\t.attr(\"y\", 0 - margin.left * 0.7)\r\n\t\t\t\t.attr(\"x\", 0 - height / 2)\r\n\t\t\t\t.attr(\"dy\", \"1em\")\r\n\t\t\t\t.style(\"text-anchor\", \"middle\")\r\n\t\t\t\t.style(\"font-size\", \"12px\")\r\n\t\t\t\t.text(\"数值\");\r\n\r\n\t\t\tsvg\r\n\t\t\t\t.append(\"text\")\r\n\t\t\t\t.attr(\"x\", width / 2)\r\n\t\t\t\t.attr(\"y\", 0 - margin.top / 2)\r\n\t\t\t\t.attr(\"text-anchor\", \"middle\")\r\n\t\t\t\t.style(\"font-size\", \"16px\")\r\n\t\t\t\t.style(\"font-weight\", \"bold\")\r\n\t\t\t\t.text(props.title);\r\n\r\n\t\t\tif (props.data.type === \"bar\") {\r\n\t\t\t\tdrawBarChart(svg, validData, x, y, width, height);\r\n\t\t\t} else {\r\n\t\t\t\tdrawLineChart(svg, validData, x, y);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"图表渲染错误:\", error);\r\n\t\t}\r\n\t};\r\n\r\n\twatch(\r\n\t\t() => [props.data, props.compareData, props.title],\r\n\t\t() => {\r\n\t\t\tif (chartContainer.value) {\r\n\t\t\t\tsetTimeout(drawChart, 50);\r\n\t\t\t}\r\n\t\t},\r\n\t\t{ deep: true }\r\n\t);\r\n\r\n\tonMounted(() => {\r\n\t\tsetTimeout(drawChart, 100);\r\n\t\twindow.addEventListener(\"resize\", drawChart);\r\n\t});\r\n\r\n\tonUnmounted(() => {\r\n\t\twindow.removeEventListener(\"resize\", drawChart);\r\n\t});\r\n</script>\r\n\r\n<style scoped>\r\n\t.full-chart-container {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tpadding: 20px;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.full-chart {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tmax-width: 900px;\r\n\t\tmax-height: 600px;\r\n\t\tposition: relative;\r\n\t\tbackground: white;\r\n\t\tborder-radius: 8px;\r\n\t\tbox-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.no-data-message {\r\n\t\tposition: absolute;\r\n\t\ttop: 50%;\r\n\t\tleft: 50%;\r\n\t\ttransform: translate(-50%, -50%);\r\n\t\ttext-align: center;\r\n\t\tcolor: #94a3b8;\r\n\t}\r\n\r\n\t.no-data-message span {\r\n\t\tdisplay: inline-block;\r\n\t\tpadding: 10px 20px;\r\n\t\tbackground: #f8f9fa;\r\n\t\tborder-radius: 4px;\r\n\t}\r\n\r\n\t.full-chart :deep(.highlight-point) {\r\n\t\tanimation: pulse 1.5s infinite ease-in-out;\r\n\t}\r\n\r\n\t@keyframes pulse {\r\n\t\t0% {\r\n\t\t\tr: 6;\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\t\t50% {\r\n\t\t\tr: 8;\r\n\t\t\topacity: 0.8;\r\n\t\t}\r\n\t\t100% {\r\n\t\t\tr: 6;\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\t}\r\n\r\n\t.full-chart :deep(.bar) {\r\n\t\ttransition: all 0.3s ease;\r\n\t}\r\n\r\n\t.full-chart :deep(.bar-label) {\r\n\t\tfont-family: system-ui, -apple-system, sans-serif;\r\n\t\tpointer-events: none;\r\n\t}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}