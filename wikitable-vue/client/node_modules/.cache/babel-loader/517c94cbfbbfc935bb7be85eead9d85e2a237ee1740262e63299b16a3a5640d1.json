{"ast":null,"code":"import { createVNode as _createVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-66d5df08\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  id: \"root\"\n};\nconst _hoisted_2 = {\n  class: \"middle-section\"\n};\nconst _hoisted_3 = {\n  class: \"visualization-container\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"文章可视化\", -1 /* HOISTED */));\nconst _hoisted_5 = {\n  ref: \"chart\",\n  class: \"chart-container\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode($setup[\"Div1\"], {\n    class: \"div\"\n  }), _createElementVNode(\"div\", _hoisted_2, [_createVNode($setup[\"Div2\"], {\n    class: \"div\"\n  }), _createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.text = $event),\n    placeholder: \"请输入文章内容\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.text]]), _createElementVNode(\"button\", {\n    onClick: $setup.processText\n  }, \"提交并可视化\"), _createElementVNode(\"div\", _hoisted_5, null, 512 /* NEED_PATCH */)])]), _createVNode($setup[\"Div3\"], {\n    class: \"div\"\n  })]);\n}","map":{"version":3,"names":["id","class","_createElementVNode","ref","_createElementBlock","_hoisted_1","_createVNode","$setup","_hoisted_2","_hoisted_3","_hoisted_4","_cache","$event","text","placeholder","onClick","processText","_hoisted_5"],"sources":["D:\\vue_frame\\vue_frame\\wikitable-vue\\client\\src\\components\\general.vue"],"sourcesContent":["<template>\r\n\t<div id=\"root\">\r\n\t\t<Div1 class=\"div\" />\r\n\t\t<div class=\"middle-section\">\r\n\t\t\t<Div2 class=\"div\" />\r\n\t\t\t<div class=\"visualization-container\">\r\n\t\t\t\t<h2>文章可视化</h2>\r\n\t\t\t\t<textarea v-model=\"text\" placeholder=\"请输入文章内容\"></textarea>\r\n\t\t\t\t<button @click=\"processText\">提交并可视化</button>\r\n\t\t\t\t<div ref=\"chart\" class=\"chart-container\"></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<Div3 class=\"div\" />\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ref, toRaw, onMounted } from \"vue\";\r\n\timport * as d3 from \"d3\";\r\n\timport Div1 from \"./Div1.vue\";\r\n\timport Div2 from \"./Div2.vue\";\r\n\timport Div3 from \"./Div3.vue\";\r\n\timport {\r\n\t\trenderLineChart,\r\n\t\trenderBarChart,\r\n\t\trenderPieChart\r\n\t} from \"@/js/chartUtils\";\r\n\r\n\tconst text = ref(\"\"); // 用户输入的文章内容\r\n\tconst jsonData = ref(null);\r\n\r\n\tasync function processText() {\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(\"http://localhost:8888/process_text\", {\r\n\t\t\t\tmethod: \"POST\",\r\n\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\r\n\t\t\t\tbody: JSON.stringify({ text: text.value })\r\n\t\t\t});\r\n\t\t\tconst result = await response.json();\r\n\t\t\tif (result.error) {\r\n\t\t\t\talert(`处理文章内容时出错: ${result.message}`);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tjsonData.value = result.json_data;\r\n\t\t\trenderChart();\r\n\t\t} catch (error) {\r\n\t\t\talert(\"处理文章内容时出错，请稍后重试\");\r\n\t\t}\r\n\t}\r\n\r\n\tfunction renderChart() {\r\n\t\tconst rawJsonData = toRaw(jsonData.value);\r\n\t\tif (!rawJsonData || typeof rawJsonData !== \"object\" || !rawJsonData.data)\r\n\t\t\treturn;\r\n\t\td3.select(chart.value).html(\"\");\r\n\r\n\t\tconst chartType = rawJsonData.type;\r\n\t\tconst data = rawJsonData.data;\r\n\t\tconst options = rawJsonData.options || {};\r\n\r\n\t\tif (chartType === \"line\") {\r\n\t\t\trenderLineChart(chart.value, data, options);\r\n\t\t} else if (chartType === \"bar\") {\r\n\t\t\trenderBarChart(chart.value, data, options);\r\n\t\t} else if (chartType === \"pie\") {\r\n\t\t\trenderPieChart(chart.value, data, options);\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t#root {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: flex-start;\r\n\t\theight: 100vh;\r\n\t\twidth: 100%;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.div {\r\n\t\tborder: 1px solid red;\r\n\t}\r\n\r\n\t.middle-section {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\twidth: 30%;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.visualization-container {\r\n\t\twidth: 100%;\r\n\t\tpadding: 10px;\r\n\t\tbackground-color: #f9f9f9;\r\n\t\tborder-radius: 8px;\r\n\t\tbox-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n\t}\r\n\r\n\ttextarea {\r\n\t\twidth: 90%;\r\n\t\theight: 100px;\r\n\t\tmargin-bottom: 10px;\r\n\t\tpadding: 8px;\r\n\t\tfont-size: 14px;\r\n\t\tborder: 1px solid #ccc;\r\n\t\tborder-radius: 4px;\r\n\t}\r\n\r\n\tbutton {\r\n\t\twidth: 100%;\r\n\t\tpadding: 10px;\r\n\t\tbackground-color: #4caf50;\r\n\t\tcolor: white;\r\n\t\tborder: none;\r\n\t\tborder-radius: 4px;\r\n\t\tcursor: pointer;\r\n\t}\r\n\r\n\tbutton:hover {\r\n\t\tbackground-color: #45a049;\r\n\t}\r\n\r\n\t.chart-container {\r\n\t\twidth: 100%;\r\n\t\theight: 300px;\r\n\t\tbackground-color: white;\r\n\t\tborder-radius: 8px;\r\n\t\tbox-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n\t}\r\n</style>\r\n"],"mappings":";;;EACMA,EAAE,EAAC;AAAM;;EAERC,KAAK,EAAC;AAAgB;;EAErBA,KAAK,EAAC;AAAyB;gEACnCC,mBAAA,CAAc,YAAV,OAAK;;EAGJC,GAAG,EAAC,OAAO;EAACF,KAAK,EAAC;;;uBAR1BG,mBAAA,CAYM,OAZNC,UAYM,GAXLC,YAAA,CAAoBC,MAAA;IAAdN,KAAK,EAAC;EAAK,IACjBC,mBAAA,CAQM,OARNM,UAQM,GAPLF,YAAA,CAAoBC,MAAA;IAAdN,KAAK,EAAC;EAAK,IACjBC,mBAAA,CAKM,OALNO,UAKM,GAJLC,UAAc,E,gBACdR,mBAAA,CAA0D;IAP9D,uBAAAS,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAOuBL,MAAA,CAAAM,IAAI,GAAAD,MAAA;IAAEE,WAAW,EAAC;iDAAlBP,MAAA,CAAAM,IAAI,E,GACvBX,mBAAA,CAA4C;IAAnCa,OAAK,EAAER,MAAA,CAAAS;EAAW,GAAE,QAAM,GACnCd,mBAAA,CAA+C,OAA/Ce,UAA+C,8B,KAGjDX,YAAA,CAAoBC,MAAA;IAAdN,KAAK,EAAC;EAAK,G","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}