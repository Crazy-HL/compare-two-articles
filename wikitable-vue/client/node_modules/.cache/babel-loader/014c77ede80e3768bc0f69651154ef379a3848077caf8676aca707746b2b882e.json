{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted, onUnmounted, nextTick } from \"vue\";\nimport LoadingSpinner from \"./LoadingSpinner.vue\";\nimport ErrorDisplay from \"./ErrorDisplay.vue\";\nimport WikipediaContent from \"./WikipediaContent.vue\";\nimport TextPopup from \"./TextPopup.vue\";\nimport ArticleOutline from \"./ArticleOutline.vue\";\nimport * as d3 from \"d3\";\nimport bus from \"@/js/eventBus.js\";\nimport { parseInfoboxForComparison } from \"@/js/wikiInfoboxParser\";\nexport default {\n  __name: 'ParentComponent',\n  props: {\n    pageTitle: String,\n    divId: String,\n    selectContentClass: String,\n    linkedOutline: Array\n  },\n  setup(__props, _ref) {\n    let {\n      expose: __expose\n    } = _ref;\n    __expose();\n    const props = __props;\n    const pageHtml = ref(\"\");\n    const loading = ref(true);\n    const error = ref(\"\");\n    const selectedText = ref({});\n    const showPopup = ref({});\n    const divRef = ref(null);\n    const highlightedParagraphs = ref({});\n    const MainTextContent = ref(\"\");\n    const exactHighlightTexts = {\n      div1: {\n        GDP: [\"China is also the world's largest consumer of numerous commodities, and accounts for about half of global consumption of metals\", \"China has bilateral free trade agreements with many nations and is a member of the Regional Comprehensive Economic Partnership (RCEP).\"],\n        Population: [\"1.4 billion\", \"population census\"]\n      },\n      div3: {\n        GDP: [\"The American Reinvestment and Recovery Act was enacted by the United States Congress, and in the ensuing years the U.S. experienced the longest economic expansion on record by July 2019\"],\n        Population: [\"330 million\", \"population density\"]\n      }\n    };\n    const fetchWikipediaContent = async () => {\n      loading.value = true;\n      error.value = \"\";\n      try {\n        const apiUrl = `https://en.wikipedia.org/api/rest_v1/page/html/${encodeURIComponent(props.pageTitle)}`;\n        const response = await fetch(apiUrl);\n        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\n        const html = await response.text();\n        MainTextContent.value = cleanWikipediaContent(html);\n        const parser = new DOMParser();\n        const doc = parser.parseFromString(html, \"text/html\");\n\n        // 解析Infobox数据\n        const infobox = doc.querySelector(\".infobox, .sidebar, .toccolours\");\n        let comparisonData = parseInfoboxForComparison(infobox);\n\n        // 确保数据结构完整\n        if (!comparisonData.data || !comparisonData.data.sections) {\n          comparisonData = {\n            ...comparisonData,\n            data: {\n              sections: {}\n            }\n          };\n        }\n\n        // 发射Infobox数据\n        bus.emit(`${props.divId}_InfoboxData`, {\n          title: comparisonData.title || props.pageTitle,\n          type: comparisonData.type || \"经济\",\n          data: {\n            sections: comparisonData.data.sections || {}\n          }\n        });\n\n        // 清理文档\n        const sidebar = doc.querySelector(\".sidebar\");\n        if (sidebar) sidebar.remove();\n\n        // 处理标题ID\n        const headings = doc.querySelectorAll(\"h1, h2, h3, h4, h5, h6\");\n        headings.forEach((heading, index) => {\n          const uniqueId = `heading-${index}-${props.divId}`;\n          heading.id = uniqueId;\n        });\n\n        // 处理表格样式\n        const tables = doc.querySelectorAll(\"table\");\n        tables.forEach(table => {\n          table.classList.add(\"custom-table\");\n        });\n\n        // 注入样式\n        const styles = Array.from(doc.querySelectorAll('link[rel=\"stylesheet\"]'));\n        styles.forEach(link => {\n          if (!document.querySelector(`link[href=\"${link.href}\"]`)) {\n            const styleTag = document.createElement(\"link\");\n            styleTag.rel = \"stylesheet\";\n            styleTag.href = link.href;\n            document.head.appendChild(styleTag);\n          }\n        });\n\n        // 获取正文内容\n        const contentElement = doc.querySelector(\"body\");\n        if (!contentElement) throw new Error(\"Content not found\");\n        pageHtml.value = contentElement.innerHTML;\n        injectWikipediaStyles();\n\n        // 发射完整内容\n        bus.emit(`${props.divId}_FullContent`, {\n          content: pageHtml.value,\n          title: props.pageTitle\n        });\n      } catch (err) {\n        error.value = \"Error fetching Wikipedia content: \" + err.message;\n        console.error(\"获取维基百科内容失败:\", err);\n      } finally {\n        loading.value = false;\n      }\n    };\n    const cleanWikipediaContent = html => {\n      const parser = new DOMParser();\n      const doc = parser.parseFromString(html, \"text/html\");\n\n      // 移除不需要的元素\n      const selectorsToRemove = [\".infobox\", \".sidebar\", \".toc\", \".reflist\", \".hatnote\", \".navbox\", \".mw-editsection\", \"table.ambox\", \".shortdescription\", \"img\", \"figure\"];\n      selectorsToRemove.forEach(selector => {\n        doc.querySelectorAll(selector).forEach(el => el.remove());\n      });\n\n      // 提取正文部分\n      const bodyContent = doc.querySelector(\"#bodyContent, #mw-content-text\") || doc.body;\n\n      // 获取纯文本并优化格式\n      let plainText = bodyContent.textContent || bodyContent.innerText;\n      plainText = plainText.replace(/\\s+/g, \" \").replace(/\\[\\d+\\]/g, \"\").trim();\n      return plainText;\n    };\n    const injectWikipediaStyles = () => {\n      const wikipediaStyles = [\"https://en.wikipedia.org/w/load.php?modules=site.styles\", \"https://en.wikipedia.org/w/load.php?modules=ext.cite.styles\", \"https://en.wikipedia.org/w/load.php?modules=ext.scribunto.styles\", \"https://en.wikipedia.org/w/load.php?modules=skins.vector.styles\"];\n      wikipediaStyles.forEach(url => {\n        if (!document.querySelector(`link[href=\"${url}\"]`)) {\n          const styleTag = document.createElement(\"link\");\n          styleTag.rel = \"stylesheet\";\n          styleTag.href = url;\n          document.head.appendChild(styleTag);\n        }\n      });\n    };\n    const handleHoverInfobox = _ref2 => {\n      let {\n        fieldKey,\n        infoboxTitle\n      } = _ref2;\n      if (props.pageTitle !== infoboxTitle) return;\n      const infobox = divRef.value?.querySelector(\".infobox, .sidebar, .toccolours\");\n      if (!infobox) return;\n      clearInfoboxHighlights();\n      const rows = infobox.querySelectorAll(\"tr\");\n      for (const row of rows) {\n        const th = row.querySelector(\"th\");\n        if (th && th.textContent.trim() === fieldKey) {\n          row.classList.add(\"infobox-highlight\");\n          break;\n        }\n      }\n    };\n    const handleUnhoverInfobox = () => {\n      clearInfoboxHighlights();\n    };\n    const clearInfoboxHighlights = () => {\n      const infobox = divRef.value?.querySelector(\".infobox, .sidebar, .toccolours\");\n      if (infobox) {\n        infobox.querySelectorAll(\".infobox-highlight\").forEach(row => {\n          row.classList.remove(\"infobox-highlight\");\n        });\n      }\n    };\n    const handleSelection = content => {\n      const isTable = /<table.*?>.*?<\\/table>/s.test(content);\n      const selection = window.getSelection();\n      if (!selection || selection.rangeCount === 0) return;\n      const range = selection.getRangeAt(0);\n      const selectedNodes = range.cloneContents().childNodes;\n      let sourceId = undefined;\n      for (const node of selectedNodes) {\n        if (node.nodeType === Node.ELEMENT_NODE && /^h[1-6]$/i.test(node.tagName)) {\n          sourceId = node.id;\n          break;\n        }\n      }\n      if (!sourceId) {\n        let startElement = range.startContainer;\n        while (startElement && !/^h[1-6]$/i.test(startElement.tagName)) {\n          startElement = startElement.parentElement;\n        }\n        sourceId = startElement ? startElement.id : undefined;\n      }\n      if (!sourceId) {\n        selectedText.value[props.divId] = content;\n        bus.emit(`${props.divId}_Event`, {\n          content\n        });\n        showPopup.value[props.divId] = true;\n        nextTick(() => {\n          updatePopupPosition();\n        });\n        return;\n      }\n      handleSelectionWithSourceId(content, sourceId, isTable);\n    };\n    const handleSelectionWithSourceId = (content, sourceId, isTable) => {\n      selectedText.value[props.divId] = content;\n      bus.emit(`${props.divId}_Event`, {\n        content\n      });\n      showPopup.value[props.divId] = true;\n      if (isTable) {\n        const {\n          linkedItem,\n          chapterContent\n        } = extractLinkedChapterContent(sourceId, props.divId);\n        if (linkedItem && chapterContent) {\n          const otherContainerId = props.divId === \"div1\" ? \"div3\" : \"div1\";\n          const targetId = props.divId === \"div1\" ? linkedItem.rightId : linkedItem.leftId;\n          const targetElement = document.getElementById(targetId);\n          if (targetElement) {\n            targetElement.scrollIntoView({\n              behavior: \"smooth\"\n            });\n          }\n          bus.emit(`${otherContainerId}_Event`, {\n            content: chapterContent\n          });\n          bus.emit(`${otherContainerId}Event`, {\n            content: chapterContent,\n            sourceId: sourceId\n          });\n        }\n      }\n      nextTick(() => {\n        updatePopupPosition();\n      });\n    };\n    const closePopup = () => {\n      showPopup.value[props.divId] = false;\n      selectedText.value[props.divId] = \"\";\n      const container = props.divId === \"div1\" ? \".chart-container1\" : \".chart-container2\";\n      d3.select(container).html(\"\");\n    };\n    const updatePopupPosition = () => {\n      if (showPopup.value[props.divId] && divRef.value) {\n        const popup = divRef.value.querySelector(\".text-popup\");\n        const overlay = divRef.value.querySelector(\".overlay\");\n        if (popup && overlay) {\n          const rect = divRef.value.getBoundingClientRect();\n          const scrollTop = divRef.value.scrollTop;\n          const scrollLeft = divRef.value.scrollLeft;\n          overlay.style.top = `${scrollTop}px`;\n          overlay.style.left = `${scrollLeft}px`;\n          overlay.style.width = `${divRef.value.clientWidth}px`;\n          overlay.style.height = `${divRef.value.clientHeight}px`;\n          popup.style.top = `${rect.height / 2 + scrollTop}px`;\n          popup.style.left = `${rect.width / 2 + scrollLeft}px`;\n        }\n      }\n    };\n    const extractLinkedChapterContent = (sourceId, sourceContainerId) => {\n      if (!props.linkedOutline) {\n        return {\n          linkedItem: null,\n          chapterContent: \"\"\n        };\n      }\n      const linkedItem = props.linkedOutline.find(linked => linked.leftId === sourceId || linked.rightId === sourceId);\n      if (!linkedItem) {\n        return {\n          linkedItem: null,\n          chapterContent: \"\"\n        };\n      }\n      const targetContainerId = sourceContainerId === \"div1\" ? \"div3\" : \"div1\";\n      const targetId = sourceContainerId === \"div1\" ? linkedItem.rightId : linkedItem.leftId;\n      const targetContainer = document.getElementById(targetContainerId);\n      if (!targetContainer) {\n        return {\n          linkedItem: null,\n          chapterContent: \"\"\n        };\n      }\n      const targetElement = targetContainer.querySelector(`#${targetId}`);\n      if (!targetElement) {\n        return {\n          linkedItem: null,\n          chapterContent: \"\"\n        };\n      }\n      let chapterContent = \"\";\n      let currentNode = targetElement;\n      while (currentNode) {\n        if (currentNode !== targetElement && currentNode.nodeType === Node.ELEMENT_NODE && /^h[1-6]$/i.test(currentNode.tagName)) {\n          break;\n        }\n        if (currentNode.nodeType === Node.ELEMENT_NODE || currentNode.nodeType === Node.TEXT_NODE) {\n          chapterContent += currentNode.outerHTML || currentNode.textContent;\n        }\n        currentNode = currentNode.nextSibling;\n      }\n      return {\n        linkedItem,\n        chapterContent\n      };\n    };\n    const highlightParagraphs = fieldKey => {\n      clearHighlights();\n      if (!divRef.value) return;\n      const textsToHighlight = exactHighlightTexts[props.divId]?.[fieldKey] || [];\n      textsToHighlight.forEach(text => {\n        highlightExactText(text);\n      });\n    };\n    const highlightExactText = textToHighlight => {\n      const contentElement = divRef.value?.querySelector(\".wikipedia-content\");\n      if (!contentElement || !textToHighlight) return;\n      const walker = document.createTreeWalker(contentElement, NodeFilter.SHOW_TEXT, null, false);\n      let node;\n      const matches = [];\n      while (node = walker.nextNode()) {\n        const nodeValue = node.nodeValue;\n        let pos = 0;\n        while ((pos = nodeValue.indexOf(textToHighlight, pos)) >= 0) {\n          matches.push({\n            node,\n            start: pos,\n            end: pos + textToHighlight.length\n          });\n          pos += textToHighlight.length;\n        }\n      }\n      matches.reverse().forEach(_ref3 => {\n        let {\n          node,\n          start,\n          end\n        } = _ref3;\n        const parent = node.parentNode;\n        const before = node.splitText(start);\n        const highlighted = before.splitText(end - start);\n        const span = document.createElement(\"span\");\n        span.className = `highlight-exact highlight-${props.divId}`;\n        span.textContent = before.nodeValue;\n        parent.replaceChild(span, before);\n        if (!highlightedParagraphs.value[props.divId]) {\n          highlightedParagraphs.value[props.divId] = [];\n        }\n        highlightedParagraphs.value[props.divId].push(span);\n      });\n      if (highlightedParagraphs.value[props.divId]?.[0]) {\n        highlightedParagraphs.value[props.divId][0].scrollIntoView({\n          behavior: \"smooth\",\n          block: \"center\"\n        });\n      }\n    };\n    const clearHighlights = () => {\n      if (!highlightedParagraphs.value[props.divId]) return;\n      highlightedParagraphs.value[props.divId].forEach(highlight => {\n        if (highlight?.parentNode) {\n          const textNode = document.createTextNode(highlight.textContent);\n          highlight.parentNode.replaceChild(textNode, highlight);\n        }\n      });\n      highlightedParagraphs.value[props.divId] = [];\n    };\n    onMounted(() => {\n      fetchWikipediaContent();\n      if (divRef.value) {\n        divRef.value.addEventListener(\"scroll\", updatePopupPosition);\n      }\n      const hoverEvent = `hover-${props.divId === \"div1\" ? \"left\" : \"right\"}-infobox`;\n      const unhoverEvent = `unhover-${props.divId === \"div1\" ? \"left\" : \"right\"}-infobox`;\n      bus.on(hoverEvent, handleHoverInfobox);\n      bus.on(unhoverEvent, handleUnhoverInfobox);\n      bus.on(`${props.divId}Event`, _ref4 => {\n        let {\n          content,\n          sourceId\n        } = _ref4;\n        selectedText.value[props.divId] = content;\n        showPopup.value[props.divId] = true;\n        nextTick(() => {\n          updatePopupPosition();\n        });\n      });\n      bus.on(`highlight-${props.divId}-paragraphs`, highlightParagraphs);\n      bus.on(`clear-${props.divId}-highlights`, clearHighlights);\n    });\n    onUnmounted(() => {\n      if (divRef.value) {\n        divRef.value.removeEventListener(\"scroll\", updatePopupPosition);\n      }\n      const hoverEvent = `hover-${props.divId === \"div1\" ? \"left\" : \"right\"}-infobox`;\n      const unhoverEvent = `unhover-${props.divId === \"div1\" ? \"left\" : \"right\"}-infobox`;\n      bus.off(hoverEvent, handleHoverInfobox);\n      bus.off(unhoverEvent, handleUnhoverInfobox);\n      bus.off(`${props.divId}Event`);\n      bus.off(`highlight-${props.divId}-paragraphs`, highlightParagraphs);\n      bus.off(`clear-${props.divId}-highlights`, clearHighlights);\n    });\n    const __returned__ = {\n      props,\n      pageHtml,\n      loading,\n      error,\n      selectedText,\n      showPopup,\n      divRef,\n      highlightedParagraphs,\n      MainTextContent,\n      exactHighlightTexts,\n      fetchWikipediaContent,\n      cleanWikipediaContent,\n      injectWikipediaStyles,\n      handleHoverInfobox,\n      handleUnhoverInfobox,\n      clearInfoboxHighlights,\n      handleSelection,\n      handleSelectionWithSourceId,\n      closePopup,\n      updatePopupPosition,\n      extractLinkedChapterContent,\n      highlightParagraphs,\n      highlightExactText,\n      clearHighlights,\n      ref,\n      onMounted,\n      onUnmounted,\n      nextTick,\n      LoadingSpinner,\n      ErrorDisplay,\n      WikipediaContent,\n      TextPopup,\n      ArticleOutline,\n      get d3() {\n        return d3;\n      },\n      get bus() {\n        return bus;\n      },\n      get parseInfoboxForComparison() {\n        return parseInfoboxForComparison;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","onUnmounted","nextTick","LoadingSpinner","ErrorDisplay","WikipediaContent","TextPopup","ArticleOutline","d3","bus","parseInfoboxForComparison","props","__props","pageHtml","loading","error","selectedText","showPopup","divRef","highlightedParagraphs","MainTextContent","exactHighlightTexts","div1","GDP","Population","div3","fetchWikipediaContent","value","apiUrl","encodeURIComponent","pageTitle","response","fetch","ok","Error","status","html","text","cleanWikipediaContent","parser","DOMParser","doc","parseFromString","infobox","querySelector","comparisonData","data","sections","emit","divId","title","type","sidebar","remove","headings","querySelectorAll","forEach","heading","index","uniqueId","id","tables","table","classList","add","styles","Array","from","link","document","href","styleTag","createElement","rel","head","appendChild","contentElement","innerHTML","injectWikipediaStyles","content","err","message","console","selectorsToRemove","selector","el","bodyContent","body","plainText","textContent","innerText","replace","trim","wikipediaStyles","url","handleHoverInfobox","_ref2","fieldKey","infoboxTitle","clearInfoboxHighlights","rows","row","th","handleUnhoverInfobox","handleSelection","isTable","test","selection","window","getSelection","rangeCount","range","getRangeAt","selectedNodes","cloneContents","childNodes","sourceId","undefined","node","nodeType","Node","ELEMENT_NODE","tagName","startElement","startContainer","parentElement","updatePopupPosition","handleSelectionWithSourceId","linkedItem","chapterContent","extractLinkedChapterContent","otherContainerId","targetId","rightId","leftId","targetElement","getElementById","scrollIntoView","behavior","closePopup","container","select","popup","overlay","rect","getBoundingClientRect","scrollTop","scrollLeft","style","top","left","width","clientWidth","height","clientHeight","sourceContainerId","linkedOutline","find","linked","targetContainerId","targetContainer","currentNode","TEXT_NODE","outerHTML","nextSibling","highlightParagraphs","clearHighlights","textsToHighlight","highlightExactText","textToHighlight","walker","createTreeWalker","NodeFilter","SHOW_TEXT","matches","nextNode","nodeValue","pos","indexOf","push","start","end","length","reverse","_ref3","parent","parentNode","before","splitText","highlighted","span","className","replaceChild","block","highlight","textNode","createTextNode","addEventListener","hoverEvent","unhoverEvent","on","_ref4","removeEventListener","off"],"sources":["D:/vue_frame/vue_frame/wikitable-vue/client/src/components/compoents_base/ParentComponent.vue"],"sourcesContent":["<template>\r\n\t<div :class=\"['div0', selectContentClass]\" :id=\"divId\" ref=\"divRef\">\r\n\t\t<h1>{{ props.pageTitle }}</h1>\r\n\r\n\t\t<LoadingSpinner v-if=\"loading\" />\r\n\r\n\t\t<ErrorDisplay\r\n\t\t\tv-else-if=\"error\"\r\n\t\t\t:message=\"error\"\r\n\t\t\t@retry=\"fetchWikipediaContent\" />\r\n\r\n\t\t<WikipediaContent v-else :content=\"pageHtml\" @select=\"handleSelection\" />\r\n\r\n\t\t<TextPopup\r\n\t\t\t:visible=\"showPopup[divId]\"\r\n\t\t\t:content=\"selectedText[divId]\"\r\n\t\t\t:containerClass=\"\r\n\t\t\t\tdivId === 'div1' ? 'chart-container1' : 'chart-container2'\r\n\t\t\t\"\r\n\t\t\t:containerRef=\"divRef\"\r\n\t\t\t@close=\"closePopup\" />\r\n\r\n\t\t<ArticleOutline :content=\"pageHtml\" :divId=\"divId\" />\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { ref, onMounted, onUnmounted, nextTick } from \"vue\";\r\n\timport LoadingSpinner from \"./LoadingSpinner.vue\";\r\n\timport ErrorDisplay from \"./ErrorDisplay.vue\";\r\n\timport WikipediaContent from \"./WikipediaContent.vue\";\r\n\timport TextPopup from \"./TextPopup.vue\";\r\n\timport ArticleOutline from \"./ArticleOutline.vue\";\r\n\timport * as d3 from \"d3\";\r\n\timport bus from \"@/js/eventBus.js\";\r\n\timport { parseInfoboxForComparison } from \"@/js/wikiInfoboxParser\";\r\n\r\n\tconst props = defineProps({\r\n\t\tpageTitle: String,\r\n\t\tdivId: String,\r\n\t\tselectContentClass: String,\r\n\t\tlinkedOutline: Array\r\n\t});\r\n\r\n\tconst pageHtml = ref(\"\");\r\n\tconst loading = ref(true);\r\n\tconst error = ref(\"\");\r\n\tconst selectedText = ref({});\r\n\tconst showPopup = ref({});\r\n\tconst divRef = ref(null);\r\n\tconst highlightedParagraphs = ref({});\r\n\tconst MainTextContent = ref(\"\");\r\n\r\n\tconst exactHighlightTexts = {\r\n\t\tdiv1: {\r\n\t\t\tGDP: [\r\n\t\t\t\t\"China is also the world's largest consumer of numerous commodities, and accounts for about half of global consumption of metals\",\r\n\t\t\t\t\"China has bilateral free trade agreements with many nations and is a member of the Regional Comprehensive Economic Partnership (RCEP).\"\r\n\t\t\t],\r\n\t\t\tPopulation: [\"1.4 billion\", \"population census\"]\r\n\t\t},\r\n\t\tdiv3: {\r\n\t\t\tGDP: [\r\n\t\t\t\t\"The American Reinvestment and Recovery Act was enacted by the United States Congress, and in the ensuing years the U.S. experienced the longest economic expansion on record by July 2019\"\r\n\t\t\t],\r\n\t\t\tPopulation: [\"330 million\", \"population density\"]\r\n\t\t}\r\n\t};\r\n\r\n\tconst fetchWikipediaContent = async () => {\r\n\t\tloading.value = true;\r\n\t\terror.value = \"\";\r\n\r\n\t\ttry {\r\n\t\t\tconst apiUrl = `https://en.wikipedia.org/api/rest_v1/page/html/${encodeURIComponent(\r\n\t\t\t\tprops.pageTitle\r\n\t\t\t)}`;\r\n\t\t\tconst response = await fetch(apiUrl);\r\n\t\t\tif (!response.ok)\r\n\t\t\t\tthrow new Error(`HTTP error! status: ${response.status}`);\r\n\r\n\t\t\tconst html = await response.text();\r\n\t\t\tMainTextContent.value = cleanWikipediaContent(html);\r\n\r\n\t\t\tconst parser = new DOMParser();\r\n\t\t\tconst doc = parser.parseFromString(html, \"text/html\");\r\n\r\n\t\t\t// 解析Infobox数据\r\n\t\t\tconst infobox = doc.querySelector(\".infobox, .sidebar, .toccolours\");\r\n\t\t\tlet comparisonData = parseInfoboxForComparison(infobox);\r\n\r\n\t\t\t// 确保数据结构完整\r\n\t\t\tif (!comparisonData.data || !comparisonData.data.sections) {\r\n\t\t\t\tcomparisonData = {\r\n\t\t\t\t\t...comparisonData,\r\n\t\t\t\t\tdata: { sections: {} }\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\t// 发射Infobox数据\r\n\t\t\tbus.emit(`${props.divId}_InfoboxData`, {\r\n\t\t\t\ttitle: comparisonData.title || props.pageTitle,\r\n\t\t\t\ttype: comparisonData.type || \"经济\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tsections: comparisonData.data.sections || {}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// 清理文档\r\n\t\t\tconst sidebar = doc.querySelector(\".sidebar\");\r\n\t\t\tif (sidebar) sidebar.remove();\r\n\r\n\t\t\t// 处理标题ID\r\n\t\t\tconst headings = doc.querySelectorAll(\"h1, h2, h3, h4, h5, h6\");\r\n\t\t\theadings.forEach((heading, index) => {\r\n\t\t\t\tconst uniqueId = `heading-${index}-${props.divId}`;\r\n\t\t\t\theading.id = uniqueId;\r\n\t\t\t});\r\n\r\n\t\t\t// 处理表格样式\r\n\t\t\tconst tables = doc.querySelectorAll(\"table\");\r\n\t\t\ttables.forEach(table => {\r\n\t\t\t\ttable.classList.add(\"custom-table\");\r\n\t\t\t});\r\n\r\n\t\t\t// 注入样式\r\n\t\t\tconst styles = Array.from(doc.querySelectorAll('link[rel=\"stylesheet\"]'));\r\n\t\t\tstyles.forEach(link => {\r\n\t\t\t\tif (!document.querySelector(`link[href=\"${link.href}\"]`)) {\r\n\t\t\t\t\tconst styleTag = document.createElement(\"link\");\r\n\t\t\t\t\tstyleTag.rel = \"stylesheet\";\r\n\t\t\t\t\tstyleTag.href = link.href;\r\n\t\t\t\t\tdocument.head.appendChild(styleTag);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// 获取正文内容\r\n\t\t\tconst contentElement = doc.querySelector(\"body\");\r\n\t\t\tif (!contentElement) throw new Error(\"Content not found\");\r\n\r\n\t\t\tpageHtml.value = contentElement.innerHTML;\r\n\t\t\tinjectWikipediaStyles();\r\n\r\n\t\t\t// 发射完整内容\r\n\t\t\tbus.emit(`${props.divId}_FullContent`, {\r\n\t\t\t\tcontent: pageHtml.value,\r\n\t\t\t\ttitle: props.pageTitle\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\terror.value = \"Error fetching Wikipedia content: \" + err.message;\r\n\t\t\tconsole.error(\"获取维基百科内容失败:\", err);\r\n\t\t} finally {\r\n\t\t\tloading.value = false;\r\n\t\t}\r\n\t};\r\n\r\n\tconst cleanWikipediaContent = html => {\r\n\t\tconst parser = new DOMParser();\r\n\t\tconst doc = parser.parseFromString(html, \"text/html\");\r\n\r\n\t\t// 移除不需要的元素\r\n\t\tconst selectorsToRemove = [\r\n\t\t\t\".infobox\",\r\n\t\t\t\".sidebar\",\r\n\t\t\t\".toc\",\r\n\t\t\t\".reflist\",\r\n\t\t\t\".hatnote\",\r\n\t\t\t\".navbox\",\r\n\t\t\t\".mw-editsection\",\r\n\t\t\t\"table.ambox\",\r\n\t\t\t\".shortdescription\",\r\n\t\t\t\"img\",\r\n\t\t\t\"figure\"\r\n\t\t];\r\n\r\n\t\tselectorsToRemove.forEach(selector => {\r\n\t\t\tdoc.querySelectorAll(selector).forEach(el => el.remove());\r\n\t\t});\r\n\r\n\t\t// 提取正文部分\r\n\t\tconst bodyContent =\r\n\t\t\tdoc.querySelector(\"#bodyContent, #mw-content-text\") || doc.body;\r\n\r\n\t\t// 获取纯文本并优化格式\r\n\t\tlet plainText = bodyContent.textContent || bodyContent.innerText;\r\n\t\tplainText = plainText\r\n\t\t\t.replace(/\\s+/g, \" \")\r\n\t\t\t.replace(/\\[\\d+\\]/g, \"\")\r\n\t\t\t.trim();\r\n\r\n\t\treturn plainText;\r\n\t};\r\n\r\n\tconst injectWikipediaStyles = () => {\r\n\t\tconst wikipediaStyles = [\r\n\t\t\t\"https://en.wikipedia.org/w/load.php?modules=site.styles\",\r\n\t\t\t\"https://en.wikipedia.org/w/load.php?modules=ext.cite.styles\",\r\n\t\t\t\"https://en.wikipedia.org/w/load.php?modules=ext.scribunto.styles\",\r\n\t\t\t\"https://en.wikipedia.org/w/load.php?modules=skins.vector.styles\"\r\n\t\t];\r\n\r\n\t\twikipediaStyles.forEach(url => {\r\n\t\t\tif (!document.querySelector(`link[href=\"${url}\"]`)) {\r\n\t\t\t\tconst styleTag = document.createElement(\"link\");\r\n\t\t\t\tstyleTag.rel = \"stylesheet\";\r\n\t\t\t\tstyleTag.href = url;\r\n\t\t\t\tdocument.head.appendChild(styleTag);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleHoverInfobox = ({ fieldKey, infoboxTitle }) => {\r\n\t\tif (props.pageTitle !== infoboxTitle) return;\r\n\r\n\t\tconst infobox = divRef.value?.querySelector(\r\n\t\t\t\".infobox, .sidebar, .toccolours\"\r\n\t\t);\r\n\t\tif (!infobox) return;\r\n\r\n\t\tclearInfoboxHighlights();\r\n\r\n\t\tconst rows = infobox.querySelectorAll(\"tr\");\r\n\t\tfor (const row of rows) {\r\n\t\t\tconst th = row.querySelector(\"th\");\r\n\t\t\tif (th && th.textContent.trim() === fieldKey) {\r\n\t\t\t\trow.classList.add(\"infobox-highlight\");\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleUnhoverInfobox = () => {\r\n\t\tclearInfoboxHighlights();\r\n\t};\r\n\r\n\tconst clearInfoboxHighlights = () => {\r\n\t\tconst infobox = divRef.value?.querySelector(\r\n\t\t\t\".infobox, .sidebar, .toccolours\"\r\n\t\t);\r\n\t\tif (infobox) {\r\n\t\t\tinfobox.querySelectorAll(\".infobox-highlight\").forEach(row => {\r\n\t\t\t\trow.classList.remove(\"infobox-highlight\");\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleSelection = content => {\r\n\t\tconst isTable = /<table.*?>.*?<\\/table>/s.test(content);\r\n\t\tconst selection = window.getSelection();\r\n\t\tif (!selection || selection.rangeCount === 0) return;\r\n\r\n\t\tconst range = selection.getRangeAt(0);\r\n\t\tconst selectedNodes = range.cloneContents().childNodes;\r\n\r\n\t\tlet sourceId = undefined;\r\n\t\tfor (const node of selectedNodes) {\r\n\t\t\tif (\r\n\t\t\t\tnode.nodeType === Node.ELEMENT_NODE &&\r\n\t\t\t\t/^h[1-6]$/i.test(node.tagName)\r\n\t\t\t) {\r\n\t\t\t\tsourceId = node.id;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!sourceId) {\r\n\t\t\tlet startElement = range.startContainer;\r\n\t\t\twhile (startElement && !/^h[1-6]$/i.test(startElement.tagName)) {\r\n\t\t\t\tstartElement = startElement.parentElement;\r\n\t\t\t}\r\n\t\t\tsourceId = startElement ? startElement.id : undefined;\r\n\t\t}\r\n\r\n\t\tif (!sourceId) {\r\n\t\t\tselectedText.value[props.divId] = content;\r\n\t\t\tbus.emit(`${props.divId}_Event`, { content });\r\n\t\t\tshowPopup.value[props.divId] = true;\r\n\t\t\tnextTick(() => {\r\n\t\t\t\tupdatePopupPosition();\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\thandleSelectionWithSourceId(content, sourceId, isTable);\r\n\t};\r\n\r\n\tconst handleSelectionWithSourceId = (content, sourceId, isTable) => {\r\n\t\tselectedText.value[props.divId] = content;\r\n\t\tbus.emit(`${props.divId}_Event`, { content });\r\n\t\tshowPopup.value[props.divId] = true;\r\n\r\n\t\tif (isTable) {\r\n\t\t\tconst { linkedItem, chapterContent } = extractLinkedChapterContent(\r\n\t\t\t\tsourceId,\r\n\t\t\t\tprops.divId\r\n\t\t\t);\r\n\r\n\t\t\tif (linkedItem && chapterContent) {\r\n\t\t\t\tconst otherContainerId = props.divId === \"div1\" ? \"div3\" : \"div1\";\r\n\t\t\t\tconst targetId =\r\n\t\t\t\t\tprops.divId === \"div1\" ? linkedItem.rightId : linkedItem.leftId;\r\n\r\n\t\t\t\tconst targetElement = document.getElementById(targetId);\r\n\t\t\t\tif (targetElement) {\r\n\t\t\t\t\ttargetElement.scrollIntoView({ behavior: \"smooth\" });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbus.emit(`${otherContainerId}_Event`, { content: chapterContent });\r\n\t\t\t\tbus.emit(`${otherContainerId}Event`, {\r\n\t\t\t\t\tcontent: chapterContent,\r\n\t\t\t\t\tsourceId: sourceId\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tnextTick(() => {\r\n\t\t\tupdatePopupPosition();\r\n\t\t});\r\n\t};\r\n\r\n\tconst closePopup = () => {\r\n\t\tshowPopup.value[props.divId] = false;\r\n\t\tselectedText.value[props.divId] = \"\";\r\n\t\tconst container =\r\n\t\t\tprops.divId === \"div1\" ? \".chart-container1\" : \".chart-container2\";\r\n\t\td3.select(container).html(\"\");\r\n\t};\r\n\r\n\tconst updatePopupPosition = () => {\r\n\t\tif (showPopup.value[props.divId] && divRef.value) {\r\n\t\t\tconst popup = divRef.value.querySelector(\".text-popup\");\r\n\t\t\tconst overlay = divRef.value.querySelector(\".overlay\");\r\n\t\t\tif (popup && overlay) {\r\n\t\t\t\tconst rect = divRef.value.getBoundingClientRect();\r\n\t\t\t\tconst scrollTop = divRef.value.scrollTop;\r\n\t\t\t\tconst scrollLeft = divRef.value.scrollLeft;\r\n\r\n\t\t\t\toverlay.style.top = `${scrollTop}px`;\r\n\t\t\t\toverlay.style.left = `${scrollLeft}px`;\r\n\t\t\t\toverlay.style.width = `${divRef.value.clientWidth}px`;\r\n\t\t\t\toverlay.style.height = `${divRef.value.clientHeight}px`;\r\n\r\n\t\t\t\tpopup.style.top = `${rect.height / 2 + scrollTop}px`;\r\n\t\t\t\tpopup.style.left = `${rect.width / 2 + scrollLeft}px`;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tconst extractLinkedChapterContent = (sourceId, sourceContainerId) => {\r\n\t\tif (!props.linkedOutline) {\r\n\t\t\treturn { linkedItem: null, chapterContent: \"\" };\r\n\t\t}\r\n\r\n\t\tconst linkedItem = props.linkedOutline.find(\r\n\t\t\tlinked => linked.leftId === sourceId || linked.rightId === sourceId\r\n\t\t);\r\n\t\tif (!linkedItem) {\r\n\t\t\treturn { linkedItem: null, chapterContent: \"\" };\r\n\t\t}\r\n\r\n\t\tconst targetContainerId = sourceContainerId === \"div1\" ? \"div3\" : \"div1\";\r\n\t\tconst targetId =\r\n\t\t\tsourceContainerId === \"div1\" ? linkedItem.rightId : linkedItem.leftId;\r\n\r\n\t\tconst targetContainer = document.getElementById(targetContainerId);\r\n\t\tif (!targetContainer) {\r\n\t\t\treturn { linkedItem: null, chapterContent: \"\" };\r\n\t\t}\r\n\r\n\t\tconst targetElement = targetContainer.querySelector(`#${targetId}`);\r\n\t\tif (!targetElement) {\r\n\t\t\treturn { linkedItem: null, chapterContent: \"\" };\r\n\t\t}\r\n\r\n\t\tlet chapterContent = \"\";\r\n\t\tlet currentNode = targetElement;\r\n\r\n\t\twhile (currentNode) {\r\n\t\t\tif (\r\n\t\t\t\tcurrentNode !== targetElement &&\r\n\t\t\t\tcurrentNode.nodeType === Node.ELEMENT_NODE &&\r\n\t\t\t\t/^h[1-6]$/i.test(currentNode.tagName)\r\n\t\t\t) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\tcurrentNode.nodeType === Node.ELEMENT_NODE ||\r\n\t\t\t\tcurrentNode.nodeType === Node.TEXT_NODE\r\n\t\t\t) {\r\n\t\t\t\tchapterContent += currentNode.outerHTML || currentNode.textContent;\r\n\t\t\t}\r\n\r\n\t\t\tcurrentNode = currentNode.nextSibling;\r\n\t\t}\r\n\r\n\t\treturn { linkedItem, chapterContent };\r\n\t};\r\n\r\n\tconst highlightParagraphs = fieldKey => {\r\n\t\tclearHighlights();\r\n\r\n\t\tif (!divRef.value) return;\r\n\r\n\t\tconst textsToHighlight = exactHighlightTexts[props.divId]?.[fieldKey] || [];\r\n\r\n\t\ttextsToHighlight.forEach(text => {\r\n\t\t\thighlightExactText(text);\r\n\t\t});\r\n\t};\r\n\r\n\tconst highlightExactText = textToHighlight => {\r\n\t\tconst contentElement = divRef.value?.querySelector(\".wikipedia-content\");\r\n\t\tif (!contentElement || !textToHighlight) return;\r\n\r\n\t\tconst walker = document.createTreeWalker(\r\n\t\t\tcontentElement,\r\n\t\t\tNodeFilter.SHOW_TEXT,\r\n\t\t\tnull,\r\n\t\t\tfalse\r\n\t\t);\r\n\r\n\t\tlet node;\r\n\t\tconst matches = [];\r\n\r\n\t\twhile ((node = walker.nextNode())) {\r\n\t\t\tconst nodeValue = node.nodeValue;\r\n\t\t\tlet pos = 0;\r\n\t\t\twhile ((pos = nodeValue.indexOf(textToHighlight, pos)) >= 0) {\r\n\t\t\t\tmatches.push({\r\n\t\t\t\t\tnode,\r\n\t\t\t\t\tstart: pos,\r\n\t\t\t\t\tend: pos + textToHighlight.length\r\n\t\t\t\t});\r\n\t\t\t\tpos += textToHighlight.length;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tmatches.reverse().forEach(({ node, start, end }) => {\r\n\t\t\tconst parent = node.parentNode;\r\n\r\n\t\t\tconst before = node.splitText(start);\r\n\t\t\tconst highlighted = before.splitText(end - start);\r\n\r\n\t\t\tconst span = document.createElement(\"span\");\r\n\t\t\tspan.className = `highlight-exact highlight-${props.divId}`;\r\n\t\t\tspan.textContent = before.nodeValue;\r\n\r\n\t\t\tparent.replaceChild(span, before);\r\n\r\n\t\t\tif (!highlightedParagraphs.value[props.divId]) {\r\n\t\t\t\thighlightedParagraphs.value[props.divId] = [];\r\n\t\t\t}\r\n\t\t\thighlightedParagraphs.value[props.divId].push(span);\r\n\t\t});\r\n\r\n\t\tif (highlightedParagraphs.value[props.divId]?.[0]) {\r\n\t\t\thighlightedParagraphs.value[props.divId][0].scrollIntoView({\r\n\t\t\t\tbehavior: \"smooth\",\r\n\t\t\t\tblock: \"center\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst clearHighlights = () => {\r\n\t\tif (!highlightedParagraphs.value[props.divId]) return;\r\n\r\n\t\thighlightedParagraphs.value[props.divId].forEach(highlight => {\r\n\t\t\tif (highlight?.parentNode) {\r\n\t\t\t\tconst textNode = document.createTextNode(highlight.textContent);\r\n\t\t\t\thighlight.parentNode.replaceChild(textNode, highlight);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\thighlightedParagraphs.value[props.divId] = [];\r\n\t};\r\n\r\n\tonMounted(() => {\r\n\t\tfetchWikipediaContent();\r\n\r\n\t\tif (divRef.value) {\r\n\t\t\tdivRef.value.addEventListener(\"scroll\", updatePopupPosition);\r\n\t\t}\r\n\r\n\t\tconst hoverEvent = `hover-${\r\n\t\t\tprops.divId === \"div1\" ? \"left\" : \"right\"\r\n\t\t}-infobox`;\r\n\t\tconst unhoverEvent = `unhover-${\r\n\t\t\tprops.divId === \"div1\" ? \"left\" : \"right\"\r\n\t\t}-infobox`;\r\n\r\n\t\tbus.on(hoverEvent, handleHoverInfobox);\r\n\t\tbus.on(unhoverEvent, handleUnhoverInfobox);\r\n\r\n\t\tbus.on(`${props.divId}Event`, ({ content, sourceId }) => {\r\n\t\t\tselectedText.value[props.divId] = content;\r\n\t\t\tshowPopup.value[props.divId] = true;\r\n\t\t\tnextTick(() => {\r\n\t\t\t\tupdatePopupPosition();\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tbus.on(`highlight-${props.divId}-paragraphs`, highlightParagraphs);\r\n\t\tbus.on(`clear-${props.divId}-highlights`, clearHighlights);\r\n\t});\r\n\r\n\tonUnmounted(() => {\r\n\t\tif (divRef.value) {\r\n\t\t\tdivRef.value.removeEventListener(\"scroll\", updatePopupPosition);\r\n\t\t}\r\n\r\n\t\tconst hoverEvent = `hover-${\r\n\t\t\tprops.divId === \"div1\" ? \"left\" : \"right\"\r\n\t\t}-infobox`;\r\n\t\tconst unhoverEvent = `unhover-${\r\n\t\t\tprops.divId === \"div1\" ? \"left\" : \"right\"\r\n\t\t}-infobox`;\r\n\r\n\t\tbus.off(hoverEvent, handleHoverInfobox);\r\n\t\tbus.off(unhoverEvent, handleUnhoverInfobox);\r\n\t\tbus.off(`${props.divId}Event`);\r\n\r\n\t\tbus.off(`highlight-${props.divId}-paragraphs`, highlightParagraphs);\r\n\t\tbus.off(`clear-${props.divId}-highlights`, clearHighlights);\r\n\t});\r\n</script>\r\n\r\n<style scoped>\r\n\th1 {\r\n\t\ttext-align: center;\r\n\t\tmargin-bottom: 20px;\r\n\t\tcolor: #2c3e50;\r\n\t}\r\n\r\n\t.div0 {\r\n\t\tposition: relative;\r\n\t\twidth: 55%;\r\n\t\tmax-width: 100%;\r\n\t\tmax-height: 100%;\r\n\t\toverflow: auto;\r\n\t\tpadding: 20px;\r\n\t\tbackground-color: #ffffff;\r\n\t\tborder-radius: 12px;\r\n\t\tbox-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n\t\tmargin: 10px;\r\n\t}\r\n\r\n\t#div1,\r\n\t#div3 {\r\n\t\twidth: 55%;\r\n\t\tmax-width: 100%;\r\n\t\tmax-height: 100%;\r\n\t\toverflow: auto;\r\n\t\tpadding: 20px;\r\n\t\tbackground-color: #ffffff;\r\n\t\tborder-radius: 12px;\r\n\t\tbox-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n\t\tmargin: 10px;\r\n\t}\r\n\r\n\t.showHtml {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\toverflow: auto;\r\n\t}\r\n\r\n\t::selection {\r\n\t\tbackground-color: rgba(255, 255, 0, 0.3);\r\n\t\tcolor: inherit;\r\n\t}\r\n</style>\r\n\r\n<style>\r\n\t.infobox tr.infobox-highlight th,\r\n\t.infobox tr.infobox-highlight td,\r\n\t.sidebar tr.infobox-highlight th,\r\n\t.sidebar tr.infobox-highlight td,\r\n\t.toccolours tr.infobox-highlight th,\r\n\t.toccolours tr.infobox-highlight td {\r\n\t\tbackground-color: #fffacd !important;\r\n\t\tbox-shadow: 0 0 8px rgba(255, 235, 59, 0.8) !important;\r\n\t\ttransition: all 0.15s ease !important;\r\n\t}\r\n\r\n\t.highlight-exact.highlight-div1 {\r\n\t\tbackground-color: rgba(255, 235, 59, 0.6);\r\n\t\tpadding: 0 2px;\r\n\t\tborder-radius: 3px;\r\n\t\tbox-shadow: 0 0 0 1px rgba(255, 235, 59, 0.3);\r\n\t}\r\n\r\n\t.highlight-exact.highlight-div3 {\r\n\t\tbackground-color: rgba(100, 221, 23, 0.6);\r\n\t\tpadding: 0 2px;\r\n\t\tborder-radius: 3px;\r\n\t\tbox-shadow: 0 0 0 1px rgba(76, 175, 80, 0.3);\r\n\t}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}