{"ast":null,"code":"export default {\n  props: {\n    values: {\n      type: Array,\n      default: () => []\n    },\n    labels: {\n      type: Array,\n      default: () => []\n    },\n    width: {\n      type: Number,\n      default: 150\n    },\n    height: {\n      type: Number,\n      default: 50\n    },\n    highlight: {\n      type: Array,\n      default: () => []\n    },\n    showLabels: {\n      type: Boolean,\n      default: true\n    },\n    labelInterval: {\n      type: Number,\n      default: 3\n    }\n  },\n  computed: {\n    normalizedValues() {\n      if (!this.values.length) return [];\n      const min = Math.min(...this.values);\n      const max = Math.max(...this.values);\n      const range = max - min || 1; // 防止除以0\n\n      return this.values.map(v => this.height - 10 - (v - min) / range * (this.height - 20));\n    },\n    points() {\n      return this.normalizedValues.map((y, i) => ({\n        x: i * (this.width / (this.normalizedValues.length - 1)),\n        y\n      }));\n    },\n    linePath() {\n      if (this.points.length < 2) return \"\";\n      let path = `M${this.points[0].x},${this.points[0].y}`;\n      for (let i = 1; i < this.points.length; i++) {\n        path += ` L${this.points[i].x},${this.points[i].y}`;\n      }\n      return path;\n    }\n  },\n  methods: {\n    getPointColor(index) {\n      const highlight = this.highlight.find(h => h.index === index);\n      if (highlight?.isMax) return \"#4CAF50\";\n      if (highlight?.isMin) return \"#F44336\";\n      return \"#2196F3\";\n    }\n  }\n};","map":{"version":3,"names":["props","values","type","Array","default","labels","width","Number","height","highlight","showLabels","Boolean","labelInterval","computed","normalizedValues","length","min","Math","max","range","map","v","points","y","i","x","linePath","path","methods","getPointColor","index","find","h","isMax","isMin"],"sources":["D:\\vue_frame\\vue_frame\\wikitable-vue\\client\\src\\components\\compoents_base\\SparklineChart.vue"],"sourcesContent":["<template>\r\n\t<svg :width=\"width\" :height=\"height\" class=\"sparkline\">\r\n\t\t<path\r\n\t\t\t:d=\"linePath\"\r\n\t\t\tstroke=\"#2196F3\"\r\n\t\t\tstroke-width=\"2\"\r\n\t\t\tfill=\"none\"\r\n\t\t\tstroke-linejoin=\"round\" />\r\n\r\n\t\t<circle\r\n\t\t\tv-for=\"(point, index) in points\"\r\n\t\t\t:key=\"index\"\r\n\t\t\t:cx=\"point.x\"\r\n\t\t\t:cy=\"point.y\"\r\n\t\t\tr=\"3\"\r\n\t\t\t:fill=\"getPointColor(index)\" />\r\n\r\n\t\t<rect\r\n\t\t\tv-for=\"(label, index) in labels\"\r\n\t\t\t:key=\"'label-' + index\"\r\n\t\t\t:x=\"index * (width / (labels.length - 1)) - 15\"\r\n\t\t\t:y=\"height - 12\"\r\n\t\t\twidth=\"30\"\r\n\t\t\theight=\"12\"\r\n\t\t\tfill=\"#f5f5f5\"\r\n\t\t\trx=\"2\"\r\n\t\t\tv-if=\"showLabels && index % labelInterval === 0\" />\r\n\r\n\t\t<text\r\n\t\t\tv-for=\"(label, index) in labels\"\r\n\t\t\t:key=\"'text-' + index\"\r\n\t\t\t:x=\"index * (width / (labels.length - 1))\"\r\n\t\t\t:y=\"height - 2\"\r\n\t\t\ttext-anchor=\"middle\"\r\n\t\t\tfont-size=\"10\"\r\n\t\t\tv-if=\"showLabels && index % labelInterval === 0\">\r\n\t\t\t{{ label }}\r\n\t\t</text>\r\n\t</svg>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tprops: {\r\n\t\t\tvalues: { type: Array, default: () => [] },\r\n\t\t\tlabels: { type: Array, default: () => [] },\r\n\t\t\twidth: { type: Number, default: 150 },\r\n\t\t\theight: { type: Number, default: 50 },\r\n\t\t\thighlight: { type: Array, default: () => [] },\r\n\t\t\tshowLabels: { type: Boolean, default: true },\r\n\t\t\tlabelInterval: { type: Number, default: 3 }\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tnormalizedValues() {\r\n\t\t\t\tif (!this.values.length) return [];\r\n\t\t\t\tconst min = Math.min(...this.values);\r\n\t\t\t\tconst max = Math.max(...this.values);\r\n\t\t\t\tconst range = max - min || 1; // 防止除以0\r\n\r\n\t\t\t\treturn this.values.map(\r\n\t\t\t\t\tv => this.height - 10 - ((v - min) / range) * (this.height - 20)\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tpoints() {\r\n\t\t\t\treturn this.normalizedValues.map((y, i) => ({\r\n\t\t\t\t\tx: i * (this.width / (this.normalizedValues.length - 1)),\r\n\t\t\t\t\ty\r\n\t\t\t\t}));\r\n\t\t\t},\r\n\t\t\tlinePath() {\r\n\t\t\t\tif (this.points.length < 2) return \"\";\r\n\r\n\t\t\t\tlet path = `M${this.points[0].x},${this.points[0].y}`;\r\n\r\n\t\t\t\tfor (let i = 1; i < this.points.length; i++) {\r\n\t\t\t\t\tpath += ` L${this.points[i].x},${this.points[i].y}`;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn path;\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetPointColor(index) {\r\n\t\t\t\tconst highlight = this.highlight.find(h => h.index === index);\r\n\t\t\t\tif (highlight?.isMax) return \"#4CAF50\";\r\n\t\t\t\tif (highlight?.isMin) return \"#F44336\";\r\n\t\t\t\treturn \"#2196F3\";\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t.sparkline {\r\n\t\tdisplay: block;\r\n\t\tmargin: 0 auto;\r\n\t}\r\n</style>\r\n"],"mappings":"AA0CC,eAAe;EACdA,KAAK,EAAE;IACNC,MAAM,EAAE;MAAEC,IAAI,EAAEC,KAAK;MAAEC,OAAO,EAAEA,CAAA,KAAM;IAAG,CAAC;IAC1CC,MAAM,EAAE;MAAEH,IAAI,EAAEC,KAAK;MAAEC,OAAO,EAAEA,CAAA,KAAM;IAAG,CAAC;IAC1CE,KAAK,EAAE;MAAEJ,IAAI,EAAEK,MAAM;MAAEH,OAAO,EAAE;IAAI,CAAC;IACrCI,MAAM,EAAE;MAAEN,IAAI,EAAEK,MAAM;MAAEH,OAAO,EAAE;IAAG,CAAC;IACrCK,SAAS,EAAE;MAAEP,IAAI,EAAEC,KAAK;MAAEC,OAAO,EAAEA,CAAA,KAAM;IAAG,CAAC;IAC7CM,UAAU,EAAE;MAAER,IAAI,EAAES,OAAO;MAAEP,OAAO,EAAE;IAAK,CAAC;IAC5CQ,aAAa,EAAE;MAAEV,IAAI,EAAEK,MAAM;MAAEH,OAAO,EAAE;IAAE;EAC3C,CAAC;EACDS,QAAQ,EAAE;IACTC,gBAAgBA,CAAA,EAAG;MAClB,IAAI,CAAC,IAAI,CAACb,MAAM,CAACc,MAAM,EAAE,OAAO,EAAE;MAClC,MAAMC,GAAE,GAAIC,IAAI,CAACD,GAAG,CAAC,GAAG,IAAI,CAACf,MAAM,CAAC;MACpC,MAAMiB,GAAE,GAAID,IAAI,CAACC,GAAG,CAAC,GAAG,IAAI,CAACjB,MAAM,CAAC;MACpC,MAAMkB,KAAI,GAAID,GAAE,GAAIF,GAAE,IAAK,CAAC,EAAE;;MAE9B,OAAO,IAAI,CAACf,MAAM,CAACmB,GAAG,CACrBC,CAAA,IAAK,IAAI,CAACb,MAAK,GAAI,EAAC,GAAK,CAACa,CAAA,GAAIL,GAAG,IAAIG,KAAK,IAAK,IAAI,CAACX,MAAK,GAAI,EAAE,CAChE,CAAC;IACF,CAAC;IACDc,MAAMA,CAAA,EAAG;MACR,OAAO,IAAI,CAACR,gBAAgB,CAACM,GAAG,CAAC,CAACG,CAAC,EAAEC,CAAC,MAAM;QAC3CC,CAAC,EAAED,CAAA,IAAK,IAAI,CAAClB,KAAI,IAAK,IAAI,CAACQ,gBAAgB,CAACC,MAAK,GAAI,CAAC,CAAC,CAAC;QACxDQ;MACD,CAAC,CAAC,CAAC;IACJ,CAAC;IACDG,QAAQA,CAAA,EAAG;MACV,IAAI,IAAI,CAACJ,MAAM,CAACP,MAAK,GAAI,CAAC,EAAE,OAAO,EAAE;MAErC,IAAIY,IAAG,GAAI,IAAI,IAAI,CAACL,MAAM,CAAC,CAAC,CAAC,CAACG,CAAC,IAAI,IAAI,CAACH,MAAM,CAAC,CAAC,CAAC,CAACC,CAAC,EAAE;MAErD,KAAK,IAAIC,CAAA,GAAI,CAAC,EAAEA,CAAA,GAAI,IAAI,CAACF,MAAM,CAACP,MAAM,EAAES,CAAC,EAAE,EAAE;QAC5CG,IAAG,IAAK,KAAK,IAAI,CAACL,MAAM,CAACE,CAAC,CAAC,CAACC,CAAC,IAAI,IAAI,CAACH,MAAM,CAACE,CAAC,CAAC,CAACD,CAAC,EAAE;MACpD;MAEA,OAAOI,IAAI;IACZ;EACD,CAAC;EACDC,OAAO,EAAE;IACRC,aAAaA,CAACC,KAAK,EAAE;MACpB,MAAMrB,SAAQ,GAAI,IAAI,CAACA,SAAS,CAACsB,IAAI,CAACC,CAAA,IAAKA,CAAC,CAACF,KAAI,KAAMA,KAAK,CAAC;MAC7D,IAAIrB,SAAS,EAAEwB,KAAK,EAAE,OAAO,SAAS;MACtC,IAAIxB,SAAS,EAAEyB,KAAK,EAAE,OAAO,SAAS;MACtC,OAAO,SAAS;IACjB;EACD;AACD,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}