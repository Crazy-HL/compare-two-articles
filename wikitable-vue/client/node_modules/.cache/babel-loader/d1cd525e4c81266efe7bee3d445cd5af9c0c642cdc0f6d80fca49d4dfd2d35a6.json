{"ast":null,"code":"const MouseSelection = {\n  getSelectedText(customId) {\n    const selection = window.getSelection();\n    if (!selection || selection.isCollapsed) return null;\n    const textContent = selection.toString().trim();\n    if (!textContent) return null;\n    return {\n      type: \"text\",\n      content: textContent,\n      customId: customId\n    };\n  },\n  selectionHandler(callback, customId) {\n    document.addEventListener(\"mouseup\", () => {\n      setTimeout(() => {\n        const selectedText = MouseSelection.getSelectedText(customId);\n        if (selectedText) {\n          callback(selectedText);\n        }\n      }, 50);\n    });\n  },\n  start(_ref) {\n    let {\n      rangeSelector,\n      customId,\n      callback\n    } = _ref;\n    const element = document.querySelector(rangeSelector);\n    if (!element) {\n      console.error(\"❌ 无法找到元素:\", rangeSelector);\n      return;\n    }\n    element.addEventListener(\"mouseup\", () => {\n      setTimeout(() => {\n        const selectedText = MouseSelection.getSelectedText(customId);\n        if (selectedText) {\n          callback(selectedText);\n        }\n      }, 50);\n    });\n  }\n};\nexport default MouseSelection;","map":{"version":3,"names":["MouseSelection","getSelectedText","customId","selection","window","getSelection","isCollapsed","textContent","toString","trim","type","content","selectionHandler","callback","document","addEventListener","setTimeout","selectedText","start","_ref","rangeSelector","element","querySelector","console","error"],"sources":["D:/vue_frame/vue_frame/wikitable-vue/client/src/js/mouse_selection.js"],"sourcesContent":["const MouseSelection = {\r\n  getSelectedText(customId) {\r\n    const selection = window.getSelection();\r\n    if (!selection || selection.isCollapsed) return null;\r\n\r\n    const textContent = selection.toString().trim();\r\n    if (!textContent) return null;\r\n\r\n    return {\r\n      type: \"text\",\r\n      content: textContent,\r\n      customId: customId,\r\n    };\r\n  },\r\n\r\n  selectionHandler(callback, customId) {\r\n    document.addEventListener(\"mouseup\", () => {\r\n      setTimeout(() => {\r\n        const selectedText = MouseSelection.getSelectedText(customId);\r\n        if (selectedText) {\r\n          callback(selectedText);\r\n        }\r\n      }, 50);\r\n    });\r\n  },\r\n\r\n  start({ rangeSelector, customId, callback }) {\r\n    const element = document.querySelector(rangeSelector);\r\n    if (!element) {\r\n      console.error(\"❌ 无法找到元素:\", rangeSelector);\r\n      return;\r\n    }\r\n\r\n    element.addEventListener(\"mouseup\", () => {\r\n      setTimeout(() => {\r\n        const selectedText = MouseSelection.getSelectedText(customId);\r\n        if (selectedText) {\r\n          callback(selectedText);\r\n        }\r\n      }, 50);\r\n    });\r\n  }\r\n};\r\n\r\nexport default MouseSelection;\r\n"],"mappings":"AAAA,MAAMA,cAAc,GAAG;EACrBC,eAAeA,CAACC,QAAQ,EAAE;IACxB,MAAMC,SAAS,GAAGC,MAAM,CAACC,YAAY,CAAC,CAAC;IACvC,IAAI,CAACF,SAAS,IAAIA,SAAS,CAACG,WAAW,EAAE,OAAO,IAAI;IAEpD,MAAMC,WAAW,GAAGJ,SAAS,CAACK,QAAQ,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC;IAC/C,IAAI,CAACF,WAAW,EAAE,OAAO,IAAI;IAE7B,OAAO;MACLG,IAAI,EAAE,MAAM;MACZC,OAAO,EAAEJ,WAAW;MACpBL,QAAQ,EAAEA;IACZ,CAAC;EACH,CAAC;EAEDU,gBAAgBA,CAACC,QAAQ,EAAEX,QAAQ,EAAE;IACnCY,QAAQ,CAACC,gBAAgB,CAAC,SAAS,EAAE,MAAM;MACzCC,UAAU,CAAC,MAAM;QACf,MAAMC,YAAY,GAAGjB,cAAc,CAACC,eAAe,CAACC,QAAQ,CAAC;QAC7D,IAAIe,YAAY,EAAE;UAChBJ,QAAQ,CAACI,YAAY,CAAC;QACxB;MACF,CAAC,EAAE,EAAE,CAAC;IACR,CAAC,CAAC;EACJ,CAAC;EAEDC,KAAKA,CAAAC,IAAA,EAAwC;IAAA,IAAvC;MAAEC,aAAa;MAAElB,QAAQ;MAAEW;IAAS,CAAC,GAAAM,IAAA;IACzC,MAAME,OAAO,GAAGP,QAAQ,CAACQ,aAAa,CAACF,aAAa,CAAC;IACrD,IAAI,CAACC,OAAO,EAAE;MACZE,OAAO,CAACC,KAAK,CAAC,WAAW,EAAEJ,aAAa,CAAC;MACzC;IACF;IAEAC,OAAO,CAACN,gBAAgB,CAAC,SAAS,EAAE,MAAM;MACxCC,UAAU,CAAC,MAAM;QACf,MAAMC,YAAY,GAAGjB,cAAc,CAACC,eAAe,CAACC,QAAQ,CAAC;QAC7D,IAAIe,YAAY,EAAE;UAChBJ,QAAQ,CAACI,YAAY,CAAC;QACxB;MACF,CAAC,EAAE,EAAE,CAAC;IACR,CAAC,CAAC;EACJ;AACF,CAAC;AAED,eAAejB,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}