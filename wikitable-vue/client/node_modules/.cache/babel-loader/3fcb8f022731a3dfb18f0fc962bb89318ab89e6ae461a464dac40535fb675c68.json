{"ast":null,"code":"import \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport { onMounted, watch, onUnmounted } from \"vue\";\nimport bus from \"@/js/eventBus.js\";\nexport default {\n  __name: 'CausalFlowChart',\n  props: {\n    chains: {\n      type: Array,\n      required: true,\n      default: () => []\n    }\n  },\n  emits: [\"highlight-fields\"],\n  setup(__props, _ref) {\n    let {\n      expose: __expose,\n      emit: __emit\n    } = _ref;\n    __expose();\n    const props = __props;\n    const emit = __emit;\n    const getCountryName = code => {\n      return code === \"korea\" ? \"éŸ©å›½\" : \"æ—¥æœ¬\";\n    };\n    const getCountryFlag = code => {\n      return code === \"korea\" ? \"ðŸ‡°ðŸ‡·\" : \"ðŸ‡¯ðŸ‡µ\";\n    };\n    const extractFieldsFromChain = chain => {\n      return chain.steps.flatMap(step => {\n        const matches = step.evidence?.match(/([\\w\\s]+?)\\s*\\(/) || [];\n        return matches[1] ? [matches[1].trim()] : [];\n      });\n    };\n    watch(() => props.chains, newChains => {\n      if (newChains.length > 0) {\n        const fieldsMap = {\n          korea: [],\n          japan: []\n        };\n        newChains.forEach(chain => {\n          const fields = extractFieldsFromChain(chain);\n          if (chain.country === \"korea\") {\n            fieldsMap.korea = [...new Set([...fieldsMap.korea, ...fields])];\n          } else {\n            fieldsMap.japan = [...new Set([...fieldsMap.japan, ...fields])];\n          }\n        });\n        bus.emit(\"highlight-infobox\", {\n          div1Fields: fieldsMap.korea,\n          div3Fields: fieldsMap.japan\n        });\n      }\n    }, {\n      immediate: true\n    });\n    onUnmounted(() => {\n      bus.emit(\"clear-highlights\");\n    });\n    const __returned__ = {\n      props,\n      emit,\n      getCountryName,\n      getCountryFlag,\n      extractFieldsFromChain,\n      onMounted,\n      watch,\n      onUnmounted,\n      get bus() {\n        return bus;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onMounted","watch","onUnmounted","bus","props","__props","emit","__emit","getCountryName","code","getCountryFlag","extractFieldsFromChain","chain","steps","flatMap","step","matches","evidence","match","trim","chains","newChains","length","fieldsMap","korea","japan","forEach","fields","country","Set","div1Fields","div3Fields","immediate"],"sources":["D:/vue_frame/vue_frame/wikitable-vue/client/src/components/compoents_base/CausalFlowChart.vue"],"sourcesContent":["<template>\r\n\t<div class=\"dual-chains-container\">\r\n\t\t<div\r\n\t\t\tv-for=\"chain in chains\"\r\n\t\t\t:key=\"chain.country\"\r\n\t\t\tclass=\"country-chain\"\r\n\t\t\t:class=\"chain.country\">\r\n\t\t\t<div class=\"chain-header\">\r\n\t\t\t\t<span class=\"country-flag\">{{ getCountryFlag(chain.country) }}</span>\r\n\t\t\t\t<h3>{{ getCountryName(chain.country) }}</h3>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"vertical-chain\">\r\n\t\t\t\t<div\r\n\t\t\t\t\tv-for=\"(step, index) in chain.steps\"\r\n\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\tclass=\"chain-step\">\r\n\t\t\t\t\t<div class=\"step-content\">\r\n\t\t\t\t\t\t<div class=\"step-text\">{{ step.text }}</div>\r\n\t\t\t\t\t\t<div v-if=\"step.evidence\" class=\"step-evidence\">\r\n\t\t\t\t\t\t\t<div class=\"evidence-value\">{{ step.evidence }}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div v-if=\"index < chain.steps.length - 1\" class=\"step-connector\">\r\n\t\t\t\t\t\t<div class=\"connector-line\"></div>\r\n\t\t\t\t\t\t<div class=\"connector-arrow\">â†“</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { onMounted, watch, onUnmounted } from \"vue\";\r\n\timport bus from \"@/js/eventBus.js\";\r\n\r\n\tconst props = defineProps({\r\n\t\tchains: {\r\n\t\t\ttype: Array,\r\n\t\t\trequired: true,\r\n\t\t\tdefault: () => []\r\n\t\t}\r\n\t});\r\n\r\n\tconst emit = defineEmits([\"highlight-fields\"]);\r\n\r\n\tconst getCountryName = code => {\r\n\t\treturn code === \"korea\" ? \"éŸ©å›½\" : \"æ—¥æœ¬\";\r\n\t};\r\n\r\n\tconst getCountryFlag = code => {\r\n\t\treturn code === \"korea\" ? \"ðŸ‡°ðŸ‡·\" : \"ðŸ‡¯ðŸ‡µ\";\r\n\t};\r\n\r\n\tconst extractFieldsFromChain = chain => {\r\n\t\treturn chain.steps.flatMap(step => {\r\n\t\t\tconst matches = step.evidence?.match(/([\\w\\s]+?)\\s*\\(/) || [];\r\n\t\t\treturn matches[1] ? [matches[1].trim()] : [];\r\n\t\t});\r\n\t};\r\n\r\n\twatch(\r\n\t\t() => props.chains,\r\n\t\tnewChains => {\r\n\t\t\tif (newChains.length > 0) {\r\n\t\t\t\tconst fieldsMap = {\r\n\t\t\t\t\tkorea: [],\r\n\t\t\t\t\tjapan: []\r\n\t\t\t\t};\r\n\r\n\t\t\t\tnewChains.forEach(chain => {\r\n\t\t\t\t\tconst fields = extractFieldsFromChain(chain);\r\n\t\t\t\t\tif (chain.country === \"korea\") {\r\n\t\t\t\t\t\tfieldsMap.korea = [...new Set([...fieldsMap.korea, ...fields])];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfieldsMap.japan = [...new Set([...fieldsMap.japan, ...fields])];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tbus.emit(\"highlight-infobox\", {\r\n\t\t\t\t\tdiv1Fields: fieldsMap.korea,\r\n\t\t\t\t\tdiv3Fields: fieldsMap.japan\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t{ immediate: true }\r\n\t);\r\n\r\n\tonUnmounted(() => {\r\n\t\tbus.emit(\"clear-highlights\");\r\n\t});\r\n</script>\r\n\r\n<style scoped>\r\n\t.dual-chains-container {\r\n\t\tdisplay: flex;\r\n\t\tgap: 15px;\r\n\t\twidth: 100%;\r\n\t\tmargin: 15px 0;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\t.country-chain {\r\n\t\tflex: 1;\r\n\t\tmin-width: 0;\r\n\t\tmax-width: calc(50% - 8px);\r\n\t\tbackground: #f8f9fa;\r\n\t\tborder-radius: 10px;\r\n\t\tpadding: 12px;\r\n\t\tbox-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\r\n\t}\r\n\r\n\t.chain-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 15px;\r\n\t\tpadding-bottom: 8px;\r\n\t\tborder-bottom: 1px solid #eee;\r\n\t}\r\n\r\n\t.country-flag {\r\n\t\tfont-size: 24px;\r\n\t\tmargin-right: 10px;\r\n\t}\r\n\r\n\t.chain-header h3 {\r\n\t\tmargin: 0;\r\n\t\tfont-size: 16px;\r\n\t\tfont-weight: 600;\r\n\t\twhite-space: nowrap;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t}\r\n\r\n\t.vertical-chain {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 12px;\r\n\t}\r\n\r\n\t.chain-step {\r\n\t\tposition: relative;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.step-content {\r\n\t\twidth: 100%;\r\n\t\tpadding: 10px 12px;\r\n\t\tborder-radius: 8px;\r\n\t\tbackground: white;\r\n\t\tbox-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.step-text {\r\n\t\tfont-size: 14px;\r\n\t\tfont-weight: 500;\r\n\t\tcolor: #333;\r\n\t\tline-height: 1.4;\r\n\t\tword-break: break-word;\r\n\t}\r\n\r\n\t.step-evidence {\r\n\t\tmargin-top: 8px;\r\n\t\tpadding: 6px 8px;\r\n\t\tborder-radius: 6px;\r\n\t\tfont-size: 12px;\r\n\t\tdisplay: inline-block;\r\n\t\twidth: fit-content;\r\n\t}\r\n\r\n\t.step-connector {\r\n\t\twidth: 100%;\r\n\t\theight: 16px;\r\n\t\tposition: relative;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.connector-line {\r\n\t\twidth: 2px;\r\n\t\theight: 100%;\r\n\t\tbackground: #ddd;\r\n\t\tposition: absolute;\r\n\t}\r\n\r\n\t.connector-arrow {\r\n\t\tposition: absolute;\r\n\t\ttop: 100%;\r\n\t\tcolor: #999;\r\n\t\tfont-size: 14px;\r\n\t\tline-height: 0;\r\n\t\ttransform: translateY(-50%);\r\n\t}\r\n\r\n\t.country-chain.korea .chain-header h3 {\r\n\t\tcolor: #1a73e8;\r\n\t}\r\n\r\n\t.country-chain.korea .step-content {\r\n\t\tborder-left: 3px solid #1a73e8;\r\n\t}\r\n\r\n\t.country-chain.korea .step-evidence {\r\n\t\tbackground: #e8f0fe;\r\n\t\tcolor: #1a73e8;\r\n\t\tborder-left: 2px solid #1a73e8;\r\n\t}\r\n\r\n\t.country-chain.japan .chain-header h3 {\r\n\t\tcolor: #9c27b0;\r\n\t}\r\n\r\n\t.country-chain.japan .step-content {\r\n\t\tborder-left: 3px solid #9c27b0;\r\n\t}\r\n\r\n\t.country-chain.japan .step-evidence {\r\n\t\tbackground: #f3e5f5;\r\n\t\tcolor: #9c27b0;\r\n\t\tborder-left: 2px solid #9c27b0;\r\n\t}\r\n\r\n\t@media (max-width: 768px) {\r\n\t\t.dual-chains-container {\r\n\t\t\tflex-direction: column;\r\n\t\t\tgap: 15px;\r\n\t\t}\r\n\r\n\t\t.country-chain {\r\n\t\t\tmax-width: 100%;\r\n\t\t}\r\n\r\n\t\t.step-content {\r\n\t\t\tpadding: 10px 12px;\r\n\t\t}\r\n\r\n\t\t.step-text {\r\n\t\t\tfont-size: 13px;\r\n\t\t}\r\n\r\n\t\t.connector-arrow {\r\n\t\t\tfont-size: 12px;\r\n\t\t}\r\n\t}\r\n</style>\r\n"],"mappings":";;;;;;;AAmCC,SAASA,SAAS,EAAEC,KAAK,EAAEC,WAAW,QAAQ,KAAK;AACnD,OAAOC,GAAG,MAAM,kBAAkB;;;;;;;;;;;;;;;;;IAElC,MAAMC,KAAK,GAAGC,OAMZ;IAEF,MAAMC,IAAI,GAAGC,MAAiC;IAE9C,MAAMC,cAAc,GAAGC,IAAI,IAAI;MAC9B,OAAOA,IAAI,KAAK,OAAO,GAAG,IAAI,GAAG,IAAI;IACtC,CAAC;IAED,MAAMC,cAAc,GAAGD,IAAI,IAAI;MAC9B,OAAOA,IAAI,KAAK,OAAO,GAAG,MAAM,GAAG,MAAM;IAC1C,CAAC;IAED,MAAME,sBAAsB,GAAGC,KAAK,IAAI;MACvC,OAAOA,KAAK,CAACC,KAAK,CAACC,OAAO,CAACC,IAAI,IAAI;QAClC,MAAMC,OAAO,GAAGD,IAAI,CAACE,QAAQ,EAAEC,KAAK,CAAC,iBAAiB,CAAC,IAAI,EAAE;QAC7D,OAAOF,OAAO,CAAC,CAAC,CAAC,GAAG,CAACA,OAAO,CAAC,CAAC,CAAC,CAACG,IAAI,CAAC,CAAC,CAAC,GAAG,EAAE;MAC7C,CAAC,CAAC;IACH,CAAC;IAEDlB,KAAK,CACJ,MAAMG,KAAK,CAACgB,MAAM,EAClBC,SAAS,IAAI;MACZ,IAAIA,SAAS,CAACC,MAAM,GAAG,CAAC,EAAE;QACzB,MAAMC,SAAS,GAAG;UACjBC,KAAK,EAAE,EAAE;UACTC,KAAK,EAAE;QACR,CAAC;QAEDJ,SAAS,CAACK,OAAO,CAACd,KAAK,IAAI;UAC1B,MAAMe,MAAM,GAAGhB,sBAAsB,CAACC,KAAK,CAAC;UAC5C,IAAIA,KAAK,CAACgB,OAAO,KAAK,OAAO,EAAE;YAC9BL,SAAS,CAACC,KAAK,GAAG,CAAC,GAAG,IAAIK,GAAG,CAAC,CAAC,GAAGN,SAAS,CAACC,KAAK,EAAE,GAAGG,MAAM,CAAC,CAAC,CAAC;UAChE,CAAC,MAAM;YACNJ,SAAS,CAACE,KAAK,GAAG,CAAC,GAAG,IAAII,GAAG,CAAC,CAAC,GAAGN,SAAS,CAACE,KAAK,EAAE,GAAGE,MAAM,CAAC,CAAC,CAAC;UAChE;QACD,CAAC,CAAC;QAEFxB,GAAG,CAACG,IAAI,CAAC,mBAAmB,EAAE;UAC7BwB,UAAU,EAAEP,SAAS,CAACC,KAAK;UAC3BO,UAAU,EAAER,SAAS,CAACE;QACvB,CAAC,CAAC;MACH;IACD,CAAC,EACD;MAAEO,SAAS,EAAE;IAAK,CACnB,CAAC;IAED9B,WAAW,CAAC,MAAM;MACjBC,GAAG,CAACG,IAAI,CAAC,kBAAkB,CAAC;IAC7B,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}