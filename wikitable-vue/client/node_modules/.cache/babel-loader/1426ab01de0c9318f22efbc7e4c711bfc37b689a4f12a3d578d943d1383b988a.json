{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, openBlock as _openBlock, createBlock as _createBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createElementBlock as _createElementBlock, Fragment as _Fragment, normalizeStyle as _normalizeStyle, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-35226a1e\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"field-visualization\"\n};\nconst _hoisted_2 = {\n  class: \"single-value\"\n};\nconst _hoisted_3 = {\n  class: \"value\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"unit\"\n};\nconst _hoisted_5 = {\n  class: \"percentage-chart\"\n};\nconst _hoisted_6 = {\n  class: \"percentage-value\"\n};\nconst _hoisted_7 = {\n  key: 1,\n  class: \"no-data\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$setup.hasData ? (_openBlock(), _createElementBlock(_Fragment, {\n    key: 0\n  }, [_createCommentVNode(\" 时间序列数据 - 显示折线图 \"), $setup.isTimeSeries ? (_openBlock(), _createBlock($setup[\"SparklineChart\"], {\n    key: 0,\n    data: $setup.timeSeriesData,\n    \"max-width\": 250,\n    \"max-height\": 100,\n    \"line-color\": $setup.chartColor\n  }, null, 8 /* PROPS */, [\"data\", \"line-color\"])) : $setup.isSingleValue ? (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" 单一数值 - 显示大数字或仪表盘 \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, _toDisplayString($setup.formattedValue), 1 /* TEXT */), $props.field.unit ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, _toDisplayString($props.field.unit), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)) : $setup.isPercentage ? (_openBlock(), _createElementBlock(_Fragment, {\n    key: 2\n  }, [_createCommentVNode(\" 百分比 - 显示圆形进度条 \"), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", {\n    class: \"circle-progress\",\n    style: _normalizeStyle($setup.circleStyle)\n  }, null, 4 /* STYLE */), _createElementVNode(\"div\", _hoisted_6, _toDisplayString($props.field.value) + \"%\", 1 /* TEXT */)])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */)) : (_openBlock(), _createElementBlock(\"div\", _hoisted_7, \"无可用数据\"))]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","$setup","hasData","_Fragment","_createCommentVNode","isTimeSeries","_createBlock","data","timeSeriesData","chartColor","isSingleValue","_createElementVNode","_hoisted_2","_hoisted_3","_toDisplayString","formattedValue","$props","field","unit","_hoisted_4","isPercentage","_hoisted_5","style","_normalizeStyle","circleStyle","_hoisted_6","value","_hoisted_7"],"sources":["D:\\vue_frame\\vue_frame\\wikitable-vue\\client\\src\\components\\compoents_base\\FieldVisualization.vue"],"sourcesContent":["<template>\r\n\t<div class=\"field-visualization\">\r\n\t\t<template v-if=\"hasData\">\r\n\t\t\t<!-- 时间序列数据 - 显示折线图 -->\r\n\t\t\t<SparklineChart\r\n\t\t\t\tv-if=\"isTimeSeries\"\r\n\t\t\t\t:data=\"timeSeriesData\"\r\n\t\t\t\t:max-width=\"250\"\r\n\t\t\t\t:max-height=\"100\"\r\n\t\t\t\t:line-color=\"chartColor\" />\r\n\r\n\t\t\t<!-- 单一数值 - 显示大数字或仪表盘 -->\r\n\t\t\t<div v-else-if=\"isSingleValue\" class=\"single-value\">\r\n\t\t\t\t<div class=\"value\">{{ formattedValue }}</div>\r\n\t\t\t\t<div v-if=\"field.unit\" class=\"unit\">{{ field.unit }}</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<!-- 百分比 - 显示圆形进度条 -->\r\n\t\t\t<div v-else-if=\"isPercentage\" class=\"percentage-chart\">\r\n\t\t\t\t<div class=\"circle-progress\" :style=\"circleStyle\"></div>\r\n\t\t\t\t<div class=\"percentage-value\">{{ field.value }}%</div>\r\n\t\t\t</div>\r\n\t\t</template>\r\n\r\n\t\t<div v-else class=\"no-data\">无可用数据</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { computed } from \"vue\";\r\n\timport SparklineChart from \"./SparklineChart.vue\";\r\n\r\n\tconst props = defineProps({\r\n\t\tfield: {\r\n\t\t\ttype: [Object, Array],\r\n\t\t\tdefault: null\r\n\t\t},\r\n\t\ttype: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"number\"\r\n\t\t}\r\n\t});\r\n\r\n\tconst chartColor = computed(() => {\r\n\t\treturn props.type === \"percentage\"\r\n\t\t\t? \"#4CAF50\"\r\n\t\t\t: props.type === \"currency\"\r\n\t\t\t? \"#2196F3\"\r\n\t\t\t: \"#9C27B0\";\r\n\t});\r\n\r\n\tconst hasData = computed(() => {\r\n\t\treturn (\r\n\t\t\tprops.field &&\r\n\t\t\t(props.field.value !== undefined ||\r\n\t\t\t\t(Array.isArray(props.field) && props.field.length > 0))\r\n\t\t);\r\n\t});\r\n\r\n\tconst isTimeSeries = computed(() => {\r\n\t\treturn (\r\n\t\t\tArray.isArray(props.field) &&\r\n\t\t\tprops.field.every(\r\n\t\t\t\titem => item.value !== undefined && item.year !== undefined\r\n\t\t\t)\r\n\t\t);\r\n\t});\r\n\r\n\tconst isSingleValue = computed(() => {\r\n\t\treturn props.field.value !== undefined && !isTimeSeries.value;\r\n\t});\r\n\r\n\tconst isPercentage = computed(() => {\r\n\t\treturn props.type === \"percentage\" && isSingleValue.value;\r\n\t});\r\n\r\n\tconst timeSeriesData = computed(() => {\r\n\t\tif (!isTimeSeries.value) return [];\r\n\t\treturn props.field.map(item => ({\r\n\t\t\tyear: item.year,\r\n\t\t\tvalue: item.value\r\n\t\t}));\r\n\t});\r\n\r\n\tconst formattedValue = computed(() => {\r\n\t\tif (!props.field.value) return \"-\";\r\n\r\n\t\t// 格式化大数字\r\n\t\tconst num = parseFloat(props.field.value);\r\n\t\tif (num >= 1e12) return `$${(num / 1e12).toFixed(1)}万亿`;\r\n\t\tif (num >= 1e8) return `$${(num / 1e8).toFixed(1)}亿`;\r\n\t\tif (num >= 1e4) return `$${(num / 1e4).toFixed(1)}万`;\r\n\t\treturn num.toLocaleString();\r\n\t});\r\n\r\n\tconst circleStyle = computed(() => {\r\n\t\tif (!isPercentage.value) return {};\r\n\t\tconst percent = Math.min(100, Math.max(0, parseFloat(props.field.value)));\r\n\t\treturn {\r\n\t\t\tbackground: `conic-gradient(${chartColor.value} ${percent}%, #eee ${percent}% 100%)`\r\n\t\t};\r\n\t});\r\n</script>\r\n\r\n<style scoped>\r\n\t.field-visualization {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.single-value {\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.single-value .value {\r\n\t\tfont-size: 24px;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: v-bind(chartColor);\r\n\t}\r\n\r\n\t.single-value .unit {\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #666;\r\n\t\tmargin-top: 5px;\r\n\t}\r\n\r\n\t.percentage-chart {\r\n\t\tposition: relative;\r\n\t\twidth: 80px;\r\n\t\theight: 80px;\r\n\t}\r\n\r\n\t.circle-progress {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tborder-radius: 50%;\r\n\t}\r\n\r\n\t.percentage-value {\r\n\t\tposition: absolute;\r\n\t\ttop: 50%;\r\n\t\tleft: 50%;\r\n\t\ttransform: translate(-50%, -50%);\r\n\t\tfont-size: 16px;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: v-bind(chartColor);\r\n\t}\r\n\r\n\t.no-data {\r\n\t\tcolor: #999;\r\n\t\tfont-style: italic;\r\n\t\ttext-align: center;\r\n\t}\r\n</style>\r\n"],"mappings":";;;EACMA,KAAK,EAAC;AAAqB;;EAWCA,KAAK,EAAC;AAAc;;EAC7CA,KAAK,EAAC;AAAO;;EAbtBC,GAAA;EAc2BD,KAAK,EAAC;;;EAIAA,KAAK,EAAC;AAAkB;;EAEhDA,KAAK,EAAC;AAAkB;;EApBjCC,GAAA;EAwBcD,KAAK,EAAC;;;uBAvBnBE,mBAAA,CAwBM,OAxBNC,UAwBM,GAvBWC,MAAA,CAAAC,OAAO,I,cAAvBH,mBAAA,CAoBWI,SAAA;IAtBbL,GAAA;EAAA,IAGGM,mBAAA,oBAAuB,EAEhBH,MAAA,CAAAI,YAAY,I,cADnBC,YAAA,CAK4BL,MAAA;IAT/BH,GAAA;IAMKS,IAAI,EAAEN,MAAA,CAAAO,cAAc;IACpB,WAAS,EAAE,GAAG;IACd,YAAU,EAAE,GAAG;IACf,YAAU,EAAEP,MAAA,CAAAQ;qDAGER,MAAA,CAAAS,aAAa,I,cAA7BX,mBAAA,CAGMI,SAAA;IAfTL,GAAA;EAAA,IAWGM,mBAAA,sBAAyB,EACzBO,mBAAA,CAGM,OAHNC,UAGM,GAFLD,mBAAA,CAA6C,OAA7CE,UAA6C,EAAAC,gBAAA,CAAvBb,MAAA,CAAAc,cAAc,kBACzBC,MAAA,CAAAC,KAAK,CAACC,IAAI,I,cAArBnB,mBAAA,CAA0D,OAA1DoB,UAA0D,EAAAL,gBAAA,CAAnBE,MAAA,CAAAC,KAAK,CAACC,IAAI,oBAdrDd,mBAAA,e,sDAkBmBH,MAAA,CAAAmB,YAAY,I,cAA5BrB,mBAAA,CAGMI,SAAA;IArBTL,GAAA;EAAA,IAiBGM,mBAAA,mBAAsB,EACtBO,mBAAA,CAGM,OAHNU,UAGM,GAFLV,mBAAA,CAAwD;IAAnDd,KAAK,EAAC,iBAAiB;IAAEyB,KAAK,EAnBvCC,eAAA,CAmByCtB,MAAA,CAAAuB,WAAW;2BAChDb,mBAAA,CAAsD,OAAtDc,UAAsD,EAAAX,gBAAA,CAArBE,MAAA,CAAAC,KAAK,CAACS,KAAK,IAAG,GAAC,gB,sDApBpDtB,mBAAA,e,8CAwBEL,mBAAA,CAAuC,OAAvC4B,UAAuC,EAAX,OAAK,G","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}