{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-a89cbc96\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"simple-chart\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"simple-text\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"simple-pie-container\"\n};\nconst _hoisted_4 = {\n  class: \"simple-pie\"\n};\nconst _hoisted_5 = {\n  class: \"pie-values\"\n};\nconst _hoisted_6 = {\n  key: 1,\n  class: \"no-data\"\n};\nconst _hoisted_7 = {\n  key: 0,\n  class: \"simple-bars-container\"\n};\nconst _hoisted_8 = {\n  class: \"simple-bars\"\n};\nconst _hoisted_9 = {\n  class: \"bar-values\"\n};\nconst _hoisted_10 = {\n  key: 1,\n  class: \"no-data\"\n};\nconst _hoisted_11 = {\n  key: 0,\n  class: \"simple-line-container\"\n};\nconst _hoisted_12 = {\n  viewBox: \"0 0 100 50\",\n  class: \"line-svg\"\n};\nconst _hoisted_13 = [\"points\"];\nconst _hoisted_14 = [\"cx\", \"cy\"];\nconst _hoisted_15 = {\n  class: \"line-values\"\n};\nconst _hoisted_16 = {\n  key: 1,\n  class: \"no-data\"\n};\nconst _hoisted_17 = {\n  class: \"simple-text\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" 文本显示 \"), $props.visualization === 'text-only' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _toDisplayString($setup.formatSimpleText($props.field)), 1 /* TEXT */)) : $props.visualization === 'pie-chart' ? (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" 修改后的饼图部分 \"), $setup.hasValidPieData ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.pieSlices, (slice, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: 'slice-' + index,\n      class: \"pie-slice\",\n      style: _normalizeStyle(slice.style)\n    }, null, 4 /* STYLE */);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"div\", _hoisted_5, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.filteredPieData, (item, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: 'legend-' + index,\n      class: \"pie-value-item\"\n    }, [_createElementVNode(\"span\", {\n      class: \"pie-color\",\n      style: _normalizeStyle({\n        backgroundColor: $setup.pieColors[index]\n      })\n    }, null, 4 /* STYLE */), _createTextVNode(\" \" + _toDisplayString(item.name) + \": \" + _toDisplayString($setup.formatNumber(item.value, $setup.props.fieldKey)), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, \"-\"))], 64 /* STABLE_FRAGMENT */)) : $props.visualization === 'bar-chart' ? (_openBlock(), _createElementBlock(_Fragment, {\n    key: 2\n  }, [_createCommentVNode(\" 柱状图（完全不变） \"), $setup.hasData ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.simpleBarData, (item, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      class: \"simple-bar\",\n      style: _normalizeStyle({\n        height: item.height + '%',\n        backgroundColor: $setup.barColors[index]\n      })\n    }, null, 4 /* STYLE */);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"div\", _hoisted_9, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.formattedBarData, (item, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      class: \"bar-value-item\"\n    }, _toDisplayString(item), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_10, \"-\"))], 64 /* STABLE_FRAGMENT */)) : $props.visualization === 'line-chart' ? (_openBlock(), _createElementBlock(_Fragment, {\n    key: 3\n  }, [_createCommentVNode(\" 折线图（完全不变） \"), $setup.hasData ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [(_openBlock(), _createElementBlock(\"svg\", _hoisted_12, [_createElementVNode(\"polyline\", {\n    points: $setup.linePoints,\n    fill: \"none\",\n    stroke: \"#3498db\",\n    \"stroke-width\": \"2\"\n  }, null, 8 /* PROPS */, _hoisted_13), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.linePointsArray, (point, index) => {\n    return _openBlock(), _createElementBlock(\"circle\", {\n      key: index,\n      cx: point.x,\n      cy: point.y,\n      r: \"2\",\n      fill: \"#3498db\"\n    }, null, 8 /* PROPS */, _hoisted_14);\n  }), 128 /* KEYED_FRAGMENT */))])), _createElementVNode(\"div\", _hoisted_15, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.formattedLineData, (item, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      class: \"line-value-item\"\n    }, _toDisplayString(item), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_16, \"-\"))], 64 /* STABLE_FRAGMENT */)) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 4\n  }, [_createCommentVNode(\" 默认显示（完全不变） \"), _createElementVNode(\"div\", _hoisted_17, _toDisplayString($setup.formatSimpleText($props.field)), 1 /* TEXT */)], 64 /* STABLE_FRAGMENT */))]);\n}","map":{"version":3,"names":["class","key","viewBox","_createElementBlock","_hoisted_1","_createCommentVNode","$props","visualization","_hoisted_2","_toDisplayString","$setup","formatSimpleText","field","_Fragment","hasValidPieData","_hoisted_3","_createElementVNode","_hoisted_4","_renderList","pieSlices","slice","index","style","_normalizeStyle","_hoisted_5","filteredPieData","item","backgroundColor","pieColors","_createTextVNode","name","formatNumber","value","props","fieldKey","_hoisted_6","hasData","_hoisted_7","_hoisted_8","simpleBarData","height","barColors","_hoisted_9","formattedBarData","_hoisted_10","_hoisted_11","_hoisted_12","points","linePoints","fill","stroke","_hoisted_13","linePointsArray","point","cx","x","cy","y","r","_hoisted_14","_hoisted_15","formattedLineData","_hoisted_16","_hoisted_17"],"sources":["D:\\vue_frame\\vue_frame\\wikitable-vue\\client\\src\\components\\compoents_base\\SimpleChart.vue"],"sourcesContent":["<template>\r\n\t<div class=\"simple-chart\">\r\n\t\t<!-- 文本显示 -->\r\n\t\t<template v-if=\"visualization === 'text-only'\">\r\n\t\t\t<div class=\"simple-text\">\r\n\t\t\t\t{{ formatSimpleText(field) }}\r\n\t\t\t</div>\r\n\t\t</template>\r\n\r\n\t\t<!-- 修改后的饼图部分 -->\r\n\t\t<template v-else-if=\"visualization === 'pie-chart'\">\r\n\t\t\t<div v-if=\"hasValidPieData\" class=\"simple-pie-container\">\r\n\t\t\t\t<div class=\"simple-pie\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tv-for=\"(slice, index) in pieSlices\"\r\n\t\t\t\t\t\t:key=\"'slice-' + index\"\r\n\t\t\t\t\t\tclass=\"pie-slice\"\r\n\t\t\t\t\t\t:style=\"slice.style\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"pie-values\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tv-for=\"(item, index) in filteredPieData\"\r\n\t\t\t\t\t\t:key=\"'legend-' + index\"\r\n\t\t\t\t\t\tclass=\"pie-value-item\">\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tclass=\"pie-color\"\r\n\t\t\t\t\t\t\t:style=\"{ backgroundColor: pieColors[index] }\"></span>\r\n\t\t\t\t\t\t{{ item.name }}: {{ formatNumber(item.value, props.fieldKey) }}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div v-else class=\"no-data\">-</div>\r\n\t\t</template>\r\n\r\n\t\t<!-- 柱状图（完全不变） -->\r\n\t\t<template v-else-if=\"visualization === 'bar-chart'\">\r\n\t\t\t<div v-if=\"hasData\" class=\"simple-bars-container\">\r\n\t\t\t\t<div class=\"simple-bars\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tv-for=\"(item, index) in simpleBarData\"\r\n\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\tclass=\"simple-bar\"\r\n\t\t\t\t\t\t:style=\"{\r\n\t\t\t\t\t\t\theight: item.height + '%',\r\n\t\t\t\t\t\t\tbackgroundColor: barColors[index]\r\n\t\t\t\t\t\t}\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"bar-values\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tv-for=\"(item, index) in formattedBarData\"\r\n\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\tclass=\"bar-value-item\">\r\n\t\t\t\t\t\t{{ item }}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div v-else class=\"no-data\">-</div>\r\n\t\t</template>\r\n\r\n\t\t<!-- 折线图（完全不变） -->\r\n\t\t<template v-else-if=\"visualization === 'line-chart'\">\r\n\t\t\t<div v-if=\"hasData\" class=\"simple-line-container\">\r\n\t\t\t\t<svg viewBox=\"0 0 100 50\" class=\"line-svg\">\r\n\t\t\t\t\t<polyline\r\n\t\t\t\t\t\t:points=\"linePoints\"\r\n\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\tstroke=\"#3498db\"\r\n\t\t\t\t\t\tstroke-width=\"2\" />\r\n\t\t\t\t\t<circle\r\n\t\t\t\t\t\tv-for=\"(point, index) in linePointsArray\"\r\n\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\t:cx=\"point.x\"\r\n\t\t\t\t\t\t:cy=\"point.y\"\r\n\t\t\t\t\t\tr=\"2\"\r\n\t\t\t\t\t\tfill=\"#3498db\" />\r\n\t\t\t\t</svg>\r\n\t\t\t\t<div class=\"line-values\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tv-for=\"(item, index) in formattedLineData\"\r\n\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\tclass=\"line-value-item\">\r\n\t\t\t\t\t\t{{ item }}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div v-else class=\"no-data\">-</div>\r\n\t\t</template>\r\n\r\n\t\t<!-- 默认显示（完全不变） -->\r\n\t\t<template v-else>\r\n\t\t\t<div class=\"simple-text\">\r\n\t\t\t\t{{ formatSimpleText(field) }}\r\n\t\t\t</div>\r\n\t\t</template>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport { computed } from \"vue\";\r\n\r\n\tconst props = defineProps({\r\n\t\tfield: [Object, Array, String, Number],\r\n\t\ttype: String,\r\n\t\tvisualization: String,\r\n\t\tfieldKey: String\r\n\t});\r\n\r\n\t// 颜色定义（完全不变）\r\n\tconst pieColors = [\"#3498db\", \"#e74c3c\", \"#2ecc71\", \"#f39c12\", \"#9b59b6\"];\r\n\tconst barColors = [\"#3498db\", \"#e74c3c\", \"#2ecc71\", \"#f39c12\", \"#9b59b6\"];\r\n\r\n\t// 单位转换因子（完全不变）\r\n\tconst getUnitFactor = fieldKey => {\r\n\t\tswitch (fieldKey) {\r\n\t\t\tcase \"GDP\":\r\n\t\t\t\treturn 1e12;\r\n\t\t\tcase \"Population\":\r\n\t\t\t\treturn 1e8;\r\n\t\t\tdefault:\r\n\t\t\t\treturn 1;\r\n\t\t}\r\n\t};\r\n\r\n\t// 安全转换为数字（完全不变）\r\n\tconst safeToNumber = (value, fieldKey) => {\r\n\t\tif (value === null || value === undefined) return 0;\r\n\t\tif (typeof value === \"number\") return value / getUnitFactor(fieldKey);\r\n\t\tif (typeof value === \"string\") {\r\n\t\t\tconst percentMatch = value.match(/(\\d+\\.?\\d*)%/);\r\n\t\t\tif (percentMatch) return parseFloat(percentMatch[1]);\r\n\t\t\tconst numStr = value.toString().replace(/[^0-9.-]/g, \"\");\r\n\t\t\tconst num = parseFloat(numStr);\r\n\t\t\treturn isNaN(num) ? 0 : num / getUnitFactor(fieldKey);\r\n\t\t}\r\n\t\treturn 0;\r\n\t};\r\n\r\n\t// 格式化数值（完全不变）\r\n\tconst formatNumber = (value, fieldKey) => {\r\n\t\tconst num = Number(value);\r\n\t\tif (isNaN(num)) return \"0\";\r\n\r\n\t\tif (props.type === \"percentage\") {\r\n\t\t\treturn num.toFixed(1) + \"%\";\r\n\t\t}\r\n\t\tif (fieldKey === \"GDP\") {\r\n\t\t\treturn num.toFixed(2) + \"T\";\r\n\t\t}\r\n\t\tif (fieldKey === \"Population\") {\r\n\t\t\treturn num.toFixed(2) + \"亿\";\r\n\t\t}\r\n\t\treturn num.toFixed(2);\r\n\t};\r\n\r\n\t// 格式化文本（完全不变）\r\n\tconst formatSimpleText = value => {\r\n\t\tif (!value) return \"-\";\r\n\t\tif (Array.isArray(value)) {\r\n\t\t\tconst items = value.map(item => item.raw || item.value || item);\r\n\t\t\treturn items.length > 2\r\n\t\t\t\t? items.slice(0, 2).join(\"; \") + \"...\"\r\n\t\t\t\t: items.join(\"; \");\r\n\t\t}\r\n\t\tif (typeof value === \"object\") {\r\n\t\t\treturn value.raw || value.value || \"-\";\r\n\t\t}\r\n\t\treturn value.toString().length > 50\r\n\t\t\t? value.toString().substring(0, 50) + \"...\"\r\n\t\t\t: value.toString();\r\n\t};\r\n\r\n\t// 饼图数据（完全不变）\r\n\tconst pieData = computed(() => {\r\n\t\tif (!props.field) return [];\r\n\r\n\t\tif (Array.isArray(props.field)) {\r\n\t\t\treturn props.field\r\n\t\t\t\t.filter(item => {\r\n\t\t\t\t\tconst value = item?.value || item?.raw;\r\n\t\t\t\t\treturn value !== undefined && value !== null;\r\n\t\t\t\t})\r\n\t\t\t\t.map((item, index) => {\r\n\t\t\t\t\tlet value = safeToNumber(item.value || item.raw, props.fieldKey);\r\n\t\t\t\t\tvalue = Math.min(100, Math.max(0, value));\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tvalue,\r\n\t\t\t\t\t\tname: item.raw\r\n\t\t\t\t\t\t\t? item.raw.replace(/:\\s*\\d+\\.?\\d*%?/g, \"\")\r\n\t\t\t\t\t\t\t: `项目${index + 1}`\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (typeof props.field === \"object\") {\r\n\t\t\tlet value = safeToNumber(\r\n\t\t\t\tprops.field.value || props.field.raw,\r\n\t\t\t\tprops.fieldKey\r\n\t\t\t);\r\n\t\t\tvalue = Math.min(100, Math.max(0, value));\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tvalue,\r\n\t\t\t\t\tname: props.field.raw\r\n\t\t\t\t\t\t? props.field.raw.replace(/:\\s*\\d+\\.?\\d*%?/g, \"\")\r\n\t\t\t\t\t\t: \"项目\"\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t}\r\n\r\n\t\tlet value = safeToNumber(props.field, props.fieldKey);\r\n\t\tvalue = Math.min(100, Math.max(0, value));\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tvalue,\r\n\t\t\t\tname: \"数值\"\r\n\t\t\t}\r\n\t\t];\r\n\t});\r\n\r\n\t// 新增：过滤掉年份和无效数据\r\n\tconst filteredPieData = computed(() => {\r\n\t\tif (!pieData.value) return [];\r\n\t\treturn pieData.value.filter(item => {\r\n\t\t\t// 排除包含括号或方括号的条目（如年份标记）\r\n\t\t\tconst isYear = /\\(.*\\)|\\[.*\\]/.test(item.name);\r\n\t\t\t// 排除值为0的条目\r\n\t\t\tconst hasValue = item.value > 0;\r\n\t\t\t// 排除名称为空的条目\r\n\t\t\tconst hasName = item.name && item.name.trim().length > 0;\r\n\t\t\treturn !isYear && hasValue && hasName;\r\n\t\t});\r\n\t});\r\n\r\n\t// 修改：使用过滤后的数据检查有效性\r\n\tconst hasValidPieData = computed(() => {\r\n\t\treturn filteredPieData.value.length > 0;\r\n\t});\r\n\r\n\t// 修改后的饼图切片计算\r\n\tconst pieSlices = computed(() => {\r\n\t\tif (!hasValidPieData.value) return [];\r\n\r\n\t\tconst total = filteredPieData.value.reduce(\r\n\t\t\t(sum, item) => sum + item.value,\r\n\t\t\t0\r\n\t\t);\r\n\t\tif (total <= 0) return [];\r\n\r\n\t\tlet accumulated = 0;\r\n\t\treturn filteredPieData.value.map((item, index) => {\r\n\t\t\tconst start = (accumulated / total) * 360;\r\n\t\t\taccumulated += item.value;\r\n\t\t\tconst end = (accumulated / total) * 360;\r\n\r\n\t\t\t// 确保每个切片至少1度可见\r\n\t\t\tconst visibleEnd = Math.max(start + 1, end);\r\n\r\n\t\t\treturn {\r\n\t\t\t\tstyle: {\r\n\t\t\t\t\tbackgroundColor: pieColors[index % pieColors.length],\r\n\t\t\t\t\ttransform: `rotate(${start}deg)`,\r\n\t\t\t\t\tclipPath: `polygon(50% 50%, 50% 0%, ${\r\n\t\t\t\t\t\tvisibleEnd > 180 ? \"100% 0%, 100% 100%, 50% 100%\" : \"100% 0%\"\r\n\t\t\t\t\t}, ${getPieSlicePoint(visibleEnd)})`\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t});\r\n\t});\r\n\r\n\t// 计算饼图切片点（完全不变）\r\n\tconst getPieSlicePoint = degrees => {\r\n\t\tconst radians = ((degrees - 90) * Math.PI) / 180;\r\n\t\tconst x = 50 + 50 * Math.cos(radians);\r\n\t\tconst y = 50 + 50 * Math.sin(radians);\r\n\t\treturn `${x}% ${y}%`;\r\n\t};\r\n\r\n\t// 柱状图数据（完全不变）\r\n\tconst simpleBarData = computed(() => {\r\n\t\tif (!props.field) return [];\r\n\r\n\t\tlet values = [];\r\n\r\n\t\tif (Array.isArray(props.field)) {\r\n\t\t\tvalues = props.field\r\n\t\t\t\t.filter(item => {\r\n\t\t\t\t\tconst value = item?.value || item?.raw;\r\n\t\t\t\t\treturn value !== undefined && value !== null;\r\n\t\t\t\t})\r\n\t\t\t\t.map(item => safeToNumber(item.value || item.raw, props.fieldKey));\r\n\t\t} else if (typeof props.field === \"object\") {\r\n\t\t\tvalues = [\r\n\t\t\t\tsafeToNumber(props.field.value || props.field.raw, props.fieldKey)\r\n\t\t\t];\r\n\t\t} else {\r\n\t\t\tvalues = [safeToNumber(props.field, props.fieldKey)];\r\n\t\t}\r\n\r\n\t\tif (values.length === 0) return [];\r\n\r\n\t\tconst max = Math.max(...values, 1);\r\n\t\treturn values.map((v, index) => ({\r\n\t\t\tvalue: v,\r\n\t\t\theight: (v / max) * 100,\r\n\t\t\tcolor: barColors[index % barColors.length]\r\n\t\t}));\r\n\t});\r\n\r\n\t// 格式化柱状图数据（完全不变）\r\n\tconst formattedBarData = computed(() => {\r\n\t\treturn simpleBarData.value.map(item => {\r\n\t\t\treturn formatNumber(item.value, props.fieldKey);\r\n\t\t});\r\n\t});\r\n\r\n\t// 折线图数据（完全不变）\r\n\tconst lineData = computed(() => {\r\n\t\tif (!props.field) return [];\r\n\r\n\t\tif (Array.isArray(props.field)) {\r\n\t\t\treturn props.field\r\n\t\t\t\t.filter(item => {\r\n\t\t\t\t\tconst value = item?.value || item?.raw;\r\n\t\t\t\t\treturn value !== undefined && value !== null;\r\n\t\t\t\t})\r\n\t\t\t\t.map((item, index) => {\r\n\t\t\t\t\tconst value = safeToNumber(item.value || item.raw, props.fieldKey);\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tx: index,\r\n\t\t\t\t\t\ty: value,\r\n\t\t\t\t\t\traw: item.raw || item.value\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (typeof props.field === \"object\") {\r\n\t\t\tconst value = safeToNumber(\r\n\t\t\t\tprops.field.value || props.field.raw,\r\n\t\t\t\tprops.fieldKey\r\n\t\t\t);\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tx: 0,\r\n\t\t\t\t\ty: value,\r\n\t\t\t\t\traw: props.field.raw || props.field.value\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t}\r\n\r\n\t\tconst value = safeToNumber(props.field, props.fieldKey);\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tx: 0,\r\n\t\t\t\ty: value,\r\n\t\t\t\traw: props.field\r\n\t\t\t}\r\n\t\t];\r\n\t});\r\n\r\n\t// 折线图点（完全不变）\r\n\tconst linePointsArray = computed(() => {\r\n\t\tif (lineData.value.length === 0) return [];\r\n\r\n\t\tconst maxY = Math.max(...lineData.value.map(p => p.y), 1);\r\n\t\tconst minY = Math.min(...lineData.value.map(p => p.y), 0);\r\n\t\tconst rangeY = maxY - minY;\r\n\r\n\t\treturn lineData.value.map(point => {\r\n\t\t\tconst x = (point.x / (lineData.value.length - 1)) * 100;\r\n\t\t\tconst y = rangeY > 0 ? 50 - ((point.y - minY) / rangeY) * 50 : 25;\r\n\t\t\treturn { x, y };\r\n\t\t});\r\n\t});\r\n\r\n\tconst linePoints = computed(() => {\r\n\t\treturn linePointsArray.value.map(p => `${p.x},${p.y}`).join(\" \");\r\n\t});\r\n\r\n\t// 格式化折线图数据（完全不变）\r\n\tconst formattedLineData = computed(() => {\r\n\t\treturn lineData.value.map(item => {\r\n\t\t\treturn formatNumber(item.y, props.fieldKey);\r\n\t\t});\r\n\t});\r\n\r\n\tconst hasData = computed(() => {\r\n\t\tif (!props.field) return false;\r\n\t\tif (Array.isArray(props.field)) return props.field.length > 0;\r\n\t\tif (typeof props.field === \"object\")\r\n\t\t\treturn Object.keys(props.field).length > 0;\r\n\t\treturn String(props.field).trim().length > 0;\r\n\t});\r\n</script>\r\n\r\n<style scoped>\r\n\t/* 饼图样式修改 */\r\n\t.pie-slice {\r\n\t\tposition: absolute;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\ttransform-origin: center;\r\n\t\tz-index: 1;\r\n\t}\r\n\r\n\t/* 其他所有样式完全保持不变 */\r\n\t.simple-chart {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.simple-text {\r\n\t\ttext-align: center;\r\n\t\tfont-size: 14px;\r\n\t\tword-break: break-word;\r\n\t\tpadding: 5px;\r\n\t}\r\n\r\n\t.simple-pie-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tgap: 5px;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.simple-pie {\r\n\t\twidth: 60px;\r\n\t\theight: 60px;\r\n\t\tborder-radius: 50%;\r\n\t\tposition: relative;\r\n\t\toverflow: hidden;\r\n\t\tbackground-color: transparent;\r\n\t}\r\n\r\n\t.pie-values {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tjustify-content: center;\r\n\t\tgap: 5px;\r\n\t\tfont-size: 12px;\r\n\t}\r\n\r\n\t.pie-value-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 3px;\r\n\t}\r\n\r\n\t.pie-color {\r\n\t\tdisplay: inline-block;\r\n\t\twidth: 10px;\r\n\t\theight: 10px;\r\n\t\tborder-radius: 2px;\r\n\t}\r\n\r\n\t.simple-bars-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tgap: 5px;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.simple-bars {\r\n\t\tdisplay: flex;\r\n\t\talign-items: flex-end;\r\n\t\theight: 60px;\r\n\t\tgap: 4px;\r\n\t\twidth: 100%;\r\n\t\tpadding: 0 10px;\r\n\t}\r\n\r\n\t.simple-bar {\r\n\t\tflex: 1;\r\n\t\tmin-width: 5px;\r\n\t\ttransition: height 0.3s;\r\n\t\tborder-radius: 2px 2px 0 0;\r\n\t}\r\n\r\n\t.bar-values {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\t\twidth: 100%;\r\n\t\tfont-size: 12px;\r\n\t}\r\n\r\n\t.bar-value-item {\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.simple-line-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tgap: 5px;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.line-svg {\r\n\t\twidth: 100%;\r\n\t\theight: 60px;\r\n\t}\r\n\r\n\t.line-values {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\t\twidth: 100%;\r\n\t\tfont-size: 12px;\r\n\t}\r\n\r\n\t.line-value-item {\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.no-data {\r\n\t\tcolor: #999;\r\n\t\tfont-style: italic;\r\n\t}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}